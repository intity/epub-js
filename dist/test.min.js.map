{"version":3,"file":"test.min.js","mappings":"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","sources":["webpack://ePub/webpack/universalModuleDefinition","webpack://ePub/./node_modules/assert/build/assert.js","webpack://ePub/./node_modules/assert/build/internal/assert/assertion_error.js","webpack://ePub/./node_modules/assert/build/internal/errors.js","webpack://ePub/./node_modules/assert/build/internal/util/comparisons.js","webpack://ePub/./src/annotation.js","webpack://ePub/./src/annotations.js","webpack://ePub/./src/archive.js","webpack://ePub/./src/book.js","webpack://ePub/./src/container.js","webpack://ePub/./src/contents.js","webpack://ePub/./src/epubcfi.js","webpack://ePub/./src/input.js","webpack://ePub/./src/layout.js","webpack://ePub/./src/location.js","webpack://ePub/./src/locations.js","webpack://ePub/./src/managers/continuous/index.js","webpack://ePub/./src/managers/default/index.js","webpack://ePub/./src/managers/helpers/snap.js","webpack://ePub/./src/managers/helpers/views.js","webpack://ePub/./src/managers/views/iframe.js","webpack://ePub/./src/mapping.js","webpack://ePub/./src/marks-pane/events.js","webpack://ePub/./src/marks-pane/highlight.js","webpack://ePub/./src/marks-pane/mark.js","webpack://ePub/./src/marks-pane/marks.js","webpack://ePub/./src/marks-pane/underline.js","webpack://ePub/./src/navigation.js","webpack://ePub/./src/navigation/landmarks.js","webpack://ePub/./src/navigation/pagelist.js","webpack://ePub/./src/navigation/toc.js","webpack://ePub/./src/packaging.js","webpack://ePub/./src/packaging/manifest.js","webpack://ePub/./src/packaging/metadata.js","webpack://ePub/./src/packaging/spine.js","webpack://ePub/./src/rendition.js","webpack://ePub/./src/resources.js","webpack://ePub/./src/section.js","webpack://ePub/./src/sections.js","webpack://ePub/./src/storage.js","webpack://ePub/./src/themes.js","webpack://ePub/./src/utils/constants.js","webpack://ePub/./src/utils/core.js","webpack://ePub/./src/utils/defer.js","webpack://ePub/./src/utils/hook.js","webpack://ePub/./src/utils/mime.js","webpack://ePub/./src/utils/path.js","webpack://ePub/./src/utils/queue.js","webpack://ePub/./src/utils/rangeobject.js","webpack://ePub/./src/utils/replacements.js","webpack://ePub/./src/utils/request.js","webpack://ePub/./src/utils/scrolltype.js","webpack://ePub/./src/utils/url.js","webpack://ePub/./src/viewport.js","webpack://ePub/./node_modules/call-bind/callBound.js","webpack://ePub/./node_modules/call-bind/index.js","webpack://ePub/./node_modules/d/index.js","webpack://ePub/./node_modules/define-data-property/index.js","webpack://ePub/./node_modules/define-properties/index.js","webpack://ePub/./node_modules/es-define-property/index.js","webpack://ePub/./node_modules/es-errors/eval.js","webpack://ePub/./node_modules/es-errors/index.js","webpack://ePub/./node_modules/es-errors/range.js","webpack://ePub/./node_modules/es-errors/ref.js","webpack://ePub/./node_modules/es-errors/syntax.js","webpack://ePub/./node_modules/es-errors/type.js","webpack://ePub/./node_modules/es-errors/uri.js","webpack://ePub/./node_modules/es5-ext/function/noop.js","webpack://ePub/./node_modules/es5-ext/object/assign/index.js","webpack://ePub/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://ePub/./node_modules/es5-ext/object/assign/shim.js","webpack://ePub/./node_modules/es5-ext/object/is-value.js","webpack://ePub/./node_modules/es5-ext/object/keys/index.js","webpack://ePub/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://ePub/./node_modules/es5-ext/object/keys/shim.js","webpack://ePub/./node_modules/es5-ext/object/normalize-options.js","webpack://ePub/./node_modules/es5-ext/object/valid-callable.js","webpack://ePub/./node_modules/es5-ext/object/valid-value.js","webpack://ePub/./node_modules/es5-ext/string/\u0000#/contains/index.js","webpack://ePub/./node_modules/es5-ext/string/\u0000#/contains/is-implemented.js","webpack://ePub/./node_modules/es5-ext/string/\u0000#/contains/shim.js","webpack://ePub/./node_modules/event-emitter/index.js","webpack://ePub/./node_modules/for-each/index.js","webpack://ePub/./node_modules/function-bind/implementation.js","webpack://ePub/./node_modules/function-bind/index.js","webpack://ePub/./node_modules/get-intrinsic/index.js","webpack://ePub/./node_modules/gopd/index.js","webpack://ePub/./node_modules/has-property-descriptors/index.js","webpack://ePub/./node_modules/has-proto/index.js","webpack://ePub/./node_modules/has-symbols/index.js","webpack://ePub/./node_modules/has-symbols/shams.js","webpack://ePub/./node_modules/has-tostringtag/shams.js","webpack://ePub/./node_modules/hasown/index.js","webpack://ePub/./node_modules/inherits/inherits_browser.js","webpack://ePub/./node_modules/is-arguments/index.js","webpack://ePub/./node_modules/is-callable/index.js","webpack://ePub/./node_modules/is-generator-function/index.js","webpack://ePub/./node_modules/is-nan/implementation.js","webpack://ePub/./node_modules/is-nan/index.js","webpack://ePub/./node_modules/is-nan/polyfill.js","webpack://ePub/./node_modules/is-nan/shim.js","webpack://ePub/./node_modules/is-typed-array/index.js","webpack://ePub/./node_modules/lodash/_Symbol.js","webpack://ePub/./node_modules/lodash/_baseGetTag.js","webpack://ePub/./node_modules/lodash/_baseTrim.js","webpack://ePub/./node_modules/lodash/_freeGlobal.js","webpack://ePub/./node_modules/lodash/_getRawTag.js","webpack://ePub/./node_modules/lodash/_objectToString.js","webpack://ePub/./node_modules/lodash/_root.js","webpack://ePub/./node_modules/lodash/_trimmedEndIndex.js","webpack://ePub/./node_modules/lodash/debounce.js","webpack://ePub/./node_modules/lodash/isObject.js","webpack://ePub/./node_modules/lodash/isObjectLike.js","webpack://ePub/./node_modules/lodash/isSymbol.js","webpack://ePub/./node_modules/lodash/now.js","webpack://ePub/./node_modules/lodash/toNumber.js","webpack://ePub/./node_modules/object-is/implementation.js","webpack://ePub/./node_modules/object-is/index.js","webpack://ePub/./node_modules/object-is/polyfill.js","webpack://ePub/./node_modules/object-is/shim.js","webpack://ePub/./node_modules/object-keys/implementation.js","webpack://ePub/./node_modules/object-keys/index.js","webpack://ePub/./node_modules/object-keys/isArguments.js","webpack://ePub/./node_modules/object.assign/implementation.js","webpack://ePub/./node_modules/object.assign/polyfill.js","webpack://ePub/./node_modules/possible-typed-array-names/index.js","webpack://ePub/./node_modules/process/browser.js","webpack://ePub/./node_modules/set-function-length/index.js","webpack://ePub/./node_modules/type/function/is.js","webpack://ePub/./node_modules/type/object/is.js","webpack://ePub/./node_modules/type/plain-function/is.js","webpack://ePub/./node_modules/type/prototype/is.js","webpack://ePub/./node_modules/type/value/is.js","webpack://ePub/./node_modules/util/support/isBufferBrowser.js","webpack://ePub/./node_modules/util/support/types.js","webpack://ePub/./node_modules/util/util.js","webpack://ePub/./node_modules/which-typed-array/index.js","webpack://ePub/external umd \"JSZip\"","webpack://ePub/external umd \"localforage\"","webpack://ePub/./node_modules/available-typed-arrays/index.js","webpack://ePub/./node_modules/core-js/internals/a-callable.js","webpack://ePub/./node_modules/core-js/internals/a-map.js","webpack://ePub/./node_modules/core-js/internals/a-possible-prototype.js","webpack://ePub/./node_modules/core-js/internals/an-instance.js","webpack://ePub/./node_modules/core-js/internals/an-object.js","webpack://ePub/./node_modules/core-js/internals/array-buffer-byte-length.js","webpack://ePub/./node_modules/core-js/internals/array-buffer-is-detached.js","webpack://ePub/./node_modules/core-js/internals/array-buffer-not-detached.js","webpack://ePub/./node_modules/core-js/internals/array-buffer-transfer.js","webpack://ePub/./node_modules/core-js/internals/array-includes.js","webpack://ePub/./node_modules/core-js/internals/array-set-length.js","webpack://ePub/./node_modules/core-js/internals/async-iterator-close.js","webpack://ePub/./node_modules/core-js/internals/async-iterator-create-proxy.js","webpack://ePub/./node_modules/core-js/internals/async-iterator-iteration.js","webpack://ePub/./node_modules/core-js/internals/async-iterator-map.js","webpack://ePub/./node_modules/core-js/internals/async-iterator-prototype.js","webpack://ePub/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://ePub/./node_modules/core-js/internals/classof-raw.js","webpack://ePub/./node_modules/core-js/internals/classof.js","webpack://ePub/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://ePub/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://ePub/./node_modules/core-js/internals/create-iter-result-object.js","webpack://ePub/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://ePub/./node_modules/core-js/internals/create-property-descriptor.js","webpack://ePub/./node_modules/core-js/internals/create-property.js","webpack://ePub/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://ePub/./node_modules/core-js/internals/define-built-in.js","webpack://ePub/./node_modules/core-js/internals/define-built-ins.js","webpack://ePub/./node_modules/core-js/internals/define-global-property.js","webpack://ePub/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://ePub/./node_modules/core-js/internals/descriptors.js","webpack://ePub/./node_modules/core-js/internals/detach-transferable.js","webpack://ePub/./node_modules/core-js/internals/document-create-element.js","webpack://ePub/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://ePub/./node_modules/core-js/internals/dom-exception-constants.js","webpack://ePub/./node_modules/core-js/internals/enum-bug-keys.js","webpack://ePub/./node_modules/core-js/internals/environment-is-node.js","webpack://ePub/./node_modules/core-js/internals/environment-user-agent.js","webpack://ePub/./node_modules/core-js/internals/environment-v8-version.js","webpack://ePub/./node_modules/core-js/internals/environment.js","webpack://ePub/./node_modules/core-js/internals/error-stack-clear.js","webpack://ePub/./node_modules/core-js/internals/export.js","webpack://ePub/./node_modules/core-js/internals/fails.js","webpack://ePub/./node_modules/core-js/internals/function-bind-context.js","webpack://ePub/./node_modules/core-js/internals/function-bind-native.js","webpack://ePub/./node_modules/core-js/internals/function-call.js","webpack://ePub/./node_modules/core-js/internals/function-name.js","webpack://ePub/./node_modules/core-js/internals/function-uncurry-this-accessor.js","webpack://ePub/./node_modules/core-js/internals/function-uncurry-this-clause.js","webpack://ePub/./node_modules/core-js/internals/function-uncurry-this.js","webpack://ePub/./node_modules/core-js/internals/get-built-in-node-module.js","webpack://ePub/./node_modules/core-js/internals/get-built-in.js","webpack://ePub/./node_modules/core-js/internals/get-iterator-direct.js","webpack://ePub/./node_modules/core-js/internals/get-iterator-method.js","webpack://ePub/./node_modules/core-js/internals/get-iterator.js","webpack://ePub/./node_modules/core-js/internals/get-method.js","webpack://ePub/./node_modules/core-js/internals/global-this.js","webpack://ePub/./node_modules/core-js/internals/has-own-property.js","webpack://ePub/./node_modules/core-js/internals/hidden-keys.js","webpack://ePub/./node_modules/core-js/internals/html.js","webpack://ePub/./node_modules/core-js/internals/ie8-dom-define.js","webpack://ePub/./node_modules/core-js/internals/indexed-object.js","webpack://ePub/./node_modules/core-js/internals/inherit-if-required.js","webpack://ePub/./node_modules/core-js/internals/inspect-source.js","webpack://ePub/./node_modules/core-js/internals/internal-state.js","webpack://ePub/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://ePub/./node_modules/core-js/internals/is-array.js","webpack://ePub/./node_modules/core-js/internals/is-callable.js","webpack://ePub/./node_modules/core-js/internals/is-forced.js","webpack://ePub/./node_modules/core-js/internals/is-null-or-undefined.js","webpack://ePub/./node_modules/core-js/internals/is-object.js","webpack://ePub/./node_modules/core-js/internals/is-possible-prototype.js","webpack://ePub/./node_modules/core-js/internals/is-pure.js","webpack://ePub/./node_modules/core-js/internals/is-symbol.js","webpack://ePub/./node_modules/core-js/internals/iterate-simple.js","webpack://ePub/./node_modules/core-js/internals/iterate.js","webpack://ePub/./node_modules/core-js/internals/iterator-close.js","webpack://ePub/./node_modules/core-js/internals/iterator-create-proxy.js","webpack://ePub/./node_modules/core-js/internals/iterator-map.js","webpack://ePub/./node_modules/core-js/internals/iterators-core.js","webpack://ePub/./node_modules/core-js/internals/iterators.js","webpack://ePub/./node_modules/core-js/internals/length-of-array-like.js","webpack://ePub/./node_modules/core-js/internals/make-built-in.js","webpack://ePub/./node_modules/core-js/internals/map-helpers.js","webpack://ePub/./node_modules/core-js/internals/map-iterate.js","webpack://ePub/./node_modules/core-js/internals/math-trunc.js","webpack://ePub/./node_modules/core-js/internals/normalize-string-argument.js","webpack://ePub/./node_modules/core-js/internals/object-create.js","webpack://ePub/./node_modules/core-js/internals/object-define-properties.js","webpack://ePub/./node_modules/core-js/internals/object-define-property.js","webpack://ePub/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://ePub/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://ePub/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://ePub/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://ePub/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://ePub/./node_modules/core-js/internals/object-keys-internal.js","webpack://ePub/./node_modules/core-js/internals/object-keys.js","webpack://ePub/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://ePub/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://ePub/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://ePub/./node_modules/core-js/internals/own-keys.js","webpack://ePub/./node_modules/core-js/internals/parse-json-string.js","webpack://ePub/./node_modules/core-js/internals/perform.js","webpack://ePub/./node_modules/core-js/internals/require-object-coercible.js","webpack://ePub/./node_modules/core-js/internals/same-value-zero.js","webpack://ePub/./node_modules/core-js/internals/shared-key.js","webpack://ePub/./node_modules/core-js/internals/shared-store.js","webpack://ePub/./node_modules/core-js/internals/shared.js","webpack://ePub/./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack://ePub/./node_modules/core-js/internals/symbol-constructor-detection.js","webpack://ePub/./node_modules/core-js/internals/to-absolute-index.js","webpack://ePub/./node_modules/core-js/internals/to-index.js","webpack://ePub/./node_modules/core-js/internals/to-indexed-object.js","webpack://ePub/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://ePub/./node_modules/core-js/internals/to-length.js","webpack://ePub/./node_modules/core-js/internals/to-object.js","webpack://ePub/./node_modules/core-js/internals/to-primitive.js","webpack://ePub/./node_modules/core-js/internals/to-property-key.js","webpack://ePub/./node_modules/core-js/internals/to-string-tag-support.js","webpack://ePub/./node_modules/core-js/internals/to-string.js","webpack://ePub/./node_modules/core-js/internals/try-to-string.js","webpack://ePub/./node_modules/core-js/internals/uid.js","webpack://ePub/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://ePub/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://ePub/./node_modules/core-js/internals/validate-arguments-length.js","webpack://ePub/./node_modules/core-js/internals/weak-map-basic-detection.js","webpack://ePub/./node_modules/core-js/internals/well-known-symbol.js","webpack://ePub/./node_modules/core-js/modules/es.array-buffer.detached.js","webpack://ePub/./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js","webpack://ePub/./node_modules/core-js/modules/es.array-buffer.transfer.js","webpack://ePub/./node_modules/core-js/modules/es.array.push.js","webpack://ePub/./node_modules/core-js/modules/es.array.unshift.js","webpack://ePub/./node_modules/core-js/modules/esnext.async-iterator.filter.js","webpack://ePub/./node_modules/core-js/modules/esnext.async-iterator.find.js","webpack://ePub/./node_modules/core-js/modules/esnext.async-iterator.for-each.js","webpack://ePub/./node_modules/core-js/modules/esnext.async-iterator.map.js","webpack://ePub/./node_modules/core-js/modules/esnext.async-iterator.reduce.js","webpack://ePub/./node_modules/core-js/modules/esnext.iterator.constructor.js","webpack://ePub/./node_modules/core-js/modules/esnext.iterator.filter.js","webpack://ePub/./node_modules/core-js/modules/esnext.iterator.find.js","webpack://ePub/./node_modules/core-js/modules/esnext.iterator.for-each.js","webpack://ePub/./node_modules/core-js/modules/esnext.iterator.map.js","webpack://ePub/./node_modules/core-js/modules/esnext.iterator.reduce.js","webpack://ePub/./node_modules/core-js/modules/esnext.json.parse.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.delete-all.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.emplace.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.every.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.filter.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.find-key.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.find.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.includes.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.key-of.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.map-keys.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.map-values.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.merge.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.reduce.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.some.js","webpack://ePub/./node_modules/core-js/modules/esnext.map.update.js","webpack://ePub/./node_modules/core-js/modules/web.dom-exception.stack.js","webpack://ePub/./node_modules/core-js/modules/web.url-search-params.delete.js","webpack://ePub/./node_modules/core-js/modules/web.url-search-params.has.js","webpack://ePub/./node_modules/core-js/modules/web.url-search-params.size.js","webpack://ePub/webpack/bootstrap","webpack://ePub/webpack/runtime/compat get default export","webpack://ePub/webpack/runtime/define property getters","webpack://ePub/webpack/runtime/global","webpack://ePub/webpack/runtime/hasOwnProperty shorthand","webpack://ePub/./test/book.js","webpack://ePub/./test/epubcfi.js","webpack://ePub/./test/locations.js","webpack://ePub/./test/navigation.js","webpack://ePub/./test/packaging.js","webpack://ePub/./test/path.js","webpack://ePub/./test/rendition.js","webpack://ePub/./test/section.js","webpack://ePub/./test/sections.js","webpack://ePub/./test/themes.js","webpack://ePub/./test/url.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"JSZip\"), require(\"localforage\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"JSZip\", \"localforage\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ePub\"] = factory(require(\"JSZip\"), require(\"localforage\"));\n\telse\n\t\troot[\"ePub\"] = factory(root[\"JSZip\"], root[\"localforage\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__6838__, __WEBPACK_EXTERNAL_MODULE__6361__) => {\nreturn ","// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a51ae424a513ec9a6aa3466baa0cc1d55dd4f3b\n\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar _require = require('./internal/errors'),\n  _require$codes = _require.codes,\n  ERR_AMBIGUOUS_ARGUMENT = _require$codes.ERR_AMBIGUOUS_ARGUMENT,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_INVALID_ARG_VALUE = _require$codes.ERR_INVALID_ARG_VALUE,\n  ERR_INVALID_RETURN_VALUE = _require$codes.ERR_INVALID_RETURN_VALUE,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS;\nvar AssertionError = require('./internal/assert/assertion_error');\nvar _require2 = require('util/'),\n  inspect = _require2.inspect;\nvar _require$types = require('util/').types,\n  isPromise = _require$types.isPromise,\n  isRegExp = _require$types.isRegExp;\nvar objectAssign = require('object.assign/polyfill')();\nvar objectIs = require('object-is/polyfill')();\nvar RegExpPrototypeTest = require('call-bind/callBound')('RegExp.prototype.test');\nvar errorCache = new Map();\nvar isDeepEqual;\nvar isDeepStrictEqual;\nvar parseExpressionAt;\nvar findNodeAround;\nvar decoder;\nfunction lazyLoadComparison() {\n  var comparison = require('./internal/util/comparisons');\n  isDeepEqual = comparison.isDeepEqual;\n  isDeepStrictEqual = comparison.isDeepStrictEqual;\n}\n\n// Escape control characters but not \\n and \\t to keep the line breaks and\n// indentation intact.\n// eslint-disable-next-line no-control-regex\nvar escapeSequencesRegExp = /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]/g;\nvar meta = [\"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\", \"\\\\u0006\", \"\\\\u0007\", '\\\\b', '', '', \"\\\\u000b\", '\\\\f', '', \"\\\\u000e\", \"\\\\u000f\", \"\\\\u0010\", \"\\\\u0011\", \"\\\\u0012\", \"\\\\u0013\", \"\\\\u0014\", \"\\\\u0015\", \"\\\\u0016\", \"\\\\u0017\", \"\\\\u0018\", \"\\\\u0019\", \"\\\\u001a\", \"\\\\u001b\", \"\\\\u001c\", \"\\\\u001d\", \"\\\\u001e\", \"\\\\u001f\"];\nvar escapeFn = function escapeFn(str) {\n  return meta[str.charCodeAt(0)];\n};\nvar warned = false;\n\n// The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\nvar NO_EXCEPTION_SENTINEL = {};\n\n// All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided. All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction innerFail(obj) {\n  if (obj.message instanceof Error) throw obj.message;\n  throw new AssertionError(obj);\n}\nfunction fail(actual, expected, message, operator, stackStartFn) {\n  var argsLen = arguments.length;\n  var internalMessage;\n  if (argsLen === 0) {\n    internalMessage = 'Failed';\n  } else if (argsLen === 1) {\n    message = actual;\n    actual = undefined;\n  } else {\n    if (warned === false) {\n      warned = true;\n      var warn = process.emitWarning ? process.emitWarning : console.warn.bind(console);\n      warn('assert.fail() with more than one argument is deprecated. ' + 'Please use assert.strictEqual() instead or only pass a message.', 'DeprecationWarning', 'DEP0094');\n    }\n    if (argsLen === 2) operator = '!=';\n  }\n  if (message instanceof Error) throw message;\n  var errArgs = {\n    actual: actual,\n    expected: expected,\n    operator: operator === undefined ? 'fail' : operator,\n    stackStartFn: stackStartFn || fail\n  };\n  if (message !== undefined) {\n    errArgs.message = message;\n  }\n  var err = new AssertionError(errArgs);\n  if (internalMessage) {\n    err.message = internalMessage;\n    err.generatedMessage = true;\n  }\n  throw err;\n}\nassert.fail = fail;\n\n// The AssertionError is defined in internal/error.\nassert.AssertionError = AssertionError;\nfunction innerOk(fn, argLen, value, message) {\n  if (!value) {\n    var generatedMessage = false;\n    if (argLen === 0) {\n      generatedMessage = true;\n      message = 'No value argument passed to `assert.ok()`';\n    } else if (message instanceof Error) {\n      throw message;\n    }\n    var err = new AssertionError({\n      actual: value,\n      expected: true,\n      message: message,\n      operator: '==',\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\n\n// Pure assertion tests whether a value is truthy, as determined\n// by !!value.\nfunction ok() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  innerOk.apply(void 0, [ok, args.length].concat(args));\n}\nassert.ok = ok;\n\n// The equality assertion tests shallow, coercive equality with ==.\n/* eslint-disable no-restricted-properties */\nassert.equal = function equal(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual != expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '==',\n      stackStartFn: equal\n    });\n  }\n};\n\n// The non-equality assertion tests for whether two objects are not\n// equal with !=.\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual == expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '!=',\n      stackStartFn: notEqual\n    });\n  }\n};\n\n// The equivalence assertion tests a deep equality relation.\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepEqual',\n      stackStartFn: deepEqual\n    });\n  }\n};\n\n// The non-equivalence assertion tests for any deep inequality.\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepEqual',\n      stackStartFn: notDeepEqual\n    });\n  }\n};\n/* eslint-enable */\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepStrictEqual',\n      stackStartFn: deepStrictEqual\n    });\n  }\n};\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepStrictEqual',\n      stackStartFn: notDeepStrictEqual\n    });\n  }\n}\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (!objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'strictEqual',\n      stackStartFn: strictEqual\n    });\n  }\n};\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notStrictEqual',\n      stackStartFn: notStrictEqual\n    });\n  }\n};\nvar Comparison = /*#__PURE__*/_createClass(function Comparison(obj, keys, actual) {\n  var _this = this;\n  _classCallCheck(this, Comparison);\n  keys.forEach(function (key) {\n    if (key in obj) {\n      if (actual !== undefined && typeof actual[key] === 'string' && isRegExp(obj[key]) && RegExpPrototypeTest(obj[key], actual[key])) {\n        _this[key] = actual[key];\n      } else {\n        _this[key] = obj[key];\n      }\n    }\n  });\n});\nfunction compareExceptionKey(actual, expected, key, message, keys, fn) {\n  if (!(key in actual) || !isDeepStrictEqual(actual[key], expected[key])) {\n    if (!message) {\n      // Create placeholder objects to create a nice output.\n      var a = new Comparison(actual, keys);\n      var b = new Comparison(expected, keys, actual);\n      var err = new AssertionError({\n        actual: a,\n        expected: b,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.actual = actual;\n      err.expected = expected;\n      err.operator = fn.name;\n      throw err;\n    }\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: fn.name,\n      stackStartFn: fn\n    });\n  }\n}\nfunction expectedException(actual, expected, msg, fn) {\n  if (typeof expected !== 'function') {\n    if (isRegExp(expected)) return RegExpPrototypeTest(expected, actual);\n    // assert.doesNotThrow does not accept objects.\n    if (arguments.length === 2) {\n      throw new ERR_INVALID_ARG_TYPE('expected', ['Function', 'RegExp'], expected);\n    }\n\n    // Handle primitives properly.\n    if (_typeof(actual) !== 'object' || actual === null) {\n      var err = new AssertionError({\n        actual: actual,\n        expected: expected,\n        message: msg,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.operator = fn.name;\n      throw err;\n    }\n    var keys = Object.keys(expected);\n    // Special handle errors to make sure the name and the message are compared\n    // as well.\n    if (expected instanceof Error) {\n      keys.push('name', 'message');\n    } else if (keys.length === 0) {\n      throw new ERR_INVALID_ARG_VALUE('error', expected, 'may not be an empty object');\n    }\n    if (isDeepEqual === undefined) lazyLoadComparison();\n    keys.forEach(function (key) {\n      if (typeof actual[key] === 'string' && isRegExp(expected[key]) && RegExpPrototypeTest(expected[key], actual[key])) {\n        return;\n      }\n      compareExceptionKey(actual, expected, key, msg, keys, fn);\n    });\n    return true;\n  }\n  // Guard instanceof against arrow functions as they don't have a prototype.\n  if (expected.prototype !== undefined && actual instanceof expected) {\n    return true;\n  }\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n  return expected.call({}, actual) === true;\n}\nfunction getActual(fn) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', 'Function', fn);\n  }\n  try {\n    fn();\n  } catch (e) {\n    return e;\n  }\n  return NO_EXCEPTION_SENTINEL;\n}\nfunction checkIsPromise(obj) {\n  // Accept native ES6 promises and promises that are implemented in a similar\n  // way. Do not accept thenables that use a function as `obj` and that have no\n  // `catch` handler.\n\n  // TODO: thenables are checked up until they have the correct methods,\n  // but according to documentation, the `then` method should receive\n  // the `fulfill` and `reject` arguments as well or it may be never resolved.\n\n  return isPromise(obj) || obj !== null && _typeof(obj) === 'object' && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\nfunction waitForActual(promiseFn) {\n  return Promise.resolve().then(function () {\n    var resultPromise;\n    if (typeof promiseFn === 'function') {\n      // Return a rejected promise if `promiseFn` throws synchronously.\n      resultPromise = promiseFn();\n      // Fail in case no promise is returned.\n      if (!checkIsPromise(resultPromise)) {\n        throw new ERR_INVALID_RETURN_VALUE('instance of Promise', 'promiseFn', resultPromise);\n      }\n    } else if (checkIsPromise(promiseFn)) {\n      resultPromise = promiseFn;\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('promiseFn', ['Function', 'Promise'], promiseFn);\n    }\n    return Promise.resolve().then(function () {\n      return resultPromise;\n    }).then(function () {\n      return NO_EXCEPTION_SENTINEL;\n    }).catch(function (e) {\n      return e;\n    });\n  });\n}\nfunction expectsError(stackStartFn, actual, error, message) {\n  if (typeof error === 'string') {\n    if (arguments.length === 4) {\n      throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n    }\n    if (_typeof(actual) === 'object' && actual !== null) {\n      if (actual.message === error) {\n        throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error message \\\"\".concat(actual.message, \"\\\" is identical to the message.\"));\n      }\n    } else if (actual === error) {\n      throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error \\\"\".concat(actual, \"\\\" is identical to the message.\"));\n    }\n    message = error;\n    error = undefined;\n  } else if (error != null && _typeof(error) !== 'object' && typeof error !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n  }\n  if (actual === NO_EXCEPTION_SENTINEL) {\n    var details = '';\n    if (error && error.name) {\n      details += \" (\".concat(error.name, \")\");\n    }\n    details += message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'rejects' ? 'rejection' : 'exception';\n    innerFail({\n      actual: undefined,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Missing expected \".concat(fnType).concat(details),\n      stackStartFn: stackStartFn\n    });\n  }\n  if (error && !expectedException(actual, error, message, stackStartFn)) {\n    throw actual;\n  }\n}\nfunction expectsNoError(stackStartFn, actual, error, message) {\n  if (actual === NO_EXCEPTION_SENTINEL) return;\n  if (typeof error === 'string') {\n    message = error;\n    error = undefined;\n  }\n  if (!error || expectedException(actual, error)) {\n    var details = message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'doesNotReject' ? 'rejection' : 'exception';\n    innerFail({\n      actual: actual,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Got unwanted \".concat(fnType).concat(details, \"\\n\") + \"Actual message: \\\"\".concat(actual && actual.message, \"\\\"\"),\n      stackStartFn: stackStartFn\n    });\n  }\n  throw actual;\n}\nassert.throws = function throws(promiseFn) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  expectsError.apply(void 0, [throws, getActual(promiseFn)].concat(args));\n};\nassert.rejects = function rejects(promiseFn) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n  return waitForActual(promiseFn).then(function (result) {\n    return expectsError.apply(void 0, [rejects, result].concat(args));\n  });\n};\nassert.doesNotThrow = function doesNotThrow(fn) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n  expectsNoError.apply(void 0, [doesNotThrow, getActual(fn)].concat(args));\n};\nassert.doesNotReject = function doesNotReject(fn) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n  return waitForActual(fn).then(function (result) {\n    return expectsNoError.apply(void 0, [doesNotReject, result].concat(args));\n  });\n};\nassert.ifError = function ifError(err) {\n  if (err !== null && err !== undefined) {\n    var message = 'ifError got unwanted exception: ';\n    if (_typeof(err) === 'object' && typeof err.message === 'string') {\n      if (err.message.length === 0 && err.constructor) {\n        message += err.constructor.name;\n      } else {\n        message += err.message;\n      }\n    } else {\n      message += inspect(err);\n    }\n    var newErr = new AssertionError({\n      actual: err,\n      expected: null,\n      operator: 'ifError',\n      message: message,\n      stackStartFn: ifError\n    });\n\n    // Make sure we actually have a stack trace!\n    var origStack = err.stack;\n    if (typeof origStack === 'string') {\n      // This will remove any duplicated frames from the error frames taken\n      // from within `ifError` and add the original error frames to the newly\n      // created ones.\n      var tmp2 = origStack.split('\\n');\n      tmp2.shift();\n      // Filter all frames existing in err.stack.\n      var tmp1 = newErr.stack.split('\\n');\n      for (var i = 0; i < tmp2.length; i++) {\n        // Find the first occurrence of the frame.\n        var pos = tmp1.indexOf(tmp2[i]);\n        if (pos !== -1) {\n          // Only keep new frames.\n          tmp1 = tmp1.slice(0, pos);\n          break;\n        }\n      }\n      newErr.stack = \"\".concat(tmp1.join('\\n'), \"\\n\").concat(tmp2.join('\\n'));\n    }\n    throw newErr;\n  }\n};\n\n// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a871df3dfb8ea663ef5e1f8f62701ec51384ecb\nfunction internalMatch(string, regexp, message, fn, fnName) {\n  if (!isRegExp(regexp)) {\n    throw new ERR_INVALID_ARG_TYPE('regexp', 'RegExp', regexp);\n  }\n  var match = fnName === 'match';\n  if (typeof string !== 'string' || RegExpPrototypeTest(regexp, string) !== match) {\n    if (message instanceof Error) {\n      throw message;\n    }\n    var generatedMessage = !message;\n\n    // 'The input was expected to not match the regular expression ' +\n    message = message || (typeof string !== 'string' ? 'The \"string\" argument must be of type string. Received type ' + \"\".concat(_typeof(string), \" (\").concat(inspect(string), \")\") : (match ? 'The input did not match the regular expression ' : 'The input was expected to not match the regular expression ') + \"\".concat(inspect(regexp), \". Input:\\n\\n\").concat(inspect(string), \"\\n\"));\n    var err = new AssertionError({\n      actual: string,\n      expected: regexp,\n      message: message,\n      operator: fnName,\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\nassert.match = function match(string, regexp, message) {\n  internalMatch(string, regexp, message, match, 'match');\n};\nassert.doesNotMatch = function doesNotMatch(string, regexp, message) {\n  internalMatch(string, regexp, message, doesNotMatch, 'doesNotMatch');\n};\n\n// Expose a strict only variant of assert\nfunction strict() {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n  innerOk.apply(void 0, [strict, args.length].concat(args));\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;","// Currently in sync with Node.js lib/internal/assert/assertion_error.js\n// https://github.com/nodejs/node/commit/0817840f775032169ddd70c85ac059f18ffcc81c\n\n'use strict';\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar _require = require('util/'),\n  inspect = _require.inspect;\nvar _require2 = require('../errors'),\n  ERR_INVALID_ARG_TYPE = _require2.codes.ERR_INVALID_ARG_TYPE;\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\nfunction repeat(str, count) {\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0) return '';\n  var maxCount = str.length * count;\n  count = Math.floor(Math.log(count) / Math.log(2));\n  while (count) {\n    str += str;\n    count--;\n  }\n  str += str.substring(0, maxCount - str.length);\n  return str;\n}\nvar blue = '';\nvar green = '';\nvar red = '';\nvar white = '';\nvar kReadableOperator = {\n  deepStrictEqual: 'Expected values to be strictly deep-equal:',\n  strictEqual: 'Expected values to be strictly equal:',\n  strictEqualObject: 'Expected \"actual\" to be reference-equal to \"expected\":',\n  deepEqual: 'Expected values to be loosely deep-equal:',\n  equal: 'Expected values to be loosely equal:',\n  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n  notStrictEqualObject: 'Expected \"actual\" not to be reference-equal to \"expected\":',\n  notDeepEqual: 'Expected \"actual\" not to be loosely deep-equal to:',\n  notEqual: 'Expected \"actual\" to be loosely unequal to:',\n  notIdentical: 'Values identical but not reference-equal:'\n};\n\n// Comparing short primitives should just show === / !== instead of using the\n// diff.\nvar kMaxShortLength = 10;\nfunction copyError(source) {\n  var keys = Object.keys(source);\n  var target = Object.create(Object.getPrototypeOf(source));\n  keys.forEach(function (key) {\n    target[key] = source[key];\n  });\n  Object.defineProperty(target, 'message', {\n    value: source.message\n  });\n  return target;\n}\nfunction inspectValue(val) {\n  // The util.inspect default values could be changed. This makes sure the\n  // error messages contain the necessary information nevertheless.\n  return inspect(val, {\n    compact: false,\n    customInspect: false,\n    depth: 1000,\n    maxArrayLength: Infinity,\n    // Assert compares only enumerable properties (with a few exceptions).\n    showHidden: false,\n    // Having a long line as error is better than wrapping the line for\n    // comparison for now.\n    // TODO(BridgeAR): `breakLength` should be limited as soon as soon as we\n    // have meta information about the inspected properties (i.e., know where\n    // in what line the property starts and ends).\n    breakLength: Infinity,\n    // Assert does not detect proxies currently.\n    showProxy: false,\n    sorted: true,\n    // Inspect getters as we also check them when comparing entries.\n    getters: true\n  });\n}\nfunction createErrDiff(actual, expected, operator) {\n  var other = '';\n  var res = '';\n  var lastPos = 0;\n  var end = '';\n  var skipped = false;\n  var actualInspected = inspectValue(actual);\n  var actualLines = actualInspected.split('\\n');\n  var expectedLines = inspectValue(expected).split('\\n');\n  var i = 0;\n  var indicator = '';\n\n  // In case both values are objects explicitly mark them as not reference equal\n  // for the `strictEqual` operator.\n  if (operator === 'strictEqual' && _typeof(actual) === 'object' && _typeof(expected) === 'object' && actual !== null && expected !== null) {\n    operator = 'strictEqualObject';\n  }\n\n  // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n  // equal, check further special handling.\n  if (actualLines.length === 1 && expectedLines.length === 1 && actualLines[0] !== expectedLines[0]) {\n    var inputLength = actualLines[0].length + expectedLines[0].length;\n    // If the character length of \"actual\" and \"expected\" together is less than\n    // kMaxShortLength and if neither is an object and at least one of them is\n    // not `zero`, use the strict equal comparison to visualize the output.\n    if (inputLength <= kMaxShortLength) {\n      if ((_typeof(actual) !== 'object' || actual === null) && (_typeof(expected) !== 'object' || expected === null) && (actual !== 0 || expected !== 0)) {\n        // -0 === +0\n        return \"\".concat(kReadableOperator[operator], \"\\n\\n\") + \"\".concat(actualLines[0], \" !== \").concat(expectedLines[0], \"\\n\");\n      }\n    } else if (operator !== 'strictEqualObject') {\n      // If the stderr is a tty and the input length is lower than the current\n      // columns per line, add a mismatch indicator below the output. If it is\n      // not a tty, use a default value of 80 characters.\n      var maxLength = process.stderr && process.stderr.isTTY ? process.stderr.columns : 80;\n      if (inputLength < maxLength) {\n        while (actualLines[0][i] === expectedLines[0][i]) {\n          i++;\n        }\n        // Ignore the first characters.\n        if (i > 2) {\n          // Add position indicator for the first mismatch in case it is a\n          // single line and the input length is less than the column length.\n          indicator = \"\\n  \".concat(repeat(' ', i), \"^\");\n          i = 0;\n        }\n      }\n    }\n  }\n\n  // Remove all ending lines that match (this optimizes the output for\n  // readability by reducing the number of total changed lines).\n  var a = actualLines[actualLines.length - 1];\n  var b = expectedLines[expectedLines.length - 1];\n  while (a === b) {\n    if (i++ < 2) {\n      end = \"\\n  \".concat(a).concat(end);\n    } else {\n      other = a;\n    }\n    actualLines.pop();\n    expectedLines.pop();\n    if (actualLines.length === 0 || expectedLines.length === 0) break;\n    a = actualLines[actualLines.length - 1];\n    b = expectedLines[expectedLines.length - 1];\n  }\n  var maxLines = Math.max(actualLines.length, expectedLines.length);\n  // Strict equal with identical objects that are not identical by reference.\n  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n  if (maxLines === 0) {\n    // We have to get the result again. The lines were all removed before.\n    var _actualLines = actualInspected.split('\\n');\n\n    // Only remove lines in case it makes sense to collapse those.\n    // TODO: Accept env to always show the full error.\n    if (_actualLines.length > 30) {\n      _actualLines[26] = \"\".concat(blue, \"...\").concat(white);\n      while (_actualLines.length > 27) {\n        _actualLines.pop();\n      }\n    }\n    return \"\".concat(kReadableOperator.notIdentical, \"\\n\\n\").concat(_actualLines.join('\\n'), \"\\n\");\n  }\n  if (i > 3) {\n    end = \"\\n\".concat(blue, \"...\").concat(white).concat(end);\n    skipped = true;\n  }\n  if (other !== '') {\n    end = \"\\n  \".concat(other).concat(end);\n    other = '';\n  }\n  var printedLines = 0;\n  var msg = kReadableOperator[operator] + \"\\n\".concat(green, \"+ actual\").concat(white, \" \").concat(red, \"- expected\").concat(white);\n  var skippedMsg = \" \".concat(blue, \"...\").concat(white, \" Lines skipped\");\n  for (i = 0; i < maxLines; i++) {\n    // Only extra expected lines exist\n    var cur = i - lastPos;\n    if (actualLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(expectedLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(expectedLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the expected line to the cache.\n      other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLines[i]);\n      printedLines++;\n      // Only extra actual lines exist\n    } else if (expectedLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(actualLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(actualLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the actual line to the result.\n      res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLines[i]);\n      printedLines++;\n      // Lines diverge\n    } else {\n      var expectedLine = expectedLines[i];\n      var actualLine = actualLines[i];\n      // If the lines diverge, specifically check for lines that only diverge by\n      // a trailing comma. In that case it is actually identical and we should\n      // mark it as such.\n      var divergingLines = actualLine !== expectedLine && (!endsWith(actualLine, ',') || actualLine.slice(0, -1) !== expectedLine);\n      // If the expected line has a trailing comma but is otherwise identical,\n      // add a comma at the end of the actual line. Otherwise the output could\n      // look weird as in:\n      //\n      //   [\n      //     1         // No comma at the end!\n      // +   2\n      //   ]\n      //\n      if (divergingLines && endsWith(expectedLine, ',') && expectedLine.slice(0, -1) === actualLine) {\n        divergingLines = false;\n        actualLine += ',';\n      }\n      if (divergingLines) {\n        // If the last diverging line is more than one line above and the\n        // current line is at least line three, add some of the former lines and\n        // also add dots to indicate skipped entries.\n        if (cur > 1 && i > 2) {\n          if (cur > 4) {\n            res += \"\\n\".concat(blue, \"...\").concat(white);\n            skipped = true;\n          } else if (cur > 3) {\n            res += \"\\n  \".concat(actualLines[i - 2]);\n            printedLines++;\n          }\n          res += \"\\n  \".concat(actualLines[i - 1]);\n          printedLines++;\n        }\n        // Mark the current line as the last diverging one.\n        lastPos = i;\n        // Add the actual line to the result and cache the expected diverging\n        // line so consecutive diverging lines show up as +++--- and not +-+-+-.\n        res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLine);\n        other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLine);\n        printedLines += 2;\n        // Lines are identical\n      } else {\n        // Add all cached information to the result before adding other things\n        // and reset the cache.\n        res += other;\n        other = '';\n        // If the last diverging line is exactly one line above or if it is the\n        // very first line, add the line to the result.\n        if (cur === 1 || i === 0) {\n          res += \"\\n  \".concat(actualLine);\n          printedLines++;\n        }\n      }\n    }\n    // Inspected object to big (Show ~20 rows max)\n    if (printedLines > 20 && i < maxLines - 2) {\n      return \"\".concat(msg).concat(skippedMsg, \"\\n\").concat(res, \"\\n\").concat(blue, \"...\").concat(white).concat(other, \"\\n\") + \"\".concat(blue, \"...\").concat(white);\n    }\n  }\n  return \"\".concat(msg).concat(skipped ? skippedMsg : '', \"\\n\").concat(res).concat(other).concat(end).concat(indicator);\n}\nvar AssertionError = /*#__PURE__*/function (_Error, _inspect$custom) {\n  _inherits(AssertionError, _Error);\n  var _super = _createSuper(AssertionError);\n  function AssertionError(options) {\n    var _this;\n    _classCallCheck(this, AssertionError);\n    if (_typeof(options) !== 'object' || options === null) {\n      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n    }\n    var message = options.message,\n      operator = options.operator,\n      stackStartFn = options.stackStartFn;\n    var actual = options.actual,\n      expected = options.expected;\n    var limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n    if (message != null) {\n      _this = _super.call(this, String(message));\n    } else {\n      if (process.stderr && process.stderr.isTTY) {\n        // Reset on each call to make sure we handle dynamically set environment\n        // variables correct.\n        if (process.stderr && process.stderr.getColorDepth && process.stderr.getColorDepth() !== 1) {\n          blue = \"\\x1B[34m\";\n          green = \"\\x1B[32m\";\n          white = \"\\x1B[39m\";\n          red = \"\\x1B[31m\";\n        } else {\n          blue = '';\n          green = '';\n          white = '';\n          red = '';\n        }\n      }\n      // Prevent the error stack from being visible by duplicating the error\n      // in a very close way to the original in case both sides are actually\n      // instances of Error.\n      if (_typeof(actual) === 'object' && actual !== null && _typeof(expected) === 'object' && expected !== null && 'stack' in actual && actual instanceof Error && 'stack' in expected && expected instanceof Error) {\n        actual = copyError(actual);\n        expected = copyError(expected);\n      }\n      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n        _this = _super.call(this, createErrDiff(actual, expected, operator));\n      } else if (operator === 'notDeepStrictEqual' || operator === 'notStrictEqual') {\n        // In case the objects are equal but the operator requires unequal, show\n        // the first object and say A equals B\n        var base = kReadableOperator[operator];\n        var res = inspectValue(actual).split('\\n');\n\n        // In case \"actual\" is an object, it should not be reference equal.\n        if (operator === 'notStrictEqual' && _typeof(actual) === 'object' && actual !== null) {\n          base = kReadableOperator.notStrictEqualObject;\n        }\n\n        // Only remove lines in case it makes sense to collapse those.\n        // TODO: Accept env to always show the full error.\n        if (res.length > 30) {\n          res[26] = \"\".concat(blue, \"...\").concat(white);\n          while (res.length > 27) {\n            res.pop();\n          }\n        }\n\n        // Only print a single input.\n        if (res.length === 1) {\n          _this = _super.call(this, \"\".concat(base, \" \").concat(res[0]));\n        } else {\n          _this = _super.call(this, \"\".concat(base, \"\\n\\n\").concat(res.join('\\n'), \"\\n\"));\n        }\n      } else {\n        var _res = inspectValue(actual);\n        var other = '';\n        var knownOperators = kReadableOperator[operator];\n        if (operator === 'notDeepEqual' || operator === 'notEqual') {\n          _res = \"\".concat(kReadableOperator[operator], \"\\n\\n\").concat(_res);\n          if (_res.length > 1024) {\n            _res = \"\".concat(_res.slice(0, 1021), \"...\");\n          }\n        } else {\n          other = \"\".concat(inspectValue(expected));\n          if (_res.length > 512) {\n            _res = \"\".concat(_res.slice(0, 509), \"...\");\n          }\n          if (other.length > 512) {\n            other = \"\".concat(other.slice(0, 509), \"...\");\n          }\n          if (operator === 'deepEqual' || operator === 'equal') {\n            _res = \"\".concat(knownOperators, \"\\n\\n\").concat(_res, \"\\n\\nshould equal\\n\\n\");\n          } else {\n            other = \" \".concat(operator, \" \").concat(other);\n          }\n        }\n        _this = _super.call(this, \"\".concat(_res).concat(other));\n      }\n    }\n    Error.stackTraceLimit = limit;\n    _this.generatedMessage = !message;\n    Object.defineProperty(_assertThisInitialized(_this), 'name', {\n      value: 'AssertionError [ERR_ASSERTION]',\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n    _this.code = 'ERR_ASSERTION';\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.operator = operator;\n    if (Error.captureStackTrace) {\n      // eslint-disable-next-line no-restricted-syntax\n      Error.captureStackTrace(_assertThisInitialized(_this), stackStartFn);\n    }\n    // Create error message including the error code in the name.\n    _this.stack;\n    // Reset the name.\n    _this.name = 'AssertionError';\n    return _possibleConstructorReturn(_this);\n  }\n  _createClass(AssertionError, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.name, \" [\").concat(this.code, \"]: \").concat(this.message);\n    }\n  }, {\n    key: _inspect$custom,\n    value: function value(recurseTimes, ctx) {\n      // This limits the `actual` and `expected` property default inspection to\n      // the minimum depth. Otherwise those values would be too verbose compared\n      // to the actual error message which contains a combined view of these two\n      // input values.\n      return inspect(this, _objectSpread(_objectSpread({}, ctx), {}, {\n        customInspect: false,\n        depth: 0\n      }));\n    }\n  }]);\n  return AssertionError;\n}( /*#__PURE__*/_wrapNativeSuper(Error), inspect.custom);\nmodule.exports = AssertionError;","// Currently in sync with Node.js lib/internal/errors.js\n// https://github.com/nodejs/node/commit/3b044962c48fe313905877a96b5d0894a5404f6f\n\n/* eslint node-core/documented-errors: \"error\" */\n/* eslint node-core/alphabetize-errors: \"error\" */\n/* eslint node-core/prefer-util-format-errors: \"error\" */\n\n'use strict';\n\n// The whole point behind this internal module is to allow Node.js to no\n// longer be forced to treat every error message change as a semver-major\n// change. The NodeError classes here all expose a `code` property whose\n// value statically and permanently identifies the error. While the error\n// message may change, the code should not.\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar codes = {};\n\n// Lazy loaded\nvar assert;\nvar util;\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n  var NodeError = /*#__PURE__*/function (_Base) {\n    _inherits(NodeError, _Base);\n    var _super = _createSuper(NodeError);\n    function NodeError(arg1, arg2, arg3) {\n      var _this;\n      _classCallCheck(this, NodeError);\n      _this = _super.call(this, getMessage(arg1, arg2, arg3));\n      _this.code = code;\n      return _this;\n    }\n    return _createClass(NodeError);\n  }(Base);\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\ncreateErrorType('ERR_AMBIGUOUS_ARGUMENT', 'The \"%s\" argument is ambiguous. %s', TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  if (assert === undefined) assert = require('../assert');\n  assert(typeof name === 'string', \"'name' must be a string\");\n\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n  var msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  // TODO(BridgeAR): Improve the output by showing `null` and similar.\n  msg += \". Received type \".concat(_typeof(actual));\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_VALUE', function (name, value) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'is invalid';\n  if (util === undefined) util = require('util/');\n  var inspected = util.inspect(value);\n  if (inspected.length > 128) {\n    inspected = \"\".concat(inspected.slice(0, 128), \"...\");\n  }\n  return \"The argument '\".concat(name, \"' \").concat(reason, \". Received \").concat(inspected);\n}, TypeError, RangeError);\ncreateErrorType('ERR_INVALID_RETURN_VALUE', function (input, name, value) {\n  var type;\n  if (value && value.constructor && value.constructor.name) {\n    type = \"instance of \".concat(value.constructor.name);\n  } else {\n    type = \"type \".concat(_typeof(value));\n  }\n  return \"Expected \".concat(input, \" to be returned from the \\\"\").concat(name, \"\\\"\") + \" function but got \".concat(type, \".\");\n}, TypeError);\ncreateErrorType('ERR_MISSING_ARGS', function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (assert === undefined) assert = require('../assert');\n  assert(args.length > 0, 'At least one arg needs to be specified');\n  var msg = 'The ';\n  var len = args.length;\n  args = args.map(function (a) {\n    return \"\\\"\".concat(a, \"\\\"\");\n  });\n  switch (len) {\n    case 1:\n      msg += \"\".concat(args[0], \" argument\");\n      break;\n    case 2:\n      msg += \"\".concat(args[0], \" and \").concat(args[1], \" arguments\");\n      break;\n    default:\n      msg += args.slice(0, len - 1).join(', ');\n      msg += \", and \".concat(args[len - 1], \" arguments\");\n      break;\n  }\n  return \"\".concat(msg, \" must be specified\");\n}, TypeError);\nmodule.exports.codes = codes;","// Currently in sync with Node.js lib/internal/util/comparisons.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar regexFlagsSupported = /a/g.flags !== undefined;\nvar arrayFromSet = function arrayFromSet(set) {\n  var array = [];\n  set.forEach(function (value) {\n    return array.push(value);\n  });\n  return array;\n};\nvar arrayFromMap = function arrayFromMap(map) {\n  var array = [];\n  map.forEach(function (value, key) {\n    return array.push([key, value]);\n  });\n  return array;\n};\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols : function () {\n  return [];\n};\nvar numberIsNaN = Number.isNaN ? Number.isNaN : require('is-nan');\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\nvar hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\nvar propertyIsEnumerable = uncurryThis(Object.prototype.propertyIsEnumerable);\nvar objectToString = uncurryThis(Object.prototype.toString);\nvar _require$types = require('util/').types,\n  isAnyArrayBuffer = _require$types.isAnyArrayBuffer,\n  isArrayBufferView = _require$types.isArrayBufferView,\n  isDate = _require$types.isDate,\n  isMap = _require$types.isMap,\n  isRegExp = _require$types.isRegExp,\n  isSet = _require$types.isSet,\n  isNativeError = _require$types.isNativeError,\n  isBoxedPrimitive = _require$types.isBoxedPrimitive,\n  isNumberObject = _require$types.isNumberObject,\n  isStringObject = _require$types.isStringObject,\n  isBooleanObject = _require$types.isBooleanObject,\n  isBigIntObject = _require$types.isBigIntObject,\n  isSymbolObject = _require$types.isSymbolObject,\n  isFloat32Array = _require$types.isFloat32Array,\n  isFloat64Array = _require$types.isFloat64Array;\nfunction isNonIndex(key) {\n  if (key.length === 0 || key.length > 10) return true;\n  for (var i = 0; i < key.length; i++) {\n    var code = key.charCodeAt(i);\n    if (code < 48 || code > 57) return true;\n  }\n  // The maximum size for an array is 2 ** 32 -1.\n  return key.length === 10 && key >= Math.pow(2, 32);\n}\nfunction getOwnNonIndexProperties(value) {\n  return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)));\n}\n\n// Taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n  var x = a.length;\n  var y = b.length;\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nvar ONLY_ENUMERABLE = undefined;\nvar kStrict = true;\nvar kLoose = false;\nvar kNoIterator = 0;\nvar kIsArray = 1;\nvar kIsSet = 2;\nvar kIsMap = 3;\n\n// Check if they have the same source and flags\nfunction areSimilarRegExps(a, b) {\n  return regexFlagsSupported ? a.source === b.source && a.flags === b.flags : RegExp.prototype.toString.call(a) === RegExp.prototype.toString.call(b);\n}\nfunction areSimilarFloatArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  for (var offset = 0; offset < a.byteLength; offset++) {\n    if (a[offset] !== b[offset]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction areSimilarTypedArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  return compare(new Uint8Array(a.buffer, a.byteOffset, a.byteLength), new Uint8Array(b.buffer, b.byteOffset, b.byteLength)) === 0;\n}\nfunction areEqualArrayBuffers(buf1, buf2) {\n  return buf1.byteLength === buf2.byteLength && compare(new Uint8Array(buf1), new Uint8Array(buf2)) === 0;\n}\nfunction isEqualBoxedPrimitive(val1, val2) {\n  if (isNumberObject(val1)) {\n    return isNumberObject(val2) && objectIs(Number.prototype.valueOf.call(val1), Number.prototype.valueOf.call(val2));\n  }\n  if (isStringObject(val1)) {\n    return isStringObject(val2) && String.prototype.valueOf.call(val1) === String.prototype.valueOf.call(val2);\n  }\n  if (isBooleanObject(val1)) {\n    return isBooleanObject(val2) && Boolean.prototype.valueOf.call(val1) === Boolean.prototype.valueOf.call(val2);\n  }\n  if (isBigIntObject(val1)) {\n    return isBigIntObject(val2) && BigInt.prototype.valueOf.call(val1) === BigInt.prototype.valueOf.call(val2);\n  }\n  return isSymbolObject(val2) && Symbol.prototype.valueOf.call(val1) === Symbol.prototype.valueOf.call(val2);\n}\n\n// Notes: Type tags are historical [[Class]] properties that can be set by\n// FunctionTemplate::SetClassName() in C++ or Symbol.toStringTag in JS\n// and retrieved using Object.prototype.toString.call(obj) in JS\n// See https://tc39.github.io/ecma262/#sec-object.prototype.tostring\n// for a list of tags pre-defined in the spec.\n// There are some unspecified tags in the wild too (e.g. typed array tags).\n// Since tags can be altered, they only serve fast failures\n//\n// Typed arrays and buffers are checked by comparing the content in their\n// underlying ArrayBuffer. This optimization requires that it's\n// reasonable to interpret their underlying memory in the same way,\n// which is checked by comparing their type tags.\n// (e.g. a Uint8Array and a Uint16Array with the same memory content\n// could still be different because they will be interpreted differently).\n//\n// For strict comparison, objects should have\n// a) The same built-in type tags\n// b) The same prototypes.\n\nfunction innerDeepEqual(val1, val2, strict, memos) {\n  // All identical values are equivalent, as determined by ===.\n  if (val1 === val2) {\n    if (val1 !== 0) return true;\n    return strict ? objectIs(val1, val2) : true;\n  }\n\n  // Check more closely if val1 and val2 are equal.\n  if (strict) {\n    if (_typeof(val1) !== 'object') {\n      return typeof val1 === 'number' && numberIsNaN(val1) && numberIsNaN(val2);\n    }\n    if (_typeof(val2) !== 'object' || val1 === null || val2 === null) {\n      return false;\n    }\n    if (Object.getPrototypeOf(val1) !== Object.getPrototypeOf(val2)) {\n      return false;\n    }\n  } else {\n    if (val1 === null || _typeof(val1) !== 'object') {\n      if (val2 === null || _typeof(val2) !== 'object') {\n        // eslint-disable-next-line eqeqeq\n        return val1 == val2;\n      }\n      return false;\n    }\n    if (val2 === null || _typeof(val2) !== 'object') {\n      return false;\n    }\n  }\n  var val1Tag = objectToString(val1);\n  var val2Tag = objectToString(val2);\n  if (val1Tag !== val2Tag) {\n    return false;\n  }\n  if (Array.isArray(val1)) {\n    // Check for sparse arrays and general fast path\n    if (val1.length !== val2.length) {\n      return false;\n    }\n    var keys1 = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsArray, keys1);\n  }\n  // [browserify] This triggers on certain types in IE (Map/Set) so we don't\n  // wan't to early return out of the rest of the checks. However we can check\n  // if the second value is one of these values and the first isn't.\n  if (val1Tag === '[object Object]') {\n    // return keyCheck(val1, val2, strict, memos, kNoIterator);\n    if (!isMap(val1) && isMap(val2) || !isSet(val1) && isSet(val2)) {\n      return false;\n    }\n  }\n  if (isDate(val1)) {\n    if (!isDate(val2) || Date.prototype.getTime.call(val1) !== Date.prototype.getTime.call(val2)) {\n      return false;\n    }\n  } else if (isRegExp(val1)) {\n    if (!isRegExp(val2) || !areSimilarRegExps(val1, val2)) {\n      return false;\n    }\n  } else if (isNativeError(val1) || val1 instanceof Error) {\n    // Do not compare the stack as it might differ even though the error itself\n    // is otherwise identical.\n    if (val1.message !== val2.message || val1.name !== val2.name) {\n      return false;\n    }\n  } else if (isArrayBufferView(val1)) {\n    if (!strict && (isFloat32Array(val1) || isFloat64Array(val1))) {\n      if (!areSimilarFloatArrays(val1, val2)) {\n        return false;\n      }\n    } else if (!areSimilarTypedArrays(val1, val2)) {\n      return false;\n    }\n    // Buffer.compare returns true, so val1.length === val2.length. If they both\n    // only contain numeric keys, we don't need to exam further than checking\n    // the symbols.\n    var _keys = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var _keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (_keys.length !== _keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kNoIterator, _keys);\n  } else if (isSet(val1)) {\n    if (!isSet(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsSet);\n  } else if (isMap(val1)) {\n    if (!isMap(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsMap);\n  } else if (isAnyArrayBuffer(val1)) {\n    if (!areEqualArrayBuffers(val1, val2)) {\n      return false;\n    }\n  } else if (isBoxedPrimitive(val1) && !isEqualBoxedPrimitive(val1, val2)) {\n    return false;\n  }\n  return keyCheck(val1, val2, strict, memos, kNoIterator);\n}\nfunction getEnumerables(val, keys) {\n  return keys.filter(function (k) {\n    return propertyIsEnumerable(val, k);\n  });\n}\nfunction keyCheck(val1, val2, strict, memos, iterationType, aKeys) {\n  // For all remaining Object pairs, including Array, objects and Maps,\n  // equivalence is determined by having:\n  // a) The same number of owned enumerable properties\n  // b) The same set of keys/indexes (although not necessarily the same order)\n  // c) Equivalent values for every corresponding key/index\n  // d) For Sets and Maps, equal contents\n  // Note: this accounts for both named and indexed properties on Arrays.\n  if (arguments.length === 5) {\n    aKeys = Object.keys(val1);\n    var bKeys = Object.keys(val2);\n\n    // The pair must have the same number of owned properties.\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n  }\n\n  // Cheap key test\n  var i = 0;\n  for (; i < aKeys.length; i++) {\n    if (!hasOwnProperty(val2, aKeys[i])) {\n      return false;\n    }\n  }\n  if (strict && arguments.length === 5) {\n    var symbolKeysA = objectGetOwnPropertySymbols(val1);\n    if (symbolKeysA.length !== 0) {\n      var count = 0;\n      for (i = 0; i < symbolKeysA.length; i++) {\n        var key = symbolKeysA[i];\n        if (propertyIsEnumerable(val1, key)) {\n          if (!propertyIsEnumerable(val2, key)) {\n            return false;\n          }\n          aKeys.push(key);\n          count++;\n        } else if (propertyIsEnumerable(val2, key)) {\n          return false;\n        }\n      }\n      var symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (symbolKeysA.length !== symbolKeysB.length && getEnumerables(val2, symbolKeysB).length !== count) {\n        return false;\n      }\n    } else {\n      var _symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (_symbolKeysB.length !== 0 && getEnumerables(val2, _symbolKeysB).length !== 0) {\n        return false;\n      }\n    }\n  }\n  if (aKeys.length === 0 && (iterationType === kNoIterator || iterationType === kIsArray && val1.length === 0 || val1.size === 0)) {\n    return true;\n  }\n\n  // Use memos to handle cycles.\n  if (memos === undefined) {\n    memos = {\n      val1: new Map(),\n      val2: new Map(),\n      position: 0\n    };\n  } else {\n    // We prevent up to two map.has(x) calls by directly retrieving the value\n    // and checking for undefined. The map can only contain numbers, so it is\n    // safe to check for undefined only.\n    var val2MemoA = memos.val1.get(val1);\n    if (val2MemoA !== undefined) {\n      var val2MemoB = memos.val2.get(val2);\n      if (val2MemoB !== undefined) {\n        return val2MemoA === val2MemoB;\n      }\n    }\n    memos.position++;\n  }\n  memos.val1.set(val1, memos.position);\n  memos.val2.set(val2, memos.position);\n  var areEq = objEquiv(val1, val2, strict, aKeys, memos, iterationType);\n  memos.val1.delete(val1);\n  memos.val2.delete(val2);\n  return areEq;\n}\nfunction setHasEqualElement(set, val1, strict, memo) {\n  // Go looking.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var val2 = setValues[i];\n    if (innerDeepEqual(val1, val2, strict, memo)) {\n      // Remove the matching element to make sure we do not check that again.\n      set.delete(val2);\n      return true;\n    }\n  }\n  return false;\n}\n\n// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n// Sadly it is not possible to detect corresponding values properly in case the\n// type is a string, number, bigint or boolean. The reason is that those values\n// can match lots of different string values (e.g., 1n == '+00001').\nfunction findLooseMatchingPrimitives(prim) {\n  switch (_typeof(prim)) {\n    case 'undefined':\n      return null;\n    case 'object':\n      // Only pass in null as object!\n      return undefined;\n    case 'symbol':\n      return false;\n    case 'string':\n      prim = +prim;\n    // Loose equal entries exist only if the string is possible to convert to\n    // a regular number and not NaN.\n    // Fall through\n    case 'number':\n      if (numberIsNaN(prim)) {\n        return false;\n      }\n  }\n  return true;\n}\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) return altValue;\n  return b.has(altValue) && !a.has(altValue);\n}\nfunction mapMightHaveLoosePrim(a, b, prim, item, memo) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n  var curB = b.get(altValue);\n  if (curB === undefined && !b.has(altValue) || !innerDeepEqual(item, curB, false, memo)) {\n    return false;\n  }\n  return !a.has(altValue) && innerDeepEqual(item, curB, false, memo);\n}\nfunction setEquiv(a, b, strict, memo) {\n  // This is a lazily initiated Set of entries which have to be compared\n  // pairwise.\n  var set = null;\n  var aValues = arrayFromSet(a);\n  for (var i = 0; i < aValues.length; i++) {\n    var val = aValues[i];\n    // Note: Checking for the objects first improves the performance for object\n    // heavy sets but it is a minor slow down for primitives. As they are fast\n    // to check this improves the worst case scenario instead.\n    if (_typeof(val) === 'object' && val !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      // If the specified value doesn't exist in the second set its an not null\n      // object (or non strict only: a not matching primitive) we'll need to go\n      // hunting for something thats deep-(strict-)equal to it. To make this\n      // O(n log n) complexity we have to copy these values in a new set first.\n      set.add(val);\n    } else if (!b.has(val)) {\n      if (strict) return false;\n\n      // Fast path to detect missing string, symbol, undefined and null values.\n      if (!setMightHaveLoosePrim(a, b, val)) {\n        return false;\n      }\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(val);\n    }\n  }\n  if (set !== null) {\n    var bValues = arrayFromSet(b);\n    for (var _i = 0; _i < bValues.length; _i++) {\n      var _val = bValues[_i];\n      // We have to check if a primitive value is already\n      // matching and only if it's not, go hunting for it.\n      if (_typeof(_val) === 'object' && _val !== null) {\n        if (!setHasEqualElement(set, _val, strict, memo)) return false;\n      } else if (!strict && !a.has(_val) && !setHasEqualElement(set, _val, strict, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction mapHasEqualEntry(set, map, key1, item1, strict, memo) {\n  // To be able to handle cases like:\n  //   Map([[{}, 'a'], [{}, 'b']]) vs Map([[{}, 'b'], [{}, 'a']])\n  // ... we need to consider *all* matching keys, not just the first we find.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var key2 = setValues[i];\n    if (innerDeepEqual(key1, key2, strict, memo) && innerDeepEqual(item1, map.get(key2), strict, memo)) {\n      set.delete(key2);\n      return true;\n    }\n  }\n  return false;\n}\nfunction mapEquiv(a, b, strict, memo) {\n  var set = null;\n  var aEntries = arrayFromMap(a);\n  for (var i = 0; i < aEntries.length; i++) {\n    var _aEntries$i = _slicedToArray(aEntries[i], 2),\n      key = _aEntries$i[0],\n      item1 = _aEntries$i[1];\n    if (_typeof(key) === 'object' && key !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(key);\n    } else {\n      // By directly retrieving the value we prevent another b.has(key) check in\n      // almost all possible cases.\n      var item2 = b.get(key);\n      if (item2 === undefined && !b.has(key) || !innerDeepEqual(item1, item2, strict, memo)) {\n        if (strict) return false;\n        // Fast path to detect missing string, symbol, undefined and null\n        // keys.\n        if (!mapMightHaveLoosePrim(a, b, key, item1, memo)) return false;\n        if (set === null) {\n          set = new Set();\n        }\n        set.add(key);\n      }\n    }\n  }\n  if (set !== null) {\n    var bEntries = arrayFromMap(b);\n    for (var _i2 = 0; _i2 < bEntries.length; _i2++) {\n      var _bEntries$_i = _slicedToArray(bEntries[_i2], 2),\n        _key = _bEntries$_i[0],\n        item = _bEntries$_i[1];\n      if (_typeof(_key) === 'object' && _key !== null) {\n        if (!mapHasEqualEntry(set, a, _key, item, strict, memo)) return false;\n      } else if (!strict && (!a.has(_key) || !innerDeepEqual(a.get(_key), item, false, memo)) && !mapHasEqualEntry(set, a, _key, item, false, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction objEquiv(a, b, strict, keys, memos, iterationType) {\n  // Sets and maps don't have their entries accessible via normal object\n  // properties.\n  var i = 0;\n  if (iterationType === kIsSet) {\n    if (!setEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsMap) {\n    if (!mapEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsArray) {\n    for (; i < a.length; i++) {\n      if (hasOwnProperty(a, i)) {\n        if (!hasOwnProperty(b, i) || !innerDeepEqual(a[i], b[i], strict, memos)) {\n          return false;\n        }\n      } else if (hasOwnProperty(b, i)) {\n        return false;\n      } else {\n        // Array is sparse.\n        var keysA = Object.keys(a);\n        for (; i < keysA.length; i++) {\n          var key = keysA[i];\n          if (!hasOwnProperty(b, key) || !innerDeepEqual(a[key], b[key], strict, memos)) {\n            return false;\n          }\n        }\n        if (keysA.length !== Object.keys(b).length) {\n          return false;\n        }\n        return true;\n      }\n    }\n  }\n\n  // The pair must have equivalent values for every corresponding key.\n  // Possibly expensive deep test:\n  for (i = 0; i < keys.length; i++) {\n    var _key2 = keys[i];\n    if (!innerDeepEqual(a[_key2], b[_key2], strict, memos)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isDeepEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kLoose);\n}\nfunction isDeepStrictEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kStrict);\n}\nmodule.exports = {\n  isDeepEqual: isDeepEqual,\n  isDeepStrictEqual: isDeepStrictEqual\n};","import EventEmitter from \"event-emitter\";\nimport EpubCFI from \"./epubcfi\";\nimport { EVENTS } from \"./utils/constants\";\n\n/**\n * Annotation class\n */\nclass Annotation {\n    /**\n     * Constructor\n     * @param {string} type Type of annotation to add: `\"highlight\"` OR `\"underline\"`\n     * @param {string} cfiRange EpubCFI range to attach annotation to\n     * @param {object} [options]\n     * @param {object} [options.data] Data to assign to annotation\n     * @param {Function} [options.cb] Callback after annotation is clicked\n     * @param {string} [options.className] CSS class to assign to annotation\n     * @param {object} [options.styles] CSS styles to assign to annotation\n     */\n    constructor(type, cfiRange, { data, cb, className, styles }) {\n        /**\n         * @member {string} type\n         * @memberof Annotation\n         * @readonly\n         */\n        this.type = type;\n        this.cfiRange = cfiRange;\n        /**\n         * @member {number} sectionIndex\n         * @memberof Annotation\n         * @readonly\n         */\n        this.sectionIndex = new EpubCFI(cfiRange).spinePos;\n        this.data = data;\n        this.cb = cb;\n        this.className = className;\n        this.styles = styles;\n        /**\n         * @member {Mark} mark\n         * @memberof Annotation\n         * @readonly\n         */\n        this.mark = undefined;\n    }\n\n    /**\n     * Update stored data\n     * @param {object} data\n     */\n    update(data) {\n\n        this.data = data;\n    }\n\n    /**\n     * Add to a view\n     * @param {View} view\n     * @returns {object|null}\n     */\n    attach(view) {\n\n        let result;\n        if (!view) {\n            return null;\n        } else if (this.type === \"highlight\") {\n            result = view.highlight(\n                this.cfiRange,\n                this.data,\n                this.cb,\n                this.className,\n                this.styles\n            );\n        } else if (this.type === \"underline\") {\n            result = view.underline(\n                this.cfiRange,\n                this.data,\n                this.cb,\n                this.className,\n                this.styles\n            );\n        }\n\n        this.mark = result;\n        /**\n         * @event attach\n         * @param {Mark} result\n         * @memberof Annotation\n         */\n        this.emit(EVENTS.ANNOTATION.ATTACH, result);\n        return result;\n    }\n\n    /**\n     * Remove from a view\n     * @param {View} view\n     * @returns {boolean}\n     */\n    detach(view) {\n\n        let result = false;\n        if (!view) {\n            return result;\n        } else if (this.type === \"highlight\") {\n            result = view.unhighlight(this.cfiRange);\n        } else if (this.type === \"underline\") {\n            result = view.ununderline(this.cfiRange);\n        }\n\n        this.mark = undefined;\n        /**\n         * @event detach\n         * @param {boolean} result\n         * @memberof Annotation\n         */\n        this.emit(EVENTS.ANNOTATION.DETACH, result);\n        return result;\n    }\n\n    /**\n     * [Not Implemented] Get text of an annotation\n     * @TODO: needs implementation in contents\n     */\n    text() { }\n}\n\nEventEmitter(Annotation.prototype);\n\nexport default Annotation;","import Annotation from \"./annotation\";\n\n/**\n * Handles managing adding & removing Annotations\n */\nclass Annotations extends Map {\n\t/**\n\t * Constructor\n\t * @param {Rendition} rendition\n\t */\n\tconstructor(rendition) {\n\n\t\tsuper();\n\t\tthis.rendition = rendition;\n\t\tthis.rendition.hooks.render.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.unloaded.register(this.reject.bind(this));\n\t}\n\n\t/**\n\t * Append an annotation to store\n\t * @param {string} type Type of annotation to append: `\"highlight\"` OR `\"underline\"`\n\t * @param {string} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} [options]\n\t * @param {object} [options.data] Data to assign to annotation\n\t * @param {Function} [options.cb] Callback after annotation is added\n\t * @param {string} [options.className] CSS class to assign to annotation\n\t * @param {object} [options.styles] CSS styles to assign to annotation\n\t * @returns {Annotation} Annotation that was append\n\t */\n\tappend(type, cfiRange, options) {\n\n\t\tconst key = encodeURI(type + \":\" + cfiRange);\n\t\tconst annotation = new Annotation(type, cfiRange, options);\n\n\t\tthis.rendition.views().forEach((view) => {\n\t\t\tconst index = view.section.index;\n\t\t\tif (annotation.sectionIndex === index) {\n\t\t\t\tannotation.attach(view);\n\t\t\t}\n\t\t});\n\n\t\tthis.set(key, annotation);\n\t\treturn annotation;\n\t}\n\n\t/**\n\t * Remove an annotation from store\n\t * @param {string} type Type of annotation to remove: `\"highlight\"` OR `\"underline\"`\n\t * @param {string} cfiRange EpubCFI range to attach annotation to\n\t */\n\tremove(type, cfiRange) {\n\n\t\tconst key = encodeURI(type + \":\" + cfiRange);\n\t\tconst annotation = this.get(key);\n\n\t\tif (annotation) {\n\t\t\tthis.rendition.views().forEach((view) => {\n\t\t\t\tconst index = view.section.index;\n\t\t\t\tif (annotation.sectionIndex === index) {\n\t\t\t\t\tannotation.detach(view);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.delete(key);\n\t\t}\n\t}\n\n\t/**\n\t * Hook for injecting annotation into a view\n\t * @param {View} view\n\t * @private\n\t */\n\tinject(view) {\n\n\t\tconst index = view.section.index;\n\t\tthis.forEach((note, key) => {\n\t\t\tif (note.sectionIndex === index) {\n\t\t\t\tnote.attach(view);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Hook for removing annotation from a view\n\t * @param {View} view\n\t * @private\n\t */\n\treject(view) {\n\n\t\tconst index = view.section.index;\n\t\tthis.forEach((note, key) => {\n\t\t\tif (note.sectionIndex === index) {\n\t\t\t\tnote.detach(view);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * [Not Implemented] Show annotations\n\t * @TODO: needs implementation in View\n\t */\n\tshow() { }\n\n\t/**\n\t * [Not Implemented] Hide annotations\n\t * @TODO: needs implementation in View\n\t */\n\thide() { }\n}\n\nexport default Annotations;","import request from \"./utils/request\";\nimport mime from \"./utils/mime\";\nimport Input from \"./input\";\nimport JSZip from \"jszip\";\n\n/**\n * Handles Unzipping a requesting files from an Epub Archive\n * @extends {Input}\n */\nclass Archive extends Input {\n\n\tconstructor() {\n\n\t\tsuper();\n\t\tthis.createInstance();\n\t}\n\n\t/**\n\t * Create JSZip instance\n\t */\n\tcreateInstance() {\n\n\t\tif (JSZip) {\n\t\t\tthis.instance = new JSZip();\n\t\t} else {\n\t\t\tthrow new Error(\"JSZip lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Open an archive\n\t * @param {string|ArrayBuffer} input\n\t * @param {string} [encoding] tells JSZip if the input data is base64 encoded\n\t * @returns {Promise<any>} zipfile\n\t */\n\topen(input, encoding) {\n\n\t\tif (encoding === \"base64\") {\n\t\t\tconst data = input.split(\",\");\n\t\t\tinput = data.length === 2 ? data[1] : input;\n\t\t}\n\t\treturn this.instance.loadAsync(input, {\n\t\t\tbase64: encoding === \"base64\"\n\t\t});\n\t}\n\n\t/**\n\t * Load and Open an archive\n\t * @param {string} zipUrl\n\t * @param {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @returns {Promise<any>} zipfile\n\t */\n\tasync openUrl(zipUrl, isBase64) {\n\n\t\treturn request(zipUrl, \"binary\").then((data) => {\n\t\t\treturn this.instance.loadAsync(data, {\n\t\t\t\tbase64: isBase64\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Get entry from Archive\n\t * @param {string} url \n\t * @returns {object} entry\n\t * @private\n\t */\n\tget(url) {\n\n\t\tconst name = window.decodeURIComponent(url.substring(1));\n\t\treturn this.instance.file(name);\n\t}\n\n\t/**\n\t * Get a Blob from Archive by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<Blob|null>}\n\t * @override\n\t */\n\tasync getBlob(url, mimeType) {\n\n\t\tconst entry = this.get(url);\n\n\t\tif (entry) {\n\t\t\tconst type = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"uint8array\").then((data) => {\n\t\t\t\treturn new Blob([data], { type });\n\t\t\t});\n\t\t} else {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tresolve(null);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get Text from Archive by URL\n\t * @param {string} url\n\t * @returns {Promise<string|null>}\n\t * @override\n\t */\n\tasync getText(url) {\n\n\t\tconst entry = this.get(url);\n\n\t\tif (entry) {\n\t\t\treturn entry.async(\"string\").then((text) => {\n\t\t\t\treturn text;\n\t\t\t});\n\t\t} else {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tresolve(null);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Archive by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<string|null>} base64 encoded\n\t * @override\n\t */\n\tasync getBase64(url, mimeType) {\n\n\t\tconst entry = this.get(url);\n\n\t\tif (entry) {\n\t\t\tconst type = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"base64\").then((data) => {\n\t\t\t\treturn \"data:\" + type + \";base64,\" + data;\n\t\t\t});\n\t\t} else {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tresolve(null);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport default Archive;","import EventEmitter from \"event-emitter\";\nimport { extend } from \"./utils/core\";\nimport Defer from \"./utils/defer\";\nimport Url from \"./utils/url\";\nimport Path from \"./utils/path\";\nimport Locations from \"./locations\";\nimport Container from \"./container\";\nimport Packaging from \"./packaging\";\nimport Navigation from \"./navigation\";\nimport Resources from \"./resources\";\nimport Rendition from \"./rendition\";\nimport Archive from \"./archive\";\nimport request from \"./utils/request\";\nimport EpubCFI from \"./epubcfi\";\nimport Storage from \"./storage\";\nimport { EPUBJS_VERSION, EVENTS } from \"./utils/constants\";\nimport Sections from \"./sections\";\n\nconst CONTAINER_PATH_0 = \"META-INF/container.xml\";\nconst CONTAINER_PATH_1 = \"META-INF/container.json\";\nconst INPUT_TYPE = {\n\tBINARY: \"binary\",\n\tBASE64: \"base64\",\n\tEPUB: \"epub\",\n\tDIRECTORY: \"directory\"\n};\n\n/**\n * An Epub representation with methods for the loading, \n * parsing and manipulation of its contents.\n */\nclass Book {\n\t/**\n\t * Constructor\n\t * @param {string|ArrayBuffer} [input] Url, Path or ArrayBuffer\n\t * @param {object} [options]\n\t * @param {string} [options.format='xml'] epub container format\n\t * @param {object} [options.request] object options to xhr request\n\t * @param {Function} [options.request.method] a request function to use instead of the default\n\t * @param {boolean} [options.request.withCredentials=false] send the xhr request withCredentials\n\t * @param {string[]} [options.request.headers=[]] send the xhr request headers\n\t * @param {string} [options.encoding='binary'] optional to pass `\"binary\"` or `\"base64\"` for archived Epubs\n\t * @param {string} [options.replacements=null] use `\"base64\"` or `\"blobUrl\"` for replacing assets\n\t * @param {Function} [options.canonical] optional function to determine canonical urls for a path\n\t * @param {string} [options.store=null] cache the contents in local storage, value should be the name of the reader\n\t * @example new Book()\n\t * @example new Book(\"/path/to/book/\", { store: \"epub-js\" })\n\t * @example new Book({ replacements: \"base64\", store: \"epub-js\" })\n\t */\n\tconstructor(input, options) {\n\n\t\tif (typeof (options) === \"undefined\" &&\n\t\t\ttypeof (input) !== \"string\" &&\n\t\t\tinput instanceof Blob === false &&\n\t\t\tinput instanceof ArrayBuffer === false) {\n\t\t\toptions = input;\n\t\t\tinput = undefined;\n\t\t}\n\n\t\tthis.settings = extend({\n\t\t\tcanonical: undefined,\n\t\t\tencoding: undefined,\n\t\t\treplacements: null,\n\t\t\trequest: {\n\t\t\t\tmethod: undefined,\n\t\t\t\twithCredentials: false,\n\t\t\t\theaders: []\n\t\t\t},\n\t\t\tstore: null\n\t\t}, options || {});\n\t\t/**\n\t\t * @member {Function} request\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.request = this.settings.request.method || request;\n\t\t/**\n\t\t * @member {Archive} archive\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archive = undefined;\n\t\t/**\n\t\t * @member {Storage} storage\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.storage = new Storage(this.settings.store);\n\t\t/**\n\t\t * @member {Rendition} rendition\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.rendition = undefined;\n\t\t/**\n\t\t * @member {Container} container\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.container = new Container();\n\t\t/**\n\t\t * @member {Packaging} packaging\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.packaging = new Packaging();\n\t\t/**\n\t\t * @member {Resources} resources\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.resources = new Resources(\n\t\t\tthis.request.bind(this),\n\t\t\tthis.resolve.bind(this),\n\t\t\tthis.settings.replacements\n\t\t);\n\t\t/**\n\t\t * @member {Sections} sections\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.sections = new Sections();\n\t\t/**\n\t\t * @member {Locations} locations\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.locations = new Locations(\n\t\t\tthis.sections,\n\t\t\tthis.load.bind(this)\n\t\t);\n\t\t/**\n\t\t * @member {Navigation} navigation\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.navigation = new Navigation();\n\t\t/**\n\t\t * @member {Url} url\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.url = undefined;\n\n\t\tif (this.settings.store) {\n\t\t\tthis.storage.createInstance();\n\t\t}\n\n\t\tif (input) {\n\t\t\tthis.open(input).catch((error) => {\n\t\t\t\t/**\n\t\t\t\t * @event openFailed\n\t\t\t\t * @param {object} error\n\t\t\t\t * @memberof Book\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.BOOK.OPEN_FAILED, error);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Init Promises\n\t * @private\n\t */\n\tinit() {\n\t\t/**\n\t\t * @member {boolean} archived\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.archived = false;\n\t\t/**\n\t\t * @member {string} cover\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.cover = null;\n\t\t/**\n\t\t * @member {Path} path\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.path = undefined;\n\t\t/**\n\t\t * @member {boolean} isOpen\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.isOpen = false;\n\t\tthis.opening = new Defer();\n\t\t/**\n\t\t * @member {Promise<Book>} opened returns after the book is loaded\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.opened = this.opening.promise;\n\t\tthis.loading = {\n\t\t\tpackaging: new Defer(),\n\t\t\tresources: new Defer(),\n\t\t\tnavigation: new Defer(),\n\t\t\tsections: new Defer(),\n\t\t\tcover: new Defer(),\n\t\t};\n\t\t/**\n\t\t * Sequential loading of tasks\n\t\t * @member {object} loaded\n\t\t * @property {Promise<Packaging>} packaging\n\t\t * @property {Promise<Resources>} resources\n\t\t * @property {Promise<Navigation>} navigation\n\t\t * @property {Promise<Sections>} sections\n\t\t * @property {Promise<string>} cover\n\t\t * @memberof Book\n\t\t * @readonly\n\t\t */\n\t\tthis.loaded = {\n\t\t\tpackaging: this.loading.packaging.promise,\n\t\t\tresources: this.loading.resources.promise,\n\t\t\tnavigation: this.loading.navigation.promise,\n\t\t\tsections: this.loading.sections.promise,\n\t\t\tcover: this.loading.cover.promise\n\t\t};\n\t}\n\n\t/**\n\t * Clear parts\n\t */\n\tclear() {\n\n\t\tthis.container.clear();\n\t\tthis.packaging.clear();\n\t\tthis.resources.clear();\n\t\tthis.navigation.clear();\n\t\tthis.sections.clear();\n\t\tthis.locations.clear();\n\t}\n\n\t/**\n\t * Open a epub or url\n\t * @param {string|ArrayBuffer} input Url, Path or ArrayBuffer\n\t * @param {string} [openAs] input type: `\"binary\"` OR `\"base64\"` OR `\"epub\"` OR `\"json\"` OR `\"directory\"`\n\t * @returns {Promise<Book>} of when the book has been loaded\n\t * @example book.open(\"/path/to/book/\")\n\t * @example book.open(\"/path/to/book.epub\")\n\t * @example book.open(\"https://example.com/book/\")\n\t * @example book.open(\"https://example.com/book.epub\")\n\t * @example book.open([arraybuffer], \"binary\")\n\t */\n\tasync open(input, openAs) {\n\n\t\tthis.init();\n\t\tconst type = openAs || this.determineType(input);\n\n\t\tif (this.settings.store) {\n\t\t\tthis.store(input);\n\t\t}\n\n\t\tlet opening;\n\t\tif (type === INPUT_TYPE.BINARY) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input);\n\t\t} else if (type === INPUT_TYPE.BASE64) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input, type);\n\t\t} else if (type === INPUT_TYPE.EPUB) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.request(input, \"binary\",\n\t\t\t\tthis.settings.request.withCredentials,\n\t\t\t\tthis.settings.request.headers\n\t\t\t).then(this.openEpub.bind(this));\n\t\t} else {\n\t\t\tthis.url = new Url(input);\n\t\t\tlet path;\n\t\t\tif (this.settings.format === \"json\") {\n\t\t\t\tpath = CONTAINER_PATH_1;\n\t\t\t} else {\n\t\t\t\tpath = CONTAINER_PATH_0;\n\t\t\t}\n\t\t\topening = this.openContainer(path, type);\n\t\t}\n\n\t\treturn opening;\n\t}\n\n\t/**\n\t * Open an archived epub\n\t * @param {string|ArrayBuffer} input\n\t * @param {string} [type] input type: `\"base64\"`\n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\tasync openEpub(input, type) {\n\n\t\tconst encoding = type || this.settings.encoding;\n\n\t\treturn this.unarchive(input, encoding).then(() => {\n\t\t\treturn this.openContainer(CONTAINER_PATH_0);\n\t\t});\n\t}\n\n\t/**\n\t * Open the epub container\n\t * @param {string} url\n\t * @returns {Promise<string>}\n\t * @private\n\t */\n\tasync openContainer(url) {\n\n\t\treturn this.load(url).then((data) => {\n\t\t\tif (this.settings.format === \"json\") {\n\t\t\t\treturn this.container.load(data);\n\t\t\t} else {\n\t\t\t\treturn this.container.parse(data);\n\t\t\t}\n\t\t}).then((container) => {\n\t\t\tconst uri = this.resolve(container.fullPath);\n\t\t\treturn this.openPackaging(uri);\n\t\t});\n\t}\n\n\t/**\n\t * Open the package.opf\n\t * @param {string} url\n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\tasync openPackaging(url) {\n\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url).then((data) => {\n\t\t\tif (this.settings.format === \"json\") {\n\t\t\t\treturn this.packaging.load(data);\n\t\t\t} else {\n\t\t\t\treturn this.packaging.parse(data);\n\t\t\t}\n\t\t}).then(() => {\n\t\t\treturn this.loadNavigation();\n\t\t}).then(() => {\n\t\t\treturn this.unpack();\n\t\t});\n\t}\n\n\t/**\n\t * Load a resource from the Book\n\t * @param {string} path path to the resource to load\n\t * @param {string} [type=null] \n\t * @returns {Promise<any>} returns a promise with the requested resource\n\t */\n\tload(path, type = null) {\n\n\t\tconst resolved = this.resolve(path);\n\n\t\tif (this.archived) {\n\t\t\treturn this.archive.request(resolved);\n\t\t} else {\n\t\t\treturn this.request(resolved, type,\n\t\t\t\tthis.settings.request.withCredentials,\n\t\t\t\tthis.settings.request.headers);\n\t\t}\n\t}\n\n\t/**\n\t * Resolve a path to it's absolute position in the Book\n\t * @param {string} path\n\t * @param {boolean} [absolute=false] force resolving the full URL\n\t * @returns {string} the resolved path string\n\t */\n\tresolve(path, absolute = false) {\n\n\t\tif (!path) return;\n\n\t\tif (path.indexOf(\"://\") > -1) {\n\t\t\treturn path; // is absolute\n\t\t}\n\n\t\tlet resolved = path;\n\t\tif (this.path) {\n\t\t\tresolved = this.path.resolve(this.path.directory, path);\n\t\t}\n\n\t\tif (absolute === false && this.url) {\n\t\t\tresolved = this.url.resolve(resolved);\n\t\t}\n\n\t\treturn resolved;\n\t}\n\n\t/**\n\t * Get a canonical link to a path\n\t * @param {string} path\n\t * @returns {string} the canonical path string\n\t */\n\tcanonical(path) {\n\n\t\tif (!path) return \"\";\n\n\t\tlet url;\n\t\tif (this.settings.canonical) {\n\t\t\turl = this.settings.canonical(path);\n\t\t} else {\n\t\t\turl = this.resolve(path, true);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t/**\n\t * Determine the type of they input passed to open\n\t * @param {string} input\n\t * @returns {string} values: `\"binary\"` OR `\"directory\"` OR `\"epub\"` OR `\"opf\"`\n\t * @private\n\t */\n\tdetermineType(input) {\n\n\t\tif (this.settings.encoding === \"base64\") {\n\t\t\treturn INPUT_TYPE.BASE64;\n\t\t}\n\n\t\tif (typeof (input) !== \"string\") {\n\t\t\treturn INPUT_TYPE.BINARY;\n\t\t}\n\n\t\tconst path = new Url(input).path;\n\n\t\tlet extension = path.extension;\n\t\t// If there's a search string, remove it before determining type\n\t\tif (extension) {\n\t\t\textension = extension.replace(/\\?.*$/, \"\");\n\t\t}\n\n\t\tif (extension === \"epub\") {\n\t\t\treturn INPUT_TYPE.EPUB;\n\t\t} else {\n\t\t\treturn INPUT_TYPE.DIRECTORY;\n\t\t}\n\t}\n\n\t/**\n\t * Unpack the contents of the book packaging\n\t * @returns {Promise<Book>}\n\t * @private\n\t */\n\tasync unpack() {\n\n\t\tthis.loading.packaging.resolve(this.packaging);\n\t\tthis.loading.navigation.resolve(this.navigation);\n\t\tthis.resources.unpack(\n\t\t\tthis.packaging.manifest,\n\t\t\tthis.archive,\n\t\t\tthis.storage\n\t\t).then((resources) => {\n\t\t\tthis.loading.resources.resolve(resources);\n\t\t});\n\t\tthis.sections.unpack(\n\t\t\tthis.packaging,\n\t\t\tthis.navigation,\n\t\t\tthis.resolve.bind(this),\n\t\t\tthis.canonical.bind(this)\n\t\t).then((sections) => {\n\t\t\tthis.loading.sections.resolve(sections);\n\t\t});\n\n\t\tif (this.resources.replacements) {\n\t\t\tthis.sections.hooks.serialize.register(\n\t\t\t\tthis.resources.substitute.bind(this.resources)\n\t\t\t);\n\t\t}\n\n\t\tif (this.packaging.manifest.coverPath) {\n\t\t\tthis.cover = this.resolve(this.packaging.manifest.coverPath);\n\t\t}\n\n\t\tthis.loading.cover.resolve(this.cover);\n\t\tconst tasks = [...Object.values(this.loaded)];\n\n\t\treturn Promise.all(tasks).then(() => {\n\t\t\tthis.isOpen = true;\n\t\t\tthis.opening.resolve(this)\n\t\t\treturn this.opened;\n\t\t});\n\t}\n\n\t/**\n\t * Load navigation\n\t * @returns {Promise<Navigation>}\n\t * @private\n\t */\n\tasync loadNavigation() {\n\n\t\tconst navPath = this.packaging.manifest.navPath;\n\n\t\tif (navPath) {\n\t\t\treturn this.load(navPath).then((data) => {\n\t\t\t\tif (this.settings.format === \"json\") {\n\t\t\t\t\treturn this.navigation.load(data);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.navigation.parse(data);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve(this.navigation);\n\t\t}\n\t}\n\n\t/**\n\t * Gets a Section of the Book from the Spine\n\t * Alias for `book.sections.get`\n\t * @param {string|number} [target]\n\t * @returns {Section|null}\n\t * @example book.section()\n\t * @example book.section(3)\n\t * @example book.section(\"#chapter_001\")\n\t * @example book.section(\"chapter_001.xhtml\")\n\t * @example book.section(\"epubcfi(/6/8!/4/2/16/1:0)\")\n\t */\n\tsection(target) {\n\n\t\treturn this.sections.get(target);\n\t}\n\n\t/**\n\t * Sugar to render a book to an element\n\t * @param {Element|string} element element or string to add a rendition to\n\t * @param {object} [options]\n\t * @returns {Rendition}\n\t */\n\trenderTo(element, options) {\n\n\t\tconst method = \"blobUrl\";\n\n\t\tif (this.settings.replacements === method) {\n\t\t\toptions = extend({ method }, options || {})\n\t\t}\n\t\tthis.rendition = new Rendition(this, options);\n\t\tthis.rendition.attachTo(element);\n\n\t\treturn this.rendition;\n\t}\n\n\t/**\n\t * Set if request should use withCredentials\n\t * @param {boolean} credentials\n\t */\n\tsetRequestCredentials(credentials) {\n\n\t\tthis.settings.request.withCredentials = credentials;\n\t}\n\n\t/**\n\t * Set headers request should use\n\t * @param {string[]} headers\n\t */\n\tsetRequestHeaders(headers) {\n\n\t\tthis.settings.request.headers = headers;\n\t}\n\n\t/**\n\t * Unarchive a zipped epub\n\t * @param {string|ArrayBuffer} input url string or arraybuffer data\n\t * @param {string} [encoding] input type: `\"base64\"`\n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\tunarchive(input, encoding) {\n\n\t\tthis.archive = new Archive();\n\t\treturn this.archive.open(input, encoding);\n\t}\n\n\t/**\n\t * Storage configure\n\t * @param {string|ArrayBuffer} input\n\t * @private\n\t */\n\tstore(input) {\n\n\t\tif (typeof input === \"string\") {\n\t\t\t//-- replace request method to go through store\n\t\t\tthis.request = this.storage.dispatch.bind(this.storage);\n\t\t}\n\t}\n\n\t/**\n\t * Get the cover url\n\t * @returns {Promise<string>} coverUrl\n\t */\n\tasync coverUrl() {\n\n\t\treturn this.loaded.cover.then(() => {\n\t\t\tif (this.archived && this.cover) {\n\t\t\t\treturn this.resources.createUrl(this.cover);\n\t\t\t}\n\t\t\treturn this.cover;\n\t\t});\n\t}\n\n\t/**\n\t * Find a DOM Range for a given CFI Range\n\t * @param {EpubCFI} cfiRange a epub cfi range\n\t * @returns {Promise<Range>}\n\t */\n\tasync getRange(cfiRange) {\n\n\t\tconst cfi = new EpubCFI(cfiRange);\n\t\tconst item = this.sections.get(cfi.spinePos);\n\t\tconst request = this.load.bind(this);\n\t\tif (!item) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\treject(new Error(\"CFI could not be found\"));\n\t\t\t});\n\t\t}\n\t\treturn item.load(request).then((contents) => {\n\t\t\tconst range = cfi.toRange(item.document);\n\t\t\treturn range;\n\t\t});\n\t}\n\n\t/**\n\t * Generates the Book Key using the identifier in the manifest or other string provided\n\t * @param {string} [identifier] to use instead of metadata identifier\n\t * @returns {string} key\n\t */\n\tkey(identifier) {\n\n\t\tconst ident = identifier ||\n\t\t\tthis.packaging.metadata.get(\"identifier\") ||\n\t\t\tthis.url.filename;\n\t\treturn `epubjs:${EPUBJS_VERSION}:${ident}`;\n\t}\n\n\t/**\n\t * Destroy the Book and all associated objects\n\t */\n\tdestroy() {\n\n\t\tthis.isOpen = undefined;\n\t\tthis.opened = undefined;\n\t\tthis.loaded = undefined;\n\t\tthis.opening = undefined;\n\t\tthis.loading = undefined;\n\n\t\tthis.archive && this.archive.destroy();\n\t\tthis.storage && this.storage.destroy();\n\t\tthis.sections && this.sections.destroy();\n\t\tthis.locations && this.locations.destroy();\n\t\tthis.resources && this.resources.destroy();\n\t\tthis.container && this.container.destroy();\n\t\tthis.packaging && this.packaging.destroy();\n\t\tthis.rendition && this.rendition.destroy();\n\t\tthis.navigation && this.navigation.destroy();\n\n\t\tthis.archive = undefined;\n\t\tthis.storage = undefined;\n\t\tthis.archived = undefined;\n\t\tthis.sections = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.container = undefined;\n\t\tthis.packaging = undefined;\n\t\tthis.rendition = undefined;\n\t\tthis.navigation = undefined;\n\n\t\tthis.url = undefined;\n\t\tthis.path = undefined;\n\t\tthis.cover = undefined;\n\t\tthis.request = undefined;\n\t\tthis.settings = undefined;\n\t}\n}\n\nEventEmitter(Book.prototype);\n\nexport default Book;","import Path from \"./utils/path\";\nimport { qs } from \"./utils/core\";\n\n/**\n * Parsing the Epub Container\n * @link https://www.w3.org/TR/epub/#sec-container-metainf\n */\nclass Container {\n\t/**\n\t * Constructor\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * @member {string} directory Package directory\n\t\t * @memberof Container\n\t\t * @readonly\n\t\t */\n\t\tthis.directory = \"\";\n\t\t/**\n\t\t * @member {string} fullPath Path to package file\n\t\t * @memberof Container\n\t\t * @readonly\n\t\t */\n\t\tthis.fullPath = \"\";\n\t\t/**\n\t\t * @member {string} encoding Encoding\n\t\t * @memberof Container\n\t\t * @readonly\n\t\t */\n\t\tthis.encoding = \"\";\n\t\t/**\n\t\t * @member {string} mediaType Media type\n\t\t * @memberof Container\n\t\t * @readonly\n\t\t */\n\t\tthis.mediaType = \"\";\n\t\t/**\n\t\t * @member {string} version\n\t\t * @memberof Container\n\t\t * @readonly\n\t\t */\n\t\tthis.version = \"\";\n\t}\n\n\t/**\n\t * Clear parts\n\t */\n\tclear() {\n\n\t\tthis.directory = \"\";\n\t\tthis.fullPath = \"\";\n\t\tthis.encoding = \"\";\n\t\tthis.mediaType = \"\";\n\t\tthis.version = \"\";\n\t}\n\n\t/**\n\t * Parse the Container XML\n\t * @param {Document} doc\n\t * @returns {Promise<Container>}\n\t */\n\tparse(doc) {\n\n\t\tif (!doc) {\n\t\t\tthrow new Error(\"Container File Not Found\");\n\t\t}\n\n\t\tconst container = qs(doc, \"container\");\n\n\t\tif (!container) {\n\t\t\tthrow new Error(\"container node not found\");\n\t\t}\n\n\t\tconst rootfile = qs(doc, \"rootfile\");\n\n\t\tif (!rootfile) {\n\t\t\tthrow new Error(\"rootfile node not found\");\n\t\t}\n\n\t\tthis.fullPath = rootfile.getAttribute(\"full-path\");\n\t\tthis.directory = Path.prototype.dirname(this.fullPath);\n\t\tthis.encoding = doc.characterSet;\n\t\tthis.mediaType = rootfile.getAttribute(\"media-type\");\n\t\tthis.version = container.getAttribute(\"version\");\n\n\t\treturn Promise.resolve(this);\n\t}\n\n\t/**\n\t * Load a container from JSON\n\t * @param {object} container \n\t * @returns {Promise<Container>}\n\t */\n\tload(container) {\n\n\t\tObject.keys(container).forEach(p => {\n\t\t\tswitch (p) {\n\t\t\t\tcase \"directory\":\n\t\t\t\t\tthis.directory = container[p];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"encoding\":\n\t\t\t\t\tthis.encoding = container[p];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"full-path\":\n\t\t\t\t\tthis.fullPath = container[p];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"media-type\":\n\t\t\t\t\tthis.mediaType = container[p];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"version\":\n\t\t\t\t\tthis.version = container[p];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\treturn Promise.resolve(this);\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.directory = undefined;\n\t\tthis.encoding = undefined;\n\t\tthis.fullPath = undefined;\n\t\tthis.mediaType = undefined;\n\t\tthis.version = undefined;\n\t}\n}\n\nexport default Container;","import EventEmitter from \"event-emitter\";\nimport EpubCFI from \"./epubcfi\";\nimport Mapping from \"./mapping\";\nimport Defer from \"./utils/defer\";\nimport { replaceLinks } from \"./utils/replacements\";\nimport { EVENTS, DOM_EVENTS } from \"./utils/constants\";\nimport { isNumber, prefixed, borders, defaults } from \"./utils/core\";\n\nconst hasNavigator = typeof (navigator) !== \"undefined\";\nconst isChrome = hasNavigator && /Chrome/.test(navigator.userAgent);\nconst isWebkit = hasNavigator && !isChrome && /AppleWebKit/.test(navigator.userAgent);\nconst AXIS_V = \"vertical\";\n\n/**\n * Handles DOM manipulation, queries and events for View contents\n */\nclass Contents {\n\t/**\n\t * Constructor\n\t * @param {Document} doc Document\n\t * @param {Element} content Parent Element (typically Body)\n\t * @param {Section} section Section object reference\n\t */\n\tconstructor(doc, content, section) {\n\n\t\tthis.document = doc;\n\t\t/**\n\t\t * @member {Element} content document.body by current location\n\t\t * @memberof Contents\n\t\t * @readonly\n\t\t */\n\t\tthis.content = content || this.document.body;\n\t\t/**\n\t\t * @member {object} contentRect\n\t\t * @memberof Contents\n\t\t * @readonly\n\t\t */\n\t\tthis.contentRect = {\n\t\t\tbottom: 0,\n\t\t\theight: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\twidth: 0,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t};\n\t\t/**\n\t\t * @member {Section} section\n\t\t * @memberof Contents\n\t\t * @readonly\n\t\t */\n\t\tthis.section = section;\n\t\tthis.scripts = new Map();\n\t\tthis.styles = new Map();\n\t\tthis.active = true;\n\t\tthis.window = this.document.defaultView;\n\t\t/**\n\t\t * @member {string} mode writing-mode\n\t\t * @memberof Contents\n\t\t * @readonly\n\t\t */\n\t\tthis.mode = this.writingMode();\n\t\tthis.appendListeners();\n\t}\n\n\t/**\n\t * Get or Set width\n\t * @param {number} [w]\n\t * @returns {number} width\n\t */\n\twidth(w) {\n\n\t\tconst frame = this.content;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tframe.style.width = w;\n\t\t}\n\n\t\treturn parseInt(this.window.getComputedStyle(frame)[\"width\"]);\n\t}\n\n\t/**\n\t * Get or Set height\n\t * @param {number} [h]\n\t * @returns {number} height\n\t */\n\theight(h) {\n\n\t\tconst frame = this.content;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tframe.style.height = h;\n\t\t}\n\n\t\treturn parseInt(this.window.getComputedStyle(frame)[\"height\"]);\n\t}\n\n\t/**\n\t * Get size of the text using Range\n\t * @returns {{ width: number, height: number }}\n\t */\n\ttextSize() {\n\n\t\tconst range = this.document.createRange();\n\t\trange.selectNodeContents(this.content);\n\t\tconst rect = range.getBoundingClientRect();\n\t\tconst border = borders(this.content);\n\t\tconst width = rect.width + border.width;\n\t\tconst height = this.content.clientHeight;\n\n\t\treturn {\n\t\t\twidth: Math.round(width),\n\t\t\theight: Math.round(height)\n\t\t}\n\t}\n\n\t/**\n\t * Get documentElement scrollWidth\n\t * @returns {number} width\n\t */\n\tscrollWidth() {\n\n\t\treturn this.document.documentElement.scrollWidth;\n\t}\n\n\t/**\n\t * Get documentElement scrollHeight\n\t * @returns {number} height\n\t */\n\tscrollHeight() {\n\n\t\treturn this.document.documentElement.scrollHeight;\n\t}\n\n\t/**\n\t * Set overflow css style of the contents\n\t * @param {string} [overflow]\n\t * @returns {string}\n\t */\n\toverflow(overflow) {\n\n\t\tconst elt = this.document.documentElement;\n\t\t\n\t\tif (overflow) {\n\t\t\telt.style.overflow = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(elt)[\"overflow\"];\n\t}\n\n\t/**\n\t * Set overflowX css style of the documentElement\n\t * @param {string} [overflow]\n\t * @returns {string}\n\t */\n\toverflowX(overflow) {\n\n\t\tconst elt = this.document.documentElement;\n\t\t\n\t\tif (overflow) {\n\t\t\telt.style.overflowX = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(elt)[\"overflowX\"];\n\t}\n\n\t/**\n\t * Set overflowY css style of the documentElement\n\t * @param {string} [overflow]\n\t * @returns {string}\n\t */\n\toverflowY(overflow) {\n\n\t\tconst elt = this.document.documentElement;\n\t\t\n\t\tif (overflow) {\n\t\t\telt.style.overflowY = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(elt)[\"overflowY\"];\n\t}\n\n\t/**\n\t * Set Css styles on the contents element (typically Body)\n\t * @param {string} property\n\t * @param {string} value\n\t * @param {boolean} [priority] set as \"important\"\n\t * @returns {any}\n\t */\n\tcss(property, value, priority) {\n\n\t\tconst content = this.content;\n\n\t\tif (value) {\n\t\t\tcontent.style.setProperty(property, value, priority ? \"important\" : \"\");\n\t\t} else {\n\t\t\tcontent.style.removeProperty(property);\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[property];\n\t}\n\n\t/**\n\t * Get or Set the viewport element\n\t * @param {object} [options]\n\t * @param {string} [options.width]\n\t * @param {string} [options.height]\n\t * @param {string} [options.scale]\n\t * @param {string} [options.minimum]\n\t * @param {string} [options.maximum]\n\t * @param {string} [options.scalable]\n\t * @returns {object}\n\t */\n\tviewport(options) {\n\n\t\tconst parsed = {\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tscale: undefined,\n\t\t\tminimum: undefined,\n\t\t\tmaximum: undefined,\n\t\t\tscalable: undefined\n\t\t};\n\t\tlet viewport = this.document.querySelector(\"meta[name='viewport']\");\n\n\t\t/***\n\t\t * check for the viewport size\n\t\t * <meta name=\"viewport\" content=\"width=1024,height=697\" />\n\t\t */\n\t\tif (viewport && viewport.hasAttribute(\"content\")) {\n\n\t\t\tconst content = viewport.getAttribute(\"content\");\n\t\t\tconst width = content.match(/width\\s*=\\s*([^,]*)/);\n\t\t\tconst height = content.match(/height\\s*=\\s*([^,]*)/);\n\t\t\tconst scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\t\t\tconst minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\t\t\tconst maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\t\t\tconst scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n\t\t\tif (width && width.length && typeof width[1] !== \"undefined\") {\n\t\t\t\tparsed.width = width[1];\n\t\t\t}\n\t\t\tif (height && height.length && typeof height[1] !== \"undefined\") {\n\t\t\t\tparsed.height = height[1];\n\t\t\t}\n\t\t\tif (scale && scale.length && typeof scale[1] !== \"undefined\") {\n\t\t\t\tparsed.scale = scale[1];\n\t\t\t}\n\t\t\tif (minimum && minimum.length && typeof minimum[1] !== \"undefined\") {\n\t\t\t\tparsed.minimum = minimum[1];\n\t\t\t}\n\t\t\tif (maximum && maximum.length && typeof maximum[1] !== \"undefined\") {\n\t\t\t\tparsed.maximum = maximum[1];\n\t\t\t}\n\t\t\tif (scalable && scalable.length && typeof scalable[1] !== \"undefined\") {\n\t\t\t\tparsed.scalable = scalable[1];\n\t\t\t}\n\t\t}\n\n\t\tconst settings = defaults(options || {}, parsed);\n\t\tconst newContent = [];\n\n\t\tif (options) {\n\t\t\tif (settings.width) {\n\t\t\t\tnewContent.push(\"width=\" + settings.width);\n\t\t\t}\n\n\t\t\tif (settings.height) {\n\t\t\t\tnewContent.push(\"height=\" + settings.height);\n\t\t\t}\n\n\t\t\tif (settings.scale) {\n\t\t\t\tnewContent.push(\"initial-scale=\" + settings.scale);\n\t\t\t}\n\n\t\t\tif (settings.scalable === \"no\") {\n\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"maximum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t} else {\n\n\t\t\t\tif (settings.scalable) {\n\t\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t\t}\n\n\t\t\t\tif (settings.minimum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.minimum);\n\t\t\t\t}\n\n\t\t\t\tif (settings.maximum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.maximum);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (viewport === null) {\n\t\t\t\tviewport = this.document.createElement(\"meta\");\n\t\t\t\tviewport.setAttribute(\"name\", \"viewport\");\n\t\t\t\tthis.document.head.appendChild(viewport);\n\t\t\t}\n\n\t\t\tviewport.setAttribute(\"content\", newContent.join(\", \"));\n\t\t\tthis.window.scrollTo(0, 0);\n\t\t}\n\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Event emitter for when the contents has expanded\n\t * @private\n\t */\n\texpand() {\n\n\t\tthis.emit(EVENTS.CONTENTS.EXPAND);\n\t}\n\n\t/**\n\t * content resize event handler\n\t * @param {object[]} entries\n\t * @private\n\t */\n\tresize(entries) {\n\n\t\tlet changed = false;\n\t\tconst cmp = (rect) => Object.keys(this.contentRect).forEach(p => {\n\t\t\tif (!rect) return;\n\t\t\tif (this.contentRect[p] !== rect[p] && rect[p] !== void 0) {\n\t\t\t\tthis.contentRect[p] = rect[p];\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tentries.forEach((entry) => cmp(entry.contentRect));\n\t\tif (!changed) return;\n\t\tthis.emit(EVENTS.CONTENTS.RESIZED, this.contentRect);\n\t}\n\n\t/**\n\t * Get the documentElement\n\t * @returns {Element} documentElement\n\t */\n\troot() {\n\n\t\tif (!this.document) return null;\n\t\treturn this.document.documentElement;\n\t}\n\n\t/**\n\t * Get the location offset of a EpubCFI or an #id\n\t * @param {string | EpubCFI} target\n\t * @param {string} [ignoreClass] for the cfi\n\t * @returns {{ left: number, top: number }} target position left and top\n\t */\n\tlocationOf(target, ignoreClass) {\n\n\t\tconst targetPos = { left: 0, top: 0 };\n\n\t\tif (!this.document) return targetPos;\n\t\tlet position;\n\t\tif (EpubCFI.prototype.isCfiString(target)) {\n\n\t\t\tconst range = new EpubCFI(target).toRange(this.document, ignoreClass);\n\n\t\t\tif (range) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!range.endContainer ||\n\t\t\t\t\t\t(range.startContainer == range.endContainer\n\t\t\t\t\t\t\t&& range.startOffset == range.endOffset)) {\n\t\t\t\t\t\t// If the end for the range is not set, it results in collapsed becoming\n\t\t\t\t\t\t// true. This in turn leads to inconsistent behaviour when calling\n\t\t\t\t\t\t// getBoundingRect. Wrong bounds lead to the wrong page being displayed.\n\t\t\t\t\t\t// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/15684911/\n\t\t\t\t\t\tlet pos = range.startContainer.textContent.indexOf(\" \", range.startOffset);\n\t\t\t\t\t\tif (pos == -1) {\n\t\t\t\t\t\t\tpos = range.startContainer.textContent.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trange.setEnd(range.startContainer, pos);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"setting end offset to start container length failed\", e);\n\t\t\t\t}\n\n\t\t\t\tif (range.startContainer.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\tposition = range.startContainer.getBoundingClientRect();\n\t\t\t\t\ttargetPos.left = position.left;\n\t\t\t\t\ttargetPos.top = position.top;\n\t\t\t\t} else {\n\t\t\t\t\t// Webkit does not handle collapsed range bounds correctly\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=138949\n\n\t\t\t\t\t// Construct a new non-collapsed range\n\t\t\t\t\tif (isWebkit) {\n\t\t\t\t\t\tconst container = range.startContainer;\n\t\t\t\t\t\tconst newRange = new Range();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (container.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\t\t\t\tposition = container.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset + 2 < container.length) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset + 2);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset - 2 > 0) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset - 2);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else { // empty, return the parent element\n\t\t\t\t\t\t\t\tposition = container.parentNode.getBoundingClientRect();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e, e.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition = range.getBoundingClientRect();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if (typeof target === \"string\" && target.indexOf(\"#\") > -1) {\n\n\t\t\tconst id = target.substring(target.indexOf(\"#\") + 1);\n\t\t\tconst el = this.document.getElementById(id);\n\t\t\tif (el) {\n\t\t\t\tif (isWebkit) {\n\t\t\t\t\t// Webkit reports incorrect bounding rects in Columns\n\t\t\t\t\tconst newRange = new Range();\n\t\t\t\t\tnewRange.selectNode(el);\n\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t} else {\n\t\t\t\t\tposition = el.getBoundingClientRect();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (position) {\n\t\t\ttargetPos.left = position.left;\n\t\t\ttargetPos.top = position.top;\n\t\t}\n\n\t\treturn targetPos;\n\t}\n\n\t/**\n\t * Create stylesheet link\n\t * @param {string} key \n\t * @param {string} src \n\t * @returns {Promise<Node>}\n\t * @private\n\t */\n\tcreateLink(key, src) {\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst id = `epubjs-injected-css-${key}`;\n\t\t\tlet node = this.styles.get(id);\n\t\t\tif (node) {\n\t\t\t\tthis.document.head.removeChild(node);\n\t\t\t}\n\t\t\tnode = this.document.createElement(\"link\");\n\t\t\tnode.rel = \"stylesheet\";\n\t\t\tnode.type = \"text/css\";\n\t\t\tnode.href = src;\n\t\t\tnode.onload = () => {\n\t\t\t\tresolve(node);\n\t\t\t};\n\t\t\tnode.onerror = () => {\n\t\t\t\treject(new Error(`Failed to load source: ${src}`));\n\t\t\t};\n\t\t\tthis.document.head.appendChild(node);\n\t\t\tthis.styles.set(id, node);\n\t\t});\n\t}\n\n\t/**\n\t * Create stylesheet rules\n\t * @param {string} key \n\t * @param {object} rules \n\t * @returns {Promise<Node>}\n\t * @private\n\t */\n\tcreateStyle(key, rules) {\n\n\t\treturn new Promise((resolve) => {\n\t\t\tconst id = `epubjs-injected-css-${key}`;\n\t\t\tlet node = this.styles.get(id);\n\t\t\tif (node) {\n\t\t\t\tthis.document.head.removeChild(node);\n\t\t\t}\n\t\t\tnode = this.document.createElement(\"style\");\n\t\t\tnode.id = id;\n\t\t\tthis.document.head.appendChild(node);\n\t\t\tObject.keys(rules).forEach((selector) => {\n\t\t\t\tconst value = rules[selector];\n\t\t\t\tconst index = node.sheet.cssRules.length;\n\t\t\t\tconst items = Object.keys(value).map((k) => {\n\t\t\t\t\treturn `${k}:${value[k]}`;\n\t\t\t\t}).join(\";\");\n\t\t\t\tnode.sheet.insertRule(`${selector}{${items}}`, index);\n\t\t\t});\n\t\t\tthis.styles.set(id, node);\n\t\t\tresolve(node);\n\t\t});\n\t}\n\n\t/**\n\t * Append a stylesheet link/rules to the document head\n\t * @param {string} key\n\t * @param {string|object} input url or rules \n\t * @returns {Promise<Node>}\n\t * @example appendStylesheet(\"common\", \"/pach/to/stylesheet.css\")\n\t * @example appendStylesheet(\"common\", \"https://example.com/to/stylesheet.css\")\n\t * @example appendStylesheet(\"common\", { h1: { \"font-size\": \"1.5em\" }})\n\t */\n\tappendStylesheet(key, input) {\n\n\t\tconst def = new Defer();\n\n\t\tif (!this.document) {\n\t\t\tdef.reject(new Error(\"Document cannot be null\"));\n\t\t\treturn def.promise;\n\t\t}\n\n\t\tif (typeof input === \"string\") {\n\t\t\tthis.createLink(key, input).then((node) => {\n\t\t\t\tdef.resolve(node);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.createStyle(key, input).then((node) => {\n\t\t\t\tdef.resolve(node);\n\t\t\t});\n\t\t}\n\n\t\treturn def.promise;\n\t}\n\n\t/**\n\t * Remove a stylesheet link from the document head\n\t * @param {string} key \n\t * @returns {boolean}\n\t */\n\tremoveStylesheet(key) {\n\n\t\tif (!this.document) {\n\t\t\treturn false;\n\t\t}\n\t\tconst id = `epubjs-injected-css-${key}`;\n\t\tconst node = this.styles.get(id);\n\t\tif (typeof node === \"undefined\") {\n\t\t\treturn false;\n\t\t}\n\t\tthis.document.head.removeChild(node);\n\t\treturn this.styles.delete(id);\n\t}\n\n\t/**\n\t * Clear all injected stylesheets\n\t */\n\tclearStylesheets() {\n\n\t\tthis.styles.forEach((node) => {\n\t\t\tthis.document.head.removeChild(node);\n\t\t});\n\t\tthis.styles.clear();\n\t}\n\n\t/**\n\t * Append a script node to the document head\n\t * @param {string} key\n\t * @param {string} src url \n\t * @example appendScript(\"common\", \"/path/to/script.js\")\n\t * @example appendScript(\"common\", \"https://examples.com/to/script.js\")\n\t * @returns {Promise<Node>} loaded\n\t */\n\tappendScript(key, src) {\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tif (!this.document) {\n\t\t\t\treject(new Error(\"Document cannot be null\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst id = `epubjs-injected-src-${key}`;\n\t\t\tlet node = this.styles.get(id);\n\t\t\tif (typeof node === \"undefined\") {\n\t\t\t\tnode = this.document.createElement(\"script\");\n\t\t\t\tnode.type = \"text/javascript\";\n\t\t\t\tnode.src = src;\n\t\t\t\tnode.onload = () => {\n\t\t\t\t\tresolve(node);\n\t\t\t\t};\n\t\t\t\tnode.onerror = () => {\n\t\t\t\t\treject(new Error(`Failed to load source: ${src}`));\n\t\t\t\t};\n\t\t\t\tthis.document.head.appendChild(node);\n\t\t\t}\n\t\t\tthis.scripts.set(id, node);\n\t\t});\n\t}\n\n\t/**\n\t * Remove a script node from the document head\n\t * @param {string} key \n\t * @returns {boolean}\n\t */\n\tremoveScript(key) {\n\n\t\tif (!this.document) {\n\t\t\treturn false;\n\t\t}\n\t\tconst id = `epubjs-injected-src-${key}`;\n\t\tconst node = this.scripts.get(id);\n\t\tif (typeof node === \"undefined\") {\n\t\t\treturn false;\n\t\t}\n\t\tthis.document.head.removeChild(node);\n\t\treturn this.scripts.remove(id);\n\t}\n\n\t/**\n\t * Clear all injected scripts\n\t */\n\tclearScripts() {\n\n\t\tthis.scripts.forEach((node) => {\n\t\t\tthis.document.head.removeChild(node);\n\t\t})\n\t\tthis.scripts.clear();\n\t}\n\n\t/**\n\t * Append a class to the contents container\n\t * @param {string} className\n\t */\n\tappendClass(className) {\n\n\t\tif (!this.document) return;\n\n\t\tconst content = this.content;\n\n\t\tif (content) {\n\t\t\tcontent.classList.add(className);\n\t\t}\n\t}\n\n\t/**\n\t * Remove a class from the contents container\n\t * @param {string} className\n\t */\n\tremoveClass(className) {\n\n\t\tif (!this.document) return;\n\n\t\tconst content = this.content;\n\n\t\tif (content) {\n\t\t\tcontent.classList.remove(className);\n\t\t}\n\t}\n\n\t/**\n\t * Get a Dom Range from EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @param {string} [ignoreClass]\n\t * @returns {Range} range\n\t */\n\trange(cfi, ignoreClass) {\n\n\t\tconst epubcfi = new EpubCFI(cfi);\n\t\treturn epubcfi.toRange(this.document, ignoreClass);\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom Range\n\t * @param {Range} range\n\t * @param {string} [ignoreClass]\n\t * @returns {string} EpubCFI\n\t */\n\tcfiFromRange(range, ignoreClass) {\n\n\t\treturn new EpubCFI(range, this.section.cfiBase, ignoreClass).toString();\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom node\n\t * @param {Node} node\n\t * @param {string} [ignoreClass]\n\t * @returns {string} EpubCFI\n\t */\n\tcfiFromNode(node, ignoreClass) {\n\n\t\treturn new EpubCFI(node, this.section.cfiBase, ignoreClass).toString();\n\t}\n\n\t/**\n\t * map\n\t * @param {Layout} layout \n\t * @todo find where this is used - remove?\n\t * @returns {object[]}\n\t */\n\tmap(layout) {\n\n\t\tconst map = new Mapping(layout);\n\t\treturn map.section();\n\t}\n\n\t/**\n\t * Apply CSS to a Document\n\t * @param {Layout} layout \n\t */\n\tformat(layout) {\n\n\t\tif (layout.flow === \"paginated\") {\n\t\t\tthis.columns(layout);\n\t\t} else {\n\t\t\tthis.size(layout);\n\t\t}\n\t}\n\n\t/**\n\t * Size the contents to a given width and height\n\t * @param {Layout} layout\n\t * @private\n\t */\n\tsize(layout) {\n\n\t\tconst doc = layout.flow === \"scrolled-doc\";\n\t\tconst szw = doc ? layout.pageWidth : layout.width;\n\t\tconst szh = layout.height;\n\t\tconst dir = layout.direction;\n\t\tconst viewport = { scale: 1.0, scalable: \"no\" };\n\n\t\tif (layout.axis === AXIS_V) {\n\t\t\tthis.width(szw);\n\t\t\tviewport.width = szw;\n\t\t\tthis.css(\"height\", \"auto\");\n\t\t\tthis.css(\"padding\", \"20px \" + (szw / 12) + \"px\");\n\t\t} else {\n\t\t\tthis.height(szh);\n\t\t\tviewport.height = szh;\n\t\t\tthis.css(\"width\", \"auto\");\n\t\t\tthis.css(\"padding\", (szw / 17) + \"px 20px\");\n\t\t}\n\n\t\tthis.css(\"overflow\", \"hidden\");\n\t\tthis.css(\"margin\", \"0\");\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\t\tthis.viewport(viewport);\n\t\tthis.direction(dir);\n\t}\n\n\t/**\n\t * Apply columns to the contents for pagination\n\t * @param {Layout} layout\n\t * @private\n\t */\n\tcolumns(layout) {\n\n\t\tconst pgw = layout.pageWidth;\n\t\tconst pgh = layout.pageHeight;\n\t\tconst clw = layout.columnWidth;\n\t\tconst dir = layout.direction;\n\t\tconst gap = layout.gap;\n\n\t\tthis.width(pgw);\n\t\tthis.height(pgh);\n\t\tthis.viewport({\n\t\t\twidth: pgw,\n\t\t\theight: pgh,\n\t\t\tscale: 1.0,\n\t\t\tscalable: \"no\"\n\t\t});\n\t\tthis.direction(dir);\n\n\t\tthis.css(\"overflow\", \"hidden\");\n\t\tthis.css(\"margin\", \"0\", true);\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\t\tthis.css(\"max-height\", \"inherit\");\n\n\t\tif (layout.axis === AXIS_V) {\n\t\t\tthis.css(\"display\", \"flex\");\n\t\t\tthis.css(\"padding-top\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-bottom\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-left\", \"20px\");\n\t\t\tthis.css(\"padding-right\", \"20px\");\n\t\t} else {\n\t\t\tthis.css(\"display\", \"block\");\n\t\t\tthis.css(\"padding-top\", \"20px\");\n\t\t\tthis.css(\"padding-bottom\", \"20px\");\n\t\t\tthis.css(\"padding-left\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-right\", (gap / 2) + \"px\", true);\n\t\t}\n\n\t\tthis.css(\"column-gap\", gap + \"px\");\n\t\tthis.css(\"column-fill\", \"auto\");\n\t\tthis.css(\"column-width\", clw + \"px\");\n\n\t\t// Fix glyph clipping in WebKit\n\t\t// https://github.com/futurepress/epub.js/issues/983\n\t\tthis.css(\"-webkit-line-box-contain\", \"block glyphs replaced\");\n\t}\n\n\t/**\n\t * Scale contents from center\n\t * @param {number} scale\n\t * @param {number} offsetX\n\t * @param {number} offsetY\n\t */\n\tscale(scale, offsetX, offsetY) {\n\n\t\tconst value = \"scale(\" + scale + \")\";\n\n\t\tlet translate = \"\";\n\t\tif (offsetX >= 0 || offsetY >= 0) {\n\t\t\ttranslate = \" translate(\" + (offsetX || 0) + \"px, \" + (offsetY || 0) + \"px )\";\n\t\t}\n\n\t\tthis.css(\"transform\", value + translate);\n\t\tthis.css(\"transform-origin\", \"top left\");\n\t}\n\n\t/**\n\t * Set the direction of the text\n\t * @param {string} [dir='ltr'] values: `\"ltr\"` OR `\"rtl\"`\n\t */\n\tdirection(dir = \"ltr\") {\n\n\t\tthis.document.documentElement.dir = dir;\n\t}\n\n\t/**\n\t * mapPage\n\t * @param {string} cfiBase \n\t * @param {Layout} layout \n\t * @param {number} start \n\t * @param {number} end \n\t * @param {boolean} dev \n\t * @returns {any}\n\t */\n\tmapPage(cfiBase, layout, start, end, dev) {\n\n\t\tconst mapping = new Mapping(layout, dev);\n\t\treturn mapping.page(this, cfiBase, start, end);\n\t}\n\n\t/**\n\t * Set the writingMode of the text\n\t * @param {string} [mode='horizontal-tb'] `\"horizontal-tb\"` OR `\"vertical-rl\"` OR `\"vertical-lr\"`\n\t */\n\twritingMode(mode = \"horizontal-tb\") {\n\n\t\tif (this.mode === mode) return this.mode;\n\t\tconst WRITING_MODE = prefixed(\"writing-mode\");\n\t\tconst elt = this.document.documentElement;\n\t\telt.style[WRITING_MODE] = mode;\n\t\tthis.mode = this.window.getComputedStyle(elt)[WRITING_MODE] || \"\";\n\t\treturn this.mode;\n\t}\n\n\t/**\n\t * Append listeners\n\t * @private\n\t */\n\tappendListeners() {\n\n\t\tif (!this.document) return;\n\t\t//-- DOM EVENTS\n\t\tDOM_EVENTS.forEach(eventName => {\n\t\t\tthis.document.addEventListener(eventName,\n\t\t\t\tthis.triggerEvent.bind(this), { passive: true });\n\t\t}, this);\n\t\t//-- SELECTION\n\t\tthis.document.addEventListener(\"selectionchange\",\n\t\t\tthis.selectionHandler.bind(this), { passive: true }\n\t\t);\n\t\t//-- RESIZE\n\t\tthis.resizeObserver = new ResizeObserver((e) => {\n\t\t\trequestAnimationFrame(() => this.resize(e));\n\t\t});\n\t\tthis.resizeObserver.observe(this.document.documentElement);\n\t\t//-- LINK CLICKED\n\t\treplaceLinks(this.content, (href) => {\n\t\t\tthis.emit(EVENTS.CONTENTS.LINK_CLICKED, href);\n\t\t});\n\t}\n\n\t/**\n\t * Remove listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\n\t\tif (!this.document) return;\n\t\t//-- DOM EVENTS\n\t\tDOM_EVENTS.forEach(eventName => {\n\t\t\tthis.document.removeEventListener(eventName,\n\t\t\t\tthis.triggerEvent.bind(this), { passive: true });\n\t\t}, this);\n\t\t//-- SELECTION\n\t\tthis.document.removeEventListener(\"selectionchange\",\n\t\t\tthis.selectionHandler.bind(this), { passive: true }\n\t\t);\n\t\t//-- RESIZE\n\t\tif (this.resizeObserver) {\n\t\t\tthis.resizeObserver.disconnect();\n\t\t}\n\t\t//-- MUTATION\n\t\tif (this.mutationObserver) {\n\t\t\tthis.mutationObserver.disconnect();\n\t\t}\n\t}\n\n\t/**\n\t * Emit passed browser events\n\t * @private\n\t */\n\ttriggerEvent(e) {\n\n\t\tthis.emit(e.type, e);\n\t}\n\n\t/**\n\t * Handle getting text on selection\n\t * @private\n\t */\n\tselectionHandler(e) {\n\n\t\tif (this.selectionEndTimeout) {\n\t\t\tclearTimeout(this.selectionEndTimeout);\n\t\t}\n\n\t\tthis.selectionEndTimeout = setTimeout(() => {\n\t\t\tconst selection = this.window.getSelection();\n\t\t\tif (!(selection && selection.rangeCount > 0))\n\t\t\t\treturn;\n\t\t\tconst range = selection.getRangeAt(0);\n\t\t\tif (!range.collapsed) {\n\t\t\t\tconst cfirange = new EpubCFI(range, this.section.cfiBase).toString();\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED, cfirange);\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED_RANGE, range);\n\t\t\t}\n\t\t}, 250);\n\t}\n\n\t/**\n\t * Test if images are loaded or add listener for when they load\n\t * @private\n\t */\n\timageLoadListeners() {\n\n\t\tconst images = this.document.querySelectorAll(\"img\");\n\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\tconst img = images[i];\n\n\t\t\tif (typeof img.naturalWidth !== \"undefined\" &&\n\t\t\t\timg.naturalWidth === 0) {\n\t\t\t\timg.onload = this.expand.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Listen for media query changes and emit 'expand' event\n\t * Adapted from: https://github.com/tylergaw/media-query-events/blob/master/js/mq-events.js\n\t * @private\n\t */\n\tmediaQueryListeners() {\n\n\t\tconst sheets = this.document.styleSheets;\n\t\tconst mediaChangeHandler = (m) => {\n\t\t\tif (m.matches) {\n\t\t\t\tsetTimeout(this.expand.bind(this), 1);\n\t\t\t}\n\t\t};\n\n\t\tfor (let i = 0; i < sheets.length; i += 1) {\n\t\t\tlet rules;\n\t\t\t// Firefox errors if we access cssRules cross-domain\n\t\t\ttry {\n\t\t\t\trules = sheets[i].cssRules;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!rules) return; // Stylesheets changed\n\t\t\tfor (let j = 0; j < rules.length; j += 1) {\n\t\t\t\tif (rules[j].media) {\n\t\t\t\t\tconst mql = this.window.matchMedia(rules[j].media.mediaText);\n\t\t\t\t\tmql.onchange = mediaChangeHandler;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Listen for font load and check for resize when loaded (unused)\n\t * @private\n\t */\n\tfontLoadListeners() {\n\n\t\tif (!this.document || !this.document.fonts) {\n\t\t\treturn;\n\t\t}\n\n\t\t//this.document.fonts.ready.then(() => this.resize());\n\t}\n\n\t/**\n\t * Use css transitions to detect resize (unused)\n\t * @private\n\t */\n\ttransitionListeners() {\n\n\t\tconst body = this.content;\n\n\t\tbody.style[\"transitionProperty\"] = \"font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height\";\n\t\tbody.style[\"transitionDuration\"] = \"0.001ms\";\n\t\tbody.style[\"transitionTimingFunction\"] = \"linear\";\n\t\tbody.style[\"transitionDelay\"] = \"0\";\n\n\t\t//this.document.addEventListener('transitionend', this.resize.bind(this));\n\t}\n\n\t/**\n\t * Use MutationObserver to listen for changes in \n\t * the DOM and check for resize (unused)\n\t * @private\n\t */\n\tmutationListener() {\n\n\t\tconst mutation = (mutations, observer) => {\n\n\t\t\tmutations.forEach(m => {\n\t\t\t\t//console.log(m)\n\t\t\t});\n\t\t}\n\n\t\tthis.mutationObserver = new MutationObserver(mutation);\n\t\tthis.mutationObserver.observe(this.document, {\n\t\t\tattributes: true,\n\t\t\tchildList: true,\n\t\t\tcharacterData: true,\n\t\t\tsubtree: true\n\t\t});\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.removeListeners();\n\t\tthis.clearStylesheets();\n\t\tthis.styles = undefined;\n\t\tthis.clearScripts();\n\t\tthis.scripts = undefined;\n\t\tthis.section = undefined;\n\t}\n}\n\nEventEmitter(Contents.prototype);\n\nexport default Contents;","import RangeObject from \"./utils/rangeobject\";\nimport { findChildren, isNumber } from \"./utils/core\";\n\n/**\n * Parsing and creation of EpubCFIs: https://idpf.org/epub/linking/cfi/epub-cfi.html\n * \n * Implements:\n * - Character Offset: `epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)`\n * - Simple Ranges: `epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)`\n * \n * Does Not Implement:\n * - Temporal Offset `(~)`\n * - Spatial Offset `(@)`\n * - Temporal-Spatial Offset `(~ + @)`\n * - Text Location Assertion `([)`\n */\nclass EpubCFI {\n\t/**\n\t * Constructor\n\t * @param {string|Range|Node} [cfiFrom] \n\t * @param {string|object} [base] \n\t * @param {string} [ignoreClass] class to ignore when parsing DOM\n\t */\n\tconstructor(cfiFrom, base, ignoreClass) {\n\t\t/**\n\t\t * @member {object} base\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.base = {};\n\t\t/**\n\t\t * @member {number} spinePos spine position\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.spinePos = 0; // For compatibility\n\t\t/**\n\t\t * @member {object} path\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.path = {};\n\t\t/**\n\t\t * @member {boolean} range\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.range = false;\n\t\t/**\n\t\t * @member {object} start\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.start = null;\n\t\t/**\n\t\t * @member {object} end\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.end = null;\n\t\t/**\n\t\t * @member {string} str EpubCFI string format\n\t\t * @memberof EpubCFI\n\t\t * @readonly\n\t\t */\n\t\tthis.str = \"\";\n\n\t\t// Allow instantiation without the \"new\" keyword\n\t\tif (!(this instanceof EpubCFI)) {\n\t\t\treturn new EpubCFI(cfiFrom, base, ignoreClass);\n\t\t}\n\n\t\tif (typeof base === \"string\") {\n\t\t\tthis.base = this.parseComponent(base);\n\t\t\tthis.spinePos = this.base.steps[1].index;\n\t\t} else if (typeof base === \"object\" && base.steps) {\n\t\t\tthis.base = base;\n\t\t}\n\n\t\tconst type = this.checkType(cfiFrom);\n\t\tif (type === \"string\") {\n\t\t\treturn this.parse(cfiFrom);\n\t\t} else if (type === \"range\") {\n\t\t\treturn this.fromRange(cfiFrom, this.base, ignoreClass);\n\t\t} else if (type === \"node\") {\n\t\t\treturn this.fromNode(cfiFrom, this.base, ignoreClass);\n\t\t} else if (type === \"EpubCFI\" && cfiFrom.path) {\n\t\t\treturn cfiFrom;\n\t\t} else if (cfiFrom === undefined) {\n\t\t\treturn this;\n\t\t} else {\n\t\t\tthrow new TypeError(\"not a valid argument for EpubCFI\");\n\t\t}\n\t}\n\n\t/**\n\t * Check the type of constructor input\n\t * @param {string|Range|Node} cfi\n\t * @returns {string} argument type\n\t * @private\n\t */\n\tcheckType(cfi) {\n\n\t\tif (typeof cfi === \"undefined\") {\n\t\t\treturn undefined;\n\t\t} else if (this.isCfiString(cfi)) {\n\t\t\treturn \"string\";\n\t\t} else if (typeof cfi === \"object\") {\n\t\t\tif (cfi instanceof Range || \n\t\t\t\ttypeof cfi.startContainer !== \"undefined\") {\n\t\t\t\treturn \"range\";\n\t\t\t} else if (cfi instanceof Node) {\n\t\t\t\treturn \"node\";\n\t\t\t} else if (cfi instanceof EpubCFI) {\n\t\t\t\treturn \"EpubCFI\";\n\t\t\t} else return undefined;\n\t\t} else return undefined;\n\t}\n\n\t/**\n\t * Collapse a CFI Range to a single CFI Position\n\t * @param {boolean} [toStart]\n\t */\n\tcollapse(toStart) {\n\n\t\tif (this.range === false) return;\n\n\t\tif (toStart) {\n\t\t\tthis.path.steps = this.path.steps.concat(this.start.steps);\n\t\t\tthis.path.terminal = this.start.terminal;\n\t\t} else {\n\t\t\tthis.path.steps = this.path.steps.concat(this.end.steps);\n\t\t\tthis.path.terminal = this.end.terminal;\n\t\t}\n\n\t\tthis.range = false;\n\t}\n\n\t/**\n\t * Compare which of two CFIs is earlier in the text\n\t * @param {string|EpubCFI} cfiOne \n\t * @param {string|EpubCFI} cfiTwo \n\t * @returns {number} First is earlier = -1, Second is earlier = 1, They are equal = 0 \n\t */\n\tcompare(cfiOne, cfiTwo) {\n\n\t\tif (typeof cfiOne === \"string\") {\n\t\t\tcfiOne = new EpubCFI(cfiOne);\n\t\t}\n\t\tif (typeof cfiTwo === \"string\") {\n\t\t\tcfiTwo = new EpubCFI(cfiTwo);\n\t\t}\n\t\t// Compare Spine Positions\n\t\tif (cfiOne.spinePos > cfiTwo.spinePos) return 1;\n\t\tif (cfiOne.spinePos < cfiTwo.spinePos) return -1;\n\n\t\tlet stepsA, terminalA;\n\t\tif (cfiOne.range) {\n\t\t\tstepsA = cfiOne.path.steps.concat(cfiOne.start.steps);\n\t\t\tterminalA = cfiOne.start.terminal;\n\t\t} else {\n\t\t\tstepsA = cfiOne.path.steps;\n\t\t\tterminalA = cfiOne.path.terminal;\n\t\t}\n\n\t\tlet stepsB, terminalB;\n\t\tif (cfiTwo.range) {\n\t\t\tstepsB = cfiTwo.path.steps.concat(cfiTwo.start.steps);\n\t\t\tterminalB = cfiTwo.start.terminal;\n\t\t} else {\n\t\t\tstepsB = cfiTwo.path.steps;\n\t\t\tterminalB = cfiTwo.path.terminal;\n\t\t}\n\t\t// Compare Each Step in the First item\n\t\tfor (let i = 0; i < stepsA.length; i++) {\n\t\t\tif (!stepsA[i]) return -1;\n\t\t\tif (!stepsB[i]) return 1;\n\t\t\tif (stepsA[i].index > stepsB[i].index) return 1;\n\t\t\tif (stepsA[i].index < stepsB[i].index) return -1;\n\t\t}\n\t\t// All steps in First equal to Second and First is Less Specific\n\t\tif (stepsA.length < stepsB.length) return -1;\n\n\t\t// Compare the character offset of the text node\n\t\tif (terminalA.offset > terminalB.offset) return 1;\n\t\tif (terminalA.offset < terminalB.offset) return -1;\n\n\t\treturn 0; // CFI's are equal\n\t}\n\n\t/**\n\t * Generate chapter component\n\t * @param {number} spineNodeIndex\n\t * @param {number} position\n\t * @param {string} [id] \n\t * @returns {string} EpubCFI string format\n\t */\n\tgenerateChapterComponent(spineNodeIndex, position, id) {\n\n\t\tconst pos = parseInt(position);\n\t\tconst index = (spineNodeIndex + 1) * 2;\n\t\tlet cfi = \"/\" + index + \"/\";\n\t\tcfi += (pos + 1) * 2;\n\t\tif (id) cfi += \"[\" + id + \"]\";\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get chapter component\n\t * @param {string} cfiStr EpubCFI string format\n\t * @example in: /6/4!/4/1:0 out: /6/4\n\t * @returns {string} Base component\n\t * @private\n\t */\n\tgetBaseComponent(cfiStr) {\n\n\t\tconst indirection = cfiStr.split(\"!\");\n\t\treturn indirection[0];\n\t}\n\n\t/**\n\t * Get path component\n\t * @param {string} cfiStr EpubCFI string format\n\t * @example in: /6/4!/4/1:0 out: /4/1:0\n\t * @returns {string} Path component\n\t * @private\n\t */\n\tgetPathComponent(cfiStr) {\n\n\t\tconst indirection = cfiStr.split(\"!\");\n\t\tif (indirection[1]) {\n\t\t\tconst ranges = indirection[1].split(\",\");\n\t\t\treturn ranges[0];\n\t\t}\n\t}\n\n\t/**\n\t * getRange\n\t * @param {string} cfiStr EubCFI string format\n\t * @example in: /6/4!/4/1:0\n\t * @returns {object[]} An array of ranges or null if the array length is not 3\n\t * @private\n\t */\n\tgetRange(cfiStr) {\n\n\t\tconst ranges = cfiStr.split(\",\");\n\n\t\tif (ranges.length === 3) {\n\t\t\treturn [\n\t\t\t\tranges[1],\n\t\t\t\tranges[2]\n\t\t\t];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * getCharecterOffsetComponent (unused)\n\t * @param {string} cfiStr \n\t * @returns {string}\n\t * @private\n\t */\n\tgetCharecterOffsetComponent(cfiStr) {\n\n\t\tconst arr = cfiStr.split(\":\");\n\t\treturn arr[1] || \"\";\n\t}\n\n\t/**\n\t * joinSteps\n\t * @param {object[]} steps \n\t * @returns {string} \n\t * @private\n\t */\n\tjoinSteps(steps) {\n\n\t\tif (!steps) return \"\";\n\t\treturn steps.map(part => {\n\n\t\t\tlet segment = \"\";\n\t\t\tif (part.type === \"element\") {\n\t\t\t\tsegment += (part.index + 1) * 2;\n\t\t\t}\n\t\t\tif (part.type === \"text\") {\n\t\t\t\tsegment += 1 + (2 * part.index); // TODO: double check that this is odd\n\t\t\t}\n\t\t\tif (part.id) {\n\t\t\t\tsegment += \"[\" + part.id + \"]\";\n\t\t\t}\n\t\t\treturn segment;\n\n\t\t}).join(\"/\");\n\t}\n\n\t/**\n\t * pathTo\n\t * @param {Node} node \n\t * @param {number} offset \n\t * @param {string} [ignoreClass] \n\t * @returns {object} segment object\n\t * @private\n\t */\n\tpathTo(node, offset, ignoreClass) {\n\n\t\tconst segment = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t}\n\n\t\tlet step, curNode = node;\n\t\twhile (curNode && \n\t\t\tcurNode.parentNode && \n\t\t\tcurNode.parentNode.nodeType !== Node.DOCUMENT_NODE) {\n\n\t\t\tif (ignoreClass) {\n\t\t\t\tstep = this.filteredStep(curNode, ignoreClass);\n\t\t\t} else {\n\t\t\t\tstep = this.step(curNode);\n\t\t\t}\n\n\t\t\tif (step) segment.steps.unshift(step);\n\t\t\tcurNode = curNode.parentNode;\n\t\t}\n\n\t\tif (offset !== null && offset >= 0) {\n\t\t\tsegment.terminal.offset = offset;\n\t\t\t// Make sure we are getting to a textNode if there is an offset\n\t\t\tif (segment.steps[segment.steps.length - 1].type !== \"text\") {\n\t\t\t\tsegment.steps.push({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\ttype: \"text\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn segment;\n\t}\n\n\t/**\n\t * equalStep\n\t * @param {object} stepA \n\t * @param {object} stepB \n\t * @returns {boolean}\n\t * @private\n\t */\n\tequalStep(stepA, stepB) {\n\n\t\tif (stepA && stepB &&\n\t\t\tstepA.id === stepB.id &&\n\t\t\tstepA.index === stepB.index &&\n\t\t\tstepA.type === stepB.type) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * filter\n\t * @param {Node} node \n\t * @param {string} [ignoreClass] \n\t * @returns {Node} \n\t * @private\n\t */\n\tfilter(node, ignoreClass) {\n\n\t\tlet parent;\n\t\tlet isText;\n\t\tlet needsIgnoring;\n\n\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\tisText = true;\n\t\t\tparent = node.parentNode;\n\t\t\tneedsIgnoring = node.parentNode.classList.contains(ignoreClass);\n\t\t} else {\n\t\t\tisText = false;\n\t\t\tneedsIgnoring = node.classList.contains(ignoreClass);\n\t\t}\n\n\t\tif (needsIgnoring && isText) {\n\t\t\tconst prevSibling = parent.previousSibling;\n\t\t\tconst nextSibling = parent.nextSibling;\n\t\t\tlet sibling; // to join with\n\n\t\t\t// If the sibling is a text node, join the nodes\n\t\t\tif (prevSibling && prevSibling.nodeType === Node.TEXT_NODE) {\n\t\t\t\tsibling = prevSibling;\n\t\t\t} else if (nextSibling && nextSibling.nodeType === Node.TEXT_NODE) {\n\t\t\t\tsibling = nextSibling;\n\t\t\t}\n\n\t\t\treturn sibling || node;\n\n\t\t} else if (needsIgnoring && !isText) {\n\t\t\t// Otherwise just skip the element node\n\t\t\treturn null;\n\t\t} else {\n\t\t\t// No need to filter\n\t\t\treturn node;\n\t\t}\n\t}\n\n\t/**\n\t * filteredPosition\n\t * @param {Node} node \n\t * @param {string} [ignoreClass] \n\t * @returns {number} index\n\t * @private\n\t */\n\tfilteredPosition(node, ignoreClass) {\n\n\t\tlet children, map;\n\n\t\tif (node.nodeType === Node.ELEMENT_NODE) {\n\t\t\tchildren = node.parentNode.children;\n\t\t\tmap = this.normalizedMap(children, Node.ELEMENT_NODE, ignoreClass);\n\t\t} else {\n\t\t\tchildren = node.parentNode.childNodes;\n\t\t\t// Inside an ignored node\n\t\t\tif (node.parentNode.classList.contains(ignoreClass)) {\n\t\t\t\tnode = node.parentNode;\n\t\t\t\tchildren = node.parentNode.childNodes;\n\t\t\t}\n\t\t\tmap = this.normalizedMap(children, Node.TEXT_NODE, ignoreClass);\n\t\t}\n\n\t\tconst index = Array.prototype.indexOf.call(children, node);\n\n\t\treturn map[index];\n\t}\n\n\t/**\n\t * filteredStep\n\t * @param {Node} node \n\t * @param {string} ignoreClass \n\t * @returns {object} step\n\t * @private\n\t */\n\tfilteredStep(node, ignoreClass) {\n\n\t\tconst _node = this.filter(node, ignoreClass);\n\n\t\t// Node filtered, so ignore\n\t\tif (_node === null) return;\n\t\treturn {\n\t\t\tid: _node.id,\n\t\t\tindex: this.filteredPosition(_node, ignoreClass),\n\t\t\ttagName: _node.tagName,\n\t\t\ttype: (_node.nodeType === Node.TEXT_NODE) ? \"text\" : \"element\"\n\t\t}\n\t}\n\n\t/**\n\t * findNode\n\t * @param {object[]} steps \n\t * @param {Document} [doc] \n\t * @param {string} [ignoreClass] \n\t * @returns {Node}\n\t * @private\n\t */\n\tfindNode(steps, doc, ignoreClass) {\n\n\t\tconst _doc = doc || document;\n\t\tlet container;\n\n\t\tif (ignoreClass) {\n\t\t\tcontainer = this.walkToNode(steps, _doc, ignoreClass);\n\t\t} else if (typeof _doc.evaluate !== \"undefined\") {\n\t\t\tconst xpath = this.stepsToXpath(steps);\n\t\t\tconst xtype = XPathResult.FIRST_ORDERED_NODE_TYPE;\n\t\t\tcontainer = _doc.evaluate(xpath, _doc, null, xtype, null).singleNodeValue;\n\t\t} else {\n\t\t\tcontainer = this.walkToNode(steps, _doc);\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * fixMiss\n\t * @param {object[]} steps \n\t * @param {number} offset \n\t * @param {Document} [doc] \n\t * @param {string} [ignoreClass] \n\t * @returns {object|void}\n\t * @private\n\t */\n\tfixMiss(steps, offset, doc, ignoreClass) {\n\n\t\tlet container = this.findNode(steps.slice(0, -1), doc, ignoreClass);\n\t\tconst children = container.childNodes;\n\t\tconst lastStepIndex = steps[steps.length - 1].index;\n\t\tconst map = this.normalizedMap(children, Node.TEXT_NODE, ignoreClass);\n\n\t\tfor (const childIndex in map) {\n\n\t\t\tif (!map.hasOwnProperty(childIndex)) return;\n\n\t\t\tif (map[childIndex] === lastStepIndex) {\n\t\t\t\tconst child = children[childIndex];\n\t\t\t\tconst len = child.textContent.length;\n\t\t\t\tif (offset > len) {\n\t\t\t\t\toffset = offset - len;\n\t\t\t\t} else {\n\t\t\t\t\tif (child.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\t\tcontainer = child.childNodes[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer = child;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcontainer: container,\n\t\t\toffset: offset\n\t\t}\n\t}\n\n\t/**\n\t * Create a EpubCFI object from a Node\n\t * @param {Node} node\n\t * @param {string|object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI}\n\t */\n\tfromNode(node, base, ignoreClass) {\n\n\t\tconst cfi = new EpubCFI();\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tcfi.path = this.pathTo(node, null, ignoreClass);\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Create a CFI object from a Range\n\t * @param {Range} range\n\t * @param {string|object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} \n\t */\n\tfromRange(range, base, ignoreClass) {\n\n\t\tconst cfi = new EpubCFI();\n\t\tconst start = range.startContainer;\n\t\tconst doc = start.ownerDocument;\n\t\tconst end = range.endContainer;\n\t\tlet startOffset = range.startOffset;\n\t\tlet endOffset = range.endOffset;\n\t\tlet needsIgnoring = false;\n\n\t\tif (ignoreClass) {\n\t\t\t// Tell pathTo if / what to ignore\n\t\t\tneedsIgnoring = (doc.querySelector(\".\" + ignoreClass) !== null);\n\t\t}\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tif (range.collapsed) {\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\t\t\tcfi.path = this.pathTo(start, startOffset, ignoreClass);\n\t\t} else {\n\t\t\tcfi.range = true;\n\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.start = this.pathTo(start, startOffset, ignoreClass);\n\t\t\tif (needsIgnoring) {\n\t\t\t\tendOffset = this.patchOffset(end, endOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.end = this.pathTo(end, endOffset, ignoreClass);\n\n\t\t\t// Create a new empty path\n\t\t\tcfi.path = {\n\t\t\t\tsteps: [],\n\t\t\t\tterminal: null\n\t\t\t}\n\n\t\t\t// Push steps that are shared between start and end to the common path\n\t\t\tfor (let i = 0, len = cfi.start.steps.length; i < len; i++) {\n\t\t\t\tif (this.equalStep(cfi.start.steps[i], cfi.end.steps[i])) {\n\t\t\t\t\tif (i === len - 1) {\n\t\t\t\t\t\t// Last step is equal, check terminals\n\t\t\t\t\t\tif (cfi.start.terminal === cfi.end.terminal) {\n\t\t\t\t\t\t\t// CFI's are equal\n\t\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t\t\t// Not a range\n\t\t\t\t\t\t\tcfi.range = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcfi.start.steps = cfi.start.steps.slice(cfi.path.steps.length);\n\t\t\tcfi.end.steps = cfi.end.steps.slice(cfi.path.steps.length);\n\n\t\t\t// TODO: Add Sanity check to make sure that the end if greater than the start\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Check if a string is wrapped with \"epubcfi()\"\n\t * @param {string} str EpubCFI string format\n\t * @returns {boolean} `true` if the string is valid, `false` otherwise\n\t */\n\tisCfiString(str) {\n\n\t\tif (typeof str === \"string\" &&\n\t\t\tstr.indexOf(\"epubcfi(\") === 0 &&\n\t\t\tstr[str.length - 1] === \")\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * normalizedMap\n\t * @param {Node[]} children \n\t * @param {number} nodeType \n\t * @param {string} [ignoreClass] \n\t * @returns {object}\n\t * @private\n\t */\n\tnormalizedMap(children, nodeType, ignoreClass) {\n\n\t\tconst output = {};\n\t\tlet prevIndex = -1;\n\t\tlet currNodeType;\n\t\tlet prevNodeType;\n\n\t\tfor (let i = 0, len = children.length; i < len; i++) {\n\n\t\t\tcurrNodeType = children[i].nodeType;\n\n\t\t\t// Check if needs ignoring\n\t\t\tif (currNodeType === Node.ELEMENT_NODE &&\n\t\t\t\tchildren[i].classList.contains(ignoreClass)) {\n\t\t\t\tcurrNodeType = Node.TEXT_NODE;\n\t\t\t}\n\n\t\t\tif (i > 0 &&\n\t\t\t\tcurrNodeType === Node.TEXT_NODE &&\n\t\t\t\tprevNodeType === Node.TEXT_NODE) {\n\t\t\t\t// join text nodes\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t} else if (nodeType === currNodeType) {\n\t\t\t\tprevIndex = prevIndex + 1;\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t}\n\n\t\t\tprevNodeType = currNodeType;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * Parse a cfi string to a EpubCFI object representation\n\t * @param {string} cfiStr EpubCFI string format\n\t * @returns {EpubCFI} EpubCFI object\n\t */\n\tparse(cfiStr) {\n\n\t\tconst cfi = new EpubCFI();\n\n\t\tif (typeof cfiStr !== \"string\") {\n\t\t\tthrow new TypeError(\"invalid argument type\");\n\t\t}\n\n\t\tif (this.isCfiString(cfiStr)) {\n\t\t\t// Remove initial 'epubcfi(' and ending ')'\n\t\t\tcfi.str = cfiStr; // save EpubCFI string\n\t\t\tcfiStr = cfiStr.slice(8, cfiStr.length - 1);\n\t\t} else {\n\t\t\tthrow new Error(\"invalid EpubCFI string format\");\n\t\t}\n\n\t\tconst baseComponent = this.getBaseComponent(cfiStr);\n\n\t\t// Make sure this is a valid cfi or return\n\t\tif (!baseComponent) {\n\t\t\tcfi.spinePos = -1;\n\t\t\treturn cfi;\n\t\t}\n\n\t\tcfi.base = this.parseComponent(baseComponent);\n\n\t\tconst pathComponent = this.getPathComponent(cfiStr);\n\t\tcfi.path = this.parseComponent(pathComponent);\n\n\t\tconst range = this.getRange(cfiStr);\n\t\tif (range) {\n\t\t\tcfi.range = true;\n\t\t\tcfi.start = this.parseComponent(range[0]);\n\t\t\tcfi.end = this.parseComponent(range[1]);\n\t\t}\n\n\t\t// Get spine node position\n\t\t// cfi.spineSegment = cfi.base.steps[1];\n\n\t\t// Chapter segment is always the second step\n\t\tcfi.spinePos = cfi.base.steps[1].index;\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Parsing the component string value\n\t * @param {string} value string value\n\t * @example in: /4/1:1 out: object\n\t * @returns {object} component object\n\t * @private\n\t */\n\tparseComponent(value) {\n\n\t\tconst component = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t}\n\n\t\tconst parts = value.split(\":\");\n\t\tconst steps = parts[0].split(\"/\");\n\n\t\tif (parts.length > 1) {\n\t\t\tcomponent.terminal = this.parseTerminal(parts[1]);\n\t\t}\n\n\t\tif (steps[0] === \"\") {\n\t\t\tsteps.shift(); // Ignore the first slash\n\t\t}\n\n\t\tcomponent.steps = steps.map(step => this.parseStep(step));\n\t\treturn component;\n\t}\n\n\t/**\n\t * Parsing the step string value\n\t * Check if step is a text node or element\n\t * @param {string} str string value\n\t * @returns {object} step object\n\t * @private\n\t */\n\tparseStep(str) {\n\n\t\tconst num = parseInt(str);\n\t\tif (isNaN(num)) return;\n\t\tconst isElement = (num % 2 === 0);\n\t\tconst hasBrackets = str.match(/\\[(.*)\\]/);\n\t\treturn {\n\t\t\tid: hasBrackets && hasBrackets[1] ? hasBrackets[1] : null,\n\t\t\tindex: isElement ? num / 2 - 1 : (num - 1) / 2,\n\t\t\ttype: isElement ? \"element\" : \"text\"\n\t\t}\n\t}\n\n\t/**\n\t * Parsing the terminal string value\n\t * @param {string} str string value\n\t * @returns {object} terminal object\n\t * @private\n\t */\n\tparseTerminal(str) {\n\n\t\tconst arr = str.match(/\\[(.*)\\]/);\n\t\tconst cmp = arr && arr[1];\n\t\tconst txt = cmp ? str.split(\"[\")[0] : str;\n\t\tconst num = parseInt(txt);\n\t\treturn {\n\t\t\tassertion: cmp ? arr[1] : null,\n\t\t\toffset: isNumber(num) ? num : null\n\t\t}\n\t}\n\n\t/**\n\t * Get patch offset of text node\n\t * @param {Node} node \n\t * @param {number} offset \n\t * @param {string} [ignoreClass] \n\t * @returns {number} Total offset\n\t * @private\n\t */\n\tpatchOffset(node, offset, ignoreClass) {\n\n\t\tif (node.nodeType !== Node.TEXT_NODE) {\n\t\t\tthrow new Error(\"Anchor must be a text node\");\n\t\t}\n\n\t\tlet curr = node;\n\t\tlet totalOffset = offset;\n\n\t\t// If the parent is a ignored node, get offset from it's start\n\t\tif (node.parentNode.classList.contains(ignoreClass)) {\n\t\t\tcurr = node.parentNode;\n\t\t}\n\n\t\twhile (curr.previousSibling) {\n\n\t\t\tif (curr.previousSibling.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t// Originally a text node, so join\n\t\t\t\tif (curr.previousSibling.classList.contains(ignoreClass)) {\n\t\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t\t} else {\n\t\t\t\t\tbreak; // Normal node, dont join\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If the previous sibling is a text node, join the nodes\n\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t}\n\t\t\tcurr = curr.previousSibling;\n\t\t}\n\n\t\treturn totalOffset;\n\t}\n\n\t/**\n\t * Get position index\n\t * @param {Node} node \n\t * @returns {number} Position index\n\t * @private\n\t */\n\tposition(node) {\n\n\t\tlet children, index;\n\n\t\tif (node.nodeType === Node.ELEMENT_NODE) {\n\t\t\tchildren = node.parentNode.children;\n\t\t\tif (!children) {\n\t\t\t\tchildren = findChildren(node.parentNode);\n\t\t\t}\n\t\t\tindex = Array.prototype.indexOf.call(children, node);\n\t\t} else {\n\t\t\tchildren = this.textNodes(node.parentNode);\n\t\t\tindex = children.indexOf(node);\n\t\t}\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * segmentString\n\t * @param {object} segment \n\t * @returns {string}\n\t * @private\n\t */\n\tsegmentString(segment) {\n\n\t\tlet str = \"/\";\n\t\tstr += this.joinSteps(segment.steps);\n\n\t\tif (segment.terminal && segment.terminal.offset !== null) {\n\t\t\tstr += \":\" + segment.terminal.offset;\n\t\t}\n\t\tif (segment.terminal && segment.terminal.assertion !== null) {\n\t\t\tstr += \"[\" + segment.terminal.assertion + \"]\";\n\t\t}\n\n\t\treturn str;\n\t}\n\n\t/**\n\t * step\n\t * @param {Node} node \n\t * @returns {object} step object\n\t * @private\n\t */\n\tstep(node) {\n\n\t\treturn {\n\t\t\tid: node.id,\n\t\t\tindex: this.position(node),\n\t\t\ttagName: node.tagName,\n\t\t\ttype: (node.nodeType === Node.TEXT_NODE) ? \"text\" : \"element\"\n\t\t}\n\t}\n\n\t/**\n\t * stepsToXpath\n\t * @param {object[]} steps \n\t * @returns {string}\n\t * @private\n\t */\n\tstepsToXpath(steps) {\n\n\t\tconst xpath = [\".\", \"*\"];\n\n\t\tsteps.forEach(step => {\n\n\t\t\tconst position = step.index + 1;\n\n\t\t\tif (step.id) {\n\t\t\t\txpath.push(\"*[position()=\" + position + \" and @id='\" + step.id + \"']\");\n\t\t\t} else if (step.type === \"text\") {\n\t\t\t\txpath.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\txpath.push(\"*[\" + position + \"]\");\n\t\t\t}\n\t\t})\n\n\t\treturn xpath.join(\"/\");\n\t}\n\n\t/**\n\t * stepsToQuerySelector (unused)\n\t * @param {object[]} steps \n\t * @returns {string}\n\t * @private\n\t */\n\tstepsToQuerySelector(steps) {\n\n\t\tconst query = [\"html\"];\n\n\t\tsteps.forEach(step => {\n\n\t\t\tconst position = step.index + 1;\n\t\t\tif (step.id) {\n\t\t\t\tquery.push(\"#\" + step.id);\n\t\t\t} else if (step.type === \"text\") {\n\t\t\t\t// unsupported in querySelector\n\t\t\t\t// query.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\tquery.push(\"*:nth-child(\" + position + \")\");\n\t\t\t}\n\t\t});\n\n\t\treturn query.join(\">\");\n\t}\n\n\t/**\n\t * textNodes\n\t * @param {Node} container \n\t * @param {string} [ignoreClass] \n\t * @returns {object[]}\n\t * @private\n\t */\n\ttextNodes(container, ignoreClass) {\n\n\t\treturn Array.prototype.slice.call(container.childNodes).filter(node => {\n\t\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\t\treturn true;\n\t\t\t} else if (node.classList.contains(ignoreClass)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\t}\n\n\t/**\n\t * Creates a DOM range representing a CFI\n\t * @param {Document} [doc] document referenced in the base\n\t * @param {string} [ignoreClass]\n\t * @return {Range}\n\t */\n\ttoRange(doc, ignoreClass) {\n\n\t\tconst _doc = doc || document;\n\t\tlet start, end, startContainer, endContainer;\n\t\tlet startSteps, endSteps, hasOffset;\n\t\tconst needsIgnoring = ignoreClass && (_doc.querySelector(\".\" + ignoreClass) !== null);\n\t\tconst reqClass = needsIgnoring ? ignoreClass : undefined;\n\n\t\tlet range, missed;\n\t\tif (typeof (_doc.createRange) !== \"undefined\") {\n\t\t\trange = _doc.createRange();\n\t\t} else {\n\t\t\trange = new RangeObject();\n\t\t}\n\n\t\tif (this.range) {\n\t\t\tstart = this.start;\n\t\t\tstartSteps = this.path.steps.concat(start.steps);\n\t\t\tstartContainer = this.findNode(startSteps, _doc, reqClass);\n\t\t\tend = this.end;\n\t\t\tendSteps = this.path.steps.concat(end.steps);\n\t\t\tendContainer = this.findNode(endSteps, _doc, reqClass);\n\t\t} else {\n\t\t\tstart = this.path;\n\t\t\tstartSteps = this.path.steps;\n\t\t\tstartContainer = this.findNode(startSteps, _doc, reqClass);\n\t\t}\n\n\t\tif (startContainer) {\n\t\t\ttry {\n\t\t\t\thasOffset = start.terminal.offset !== null;\n\t\t\t\trange.setStart(startContainer, hasOffset ? start.terminal.offset : 0);\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(startSteps, start.terminal.offset, _doc, reqClass);\n\t\t\t\trange.setStart(missed.container, missed.offset);\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"No startContainer found for\", this.toString());\n\t\t\treturn null; // No start found\n\t\t}\n\n\t\tif (endContainer) {\n\t\t\ttry {\n\t\t\t\thasOffset = end.terminal.offset !== null;\n\t\t\t\trange.setEnd(endContainer, hasOffset ? end.terminal.offset : 0);\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(endSteps, this.end.terminal.offset, _doc, reqClass);\n\t\t\t\trange.setEnd(missed.container, missed.offset);\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\n\t\treturn range;\n\t}\n\n\t/**\n\t * Convert CFI to a epubcfi(...) string\n\t * @returns {string} EpubCFI string format\n\t */\n\ttoString() {\n\n\t\tlet str = \"epubcfi(\";\n\t\tstr += this.segmentString(this.base);\n\t\tstr += \"!\";\n\t\tstr += this.segmentString(this.path);\n\t\t// Add Range, if present\n\t\tif (this.range && this.start) {\n\t\t\tstr += \",\";\n\t\t\tstr += this.segmentString(this.start);\n\t\t}\n\t\tif (this.range && this.end) {\n\t\t\tstr += \",\";\n\t\t\tstr += this.segmentString(this.end);\n\t\t}\n\t\tstr += \")\";\n\t\treturn str;\n\t}\n\n\t/**\n\t * walkToNode\n\t * @param {object[]} steps \n\t * @param {Document} [doc] \n\t * @param {string} [ignoreClass] \n\t * @returns {Node}\n\t * @private\n\t */\n\twalkToNode(steps, doc, ignoreClass) {\n\n\t\tconst _doc = doc || document;\n\t\tlet container = _doc.documentElement;\n\n\t\tfor (let i = 0, len = steps.length; i < len; i++) {\n\t\t\tconst step = steps[i];\n\n\t\t\tif (step.type === \"element\") {\n\t\t\t\t//better to get a container using id as some times step.index may not be correct\n\t\t\t\t//For ex.https://github.com/futurepress/epub.js/issues/561\n\t\t\t\tif (step.id) {\n\t\t\t\t\tcontainer = _doc.getElementById(step.id);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst children = container.children || findChildren(container);\n\t\t\t\t\tcontainer = children[step.index];\n\t\t\t\t}\n\t\t\t} else if (step.type === \"text\") {\n\t\t\t\tcontainer = this.textNodes(container, ignoreClass)[step.index];\n\t\t\t}\n\t\t\tif (!container) {\n\t\t\t\t//Break the for loop as due to incorrect index we can get error if\n\t\t\t\t//container is undefined so that other functionailties works fine\n\t\t\t\t//like navigation\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn container;\n\t}\n}\n\nexport default EpubCFI;","import { isXml, parse } from \"./utils/core\";\nimport Defer from \"./utils/defer\";\nimport Path from \"./utils/path\";\n\n/**\n * Base class for Archive and Storage\n */\nclass Input {\n\t/**\n\t * Constructor\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * @member {object} instance\n\t\t * @memberof Input\n\t\t * @readonly\n\t\t */\n\t\tthis.instance = null;\n\t}\n\n\t/**\n\t * Request a URL from entries\n\t * @param {string} url a URL to request\n\t * @param {string} [type] specify the type of the returned result\n\t * @returns {Promise<Blob|string|JSON|Document|XMLDocument>}\n\t */\n\tasync request(url, type) {\n\n\t\ttype = type || new Path(url).extension;\n\n\t\tlet response;\n\t\tif (type === \"blob\" || type === \"binary\") {\n\t\t\tresponse = this.getBlob(url);\n\t\t} else if (type === \"base64\") {\n\t\t\tresponse = this.getBase64(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\t\treturn response.then((r) => {\n\t\t\tconst deferred = new Defer();\n\t\t\tif (r) {\n\t\t\t\tconst result = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t} else {\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tmessage: \"File not found in: \" + url,\n\t\t\t\t\tstack: new Error().stack\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @param {any} response\n\t * @param {string} [type]\n\t * @returns {any} the parsed result\n\t */\n\thandleResponse(response, type) {\n\n\t\tlet r;\n\t\tif (isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t} else if (type === \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t} else if (type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t} else if (type === \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t} else {\n\t\t\tr = response;\n\t\t}\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from entries by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<Blob|null>}\n\t * @abstract\n\t */\n\tasync getBlob(url, mimeType) { }\n\n\t/**\n\t * Get a Text from entries by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<string|null>}\n\t * @abstract\n\t */\n\tasync getText(url, mimeType) { }\n\n\t/**\n\t * Get a base64 encoded result from entries by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<string|null>} base64 encoded\n\t * @abstract\n\t */\n\tasync getBase64(url, mimeType) { }\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.instance = undefined;\n\t}\n}\n\nexport default Input;","import { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Figures out the CSS values to apply for a layout\n */\nclass Layout {\n\t/**\n\t * Constructor\n\t * @param {object} [options] \n\t * @param {string} [options.axis='horizontal'] values: `\"horizontal\"` OR `\"vertical\"`\n\t * @param {string} [options.flow='paginated'] values: `\"paginated\"` OR `\"scrolled\"` OR `\"scrolled-doc\"`\n\t * @param {string} [options.spread='auto'] values: `\"auto\"` OR `\"none\"`\n\t * @param {string} [options.direction='ltr'] values: `\"ltr\"` OR `\"rtl\"`\n\t * @param {string} [options.orientation='auto'] values: `\"auto\"` OR `\"landscape\"` OR `\"portrait\"`\n\t * @param {number} [options.minSpreadWidth=800]\n\t * @param {number} [options.pageWidth] page width\n\t * @param {number} [options.pageHeight] page height\n\t */\n\tconstructor(options) {\n\t\t/**\n\t\t * @member {string} axis\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.axis = \"horizontal\";\n\t\t/**\n\t\t * @member {string} name Layout name\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.name = \"reflowable\";\n\t\t/**\n\t\t * @member {string} flow\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.flow = \"paginated\";\n\t\t/**\n\t\t * @member {boolean} spread\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.spread = \"auto\";\n\t\t/**\n\t\t * @member {string} direction\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.direction = \"ltr\";\n\t\t/**\n\t\t * @member {string} orientation no implementation\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.orientation = \"auto\";\n\t\t/**\n\t\t * @member {string} viewport no implementation\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.viewport = \"\";\n\t\t/**\n\t\t * @member {number} minSpreadWidth\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.minSpreadWidth = 800;\n\t\t/**\n\t\t * @member {number} width Layout width\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.width = 0;\n\t\t/**\n\t\t * @member {number} height Layout height\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.height = 0;\n\t\t/**\n\t\t * @member {number} pageWidth\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.pageWidth = 0;\n\t\t/**\n\t\t * @member {number} pageHeight\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.pageHeight = 0;\n\t\t/**\n\t\t * @member {number} spreadWidth Spread width\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.spreadWidth = 0;\n\t\t/**\n\t\t * @member {number} delta\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.delta = 0;\n\t\t/**\n\t\t * @member {number} columnWidth Column width\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.columnWidth = 0;\n\t\t/**\n\t\t * @member {number} gap\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.gap = 0;\n\t\t/**\n\t\t * @member {number} divisor\n\t\t * @memberof Layout\n\t\t * @readonly\n\t\t */\n\t\tthis.divisor = 1;\n\t\tthis.set(options || {});\n\t}\n\n\t/**\n\t * Set options\n\t * @param {object} options\n\t */\n\tset(options) {\n\n\t\tconst error = (name) => console.error(`Invalid '${name}' property type`);\n\t\tObject.keys(options).forEach(opt => {\n\t\t\tconst value = options[opt];\n\t\t\tif (this[opt] === value || typeof value === \"undefined\") {\n\t\t\t\tdelete options[opt];\n\t\t\t} else if (\n\t\t\t\topt === \"axis\" ||\n\t\t\t\topt === \"direction\" ||\n\t\t\t\topt === \"orientation\") {\n\t\t\t\tif (typeof value === \"string\") {\n\t\t\t\t\tthis[opt] = options[opt];\n\t\t\t\t} else error(opt);\n\t\t\t} else if (opt === \"flow\") {\n\t\t\t\tif (typeof value === \"string\") {\n\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\tcase \"scrolled\":\n\t\t\t\t\t\tcase \"scrolled-continuous\":\n\t\t\t\t\t\t\tthis.flow = \"scrolled\";\n\t\t\t\t\t\t\tthis.axis = options[\"axis\"] || \"vertical\";\n\t\t\t\t\t\t\tthis.spread = \"none\"; // autocomplete\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"scrolled-doc\":\n\t\t\t\t\t\t\tthis.flow = value;\n\t\t\t\t\t\t\tthis.axis = options[\"axis\"] || \"vertical\";\n\t\t\t\t\t\t\tthis.spread = \"none\"; // autocomplete\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.flow = \"paginated\";\n\t\t\t\t\t\t\tthis.axis = \"horizontal\"; // autocomplete\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else error(opt);\n\t\t\t} else if (opt === \"spread\") {\n\t\t\t\tif (typeof value === \"string\") {\n\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\tcase \"auto\":\n\t\t\t\t\t\tcase \"both\":\n\t\t\t\t\t\t\tthis.spread = \"auto\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.spread = \"none\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else error(opt);\n\t\t\t} else if (\n\t\t\t\topt === \"width\" ||\n\t\t\t\topt === \"height\" ||\n\t\t\t\topt === \"pageWidth\" ||\n\t\t\t\topt === \"pageHeight\" ||\n\t\t\t\topt === \"gap\" ||\n\t\t\t\topt === \"minSpreadWidth\") {\n\t\t\t\tif (typeof value === \"number\") {\n\t\t\t\t\tif (value >= 0) {\n\t\t\t\t\t\tthis[opt] = options[opt];\n\t\t\t\t\t}\n\t\t\t\t} else error(opt);\n\t\t\t}\n\t\t});\n\n\t\tthis.calculate();\n\n\t\tif (Object.keys(options).length) {\n\t\t\tthis.emit(EVENTS.LAYOUT.UPDATED, this, options);\n\t\t}\n\t}\n\n\t/**\n\t * Calculate the dimensions of the pagination\n\t * @param {number} [width] width of the rendering\n\t * @param {number} [height] height of the rendering\n\t * @param {number} [gap] width of the gap between columns\n\t */\n\tcalculate(width, height, gap) {\n\n\t\tconst szw = width || this.width;\n\t\tconst szh = height || this.height;\n\n\t\tif (!(gap >= 0)) {\n\t\t\tlet section;\n\t\t\tif (this.axis === \"horizontal\") {\n\t\t\t\tsection = Math.floor(szw / 12);\n\t\t\t} else {\n\t\t\t\tsection = Math.floor(szh / 17);\n\t\t\t}\n\t\t\tthis.gap = ((section % 2 === 0) ? section : section - 1);\n\t\t} else {\n\t\t\tthis.gap = gap;\n\t\t}\n\n\t\tif (this.flow === \"paginated\") {\n\t\t\tthis.divisor = this.spread === \"auto\" && szw >= this.minSpreadWidth ? 2 : 1;\n\t\t\tthis.columnWidth = (szw / this.divisor) - this.gap;\n\t\t\tthis.spreadWidth = (this.columnWidth * this.divisor) + this.gap;\n\t\t\tthis.pageWidth = this.columnWidth + this.gap;\n\t\t\tthis.pageHeight = szh;\n\t\t} else {\n\t\t\tthis.divisor = 1;\n\t\t}\n\n\t\tthis.delta = szw;\n\t\tthis.width = szw;\n\t\tthis.height = szh;\n\t}\n\n\t/**\n\t * Count number of pages\n\t * @param {number} totalLength\n\t * @param {number} [pageLength]\n\t * @return {{spreads: number, pages: number}}\n\t */\n\tcount(totalLength, pageLength) {\n\n\t\tlet spreads, pages;\n\t\tif (this.flow === \"paginated\") {\n\t\t\tpageLength = pageLength || this.delta;\n\t\t\tspreads = Math.ceil(totalLength / pageLength);\n\t\t\tpages = spreads * this.divisor;\n\t\t} else {\n\t\t\tpageLength = pageLength || this.height;\n\t\t\tspreads = Math.ceil(totalLength / pageLength);\n\t\t\tpages = spreads;\n\t\t}\n\t\treturn { spreads, pages }\n\t}\n\n\t/**\n\t * destroty\n\t */\n\tdestroy() {\n\n\t\tObject.keys(this).forEach(p => this[p] = undefined);\n\t}\n}\n\nEventEmitter(Layout.prototype);\n\nexport default Layout;","import { extend } from \"./utils/core\";\n\n/**\n * Location class\n */\nclass Location {\n    /**\n     * Constructor\n     */\n    constructor() {\n        /**\n         * @member {string} cfi EpubCFI string format\n         * @memberof Location\n         */\n        this.cfi = null;\n        /**\n         * @member {number} index Location index\n         * @memberof Location\n         */\n        this.index = 0;\n        /**\n         * Percentage in the range from 0 to 1\n         * @member {number} percentage\n         * @memberof Location\n         */\n        this.percentage = 0;\n    }\n\n    /**\n     * Set location properties\n     * @param {object} [props]\n     * @param {string} [props.cfi]\n     * @param {number} [props.index]\n     * @param {number} [props.percentage]\n     */\n    set(props) {\n\n        extend(this, props || {});\n        return this;\n    }\n}\n\nexport default Location;","import EventEmitter from \"event-emitter\";\nimport EpubCFI from \"./epubcfi\";\nimport Location from \"./location\";\nimport Defer from \"./utils/defer\";\nimport Queue from \"./utils/queue\";\nimport { EVENTS } from \"./utils/constants\";\nimport { qs, locationOf } from \"./utils/core\";\n\n/**\n * Find Locations for a Book\n */\nclass Locations extends Map {\n\t/**\n\t * Constructor\n\t * @param {Sections} [sections]\n\t * @param {Function} [request]\n\t * @param {number} [pause=100]\n\t */\n\tconstructor(sections, request, pause) {\n\n\t\tsuper();\n\t\tthis.sections = sections;\n\t\tthis.pause = pause || 100;\n\t\tthis.break = 150;\n\t\tthis.request = request;\n\t\t/**\n\t\t * @member {Location} current Current Location\n\t\t * @memberof Locations\n\t\t * @readonly\n\t\t */\n\t\tthis.current = new Location();\n\t\tthis.processing = new Defer();\n\t\t/**\n\t\t * @member {Promise<Locations>} generated\n\t\t * @memberof Locations\n\t\t * @readonly\n\t\t */\n\t\tthis.generated = this.processing.promise;\n\t\tthis.q = new Queue(this);\n\t}\n\n\t/**\n\t * Load all of sections in the book to generate locations\n\t * @param {number} [chars] how many chars to split on (default:150)\n\t * @return {Promise<Locations>} Locations\n\t */\n\tasync generate(chars) {\n\n\t\tif (Number.isInteger(chars)) {\n\t\t\tthis.break = chars;\n\t\t} else {\n\t\t\tthis.break = parseInt(chars)\n\t\t\tconsole.warn(\"The input value type is not an integer\")\n\t\t}\n\n\t\tthis.q.pause();\n\t\tthis.sections.forEach((section) => {\n\n\t\t\tif (section.linear) {\n\t\t\t\tthis.q.enqueue(this.process.bind(this), section);\n\t\t\t}\n\t\t});\n\n\t\treturn this.q.run().then(() => {\n\n\t\t\tconst len = this.size === 1 ? 1 : this.size - 1;\n\t\t\tconst arr = [...this.values()];\n\t\t\tarr.forEach((loc, index) => {\n\t\t\t\tloc.index = index;\n\t\t\t\tloc.percentage = index / len;\n\t\t\t});\n\t\t\tif (this.size) {\n\t\t\t\tthis.current.set(arr[0]);\n\t\t\t}\n\t\t\tthis.processing.resolve(this);\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * createRange\n\t * @returns {object}\n\t * @private\n\t */\n\tcreateRange() {\n\n\t\treturn {\n\t\t\tstartContainer: undefined,\n\t\t\tstartOffset: undefined,\n\t\t\tendContainer: undefined,\n\t\t\tendOffset: undefined\n\t\t};\n\t}\n\n\t/**\n\t * process\n\t * @param {Section} section \n\t * @returns {Promise<Locations>}\n\t */\n\tasync process(section) {\n\n\t\treturn section.load(this.request).then((contents) => {\n\t\t\treturn this.parse(contents, section.cfiBase);\n\t\t});\n\t}\n\n\t/**\n\t * parse\n\t * @param {Element} contents \n\t * @param {string} cfiBase \n\t * @param {number} [chars]\n\t * @returns {Promise<Locations>}\n\t */\n\tasync parse(contents, cfiBase, chars) {\n\n\t\tchars = chars || this.break;\n\n\t\tlet range;\n\t\tlet counter = 0;\n\t\tlet prev;\n\t\tconst parser = (node) => {\n\n\t\t\tconst def = new Defer();\n\n\t\t\tif (node.textContent.trim().length === 0) {\n\t\t\t\tdef.resolve(false);\n\t\t\t\treturn def.promise; // continue\n\t\t\t}\n\n\t\t\t// Start range\n\t\t\tif (counter == 0) {\n\t\t\t\trange = this.createRange();\n\t\t\t\trange.startContainer = node;\n\t\t\t\trange.startOffset = 0;\n\t\t\t}\n\n\t\t\tconst len = node.length;\n\t\t\tlet dist = chars - counter;\n\t\t\tlet pos = 0;\n\n\t\t\t// Node is smaller than a break,\n\t\t\t// skip over it\n\t\t\tif (dist > len) {\n\t\t\t\tcounter += len;\n\t\t\t\tpos = len;\n\t\t\t}\n\n\t\t\twhile (pos < len) {\n\t\t\t\tdist = chars - counter;\n\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Start new range\n\t\t\t\t\tpos += 1;\n\t\t\t\t\trange = this.createRange();\n\t\t\t\t\trange.startContainer = node;\n\t\t\t\t\trange.startOffset = pos;\n\t\t\t\t}\n\n\t\t\t\t// Gone over\n\t\t\t\tif (pos + dist >= len) {\n\t\t\t\t\t// Continue counter for next node\n\t\t\t\t\tcounter += len - pos;\n\t\t\t\t\t// break\n\t\t\t\t\tpos = len;\n\t\t\t\t\t// At End\n\t\t\t\t} else {\n\t\t\t\t\t// Advance pos\n\t\t\t\t\tpos += dist;\n\t\t\t\t\t// End the previous range\n\t\t\t\t\trange.endContainer = node;\n\t\t\t\t\trange.endOffset = pos;\n\t\t\t\t\tconst cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\t\t\tconst loc = new Location().set({ cfi });\n\t\t\t\t\tthis.set(cfi, loc);\n\t\t\t\t\tcounter = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprev = node;\n\t\t\tdef.resolve(true);\n\t\t\treturn def.promise;\n\t\t};\n\n\t\tconst doc = contents.ownerDocument;\n\t\tconst body = qs(doc, \"body\");\n\n\t\treturn this.treeWalker(body, parser).then(() => {\n\t\t\t// Close remaining\n\t\t\tif (range && range.startContainer && prev) {\n\t\t\t\trange.endContainer = prev;\n\t\t\t\trange.endOffset = prev.length;\n\t\t\t\tconst cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\t\tconst loc = new Location().set({ cfi });\n\t\t\t\tthis.set(cfi, loc);\n\t\t\t\tcounter = 0;\n\t\t\t}\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * treeWalker\n\t * @param {Node} root \n\t * @param {function} func \n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\ttreeWalker(root, func) {\n\n\t\tconst what = NodeFilter.SHOW_TEXT;\n\t\tconst task = document.createTreeWalker(root, what);\n\t\tconst tasks = [];\n\t\twhile (task.nextNode()) {\n\t\t\ttasks.push(func(task.currentNode));\n\t\t}\n\t\treturn Promise.all(tasks);\n\t}\n\n\t/**\n\t * Get a location from an EpubCFI\n\t * @param {string|EpubCFI} value EpubCFI\n\t * @return {number} Location index or -1 otherwise\n\t */\n\tlocationFromCfi(value) {\n\n\t\tif (this.size === 0) return -1;\n\n\t\tconst cfi = new EpubCFI(value);\n\t\tconst arr = [...this.keys()];\n\t\tconst ind = locationOf(cfi, arr, cfi.compare);\n\t\tconst max = this.size - 1;\n\t\treturn ind > max ? -1 : ind;\n\t}\n\n\t/**\n\t * Get a percentage position in locations from an EpubCFI\n\t * @param {string|EpubCFI} cfi EpubCFI\n\t * @return {number} Percentage\n\t */\n\tpercentageFromCfi(cfi) {\n\n\t\tif (this.size === 0) {\n\t\t\treturn 0;\n\t\t}\n\t\t// Find closest cfi\n\t\tconst index = this.locationFromCfi(cfi);\n\t\t// Get percentage in total\n\t\treturn this.percentageFromLocation(index);\n\t}\n\n\t/**\n\t * Get a percentage position from a location index\n\t * @param {number} index Location index\n\t * @return {number} Percentage\n\t */\n\tpercentageFromLocation(index) {\n\n\t\tif (this.size === 0 ||\n\t\t\tthis.size >= index && index < 0) {\n\t\t\treturn 0;\n\t\t}\n\t\tconst len = this.size === 1 ? 1 : this.size - 1;\n\t\treturn (index / len);\n\t}\n\n\t/**\n\t * Get an EpubCFI from location index\n\t * @param {number} index Location index\n\t * @return {string|null} EpubCFI string format\n\t */\n\tcfiFromLocation(index) {\n\n\t\tif (this.size === 0 ||\n\t\t\tthis.size >= index && index < 0) {\n\t\t\treturn null;\n\t\t}\n\t\treturn [...this.keys()][index];\n\t}\n\n\t/**\n\t * Get an EpubCFI from location percentage\n\t * @param {number} value Percentage in ranging from 0 to 1\n\t * @return {string|null} EpubCFI string format\n\t */\n\tcfiFromPercentage(value) {\n\n\t\tlet ret, max = this.size - 1;\n\t\tif (value >= 0 && value <= 1) {\n\t\t\tconst index = Math.round(max * value);\n\t\t\tret = this.cfiFromLocation(index);\n\t\t} else {\n\t\t\tconst cfi = new EpubCFI([...this.keys()][max]);\n\t\t\tcfi.collapse();\n\t\t\tret = cfi.toString();\n\t\t\tconsole.warn(\"Recommended a normalize value to between 0 - 1\");\n\t\t}\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Load locations from JSON\n\t * @param {string} locations\n\t * @returns {Locations}\n\t */\n\tload(locations) {\n\n\t\tif (typeof locations === \"string\") {\n\t\t\tthis.clear();\n\t\t\tconst data = JSON.parse(locations);\n\t\t\tdata.items.forEach(i => this.set(i.cfi, i));\n\t\t\tthis.break = data.break;\n\t\t\tthis.pause = data.pause;\n\t\t\tthis.current.set(this.get(data.idref));\n\t\t} else {\n\t\t\tconsole.error(\"Invalid argument type\");\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Save locations to JSON\n\t * @return {string} A JSON string\n\t */\n\tsave() {\n\n\t\treturn JSON.stringify({\n\t\t\titems: [...this.values()],\n\t\t\tidref: this.current.cfi,\n\t\t\tbreak: this.break,\n\t\t\tpause: this.pause\n\t\t});\n\t}\n\n\t/**\n\t * Set current location\n\t * @param {object} [options]\n\t * @param {string} [options.cfi] EpubCFI string format\n\t * @param {number} [options.index] Location index\n\t * @param {number} [options.percentage] Percentage\n\t * @returns {Locations}\n\t */\n\tset(options) {\n\n\t\tif (arguments.length === 2) {\n\t\t\tsuper.set(arguments[0], arguments[1]);\n\t\t\treturn this;\n\t\t} else if (this.size === 0) {\n\t\t\treturn this;\n\t\t}\n\n\t\tObject.keys(options || {}).forEach(opt => {\n\t\t\tconst value = options[opt];\n\t\t\tif (this.current[opt] === value || typeof value === \"undefined\") {\n\t\t\t\tdelete options[opt];\n\t\t\t} else if (typeof value === \"string\") {\n\t\t\t\tif (opt === \"cfi\" && EpubCFI.prototype.isCfiString(value)) {\n\t\t\t\t\tconst ind = this.locationFromCfi(value);\n\t\t\t\t\tconst loc = [...this.values()][ind];\n\t\t\t\t\tif (loc) {\n\t\t\t\t\t\tthis.current.set(loc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete options[opt];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof value === \"number\") {\n\t\t\t\tif (opt === \"index\") {\n\t\t\t\t\tconst cfi = this.cfiFromLocation(value);\n\t\t\t\t\tconst loc = this.get(cfi);\n\t\t\t\t\tif (loc) {\n\t\t\t\t\t\tthis.current.set(loc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete options[opt];\n\t\t\t\t\t}\n\t\t\t\t} else if (opt === \"percentage\") {\n\t\t\t\t\tconst cfi = this.cfiFromPercentage(value);\n\t\t\t\t\tconst loc = this.get(cfi);\n\t\t\t\t\tif (loc) {\n\t\t\t\t\t\tthis.current.set(loc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete options[opt];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Invalid value type to \" + opt);\n\t\t\t}\n\t\t});\n\n\t\tif (Object.keys(options || {}).length) {\n\t\t\tconst { ...current } = this.current;\n\t\t\t/**\n\t\t\t * Current location changed\n\t\t\t * @event changed\n\t\t\t * @param {object} current Current location\n\t\t\t * @param {object} changed Changed properties\n\t\t\t * @memberof Locations\n\t\t\t */\n\t\t\tthis.emit(EVENTS.LOCATIONS.CHANGED, current, options);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * clear locations\n\t */\n\tclear() {\n\n\t\tsuper.clear();\n\t\tthis.current.cfi = null;\n\t\tthis.current.index = -1;\n\t\tthis.current.percentage = 0;\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.pause = undefined;\n\t\tthis.break = undefined;\n\t\tthis.current = undefined;\n\t\tthis.request = undefined;\n\t\tthis.q.stop();\n\t\tthis.q = undefined;\n\t\tthis.sections = undefined;\n\t\tthis.generated = undefined;\n\t}\n}\n\nEventEmitter(Locations.prototype);\n\nexport default Locations;","import { extend } from \"../../utils/core\";\nimport Defer from \"../../utils/defer\";\nimport DefaultViewManager from \"../default\";\nimport Snap from \"../helpers/snap\";\nimport { EVENTS } from \"../../utils/constants\";\n\nconst AXIS_H = \"horizontal\";\n\n/**\n * Continuous view manager\n * @extends {DefaultViewManager}\n */\nclass ContinuousViewManager extends DefaultViewManager {\n\t/**\n\t * Constructor\n\t * @param {Book} book\n\t * @param {object} [options]\n\t * @param {string} [options.axis]\n\t * @param {object} [options.snap]\n\t * @param {string} [options.method] values: `\"blobUrl\"` OR `\"srcdoc\"` OR `\"write\"`\n\t * @param {string} [options.ignoreClass='']\n\t * @param {string|object} [options.view='iframe']\n\t * @param {string[]} [options.sandbox=[]] iframe sandbox policy list\n\t */\n\tconstructor(book, options) {\n\n\t\tsuper(book, options);\n\t\t/**\n\t\t * @member {string} name\n\t\t * @memberof ContinuousViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.name = \"continuous\";\n\t\tthis.settings = extend({\n\t\t\taxis: null,\n\t\t\tsnap: null,\n\t\t\tview: \"iframe\",\n\t\t\tmethod: null,\n\t\t\toffset: 500,\n\t\t\toffsetDelta: 250,\n\t\t\tignoreClass: \"\",\n\t\t\tforceEvenPages: false\n\t\t}, options || {});\n\t}\n\n\t/**\n\t * render\n\t * @param {Element|string} element viewport element\n\t * @param {object} size \n\t * @override\n\t */\n\trender(element, size) {\n\n\t\tsuper.render(element, size);\n\n\t\tif (this.paginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap);\n\t\t}\n\t}\n\n\t/**\n\t * display\n\t * @param {Section} section \n\t * @param {string|number} [target] \n\t * @returns {Promise<view|null>} displaying promise\n\t * @override\n\t */\n\tasync display(section, target) {\n\n\t\treturn super.display(section, target).then(() => this.fill());\n\t}\n\n\t/**\n\t * fill\n\t * @param {Defer} value\n\t * @returns {Promise<any>}\n\t */\n\tfill(value) {\n\n\t\tconst full = value || new Defer();\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.fill(full); // recursive call\n\t\t\t} else {\n\t\t\t\tfull.resolve();\n\t\t\t}\n\t\t});\n\n\t\treturn full.promise;\n\t}\n\n\t/**\n\t * moveTo\n\t * @param {object} offset \n\t * @override\n\t */\n\tmoveTo(offset) {\n\n\t\tlet distX = 0, distY = 0;\n\n\t\tif (this.paginated) {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\t\t} else {\n\t\t\tdistY = offset.top;\n\t\t}\n\n\t\tif (distX > 0 || distY > 0) {\n\t\t\tthis.scrollBy(distX, distY, true);\n\t\t}\n\t}\n\n\t/**\n\t * Remove Previous Listeners if present\n\t * @param {*} view \n\t */\n\tremoveShownListeners(view) {\n\n\t\tview.off(EVENTS.VIEWS.DISPLAYED);\n\t}\n\n\t/**\n\t * update\n\t * @param {number} [offset] \n\t * @returns {Promise<any>}\n\t */\n\tasync update(offset) {\n\n\t\tconst views = this.views;\n\t\tconst delta = offset || this.settings.offset || 0;\n\t\tconst promises = [];\n\n\t\tfor (let i = 0; i < views.length; i++) {\n\n\t\t\tconst view = views[i];\n\n\t\t\tif (this.isVisible(view, delta, delta)) {\n\t\t\t\tif (view.displayed) {\n\t\t\t\t\tview.show();\n\t\t\t\t} else {\n\t\t\t\t\tconst displayed = view.display(this.load)\n\t\t\t\t\t\t.then((view) => {\n\t\t\t\t\t\t\tview.show();\n\t\t\t\t\t\t});\n\t\t\t\t\tpromises.push(displayed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (promises.length) {\n\t\t\treturn Promise.all(promises);\n\t\t} else {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t}\n\n\t/**\n\t * check\n\t * @param {number} [offsetLeft]\n\t * @param {number} [offsetTop]\n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\tasync check(offsetLeft, offsetTop) {\n\n\t\tconst promises = [];\n\t\tconst vph = this.layout.axis === AXIS_H;\n\t\tconst lsc = this.views.container;\n\t\tconst rtl = this.layout.direction === \"rtl\";\n\t\tlet delta = this.settings.offset || 0;\n\n\t\tif (offsetLeft && vph) {\n\t\t\tdelta = offsetLeft;\n\t\t}\n\n\t\tif (offsetTop && !vph) {\n\t\t\tdelta = offsetTop;\n\t\t}\n\n\t\tconst rect = this.viewport.rect;\n\t\tconst visibleLength = vph ? Math.floor(rect.width) : rect.height;\n\t\tconst contentLength = vph ? lsc.scrollWidth : lsc.scrollHeight;\n\t\tlet offset = vph ? lsc.scrollLeft : lsc.scrollTop;\n\n\t\tif (this.writingMode.indexOf(AXIS_H) === 0) {\n\t\t\t// Scroll offset starts at width of element\n\t\t\tif (rtl && this.scrollType === \"default\") {\n\t\t\t\toffset = contentLength - visibleLength - offset;\n\t\t\t}\n\t\t\t// Scroll offset starts at 0 and goes negative\n\t\t\tif (rtl && this.scrollType === \"negative\") {\n\t\t\t\toffset = offset * -1;\n\t\t\t}\n\t\t}\n\n\t\tconst append = () => {\n\t\t\tconst view = this.views.last();\n\t\t\tconst next = view && view.section.next();\n\t\t\tif (next) {\n\t\t\t\tpromises.push(this.append(next));\n\t\t\t}\n\t\t};\n\n\t\tconst prepend = () => {\n\t\t\tconst view = this.views.first();\n\t\t\tconst prev = view && view.section.prev();\n\t\t\tif (prev) {\n\t\t\t\tpromises.push(this.prepend(prev));\n\t\t\t}\n\t\t};\n\n\t\tconst end = offset + visibleLength + delta;\n\t\tconst start = offset - delta;\n\n\t\tif (end >= contentLength) {\n\t\t\tappend();\n\t\t}\n\n\t\tif (start < 0) {\n\t\t\tprepend();\n\t\t}\n\n\t\tif (promises.length) {\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\treturn this.update(delta);\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t}\n\n\t/**\n\t * scrolled\n\t * @param {Event} e \n\t * @override\n\t */\n\tscrolled(e) {\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then(() => {\n\t\t\tthis.relocated();\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\ttop: e.target.scrollTop,\n\t\t\t\tleft: e.target.scrollLeft\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * next\n\t * @returns {Promise<any>}\n\t * @override\n\t */\n\tnext() {\n\n\t\tif (this.views.length === 0) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tif (this.paginated &&\n\t\t\tthis.layout.axis === AXIS_H) {\n\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t} else {\n\t\t\tthis.scrollBy(0, this.layout.height, true);\n\t\t}\n\n\t\treturn this.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t});\n\t}\n\n\t/**\n\t * prev\n\t * @returns {Promise<any>}\n\t * @override\n\t */\n\tprev() {\n\n\t\tif (this.views.length === 0) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tif (this.paginated &&\n\t\t\tthis.layout.axis === AXIS_H) {\n\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t} else {\n\t\t\tthis.scrollBy(0, -this.layout.height, true);\n\t\t}\n\n\t\treturn this.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t});\n\t}\n\n\t/**\n\t * destroy\n\t * @override\n\t */\n\tdestroy() {\n\n\t\tsuper.destroy();\n\n\t\tif (this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t}\n\t}\n}\n\nexport default ContinuousViewManager;","import EventEmitter from \"event-emitter\";\nimport Mapping from \"../../mapping\";\nimport Views from \"../helpers/views\";\nimport Queue from \"../../utils/queue\";\nimport IframeView from \"../views/iframe\";\nimport scrollType from \"../../utils/scrolltype\";\nimport Defer from \"../../utils/defer\";\nimport { EVENTS } from \"../../utils/constants\";\nimport { extend, isNumber } from \"../../utils/core\";\nimport debounce from \"lodash/debounce\";\n\nconst AXIS_H = \"horizontal\";\nconst AXIS_V = \"vertical\";\n\n/**\n * Default View Manager\n */\nclass DefaultViewManager {\n\t/**\n\t * Constructor\n\t * @param {Book} book \n\t * @param {object} [options]\n\t * @param {string} [options.method] values: `\"blobUrl\"` OR `\"srcdoc\"` OR `\"write\"`\n\t * @param {string} [options.ignoreClass='']\n\t * @param {string|object} [options.view='iframe']\n\t * @param {string[]} [options.sandbox=[]] iframe sandbox policy list\n\t */\n\tconstructor(book, options) {\n\t\t/**\n\t\t * @member {string} name Manager name\n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.name = \"default\";\n\t\tthis.load = book.load.bind(book);\n\t\tthis.layout = book.rendition.layout;\n\t\tthis.layout.on(EVENTS.LAYOUT.UPDATED, (props, changed) => {\n\t\t\tif (changed.flow) {\n\t\t\t\tthis.paginated = props.flow === \"paginated\";\n\t\t\t}\n\t\t\tthis.views.update();\n\t\t\tthis.calculate();\n\t\t});\n\t\tthis.settings = extend({\n\t\t\tview: \"iframe\",\n\t\t\tmethod: null,\n\t\t\tsandbox: [],\n\t\t\tignoreClass: \"\",\n\t\t\tforceEvenPages: true\n\t\t}, options || {});\n\t\t/**\n\t\t * @member {boolean} paginated\n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.paginated = this.layout.flow === \"paginated\";\n\t\t/**\n\t\t * @member {object[]} location\n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.location = [];\n\t\t/**\n\t\t * @member {Mapping} mapping\n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.mapping = new Mapping(this.layout);\n\t\t/**\n\t\t * @member {boolean} rendered\n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.rendered = false;\n\t\tthis.scrollType = null;\n\t\t/**\n\t\t * @member {Views} views \n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.views = new Views();\n\t\tthis.viewport = book.rendition.viewport;\n\t\t/**\n\t\t * @member {string} writingMode\n\t\t * @memberof DefaultViewManager\n\t\t * @readonly\n\t\t */\n\t\tthis.writingMode = null;\n\t\tthis.q = new Queue(this);\n\t}\n\n\t/**\n\t * render\n\t * @param {Element|string} element viewport element\n\t * @param {object} size \n\t * @param {string|number} size.width\n\t * @param {string|number} size.height\n\t */\n\trender(element, size) {\n\n\t\tthis.scrollType = scrollType();\n\t\tthis.viewport.attachTo(element, {\n\t\t\tviews: this.views,\n\t\t\twidth: size.width,\n\t\t\theight: size.height\n\t\t});\n\t\tthis.rendered = true;\n\t\tthis.appendEventListeners();\n\t\twindow.onpagehide = this.destroy.bind(this);\n\t}\n\n\t/**\n\t * display\n\t * @param {Section} section \n\t * @param {string|number} [target] \n\t * @returns {Promise<view|null>} displaying promise\n\t */\n\tdisplay(section, target) {\n\n\t\tconst displaying = new Defer();\n\n\t\tif (target === section.href || isNumber(target)) {\n\t\t\ttarget = undefined;\n\t\t}\n\n\t\tconst view = this.views.find(section);\n\t\tif (view) {\n\t\t\tconst offset = view.offset();\n\t\t\tlet x, y = offset.top;\n\t\t\tif (this.layout.direction === \"ltr\") {\n\t\t\t\tx = offset.left;\n\t\t\t\tthis.scrollTo(x, y, true);\n\t\t\t} else {\n\t\t\t\tx = offset.left + view.width;\n\t\t\t\tthis.scrollTo(x, y, true);\n\t\t\t}\n\n\t\t\tif (target) {\n\t\t\t\tthis.moveTo(view.locationOf(target), view.width);\n\t\t\t}\n\n\t\t\tdisplaying.resolve();\n\t\t\treturn displaying.promise;\n\t\t}\n\n\t\tthis.clear();\n\t\tthis.append(section).then((view) => {\n\n\t\t\t// Move to correct place within the section, if needed\n\t\t\tif (target) {\n\t\t\t\tconst offset = view.locationOf(target);\n\t\t\t\tthis.moveTo(offset, view.width);\n\t\t\t}\n\t\t\treturn view;\n\t\t}, (err) => {\n\t\t\tdisplaying.reject(err);\n\t\t}).then((view) => {\n\t\t\tthis.views.show();\n\t\t\tdisplaying.resolve(view);\n\t\t});\n\n\t\treturn displaying.promise;\n\t}\n\n\t/**\n\t * appendEventListeners\n\t * @private\n\t */\n\tappendEventListeners() {\n\n\t\tconst lsc = this.views.container;\n\t\tlsc.addEventListener(\"scroll\", this.onscroll.bind(this));\n\t\tif (\"onscrollend\" in window) {\n\t\t\tlsc.addEventListener(\n\t\t\t\t\"scrollend\",\n\t\t\t\tthis.onscrollend.bind(this)\n\t\t\t);\n\t\t}\n\t\tconst timeout = this.name === \"default\" ? 0 : 30;\n\t\tthis.scrollend = debounce(this.scrolled.bind(this), timeout);\n\t}\n\n\t/**\n\t * removeEventListeners\n\t * @private\n\t */\n\tremoveEventListeners() {\n\n\t\tconst lsc = this.views.container;\n\t\tlsc.removeEventListener(\"scroll\", this.onscroll.bind(this));\n\t\tif (\"onscrollend\" in window) {\n\t\t\tlsc.removeEventListener(\n\t\t\t\t\"scrollend\",\n\t\t\t\tthis.onscrollend.bind(this)\n\t\t\t);\n\t\t}\n\t\tthis.scrollend = undefined;\n\t}\n\n\t/**\n\t * Require the view from passed string, or as a class function\n\t * @param {string|class} view\n\t * @return {class}\n\t * @private\n\t */\n\trequireView(view) {\n\n\t\tlet result;\n\t\tif (typeof view == \"string\" && view === \"iframe\") {\n\t\t\tresult = IframeView;\n\t\t} else {\n\t\t\tresult = view;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * createView\n\t * @param {Section} section \n\t * @returns {object} View (default: IframeView)\n\t * @private\n\t */\n\tcreateView(section) {\n\n\t\tconst view = this.requireView(this.settings.view);\n\t\treturn new view(this.layout, section, {\n\t\t\tsnap: this.settings.snap,\n\t\t\tmethod: this.settings.method,\n\t\t\tsandbox: this.settings.sandbox,\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\tforceEvenPages: this.settings.forceEvenPages\n\t\t});\n\t}\n\n\t/**\n\t * the view displayed event handler\n\t * @param {object} view \n\t * @private\n\t */\n\tdisplayed(view) {\n\n\t\tthis.emit(EVENTS.MANAGERS.ADDED, view);\n\t}\n\n\t/**\n\t * the view resized event handler\n\t * @param {object} view \n\t * @private\n\t */\n\tresized(view) {\n\n\t\tthis.relocated();\n\t\tthis.emit(EVENTS.MANAGERS.RESIZED, view);\n\t}\n\n\t/**\n\t * moveTo\n\t * @param {object} offset\n\t * @param {number} offset.top\n\t * @param {number} offset.left\n\t * @param {number} width \n\t * @private\n\t */\n\tmoveTo(offset, width) {\n\n\t\tlet distX = 0, distY;\n\t\tconst lsc = this.views.container;\n\n\t\tif (this.paginated) {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\n\t\t\tif (distX + this.layout.delta > lsc.scrollWidth) {\n\t\t\t\tdistX = lsc.scrollWidth - this.layout.delta;\n\t\t\t}\n\n\t\t\tdistY = Math.floor(offset.top / this.layout.delta) * this.layout.delta;\n\n\t\t\tif (distY + this.layout.delta > lsc.scrollHeight) {\n\t\t\t\tdistY = lsc.scrollHeight - this.layout.delta;\n\t\t\t}\n\t\t} else {\n\t\t\tdistY = offset.top;\n\t\t}\n\n\t\tif (this.layout.direction === \"rtl\") {\n\t\t\t/***\n\t\t\t\tthe `floor` function above (L343) is on positive values, so we should add one `layout.delta`\n\t\t\t\tto distX or use `Math.ceil` function, or multiply offset.left by -1\n\t\t\t\tbefore `Math.floor`\n\t\t\t*/\n\t\t\tdistX = distX + this.layout.delta;\n\t\t\tdistX = distX - width;\n\t\t}\n\n\t\tthis.scrollTo(distX, distY, true);\n\t}\n\n\t/**\n\t * append\n\t * @param {Section} section Section object\n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\tappend(section) {\n\n\t\tconst view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.DISPLAYED, () => {\n\t\t\tthis.displayed(view);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (rect) => {\n\t\t\tthis.resized(view);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\tthis.views.append(view);\n\n\t\treturn view.display(this.load);\n\t}\n\n\t/**\n\t * prepend\n\t * @param {Section} section \n\t * @returns {Promise<any>}\n\t * @private\n\t */\n\tprepend(section) {\n\n\t\tconst view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.DISPLAYED, () => {\n\t\t\tthis.displayed(view);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (rect) => {\n\t\t\tthis.counter(view);\n\t\t\tthis.resized(view);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\treturn view.display(this.load);\n\t}\n\n\t/**\n\t * counter\n\t * @param {object} view \n\t * @private\n\t */\n\tcounter(view) {\n\n\t\tconst content = view.contents.content;\n\n\t\tif (this.layout.axis === AXIS_V) {\n\t\t\tconst y = content.scrollHeight;\n\t\t\tthis.scrollBy(0, y, true);\n\t\t} else {\n\t\t\tconst x = content.scrollWidth;\n\t\t\tthis.scrollBy(x, 0, true);\n\t\t}\n\t}\n\n\t/**\n\t * next\n\t * @returns {Promise<view|null>} next view\n\t */\n\tnext() {\n\n\t\tlet left, section;\n\t\tconst def = new Defer();\n\t\tconst dir = this.layout.direction;\n\t\tconst ish = this.layout.axis === AXIS_H && this.paginated;\n\t\tconst isv = this.layout.axis === AXIS_V && this.paginated;\n\t\tconst lsc = this.views.container;\n\n\t\tif (this.views.length === 0) {\n\t\t\tdef.resolve(null);\n\t\t\treturn def.promise;\n\t\t} else if (ish && dir === \"ltr\") {\n\n\t\t\tthis.scrollLeft = lsc.scrollLeft;\n\t\t\tleft = lsc.scrollLeft + lsc.offsetWidth + this.layout.delta;\n\n\t\t\tif (left <= lsc.scrollWidth) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tsection = this.views.last().section.next();\n\t\t\t}\n\t\t} else if (ish && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = lsc.scrollLeft;\n\n\t\t\tif (this.scrollType === \"default\") {\n\t\t\t\tleft = lsc.scrollLeft;\n\n\t\t\t\tif (left > 0) {\n\t\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t\t} else {\n\t\t\t\t\tsection = this.views.last().section.next();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tleft = lsc.scrollLeft + (this.layout.delta * -1);\n\n\t\t\t\tif (left > lsc.scrollWidth * -1) {\n\t\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t\t} else {\n\t\t\t\t\tsection = this.views.last().section.next();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isv) {\n\n\t\t\tconst top = lsc.scrollTop + lsc.offsetHeight;\n\n\t\t\tif (top < lsc.scrollHeight) {\n\t\t\t\tthis.scrollBy(0, this.layout.height, true);\n\t\t\t} else {\n\t\t\t\tsection = this.views.last().section.next();\n\t\t\t}\n\t\t} else {\n\t\t\tsection = this.views.last().section.next();\n\t\t}\n\n\t\tif (section) {\n\t\t\tthis.clear();\n\t\t\t// The new section may have a different \n\t\t\t// writing-mode from the old section. \n\t\t\t// Thus, we need to update layout.\n\t\t\tthis.calculate();\n\t\t\tthis.append(section).then((view) => {\n\n\t\t\t\t// Reset position to start for scrolled-doc vertical-rl in default mode\n\t\t\t\tif (!ish && dir === \"rtl\" &&\n\t\t\t\t\tthis.scrollType === \"default\") {\n\t\t\t\t\tthis.scrollTo(lsc.scrollWidth, 0, true);\n\t\t\t\t}\n\t\t\t\tthis.views.show();\n\t\t\t\tdef.resolve(view);\n\t\t\t}, (err) => {\n\t\t\t\tdef.reject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.relocated();\n\t\t\tdef.resolve(null);\n\t\t}\n\n\t\treturn def.promise;\n\t}\n\n\t/**\n\t * prev\n\t * @returns {Promise<view|null>}\n\t */\n\tprev() {\n\n\t\tlet left, section;\n\t\tconst def = new Defer();\n\t\tconst dir = this.layout.direction;\n\t\tconst ish = this.layout.axis === AXIS_H && this.paginated;\n\t\tconst isv = this.layout.axis === AXIS_V && this.paginated;\n\t\tconst lsc = this.views.container;\n\n\t\tif (this.views.length === 0) {\n\t\t\tdef.resolve(null);\n\t\t\treturn def.promise;\n\t\t} else if (ish && dir === \"ltr\") {\n\n\t\t\tthis.scrollLeft = lsc.scrollLeft;\n\t\t\tleft = lsc.scrollLeft;\n\n\t\t\tif (left > 0) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tsection = this.views.first().section.prev();\n\t\t\t}\n\t\t} else if (ish && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = lsc.scrollLeft;\n\n\t\t\tif (this.scrollType === \"default\") {\n\t\t\t\tleft = lsc.scrollLeft + lsc.offsetWidth;\n\n\t\t\t\tif (left < lsc.scrollWidth) {\n\t\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t\t} else {\n\t\t\t\t\tsection = this.views.first().section.prev();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tleft = lsc.scrollLeft;\n\n\t\t\t\tif (left < 0) {\n\t\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t\t} else {\n\t\t\t\t\tsection = this.views.first().section.prev();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isv) {\n\n\t\t\tconst top = lsc.scrollTop;\n\n\t\t\tif (top > 0) {\n\t\t\t\tthis.scrollBy(0, -(this.layout.height), true);\n\t\t\t} else {\n\t\t\t\tsection = this.views.first().section.prev();\n\t\t\t}\n\t\t} else {\n\t\t\tsection = this.views.first().section.prev();\n\t\t}\n\n\t\tif (section) {\n\t\t\tthis.clear();\n\t\t\t// The new section may have a different \n\t\t\t// writing-mode from the old section. \n\t\t\t// Thus, we need to update layout.\n\t\t\tthis.calculate();\n\t\t\tthis.prepend(section).then((view) => {\n\n\t\t\t\tif (ish) {\n\t\t\t\t\tif (dir === \"rtl\") {\n\t\t\t\t\t\tif (this.scrollType === \"default\") {\n\t\t\t\t\t\t\tthis.scrollTo(0, 0, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.scrollTo((lsc.scrollWidth * -1) + this.layout.delta, 0, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scrollTo(lsc.scrollWidth - this.layout.delta, 0, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.views.show();\n\t\t\t\tdef.resolve(view);\n\t\t\t}, (err) => {\n\t\t\t\tdef.reject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.relocated();\n\t\t\tdef.resolve(null);\n\t\t}\n\n\t\treturn def.promise;\n\t}\n\n\t/**\n\t * Get current visible view\n\t * @returns {view|null} view\n\t */\n\tcurrent() {\n\n\t\tconst views = this.visible();\n\t\tif (views.length) {\n\t\t\treturn views[views.length - 1];\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * clear views\n\t */\n\tclear() {\n\n\t\tthis.views.hide();\n\t\tthis.scrollTo(0, 0, true);\n\t\tthis.views.clear();\n\t}\n\n\t/**\n\t * relocated\n\t * @private\n\t */\n\trelocated() {\n\n\t\tthis.currentLocation();\n\t\tthis.emit(EVENTS.MANAGERS.RELOCATED, this.location);\n\t}\n\n\t/**\n\t * currentLocation\n\t * @returns {object[]} Location sections\n\t */\n\tcurrentLocation() {\n\n\t\tif (this.layout.axis === AXIS_H && this.paginated) {\n\t\t\tthis.location = this.paginatedLocation();\n\t\t} else {\n\t\t\tthis.location = this.scrolledLocation();\n\t\t}\n\t\treturn this.location;\n\t}\n\n\t/**\n\t * Get location from scrolled flow\n\t * @returns {object[]} Location sections\n\t * @private\n\t */\n\tscrolledLocation() {\n\n\t\tconst lsc = this.views.container;\n\t\tconst views = this.visible();\n\t\tconst sections = views.map((view) => {\n\n\t\t\tconst { index, href } = view.section;\n\n\t\t\tlet startPos;\n\t\t\tlet endPos;\n\t\t\tlet startPage;\n\t\t\tlet endPage;\n\t\t\tlet total;\n\n\t\t\tif (this.layout.axis === AXIS_V) {\n\t\t\t\tconst top = lsc.scrollTop;\n\t\t\t\tstartPos = Math.abs(top);\n\t\t\t\tendPos = Math.abs(top) + lsc.clientHeight;\n\t\t\t\tstartPage = Math.ceil(startPos / lsc.clientHeight);\n\t\t\t\tendPage = Math.ceil(endPos / lsc.clientHeight);\n\t\t\t\ttotal = this.layout.count(view.height, lsc.clientHeight).pages;\n\t\t\t} else {\n\t\t\t\tconst left = lsc.scrollLeft;\n\t\t\t\tstartPos = Math.abs(left);\n\t\t\t\tendPos = Math.abs(left) + lsc.clientWidth;\n\t\t\t\tstartPage = Math.ceil(startPos / lsc.clientWidth);\n\t\t\t\tendPage = Math.ceil(endPos / lsc.clientWidth);\n\t\t\t\ttotal = this.layout.count(view.height, lsc.clientWidth).pages;\n\t\t\t}\n\n\t\t\tconst pages = [];\n\t\t\tfor (let i = startPage; i < endPage; i++) {\n\t\t\t\tpages.push({ index: i });\n\t\t\t}\n\n\t\t\tconst mapping = this.mapping.page(\n\t\t\t\tview.contents,\n\t\t\t\tview.section.cfiBase,\n\t\t\t\tstartPos,\n\t\t\t\tendPos\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\taxis: this.layout.axis,\n\t\t\t\thref,\n\t\t\t\tindex,\n\t\t\t\tpages,\n\t\t\t\ttotal,\n\t\t\t\tmapping\n\t\t\t}\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\t/**\n\t * Get location from paginated flow\n\t * @returns {object[]} sections\n\t * @private\n\t */\n\tpaginatedLocation() {\n\n\t\tconst lsc = this.views.container;\n\t\tconst rect = this.viewport.rect;\n\t\tconst left = lsc.scrollLeft;\n\t\tconst views = this.visible();\n\t\tconst sections = views.map((view) => {\n\n\t\t\tconst { index, href } = view.section;\n\t\t\tconst pages = [];\n\t\t\tconst total = this.layout.count(view.width).pages;\n\t\t\tconst startPos = Math.abs(left);\n\t\t\tconst endPos = Math.abs(left) + rect.width;\n\t\t\tconst startPage = Math.floor(startPos / this.layout.pageWidth);\n\t\t\tconst endPage = Math.floor(endPos / this.layout.pageWidth);\n\n\t\t\tfor (let i = startPage; i < endPage; i++) {\n\t\t\t\tpages.push({ index: i });\n\t\t\t}\n\n\t\t\tconst mapping = this.mapping.page(\n\t\t\t\tview.contents,\n\t\t\t\tview.section.cfiBase,\n\t\t\t\tstartPos,\n\t\t\t\tendPos\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\taxis: this.layout.axis,\n\t\t\t\thref,\n\t\t\t\tindex,\n\t\t\t\tpages,\n\t\t\t\ttotal,\n\t\t\t\tmapping\n\t\t\t}\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\t/**\n\t * isVisible\n\t * @param {any} view \n\t * @param {number} offsetPrev \n\t * @param {number} offsetNext \n\t * @returns {boolean}\n\t * @private\n\t */\n\tisVisible(view, offsetPrev, offsetNext) {\n\n\t\tconst vpos = view.position();\n\t\tconst rect = this.viewport.rect;\n\n\t\tif (this.layout.axis === AXIS_H &&\n\t\t\tvpos.right > rect.left - offsetPrev &&\n\t\t\tvpos.left < rect.right + offsetNext) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.layout.axis === AXIS_V &&\n\t\t\tvpos.bottom > rect.top - offsetPrev &&\n\t\t\tvpos.top < rect.bottom + offsetNext) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Get array of visible views\n\t * @returns {object[]} array of visible views\n\t */\n\tvisible() {\n\n\t\tconst views = this.views.displayed();\n\t\tconst items = [];\n\n\t\tfor (let i = 0, len = views.length; i < len; i++) {\n\t\t\tconst view = views[i];\n\t\t\tif (this.isVisible(view, 0, 0)) {\n\t\t\t\titems.push(view);\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n\t/**\n\t * scrollBy\n\t * @param {number} x \n\t * @param {number} y \n\t * @param {boolean} silent \n\t * @private\n\t */\n\tscrollBy(x, y, silent) {\n\n\t\tconst dir = this.layout.direction === \"rtl\" ? -1 : 1;\n\t\tconst lsc = this.views.container;\n\n\t\tif (silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif (x) lsc.scrollLeft += x * dir;\n\t\tif (y) lsc.scrollTop += y;\n\t}\n\n\t/**\n\t * scrollTo\n\t * @param {number} x \n\t * @param {number} y \n\t * @param {boolean} silent \n\t * @private\n\t */\n\tscrollTo(x, y, silent) {\n\n\t\tif (silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tthis.views.container.scrollLeft = x;\n\t\tthis.views.container.scrollTop = y;\n\t}\n\n\t/**\n\t * scrolled\n\t * @param {Event} e \n\t */\n\tscrolled(e) {\n\n\t\tif (this.paginated &&\n\t\t\tthis.name === \"default\") {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.relocated();\n\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\ttop: e.target.scrollTop,\n\t\t\tleft: e.target.scrollLeft\n\t\t});\n\t}\n\n\t/**\n\t * onscroll\n\t * @param {Event} e \n\t * @private\n\t */\n\tonscroll(e) {\n\n\t\tif (this.paginated &&\n\t\t\tthis.name === \"default\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.ignore) {\n\t\t\tthis.ignore = false;\n\t\t} else {\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\t\ttop: e.target.scrollTop,\n\t\t\t\tleft: e.target.scrollLeft\n\t\t\t});\n\t\t\tif (!(\"onscrollend\" in window)) {\n\t\t\t\tthis.scrollend(e);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * onscrollend\n\t * @param {Event} e \n\t * @private\n\t */\n\tonscrollend(e) {\n\n\t\tthis.scrollend(e);\n\t}\n\n\t/**\n\t * calculate\n\t * @private\n\t */\n\tcalculate() {\n\n\t\tif (this.paginated) {\n\t\t\tthis.layout.calculate(\n\t\t\t\tthis.viewport.rect.width,\n\t\t\t\tthis.viewport.rect.height,\n\t\t\t\tthis.settings.gap\n\t\t\t);\n\t\t\tthis.settings.offset = this.layout.delta / this.layout.divisor;\n\t\t} else {\n\t\t\tthis.layout.calculate(\n\t\t\t\tthis.viewport.rect.width,\n\t\t\t\tthis.viewport.rect.height\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Update writing mode\n\t * @param {string} mode \n\t * @private\n\t */\n\tupdateWritingMode(mode) {\n\n\t\tthis.writingMode = mode;\n\t}\n\n\t/**\n\t * Get contents array from views\n\t * @returns {Array<Contents>} [view.contents]\n\t */\n\tgetContents() {\n\n\t\tconst contents = [];\n\t\tif (!this.views) {\n\t\t\treturn contents;\n\t\t}\n\t\tthis.views.forEach(view => {\n\n\t\t\tview && contents.push(view.contents)\n\t\t});\n\t\treturn contents;\n\t}\n\n\t/**\n\t * isRendered\n\t * @returns {boolean}\n\t */\n\tisRendered() {\n\n\t\treturn this.rendered;\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.removeEventListeners();\n\t\tthis.views.destroy();\n\t\tthis.views = undefined;\n\t\tthis.ignore = undefined;\n\t\tthis.location = undefined;\n\t\tthis.rendered = undefined;\n\t\tthis.paginated = undefined;\n\t\tthis.scrollType = undefined;\n\t\tthis.writingMode = undefined;\n\t}\n}\n\nEventEmitter(DefaultViewManager.prototype);\n\nexport default DefaultViewManager;","import EventEmitter from \"event-emitter\";\nimport Defer from \"../../utils/defer\";\nimport { extend } from \"../../utils/core\";\nimport { EVENTS } from \"../../utils/constants\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = (Math.PI / 2);\nconst EASING_EQUATIONS = {\n\teaseOutSine: (pos) => {\n\t\treturn Math.sin(pos * PI_D2);\n\t},\n\teaseInOutSine: (pos) => {\n\t\treturn (-0.5 * (Math.cos(Math.PI * pos) - 1));\n\t},\n\teaseInOutQuint: (pos) => {\n\t\tif ((pos /= 0.5) < 1) {\n\t\t\treturn 0.5 * Math.pow(pos, 5);\n\t\t}\n\t\treturn 0.5 * (Math.pow((pos - 2), 5) + 2);\n\t},\n\teaseInCubic: (pos) => {\n\t\treturn Math.pow(pos, 3);\n\t}\n};\n\n/**\n * Snap\n */\nclass Snap {\n\t/**\n\t * Constructor\n\t * @param {*} manager\n\t * @param {object} [options]\n\t * @param {number} [options.duration=300]\n\t * @param {number} [options.minVelocity=0.2]\n\t * @param {number} [options.minDistance=10]\n\t */\n\tconstructor(manager, options) {\n\n\t\tthis.settings = extend({\n\t\t\tduration: 300,\n\t\t\tminVelocity: 0.2,\n\t\t\tminDistance: 10,\n\t\t\teasing: EASING_EQUATIONS[\"easeInCubic\"]\n\t\t}, options || {});\n\n\t\tif (this.supportsTouch()) {\n\t\t\tthis.setup(manager);\n\t\t}\n\t}\n\n\t/**\n\t * setup\n\t * @param {*} manager \n\t */\n\tsetup(manager) {\n\n\t\tthis.manager = manager;\n\t\tthis.layout = this.manager.layout;\n\t\tthis.element = this.manager.views.container;\n\t\tthis.scroller = this.element;\n\n\t\t// set lookahead offset to page width\n\t\tthis.manager.settings.offset = this.layout.width;\n\t\tthis.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n\t\tthis.isVertical = this.manager.layout.axis === \"vertical\";\n\n\t\t// disable snapping if not paginated or axis in not horizontal\n\t\tif (!this.manager.paginated || this.isVertical) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\t\tthis.resizeCanceler = false;\n\t\tthis.snapping = false;\n\n\t\tthis.scrollLeft;\n\t\tthis.scrollTop;\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\n\t\tthis.addListeners();\n\t}\n\n\t/**\n\t * supportsTouch\n\t * @returns {boolean}\n\t */\n\tsupportsTouch() {\n\n\t\treturn (\"ontouchstart\" in window) || window.DocumentTouch && document instanceof DocumentTouch;\n\t}\n\n\t/**\n\t * disableScroll\n\t * @private\n\t */\n\tdisableScroll() {\n\n\t\t//this.element.style.overflow = \"hidden\";\n\t}\n\n\t/**\n\t * enableScroll\n\t * @private\n\t */\n\tenableScroll() {\n\n\t\t//this.element.style.overflow = null;\n\t}\n\n\t/**\n\t * addListeners\n\t * @private\n\t */\n\taddListeners() {\n\n\t\twindow.addEventListener(\"resize\", this.onResize.bind(this));\n\n\t\tthis.scroller.addEventListener(\"scroll\", this.onScroll.bind(this));\n\t\tthis.scroller.addEventListener(\"touchstart\", this.onTouchStart.bind(this), { passive: true });\n\t\tthis.scroller.addEventListener(\"touchmove\", this.onTouchMove.bind(this), { passive: true });\n\t\tthis.scroller.addEventListener(\"touchend\", this.onTouchEnd.bind(this), { passive: true });\n\n\t\tthis.on(\"touchstart\", this.onTouchStart.bind(this));\n\t\tthis.on(\"touchmove\", this.onTouchMove.bind(this));\n\t\tthis.on(\"touchend\", this.onTouchEnd.bind(this));\n\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n\t}\n\n\t/**\n\t * removeListeners\n\t * @private\n\t */\n\tremoveListeners() {\n\n\t\twindow.removeEventListener(\"resize\", this.onResize.bind(this));\n\n\t\tthis.scroller.removeEventListener(\"scroll\", this.onScroll.bind(this));\n\t\tthis.scroller.removeEventListener(\"touchstart\", this.onTouchStart.bind(this), { passive: true });\n\t\tthis.scroller.removeEventListener(\"touchmove\", this.onTouchMove.bind(this), { passive: true });\n\t\tthis.scroller.removeEventListener(\"touchend\", this.onTouchEnd.bind(this), { passive: true });\n\n\t\tthis.off(\"touchstart\", this.onTouchStart.bind(this));\n\t\tthis.off(\"touchmove\", this.onTouchMove.bind(this));\n\t\tthis.off(\"touchend\", this.onTouchEnd.bind(this));\n\n\t\tthis.manager.off(EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n\t}\n\n\t/**\n\t * afterDisplayed\n\t * @param {*} view\n\t * @private\n\t */\n\tafterDisplayed(view) {\n\n\t\tconst contents = view.contents;\n\t\t[\"touchstart\", \"touchmove\", \"touchend\"].forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\t}\n\n\t/**\n\t * triggerViewEvent\n\t * @param {Event} e \n\t * @param {Contents} contents \n\t * @private\n\t */\n\ttriggerViewEvent(e, contents) {\n\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\t/**\n\t * onScroll\n\t * @param {Event} e \n\t * @private\n\t */\n\tonScroll(e) {\n\n\t\tthis.scrollLeft = this.scroller.scrollLeft;\n\t\tthis.scrollTop = this.scroller.scrollTop;\n\t}\n\n\t/**\n\t * onResize\n\t * @param {Event} e \n\t * @private\n\t */\n\tonResize(e) {\n\n\t\tthis.resizeCanceler = true;\n\t}\n\n\t/**\n\t * onTouchStart\n\t * @param {Event} e \n\t * @private\n\t */\n\tonTouchStart(e) {\n\n\t\tconst { screenX, screenY } = e.touches[0];\n\n\t\tthis.touchCanceler = true;\n\n\t\tif (!this.startTouchX) {\n\t\t\tthis.startTouchX = screenX;\n\t\t\tthis.startTouchY = screenY;\n\t\t\tthis.startTime = new Date().getTime();\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = new Date().getTime();\n\t}\n\n\t/**\n\t * onTouchMove\n\t * @param {Event} e \n\t * @private\n\t */\n\tonTouchMove(e) {\n\n\t\tconst { screenX, screenY } = e.touches[0];\n\t\tconst deltaY = Math.abs(screenY - this.endTouchY);\n\n\t\tthis.touchCanceler = true;\n\n\t\tif (deltaY < 10) {\n\t\t\tthis.element.scrollLeft -= screenX - this.endTouchX;\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = new Date().getTime();\n\t}\n\n\t/**\n\t * onTouchEnd\n\t * @param {Event} e \n\t * @private\n\t */\n\tonTouchEnd(e) {\n\n\t\tthis.touchCanceler = false;\n\t\tlet swipped = this.wasSwiped();\n\n\t\tif (swipped !== 0) {\n\t\t\tthis.snap(swipped);\n\t\t} else {\n\t\t\tthis.snap();\n\t\t}\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\t}\n\n\t/**\n\t * wasSwiped\n\t * @returns {number}\n\t */\n\twasSwiped() {\n\n\t\tconst snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tconst distance = (this.endTouchX - this.startTouchX);\n\t\tconst absolute = Math.abs(distance);\n\t\tconst time = this.endTime - this.startTime;\n\t\tconst velocity = (distance / time);\n\t\tconst minVelocity = this.settings.minVelocity;\n\n\t\tif (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (velocity > minVelocity) {\n\t\t\treturn -1; // previous\n\t\t} else if (velocity < -minVelocity) {\n\t\t\treturn 1; // next\n\t\t}\n\t}\n\n\t/**\n\t * needsSnap\n\t * @returns {boolean}\n\t */\n\tneedsSnap() {\n\n\t\tconst left = this.scrollLeft;\n\t\tconst snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\treturn (left % snapWidth) !== 0;\n\t}\n\n\t/**\n\t * snap\n\t * @param {number} [howMany=0] \n\t * @returns {Promise}\n\t */\n\tsnap(howMany = 0) {\n\n\t\tconst left = this.scrollLeft;\n\t\tconst snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet snapTo = Math.round(left / snapWidth) * snapWidth;\n\n\t\tif (howMany) {\n\t\t\tsnapTo += (howMany * snapWidth);\n\t\t}\n\n\t\treturn this.smoothScrollTo(snapTo);\n\t}\n\n\t/**\n\t * smoothScrollTo\n\t * @param {number} destination \n\t * @returns {Promise}\n\t */\n\tsmoothScrollTo(destination) {\n\n\t\tconst deferred = new Defer();\n\t\tconst start = this.scrollLeft;\n\t\tconst startTime = new Date().getTime();\n\t\tconst duration = this.settings.duration;\n\n\t\tthis.snapping = true;\n\n\t\t// add animation loop\n\t\tconst tick = () => {\n\n\t\t\tconst now = new Date().getTime();\n\t\t\tconst time = Math.min(1, ((now - startTime) / duration));\n\n\t\t\tif (this.touchCanceler || this.resizeCanceler) {\n\t\t\t\tthis.resizeCanceler = false;\n\t\t\t\tthis.snapping = false;\n\t\t\t\tdeferred.resolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (time < 1) {\n\t\t\t\trequestAnimationFrame(tick);\n\t\t\t\tthis.scrollTo(start + ((destination - start) * time), 0);\n\t\t\t} else {\n\t\t\t\tthis.scrollTo(destination, 0);\n\t\t\t\tthis.snapping = false;\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t}\n\n\t\ttick.call(this);\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * scrollTo\n\t * @param {number} [left=0] \n\t * @param {number} [top=0] \n\t */\n\tscrollTo(left = 0, top = 0) {\n\n\t\tthis.scroller.scrollLeft = left;\n\t\tthis.scroller.scrollTop = top;\n\t}\n\n\t/**\n\t * destroy\n\t * @returns {void}\n\t */\n\tdestroy() {\n\n\t\tif (typeof this.scroller === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.removeListeners();\n\t\tthis.scroller = undefined;\n\t}\n}\n\nEventEmitter(Snap.prototype);\n\nexport default Snap;","/**\n * Views\n */\nclass Views extends Array {\n\t/**\n\t * Constructor\n\t */\n\tconstructor() {\n\n\t\tsuper();\n\t\t/**\n\t\t * @member {Element} container\n\t\t * @memberof Views\n\t\t * @readonly\n\t\t */\n\t\tthis.container = null;\n\t\tthis.init();\n\t}\n\n\tinit() {\n\n\t\tthis.container = document.createElement(\"div\");\n\t\tthis.container.classList.add(\"views-container\");\n\t\tthis.container.style.display = \"flex\";\n\t\tthis.container.style.width = \"100%\";\n\t\tthis.container.style.height = \"100%\";\n\t}\n\n\t/**\n\t * first\n\t * @returns {object} view\n\t */\n\tfirst() {\n\n\t\treturn this[0];\n\t}\n\n\t/**\n\t * last\n\t * @returns {object} view\n\t */\n\tlast() {\n\n\t\treturn this[this.length - 1];\n\t}\n\n\t/**\n\t * get\n\t * @param {number} i index\n\t * @returns {object} view\n\t */\n\tget(i) {\n\n\t\treturn this[i];\n\t}\n\n\t/**\n\t * append\n\t * @param {object} view \n\t * @returns {object} view\n\t */\n\tappend(view) {\n\n\t\tthis.container.appendChild(view.container);\n\t\tthis.push(view);\n\t\treturn view;\n\t}\n\n\t/**\n\t * prepend\n\t * @param {object} view \n\t * @returns {object} view\n\t */\n\tprepend(view) {\n\n\t\tthis.container.insertBefore(view.container, this.container.firstChild);\n\t\tthis.unshift(view);\n\t\treturn view;\n\t}\n\n\t/**\n\t * insert\n\t * @param {object} view \n\t * @param {number} index \n\t * @returns {object} view\n\t */\n\tinsert(view, index) {\n\n\t\tconst children = this.container.children;\n\t\tif (index < children.length) {\n\t\t\tthis.container.insertBefore(view.container, children[index]);\n\t\t} else {\n\t\t\tthis.container.appendChild(view.container);\n\t\t}\n\t\tthis.splice(index, 0, view);\n\t\treturn view;\n\t}\n\n\t/**\n\t * remove\n\t * @param {object} view \n\t * @param {number} [i] index\n\t */\n\tremove(view, i) {\n\t\t\n\t\tconst index = i || this.indexOf(view);\n\t\tif (index > -1) {\n\t\t\tthis.container.removeChild(view.container);\n\t\t\tthis.splice(index, 1);\n\t\t\tview.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * clear\n\t */\n\tclear() {\n\n\t\tconst len = this.length;\n\n\t\tfor (let i = 0; i < len; ++i) {\n\t\t\tconst view = this[i];\n\t\t\tthis.remove(view, i);\n\t\t}\n\t}\n\n\t/**\n\t * find\n\t * @param {Section} section \n\t * @returns {object} view\n\t */\n\tfind(section) {\n\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tconst view = this[i];\n\t\t\tif (view.displayed &&\n\t\t\t\tview.section.index == section.index) {\n\t\t\t\treturn view;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * displayed\n\t * @returns {object[]}\n\t */\n\tdisplayed() {\n\n\t\tconst displayed = [];\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tconst view = this[i];\n\t\t\tif (view.displayed) {\n\t\t\t\tdisplayed.push(view);\n\t\t\t}\n\t\t}\n\t\treturn displayed;\n\t}\n\n\t/**\n\t * show\n\t */\n\tshow() {\n\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tconst view = this[i];\n\t\t\tif (view.displayed) {\n\t\t\t\tview.show();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * hide\n\t */\n\thide() {\n\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tconst view = this[i];\n\t\t\tif (view.displayed) {\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * update\n\t */\n\tupdate() {\n\n\t\tfor (let i = 0; i < this.length; ++i) {\n\t\t\tconst view = this[i];\n\t\t\tif (view.displayed) {\n\t\t\t\tview.update();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.container = undefined;\n\t}\n}\n\nexport default Views;","import EventEmitter from \"event-emitter\";\nimport Contents from \"../../contents\";\nimport Defer from \"../../utils/defer\";\nimport { EVENTS } from \"../../utils/constants\";\nimport {\n\textend,\n\tcreateBlobUrl,\n\trevokeBlobUrl,\n\tuuid\n} from \"../../utils/core\";\nimport Marks from \"../../marks-pane/marks\";\nimport Highlight from \"../../marks-pane/highlight\";\nimport Underline from \"../../marks-pane/underline\";\n\nconst AXIS_H = \"horizontal\";\nconst AXIS_V = \"vertical\";\n\n/**\n * IframeView class\n */\nclass IframeView {\n\t/**\n\t * Constructor\n\t * @param {Layout} layout\n\t * @param {Section} section\n\t * @param {object} [options]\n\t * @param {string} [options.method='write'] values: `\"blobUrl\"` OR `\"srcdoc\"` OR `\"write\"`\n\t * @param {string} [options.ignoreClass='']\n\t * @param {string[]} [options.sandbox=[]] iframe sandbox policy list\n\t */\n\tconstructor(layout, section, options) {\n\n\t\tthis.layout = layout;\n\t\tthis.section = section;\n\t\tthis.settings = extend({\n\t\t\tmethod: null,\n\t\t\tsandbox: [],\n\t\t\tforceEvenPages: false,\n\t\t\tignoreClass: \"\",\n\t\t}, options || {});\n\t\t/**\n\t\t * @member {string} id\n\t\t * @memberof IframeView\n\t\t * @readonly\n\t\t */\n\t\tthis.id = \"vc-\" + uuid();\n\t\t/**\n\t\t * @member {Contents} contents\n\t\t * @memberof IframeView\n\t\t * @readonly\n\t\t */\n\t\tthis.contents = null;\n\t\tthis.document = null;\n\t\t/**\n\t\t * @member {Element} container\n\t\t * @memberof IframeView\n\t\t * @readonly\n\t\t */\n\t\tthis.container = null;\n\t\tthis.displayed = false;\n\t\t/**\n\t\t * @member {Marks} marks\n\t\t * @memberof IframeView\n\t\t * @readonly\n\t\t */\n\t\tthis.marks = null;\n\t\t/**\n\t\t * Load method\n\t\t * @member {string} method\n\t\t * @memberof IframeView\n\t\t * @readonly\n\t\t */\n\t\tthis.method = this.settings.method || \"write\";\n\t\t/**\n\t\t * @member {string} writingMode\n\t\t * @memberof IframeView\n\t\t * @readonly\n\t\t */\n\t\tthis.writingMode = \"\";\n\t\tthis.init();\n\t}\n\n\t/**\n\t * create view-container\n\t * @private\n\t */\n\tinit() {\n\n\t\tthis.container = document.createElement(\"div\");\n\t\tthis.container.classList.add(\"view-container\");\n\t\tthis.container.style.height = \"0\";\n\t\tthis.container.style.width = \"0\";\n\t\tthis.container.style.overflow = \"hidden\";\n\t\tthis.container.style.position = \"relative\";\n\t}\n\n\t/**\n\t * Create iframe element\n\t * @returns {Element} iframe\n\t * @private\n\t */\n\tcreate() {\n\n\t\tthis.iframe = document.createElement(\"iframe\");\n\t\tthis.iframe.id = this.id;\n\t\tthis.iframe.seamless = \"seamless\";\n\t\tthis.iframe.style.overflow = \"hidden\";\n\t\tthis.iframe.style.border = \"none\";\n\t\tthis.iframe.style.width = \"0\";\n\t\tthis.iframe.style.height = \"0\";\n\t\tthis.settings.sandbox.forEach(p => {\n\t\t\tif (p) this.iframe.sandbox.add(p);\n\t\t});\n\t\tthis.iframe.setAttribute(\"enable-annotation\", \"true\");\n\t\tthis.container.setAttribute(\"ref\", this.section.index);\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\treturn this.iframe;\n\t}\n\n\t/**\n\t * render\n\t * @param {Function} request \n\t * @returns {Promise<string>} section render\n\t */\n\trender(request) {\n\n\t\tconst def = new Defer();\n\n\t\tthis.create();\n\t\tthis.section.render(request).then((contents) => {\n\t\t\treturn this.load(contents);\n\t\t}).then((output) => {\n\t\t\tthis.update();\n\t\t\tdef.resolve(output);\n\t\t}, (err) => {\n\t\t\t/**\n\t\t\t * @event loaderror\n\t\t\t * @param {object} err\n\t\t\t * @memberof IframeView\n\t\t\t */\n\t\t\tthis.emit(EVENTS.VIEWS.LOAD_ERROR, err);\n\t\t\tdef.reject(err);\n\t\t}).then(() => {\n\t\t\t/**\n\t\t\t * @event rendered\n\t\t\t * @param {IframeView} view\n\t\t\t * @memberof IframeView\n\t\t\t */\n\t\t\tthis.emit(EVENTS.VIEWS.RENDERED, this);\n\t\t});\n\n\t\treturn def.promise;\n\t}\n\n\t/**\n\t * reset\n\t */\n\treset() {\n\n\t\tif (this.iframe) {\n\t\t\tthis.iframe.style.width = \"0\";\n\t\t\tthis.iframe.style.height = \"0\";\n\t\t\tthis.width = 0;\n\t\t\tthis.height = 0;\n\t\t}\n\t}\n\n\t/**\n\t * Update view\n\t */\n\tupdate() {\n\n\t\tthis.contents.format(this.layout);\n\t\tthis.axis();\n\t\tthis.mode();\n\t\tthis.expand();\n\t}\n\n\t/**\n\t * update axis\n\t * @private\n\t */\n\taxis() {\n\n\t\tif (this.layout.axis === AXIS_H) {\n\t\t\tthis.container.style.flex = \"none\";\n\t\t} else {\n\t\t\tthis.container.style.flex = \"initial\";\n\t\t}\n\t}\n\n\t/**\n\t * update writing mode\n\t * @param {string} value \n\t * @private\n\t */\n\tmode(value) {\n\n\t\tconst mode = value || this.contents.mode;\n\n\t\tif (this.writingMode !== mode) {\n\t\t\tthis.writingMode = mode;\n\t\t\tthis.emit(EVENTS.VIEWS.WRITING_MODE, mode);\n\t\t}\n\t}\n\n\t/**\n\t * Resize a single axis based on content dimensions\n\t * @private\n\t */\n\texpand() {\n\n\t\tif (!this.iframe || this.expanding) return;\n\n\t\tthis.expanding = true;\n\t\tconst sz = this.contents.textSize();\n\n\t\tif (this.layout.axis === AXIS_H) {\n\n\t\t\tif (sz.width % this.layout.pageWidth > 0) {\n\t\t\t\tsz.width = Math.ceil(sz.width / this.layout.pageWidth) * this.layout.pageWidth;\n\t\t\t}\n\n\t\t\tif (this.settings.forceEvenPages) {\n\t\t\t\tconst columns = (sz.width / this.layout.pageWidth);\n\t\t\t\tif (this.layout.divisor > 1 &&\n\t\t\t\t\tthis.layout.name === \"reflowable\" &&\n\t\t\t\t\t(columns % 2 > 0)) {\n\t\t\t\t\t// add a blank page\n\t\t\t\t\tsz.width += this.layout.pageWidth;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this.layout.axis === AXIS_V) {\n\n\t\t\tif (this.layout.flow === \"paginated\" &&\n\t\t\t\tsz.height % this.layout.height > 0) {\n\t\t\t\tsz.height = Math.ceil(sz.height / this.layout.height) * this.layout.height;\n\t\t\t}\n\t\t}\n\n\t\tif (this.width !== sz.width ||\n\t\t\tthis.height !== sz.height) {\n\t\t\tthis.reframe(sz.width, sz.height);\n\t\t}\n\n\t\tthis.expanding = false;\n\t}\n\n\t/**\n\t * reframe\n\t * @param {number} width \n\t * @param {number} height \n\t * @private\n\t */\n\treframe(width, height) {\n\n\t\tthis.container.style.width = width + \"px\";\n\t\tthis.container.style.height = height + \"px\";\n\n\t\tthis.iframe.style.width = width + \"px\";\n\t\tthis.iframe.style.height = height + \"px\";\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tthis.marks && this.marks.render();\n\t}\n\n\t/**\n\t * load\n\t * @param {string} contents \n\t * @returns {Promise<any>} loading promise\n\t */\n\tload(contents) {\n\n\t\tconst loading = new Defer();\n\n\t\tif (!this.iframe) {\n\t\t\tloading.reject(new Error(\"No Iframe Available\"));\n\t\t\treturn loading.promise;\n\t\t}\n\n\t\tthis.container.appendChild(this.iframe);\n\t\tthis.document = this.iframe.contentDocument;\n\t\tthis.iframe.onload = (e) => this.onLoad(e, loading);\n\n\t\tif (!this.document) {\n\t\t\tloading.reject(new Error(\"No Document Available\"));\n\t\t\treturn loading.promise;\n\t\t} else if (this.method === \"blobUrl\") {\n\t\t\tthis.blobUrl = createBlobUrl(contents, \"application/xhtml+xml\");\n\t\t\tthis.iframe.src = this.blobUrl;\n\t\t} else if (this.method === \"srcdoc\") {\n\t\t\tthis.iframe.srcdoc = contents;\n\t\t} else {\n\t\t\tthis.document.open();\n\t\t\tthis.document.write(\"<!DOCTYPE html>\");\n\t\t\tthis.document.write(contents);\n\t\t\tthis.document.close();\n\t\t}\n\n\t\treturn loading.promise;\n\t}\n\n\t/**\n\t * onLoad\n\t * @param {Event} event \n\t * @param {Defer} defer \n\t */\n\tonLoad(event, defer) {\n\n\t\tthis.document = event.target.contentDocument;\n\t\tthis.contents = new Contents(this.document, this.document.body, this.section);\n\n\t\tlet link = this.document.querySelector(\"link[rel='canonical']\");\n\t\tif (link) {\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t} else {\n\t\t\tlink = this.document.createElement(\"link\");\n\t\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t\tthis.document.head.appendChild(link);\n\t\t}\n\n\t\tthis.contents.on(EVENTS.CONTENTS.RESIZED, (rect) => {\n\t\t\t/**\n\t\t\t * @event resized\n\t\t\t * @param {object} rect\n\t\t\t * @memberof IframeView\n\t\t\t */\n\t\t\tthis.emit(EVENTS.VIEWS.RESIZED, rect);\n\t\t});\n\n\t\tdefer.resolve(this.contents);\n\t}\n\n\t/**\n\t * display\n\t * @param {Function} request \n\t * @returns {Promise<view>} displayed promise\n\t */\n\tdisplay(request) {\n\n\t\tconst displayed = new Defer();\n\n\t\tif (this.displayed) {\n\t\t\tdisplayed.resolve(this);\n\t\t} else {\n\t\t\tthis.render(request).then(() => {\n\t\t\t\t/**\n\t\t\t\t * @event displayed\n\t\t\t\t * @memberof IframeView\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.VIEWS.DISPLAYED);\n\t\t\t\tthis.displayed = true;\n\t\t\t\tdisplayed.resolve(this);\n\t\t\t}, (err) => {\n\t\t\t\tdisplayed.reject(err);\n\t\t\t});\n\t\t}\n\n\t\treturn displayed.promise;\n\t}\n\n\t/**\n\t * show\n\t */\n\tshow() {\n\n\t\tthis.container.style.visibility = \"visible\";\n\t\tthis.iframe.style.visibility = \"visible\";\n\t\t// Remind Safari to redraw the iframe\n\t\tthis.iframe.style.transform = \"translateZ(0)\";\n\t\tthis.iframe.offsetWidth;\n\t\tthis.iframe.style.transform = null;\n\t\t/**\n\t\t * @event shown\n\t\t * @param {IframeView} view\n\t\t * @memberof IframeView\n\t\t */\n\t\tthis.emit(EVENTS.VIEWS.SHOWN, this);\n\t}\n\n\t/**\n\t * hide\n\t */\n\thide() {\n\n\t\tthis.container.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\t\t/**\n\t\t * @event hidden\n\t\t * @param {IframeView} view\n\t\t * @memberof IframeView\n\t\t */\n\t\tthis.emit(EVENTS.VIEWS.HIDDEN, this);\n\t}\n\n\t/**\n\t * offset\n\t * @returns {{ top: number, left: number }}\n\t */\n\toffset() {\n\n\t\treturn {\n\t\t\ttop: this.container.offsetTop,\n\t\t\tleft: this.container.offsetLeft\n\t\t};\n\t}\n\n\t/**\n\t * position\n\t * @returns {DOMRect}\n\t */\n\tposition() {\n\n\t\treturn this.container.getBoundingClientRect();\n\t}\n\n\t/**\n\t * locationOf\n\t * @param {string|EpubCFI} target \n\t * @returns {{ top: number, left: number }}\n\t */\n\tlocationOf(target) {\n\n\t\tconst pos = this.contents.locationOf(\n\t\t\ttarget, this.settings.ignoreClass\n\t\t);\n\n\t\treturn {\n\t\t\ttop: pos.top,\n\t\t\tleft: pos.left\n\t\t};\n\t}\n\n\t/**\n\t * highlight\n\t * @param {string} cfiRange \n\t * @param {object} [data={}] \n\t * @param {Function} [cb=null] callback function\n\t * @param {string} [className='epubjs-hl'] \n\t * @param {object} [styles={}] \n\t * @returns {object}\n\t */\n\thighlight(cfiRange, data = {}, cb = null, className = \"epubjs-hl\", styles = {}) {\n\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (this.marks === null) {\n\t\t\tthis.marks = new Marks(this.iframe, this.container);\n\t\t}\n\n\t\tconst attributes = Object.assign({\n\t\t\t\"fill\": \"yellow\",\n\t\t\t\"fill-opacity\": \"0.3\",\n\t\t\t\"mix-blend-mode\": \"multiply\"\n\t\t}, styles);\n\t\tconst emitter = (e) => {\n\t\t\t/**\n\t\t\t * @event markClicked\n\t\t\t * @param {string} cfiRange\n\t\t\t * @param {object} data\n\t\t\t * @memberof IframeView\n\t\t\t */\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\t\tconst key = encodeURI(\"epubjs-hl:\" + cfiRange);\n\t\tconst range = this.contents.range(cfiRange);\n\t\tconst m = new Highlight(range, {\n\t\t\tclassName,\n\t\t\tdata,\n\t\t\tattributes,\n\t\t\tlisteners: [emitter, cb]\n\t\t});\n\t\tconst h = this.marks.appendMark(key, m);\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\n\t\treturn h;\n\t}\n\n\t/**\n\t * underline\n\t * @param {string} cfiRange \n\t * @param {object} [data={}] \n\t * @param {Function} [cb=null]\n\t * @param {string} [className='epubjs-ul'] \n\t * @param {object} [styles={}] \n\t * @returns {object}\n\t */\n\tunderline(cfiRange, data = {}, cb = null, className = \"epubjs-ul\", styles = {}) {\n\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (this.marks === null) {\n\t\t\tthis.marks = new Marks(this.iframe, this.container);\n\t\t}\n\n\t\tconst attributes = Object.assign({\n\t\t\t\"stroke\": \"black\",\n\t\t\t\"stroke-opacity\": \"0.3\",\n\t\t\t\"mix-blend-mode\": \"multiply\"\n\t\t}, styles);\n\t\tconst emitter = (e) => {\n\t\t\t/**\n\t\t\t * @event markClicked\n\t\t\t * @param {string} cfiRange\n\t\t\t * @param {object} data\n\t\t\t * @memberof IframeView\n\t\t\t */\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\t\tconst key = encodeURI(\"epubjs-ul:\" + cfiRange);\n\t\tconst range = this.contents.range(cfiRange);\n\t\tconst m = new Underline(range, {\n\t\t\tclassName,\n\t\t\tdata,\n\t\t\tattributes,\n\t\t\tlisteners: [emitter, cb]\n\t\t});\n\t\tconst h = this.marks.appendMark(key, m);\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\t/**\n\t * unhighlight\n\t * @param {string} cfiRange \n\t * @returns {boolean}\n\t */\n\tunhighlight(cfiRange) {\n\n\t\tconst key = encodeURI(\"epubjs-hl:\" + cfiRange);\n\t\tconst mark = this.marks.get(key);\n\t\tlet result = false;\n\t\tif (mark) {\n\t\t\tmark.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\tmark.element.removeEventListener(\"click\", l);\n\t\t\t\t\tmark.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.marks.removeMark(key);\n\t\t\tresult = true;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * ununderline\n\t * @param {string} cfiRange \n\t * @returns {boolean}\n\t */\n\tununderline(cfiRange) {\n\n\t\tconst key = encodeURI(\"epubjs-ul:\" + cfiRange);\n\t\tconst mark = this.marks.get(key);\n\t\tlet result = false;\n\t\tif (mark) {\n\t\t\tmark.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\tmark.element.removeEventListener(\"click\", l);\n\t\t\t\t\tmark.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tthis.marks.removeMark(key);\n\t\t\tresult = true;\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tif (this.marks) {\n\t\t\tthis.marks.forEach((mark, key) => {\n\t\t\t\tif (mark instanceof Highlight) {\n\t\t\t\t\tthis.unhighlight(mark.data[\"epubcfi\"]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.ununderline(mark.data[\"epubcfi\"]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.blobUrl) {\n\t\t\trevokeBlobUrl(this.blobUrl);\n\t\t\tthis.blobUrl = undefined;\n\t\t}\n\n\t\tif (this.displayed) {\n\t\t\tthis.displayed = undefined;\n\t\t\tthis.expanding = undefined;\n\t\t\tthis.document = undefined;\n\t\t\tthis.contents.destroy();\n\t\t\tthis.contents = undefined;\n\t\t\tthis.settings = undefined;\n\t\t\tthis.section = undefined;\n\t\t\tthis.container.removeChild(this.iframe);\n\t\t\tthis.container = undefined;\n\t\t\tthis.iframe = undefined;\n\t\t\tthis.layout = undefined;\n\t\t\tthis.method = undefined;\n\t\t\tthis.width = undefined;\n\t\t\tthis.height = undefined;\n\t\t\tthis.writingMode = undefined;\n\t\t\tthis.id = undefined;\n\n\t\t\tif (this.marks) {\n\t\t\t\tthis.marks.element.remove();\n\t\t\t\tthis.marks.clear();\n\t\t\t\tthis.marks = undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n\nEventEmitter(IframeView.prototype);\n\nexport default IframeView;","import EpubCFI from \"./epubcfi\";\nimport { nodeBounds } from \"./utils/core\";\n\n/**\n * Map text locations to CFI ranges\n */\nclass Mapping {\n\t/**\n\t * Constructor\n\t * @param {Layout} layout Layout to apply\n\t * @param {boolean} [dev=false] toggle developer highlighting\n\t */\n\tconstructor(layout, dev = false) {\n\n\t\tthis.layout = layout;\n\t\tthis.devMode = dev;\n\t}\n\n\t/**\n\t * Find CFI pairs for entire section at once\n\t * @param {any} view \n\t * @returns {object[]}\n\t */\n\tsection(view) {\n\n\t\tconst ranges = this.findRanges(view);\n\t\treturn this.rangeListToCfiList(view.section.cfiBase, ranges);\n\t}\n\n\t/**\n\t * Find CFI pairs for a page\n\t * @param {Contents} contents Contents from view\n\t * @param {string} cfiBase string of the base for a cfi\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @returns {{ start: string, end: string }}\n\t */\n\tpage(contents, cfiBase, start, end) {\n\n\t\tconst root = contents && contents.document ? contents.document.body : false;\n\n\t\tif (!root) return null;\n\n\t\tconst result = this.rangePairToCfiPair(cfiBase, {\n\t\t\tstart: this.findStart(root, start, end),\n\t\t\tend: this.findEnd(root, start, end)\n\t\t});\n\n\t\tif (this.devMode === true) {\n\t\t\tconst doc = contents.document;\n\t\t\tconst startRange = new EpubCFI(result.start).toRange(doc);\n\t\t\tconst endRange = new EpubCFI(result.end).toRange(doc);\n\t\t\tconst selection = doc.defaultView.getSelection();\n\t\t\tconst range = doc.createRange();\n\t\t\tselection.removeAllRanges();\n\t\t\trange.setStart(startRange.startContainer, startRange.startOffset);\n\t\t\trange.setEnd(endRange.endContainer, endRange.endOffset);\n\t\t\tselection.addRange(range);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Walk a node, preforming a function on each node it finds\n\t * @param {Node} root Node to walkToNode\n\t * @param {Function} func walk function\n\t * @return {any} returns the result of the walk function\n\t * @private\n\t */\n\twalk(root, func) {\n\n\t\t// IE11 has strange issue, if root is text node IE throws exception on\n\t\t// calling treeWalker.nextNode(), saying\n\t\t// Unexpected call to method or property access instead of returning null value\n\t\tif (root && root.nodeType === Node.TEXT_NODE) {\n\t\t\treturn;\n\t\t}\n\t\t// safeFilter is required so that it can work in IE as filter is a function for IE\n\t\t// and for other browser filter is an object.\n\t\tconst filter = {\n\t\t\tacceptNode: (node) => {\n\t\t\t\tif (node.data.trim().length > 0) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t} else {\n\t\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst safeFilter = filter.acceptNode;\n\t\tsafeFilter.acceptNode = filter.acceptNode;\n\n\t\tconst treeWalker = document.createTreeWalker(\n\t\t\troot,\n\t\t\tNodeFilter.SHOW_TEXT,\n\t\t\tsafeFilter,\n\t\t\tfalse\n\t\t);\n\t\tlet node;\n\t\tlet result;\n\t\twhile ((node = treeWalker.nextNode())) {\n\t\t\tresult = func(node);\n\t\t\tif (result) break;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * findRanges\n\t * @param {*} view \n\t * @returns {object[]} columns\n\t */\n\tfindRanges(view) {\n\n\t\tconst columns = [];\n\t\tconst scrollWidth = view.contents.scrollWidth();\n\t\tconst spreads = Math.ceil(scrollWidth / this.layout.spreadWidth);\n\t\tconst countPages = spreads * this.layout.divisor;\n\t\tconst columnWidth = this.layout.columnWidth;\n\t\tconst gap = this.layout.gap;\n\t\tconst body = view.document.body;\n\n\t\tfor (let i = 0; i < countPages; i++) {\n\t\t\tconst start = (columnWidth + gap) * i;\n\t\t\tconst end = (columnWidth * (i + 1)) + (gap * i);\n\t\t\tcolumns.push({\n\t\t\t\tstart: this.findStart(body, start, end),\n\t\t\t\tend: this.findEnd(body, start, end)\n\t\t\t});\n\t\t}\n\n\t\treturn columns;\n\t}\n\n\t/**\n\t * Find Start Range\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t * @private\n\t */\n\tfindStart(root, start, end) {\n\n\t\tconst stack = [root];\n\t\tconst hor = this.layout.axis === \"horizontal\";\n\t\tconst ltr = this.layout.direction === \"ltr\";\n\t\tconst rtl = this.layout.direction === \"rtl\";\n\t\tlet prev = root;\n\n\t\twhile (stack.length) {\n\n\t\t\tconst el = stack.shift();\n\t\t\tconst found = this.walk(el, (node) => {\n\n\t\t\t\tlet left, right, top, bottom;\n\t\t\t\tconst elPos = nodeBounds(node);\n\n\t\t\t\tif (hor && ltr) {\n\n\t\t\t\t\tleft = hor ? elPos.left : elPos.top;\n\t\t\t\t\tright = hor ? elPos.right : elPos.bottom;\n\n\t\t\t\t\tif (left >= start && left <= end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (right > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\t\t\t\t} else if (hor && rtl) {\n\n\t\t\t\t\tleft = elPos.left;\n\t\t\t\t\tright = elPos.right;\n\n\t\t\t\t\tif (right <= end && right >= start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (left < end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttop = elPos.top;\n\t\t\t\t\tbottom = elPos.bottom;\n\n\t\t\t\t\tif (top >= start && top <= end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (bottom > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (found) {\n\t\t\t\treturn this.findTextStartRange(found, start, end);\n\t\t\t}\n\t\t}\n\n\t\t// Return last element\n\t\treturn this.findTextStartRange(prev, start, end);\n\t}\n\n\t/**\n\t * Find End Range\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t * @private\n\t */\n\tfindEnd(root, start, end) {\n\n\t\tconst stack = [root];\n\t\tconst hor = this.layout.axis === \"horizontal\";\n\t\tconst ltr = this.layout.direction === \"ltr\";\n\t\tconst rtl = this.layout.direction === \"rtl\";\n\t\tlet prev = root;\n\n\t\twhile (stack.length) {\n\n\t\t\tconst el = stack.shift();\n\t\t\tconst found = this.walk(el, (node) => {\n\n\t\t\t\tlet left, right, top, bottom;\n\t\t\t\tconst elPos = nodeBounds(node);\n\n\t\t\t\tif (hor && ltr) {\n\n\t\t\t\t\tleft = Math.round(elPos.left);\n\t\t\t\t\tright = Math.round(elPos.right);\n\n\t\t\t\t\tif (left > end && prev) {\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t} else if (right > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\t\t\t\t} else if (hor && rtl) {\n\n\t\t\t\t\tleft = Math.round(hor ? elPos.left : elPos.top);\n\t\t\t\t\tright = Math.round(hor ? elPos.right : elPos.bottom);\n\n\t\t\t\t\tif (right < start && prev) {\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t} else if (left < start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttop = Math.round(elPos.top);\n\t\t\t\t\tbottom = Math.round(elPos.bottom);\n\n\t\t\t\t\tif (top > end && prev) {\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t} else if (bottom > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (found) {\n\t\t\t\treturn this.findTextEndRange(found, start, end);\n\t\t\t}\n\t\t}\n\n\t\t// end of chapter\n\t\treturn this.findTextEndRange(prev, start, end);\n\t}\n\n\t/**\n\t * Find Text Start Range\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t * @private\n\t */\n\tfindTextStartRange(node, start, end) {\n\n\t\tconst ranges = this.splitTextNodeIntoRanges(node);\n\t\tconst hor = this.layout.axis === \"horizontal\";\n\t\tconst ltr = this.layout.direction === \"ltr\";\n\t\tconst rtl = this.layout.direction === \"rtl\";\n\n\t\tfor (let i = 0; i < ranges.length; i++) {\n\n\t\t\tconst range = ranges[i];\n\t\t\tconst pos = range.getBoundingClientRect();\n\n\t\t\tif (hor && ltr) {\n\t\t\t\tif (pos.left >= start) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t} else if (hor && rtl) {\n\t\t\t\tif (pos.right <= end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (pos.top >= start) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ranges[0];\n\t}\n\n\t/**\n\t * Find Text End Range\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t * @private\n\t */\n\tfindTextEndRange(node, start, end) {\n\n\t\tconst ranges = this.splitTextNodeIntoRanges(node);\n\t\tconst hor = this.layout.axis === \"horizontal\";\n\t\tconst ltr = this.layout.direction === \"ltr\";\n\t\tconst rtl = this.layout.direction === \"rtl\";\n\t\tlet prev;\n\n\t\tfor (let i = 0; i < ranges.length; i++) {\n\n\t\t\tconst range = ranges[i];\n\t\t\tconst pos = range.getBoundingClientRect();\n\n\t\t\tif (hor && ltr) {\n\t\t\t\tif (pos.left > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if (pos.right > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t} else if (hor && rtl) {\n\t\t\t\tif (pos.right < start && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if (pos.left < start) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (pos.top > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if (pos.bottom > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprev = range;\n\t\t}\n\n\t\t// Ends before limit\n\t\treturn ranges[ranges.length - 1];\n\t}\n\n\t/**\n\t * Split up a text node into ranges for each word\n\t * @param {Node} root root node\n\t * @param {string} [splitter=' '] what to split on\n\t * @return {Array<Range>}\n\t * @private\n\t */\n\tsplitTextNodeIntoRanges(node, splitter = \" \") {\n\n\t\tconst ranges = [];\n\t\tconst textContent = node.textContent || \"\";\n\t\tconst text = textContent.trim();\n\t\tconst doc = node.ownerDocument;\n\t\tlet range;\n\t\tlet pos = text.indexOf(splitter);\n\t\tif (pos === -1 || node.nodeType != Node.TEXT_NODE) {\n\t\t\trange = doc.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\treturn [range];\n\t\t}\n\n\t\trange = doc.createRange();\n\t\trange.setStart(node, 0);\n\t\trange.setEnd(node, pos);\n\t\tranges.push(range);\n\t\trange = false;\n\n\t\twhile (pos !== -1) {\n\n\t\t\tpos = text.indexOf(splitter, pos + 1);\n\t\t\tif (pos > 0) {\n\n\t\t\t\tif (range) {\n\t\t\t\t\trange.setEnd(node, pos);\n\t\t\t\t\tranges.push(range);\n\t\t\t\t}\n\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(node, pos + 1);\n\t\t\t}\n\t\t}\n\n\t\tif (range) {\n\t\t\trange.setEnd(node, text.length);\n\t\t\tranges.push(range);\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Turn a pair of ranges into a pair of CFIs\n\t * @param {string} cfiBase base string for an EpubCFI\n\t * @param {{ start: Range, end: Range }} rangePair Range pair\n\t * @return {{ start: string, end: string }} EpubCFI pair\n\t * @private\n\t */\n\trangePairToCfiPair(cfiBase, rangePair) {\n\n\t\tconst startRange = rangePair.start;\n\t\tconst endRange = rangePair.end;\n\n\t\tstartRange.collapse(true);\n\t\tendRange.collapse(false);\n\n\t\treturn {\n\t\t\tstart: new EpubCFI(startRange, cfiBase).toString(),\n\t\t\tend: new EpubCFI(endRange, cfiBase).toString()\n\t\t};\n\t}\n\n\t/**\n\t * rangeListToCfiList\n\t * @param {string} cfiBase \n\t * @param {object[]} columns \n\t * @returns {object[]}\n\t */\n\trangeListToCfiList(cfiBase, columns) {\n\n\t\tconst map = [];\n\n\t\tfor (let i = 0; i < columns.length; i++) {\n\t\t\tconst cifPair = this.rangePairToCfiPair(cfiBase, columns[i]);\n\t\t\tmap.push(cifPair);\n\t\t}\n\n\t\treturn map;\n\t}\n}\n\nexport default Mapping;","const rectContains = (rect, x, y, offset) => {\n\n    const top = rect.top - offset.top;\n    const left = rect.left - offset.left;\n    const bottom = top + rect.height;\n    const right = left + rect.width;\n\n    return (top <= y && left <= x && bottom > y && right > x);\n}\n\n/**\n * Check if the item contains the point denoted by the passed coordinates\n * @param {Mark} mark the mark object\n * @param {number} x\n * @param {number} y\n * @returns {boolean}\n * @private\n */\nconst contains = (mark, target, x, y) => {\n\n    const rect = mark.getBoundingClientRect();\n    const offset = target.getBoundingClientRect();\n\n    // Check overall bounding box first\n    if (!rectContains(rect, x, y, offset)) {\n        return false;\n    }\n\n    // Then continue to check each child rect\n    const rects = mark.getClientRects();\n\n    for (let i = 0, len = rects.length; i < len; i++) {\n        if (rectContains(rects[i], x, y, offset)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n/**\n * Clone a mouse event object.\n * @param {MouseEvent} e A mouse event object to clone.\n * @returns {MouseEvent}\n * @private\n */\nconst clone = (e) => {\n\n    const opts = Object.assign({}, e, {\n        bubbles: false\n    });\n\n    return new MouseEvent(e.type, opts);\n}\n\nconst dispatch = (e, target, marks) => {\n\n    let x = e.clientX;\n    let y = e.clientY;\n\n    if (e.touches && e.touches.length) {\n        x = e.touches[0].clientX;\n        y = e.touches[0].clientY;\n    }\n\n    marks.forEach((mark, key) => {\n        if (contains(mark, target, x, y)) {\n            mark.dispatchEvent(clone(e));\n        }\n    });\n}\n\n/**\n * Start proxying all mouse events that occur on the target node to each node in\n * a set of tracked marks.\n *\n * The marks in tracked do not strictly have to be DOM Nodes, but they do have\n * to have dispatchEvent, getBoundingClientRect, and getClientRects methods.\n *\n * @param {Node} target The node on which to listen for mouse events.\n * @param {Mark[]} marks A (possibly mutable) array of marks to which to proxy events.\n */\nconst proxyMouse = (target, marks) => {\n\n    let node;\n    if (target.nodeName === \"iframe\" ||\n        target.nodeName === \"IFRAME\") {\n        node = target.contentDocument;\n    } else {\n        node = target;\n    }\n\n    const events = [\n        \"mouseup\",\n        \"mousedown\",\n        \"click\",\n        \"touchstart\"\n    ];\n\n    for (const event of events) {\n        node.addEventListener(event,\n            (e) => dispatch(e, target, marks), false);\n    }\n}\n\nexport default proxyMouse;","import Mark from \"./mark\";\n\nconst NS_URI = \"http://www.w3.org/2000/svg\";\n\n/**\n * Highlight class\n * @extends Mark\n */\nclass Highlight extends Mark {\n    /**\n     * Constructor\n     * @param {Range} range \n     * @param {object} [options]\n     * @param {string} [options.className] \n     * @param {object} [options.data={}] \n     * @param {object} [options.attributes={}] \n     * @param {object[]} [options.listeners=[]]\n     */\n    constructor(range, {\n        className,\n        data,\n        attributes,\n        listeners\n    }) {\n\n        super();\n        this.range = range;\n        this.className = className;\n        this.data = data || {};\n        this.attributes = attributes || {};\n        this.listeners = listeners || [];\n    }\n\n    /**\n     * bind\n     * @param {Node} element \n     * @param {Node} container \n     * @override\n     */\n    bind(element, container) {\n\n        super.bind(element, container);\n\n        for (const p in this.data) {\n            if (this.data.hasOwnProperty(p)) {\n                this.element.dataset[p] = this.data[p];\n            }\n        }\n\n        for (const p in this.attributes) {\n            if (this.attributes.hasOwnProperty(p)) {\n                this.element.setAttribute(p, this.attributes[p]);\n            }\n        }\n\n        if (this.className) {\n            this.element.classList.add(this.className);\n        }\n    }\n\n    /**\n     * render\n     * @override\n     */\n    render() {\n\n        this.clear();\n\n        const rects = this.range.getClientRects();\n        const offset = this.element.getBoundingClientRect();\n        const container = this.container.getBoundingClientRect();\n\n        for (let i = 0, len = rects.length; i < len; i++) {\n\n            const r = rects[i];\n            const rect = document.createElementNS(NS_URI, \"rect\");\n            rect.setAttribute(\"x\", r.left - offset.left + container.left);\n            rect.setAttribute(\"y\", r.top - offset.top + container.top);\n            rect.setAttribute(\"height\", r.height);\n            rect.setAttribute(\"width\", r.width);\n            this.element.appendChild(rect);\n        }\n    }\n}\n\nexport default Highlight;","/**\n * Mark class\n */\nclass Mark {\n\n    constructor() {\n        /**\n         * @member {Node} element the mark container to rects\n         * @memberof Mark\n         * @readonly\n         */\n        this.element = null;\n        this.range = null;\n    }\n\n    /**\n     * bind\n     * @param {Node} element the mark container to rects\n     * @param {Node} container the epub-view container\n     */\n    bind(element, container) {\n\n        this.element = element;\n        this.container = container;\n    }\n\n    /**\n     * unbind\n     * @returns {Node}\n     */\n    unbind() {\n\n        const el = this.element;\n        this.element = null;\n        return el;\n    }\n\n    /**\n     * Clear the mark container\n     */\n    clear() {\n\n        while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n        }\n    }\n\n    /**\n     * render\n     * @abstract\n     */\n    render() { }\n\n    /**\n     * Dispatch event\n     * @param {MouseEvent} e \n     */\n    dispatchEvent(e) {\n\n        if (this.element) {\n            this.element.dispatchEvent(e);\n        }\n    }\n\n    /**\n     * Get bounding client rect\n     * @returns {DOMRect}\n     */\n    getBoundingClientRect() {\n\n        return this.element.getBoundingClientRect();\n    }\n\n    /**\n     * Get client rects\n     * @returns {object[]}\n     */\n    getClientRects() {\n\n        const rects = [];\n\n        let el = this.element.firstChild;\n        while (el) {\n            rects.push(el.getBoundingClientRect());\n            el = el.nextSibling;\n        }\n\n        return rects;\n    }\n}\n\nexport default Mark;","import proxyMouse from \"./events\";\n\nconst NS_URI = \"http://www.w3.org/2000/svg\";\n\n/**\n * Marks class\n */\nclass Marks extends Map {\n    /**\n     * Constructor\n     * @param {Node} target view\n     * @param {Node} [container=document.body] epub-view container\n     */\n    constructor(target, container = document.body) {\n\n        super();\n        this.target = target;\n        /**\n         * @member {Node} element the marks container\n         * @memberof Marks\n         * @readonly\n         */\n        this.element = document.createElementNS(NS_URI, \"svg\");\n        this.element.style.position = \"absolute\";\n        this.element.setAttribute(\"pointer-events\", \"none\");\n        // Set up mouse event proxying between the target element and the marks\n        proxyMouse(this.target, this);\n\n        this.container = container;\n        this.container.appendChild(this.element);\n        this.render();\n    }\n\n    /**\n     * Append mark\n     * @param {string} key \n     * @param {Mark} mark \n     * @returns {Mark}\n     */\n    appendMark(key, mark) {\n\n        const g = document.createElementNS(NS_URI, \"g\");\n        this.element.appendChild(g);\n        mark.bind(g, this.container);\n        mark.render();\n        this.set(key, mark);\n        return mark;\n    }\n\n    /**\n     * Remove mark\n     * @param {string} key \n     * @returns {void}\n     */\n    removeMark(key) {\n\n        const mark = this.get(key);\n\n        if (mark) {\n            const el = mark.unbind();\n            this.element.removeChild(el);\n            this.delete(key)\n        }\n    }\n\n    /**\n     * render\n     */\n    render() {\n\n        this.updateStyle(this.element);\n        this.forEach((mark, key) => mark.render());\n    }\n\n    /**\n     * Update style\n     * @param {Node} el the marks container\n     * @private \n     */\n    updateStyle(el) {\n\n        const rect = this.target.getBoundingClientRect();\n        const offset = this.container.getBoundingClientRect();\n        const top = rect.top - offset.top;\n        const left = rect.left - offset.left;\n        const width = this.target.scrollWidth;\n        const height = this.target.scrollHeight;\n\n        el.style.setProperty(\"top\", `${top}px`, \"important\");\n        el.style.setProperty(\"left\", `${left}px`, \"important\");\n        el.style.setProperty(\"width\", `${width}px`, \"important\");\n        el.style.setProperty(\"height\", `${height}px`, \"important\");\n    }\n}\n\nexport default Marks;","import Highlight from \"./highlight\";\n\nconst NS_URI = \"http://www.w3.org/2000/svg\";\n\n/**\n * Underline class\n * @extends Highlight\n */\nclass Underline extends Highlight {\n    /**\n     * Constructor\n     * @param {Range} range \n     * @param {object} [options]\n     * @param {string} [options.className] \n     * @param {object} [options.data={}] \n     * @param {object} [options.attributes={}] \n     * @param {object[]} [options.listeners=[]]\n     */\n    constructor(range, options) {\n\n        super(range, options);\n    }\n\n    /**\n     * render\n     * @override\n     */\n    render() {\n\n        this.clear();\n\n        const rects = this.range.getClientRects();\n        const offset = this.element.getBoundingClientRect();\n        const container = this.container.getBoundingClientRect();\n\n        for (let i = 0, len = rects.length; i < len; i++) {\n\n            const r = rects[i];\n            const rect = document.createElementNS(NS_URI, \"rect\");\n            const line = document.createElementNS(NS_URI, \"line\");\n\n            rect.setAttribute(\"x\", r.left - offset.left + container.left);\n            rect.setAttribute(\"y\", r.top - offset.top + container.top);\n            rect.setAttribute(\"height\", r.height);\n            rect.setAttribute(\"width\", r.width);\n            rect.setAttribute(\"fill\", \"none\");\n\n            line.setAttribute(\"x1\", r.left - offset.left + container.left);\n            line.setAttribute(\"x2\", r.left - offset.left + container.left + r.width);\n            line.setAttribute(\"y1\", r.top - offset.top + container.top + r.height - 1);\n            line.setAttribute(\"y2\", r.top - offset.top + container.top + r.height - 1);\n\n            line.setAttribute(\"stroke-width\", 1);\n            line.setAttribute(\"stroke\", \"black\"); //TODO: match text color?\n            line.setAttribute(\"stroke-linecap\", \"square\");\n\n            this.element.appendChild(rect);\n            this.element.appendChild(line);\n        }\n    }\n}\n\nexport default Underline;","import Landmarks from \"./navigation/landmarks\";\nimport PageList from \"./navigation/pagelist\";\nimport Toc from \"./navigation/toc\";\nimport { qsa } from \"./utils/core\";\n\n/**\n * Navigation Parser\n * @link https://www.w3.org/TR/epub/#sec-nav\n */\nclass Navigation {\n\t/**\n\t * Constructor\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Landmarks\n\t\t * @member {Landmarks} landmarks\n\t\t * @memberof Navigation\n\t\t * @readonly\n\t\t */\n\t\tthis.landmarks = new Landmarks();\n\t\t/**\n\t\t * List of numbered pages\n\t\t * @member {PageList} pageList\n\t\t * @memberof Navigation\n\t\t * @readonly\n\t\t */\n\t\tthis.pageList = new PageList();\n\t\t/**\n\t\t * Table of Contents\n\t\t * @member {Toc} toc\n\t\t * @memberof Navigation\n\t\t * @readonly\n\t\t */\n\t\tthis.toc = new Toc();\n\t}\n\n\t/**\n\t * Clear all navigation parts\n\t */\n\tclear() {\n\n\t\tthis.landmarks.clear();\n\t\tthis.pageList.clear();\n\t\tthis.toc.clear();\n\t}\n\n\t/**\n\t * Parse navigation document\n\t * @param {Document} doc html OR xhtml OR ncx\n\t * @returns {Promise<Navigation>}\n\t */\n\tasync parse(doc) {\n\n\t\tconst tasks = [];\n\t\tconst element = doc.documentElement;\n\n\t\tif (element.tagName === \"html\") {\n\t\t\tconst items = qsa(doc, \"nav\")\n\t\t\titems.forEach((nav) => {\n\t\t\t\tconst type = nav.getAttribute(\"epub:type\");\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase \"landmarks\":\n\t\t\t\t\t\ttasks.push(this.landmarks.parse(nav));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"page-list\":\n\t\t\t\t\t\ttasks.push(this.pageList.parse(nav));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"toc\":\n\t\t\t\t\t\ttasks.push(this.toc.parse(nav));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (element.tagName === \"ncx\") {\n\t\t\tconst items = [...element.children];\n\t\t\titems.forEach((item) => {\n\t\t\t\tswitch (item.tagName) {\n\t\t\t\t\tcase \"navMap\":\n\t\t\t\t\t\ttasks.push(this.toc.parse(item));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pageList\":\n\t\t\t\t\t\ttasks.push(this.pageList.parse(item));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.all(tasks).then(() => {\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * Load navigation object from JSON\n\t * @param {object} data \n\t * @returns {Promise<Navigation>}\n\t */\n\tasync load(data) {\n\n\t\tconst tasks = [];\n\t\ttasks.push(this.landmarks.parse(data[\"landmarks\"] || []));\n\t\ttasks.push(this.pageList.parse(data[\"page-list\"] || []));\n\t\ttasks.push(this.toc.parse(data[\"toc\"] || []));\n\t\treturn Promise.all(tasks).then(() => {\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * forEach pass through\n\t * @param {IArguments} args\n\t */\n\tforEach(...args) {\n\n\t\tthis.toc.forEach(...args);\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.landmarks.destroy();\n\t\tthis.landmarks = undefined;\n\t\tthis.pageList.destroy();\n\t\tthis.pageList = undefined;\n\t\tthis.toc.destroy();\n\t\tthis.toc = undefined;\n\t}\n}\n\nexport default Navigation;","import {\n    qsa,\n    filterChildren\n} from \"../utils/core\";\n\n/**\n * Landmarks Parser\n * @link https://www.w3.org/TR/epub/#sec-nav-landmarks\n * @extends {Map}\n */\nclass Landmarks extends Map {\n    /**\n     * Constructor\n     */\n    constructor() { super(); }\n\n    /**\n     * Parse Landmarks\n     * @param {Node|object[]} target nav\n     * @returns {Promise<Landmarks>}\n     */\n    parse(target) {\n\n        if (Array.isArray(target)) {\n            this.load(target);\n        } else if (target.nodeName === \"nav\") {\n            this.parseNav(target);\n        }\n\n        return new Promise((resolve, reject) => {\n            resolve(this);\n        });\n    }\n\n    /**\n     * Parse landmarks from a Epub >= 3.0 Nav\n     * @param {Node} node nav\n     * @private\n     */\n    parseNav(node) {\n\n        const navItems = node ? qsa(node, \"li\") : [];\n\n        navItems.forEach((item) => {\n            const entry = this.navItem(item);\n            if (entry) {\n                this.set(entry.type, entry);\n            }\n        });\n    }\n\n    /**\n     * Create a LandmarkItem\n     * @param {Node} node li\n     * @return {object|null} LandmarkItem\n     * @private\n     */\n    navItem(node) {\n\n        const link = filterChildren(node, \"a\", true);\n\n        if (!link) return null;\n\n        const type = link.getAttribute(\"epub:type\");\n        const href = link.getAttribute(\"href\") || \"\";\n\n        if (!type) return null;\n\n        return {\n            type,\n            href,\n            label: link.textContent || \"\"\n        };\n    }\n\n    /**\n     * Load Landmarks from JSON\n     * @param {object[]} items Serialized items\n     * @private\n     */\n    load(items) {\n\n        items.forEach((item) => {\n            this.set(item.type, item);\n        });\n    }\n\n    /**\n     * destroy\n     */\n    destroy() {\n\n        this.clear();\n    }\n}\n\nexport default Landmarks;","import EpubCFI from \"../epubcfi\";\nimport {\n\tqs,\n\tqsa,\n\tindexOfSorted,\n\tlocationOf\n} from \"../utils/core\";\n\n/**\n * Page List Parser\n * @link https://www.w3.org/TR/epub/#sec-nav-pagelist\n * @extends {Array}\n */\nclass PageList extends Array {\n\t/**\n\t * Constructor\n\t */\n\tconstructor() {\n\n\t\tsuper();\n\t\tthis.epubcfi = new EpubCFI();\n\t\t/**\n\t\t * Page indexes\n\t\t * @member {number[]} pages\n\t\t * @memberof PageList\n\t\t * @readonly\n\t\t */\n\t\tthis.pages = [];\n\t\t/**\n\t\t * @member {string[]} locations\n\t\t * @memberof PageList\n\t\t * @readonly\n\t\t */\n\t\tthis.locations = [];\n\t\t/**\n\t\t * @member {number} firstPage\n\t\t * @memberof PageList\n\t\t * @readonly\n\t\t */\n\t\tthis.firstPage = 0;\n\t\t/**\n\t\t * @member {number} lastPage\n\t\t * @memberof PageList\n\t\t * @readonly\n\t\t */\n\t\tthis.lastPage = 0;\n\t\t/**\n\t\t * @member {number} totalPages\n\t\t * @memberof PageList\n\t\t * @readonly\n\t\t */\n\t\tthis.totalPages = 0;\n\t}\n\n\t/**\n\t * Parse Page List\n\t * @param {Node|object[]} target\n\t * @returns {Promise<PageList>}\n\t */\n\tparse(target) {\n\n\t\tif (Array.isArray(target)) {\n\t\t\tthis.load(target);\n\t\t} else if (target.nodeName === \"nav\") {\n\t\t\tthis.parseNav(target);\n\t\t} else if (target.nodeName === \"pageList\") {\n\t\t\tthis.parseNcx(target);\n\t\t}\n\n\t\tif (this.length) {\n\t\t\tthis.process();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n            resolve(this);\n        });\n\t}\n\n\t/**\n\t * Parse page-list from a Epub >= 3.0 Nav\n\t * @param {Node} node nav\n\t * @private\n\t */\n\tparseNav(node) {\n\n\t\tconst navItems = node ? qsa(node, \"li\") : [];\n\n\t\tnavItems.forEach((item) => {\n\t\t\tthis.push(this.navItem(item));\n\t\t});\n\t}\n\n\t/**\n\t * Create navItem\n\t * @param {Node} node li\n\t * @return {object} PageList item\n\t * @private\n\t */\n\tnavItem(node) {\n\n\t\tconst content = qs(node, \"a\");\n\t\tconst href = content.getAttribute(\"href\") || \"\";\n\t\tconst text = content.textContent || \"\";\n\t\tconst page = parseInt(text);\n\n\t\tif (href.indexOf(\"epubcfi\") !== -1) {\n\t\t\tconst split = href.split(\"#\");\n\t\t\treturn {\n\t\t\t\tcfi: split.length > 1 ? split[1] : null,\n\t\t\t\tpackageUrl: split[0],\n\t\t\t\thref,\n\t\t\t\tpage\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\thref,\n\t\t\t\tpage\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * parseNcx\n\t * @param {Node} node pageList\n\t * @private\n\t */\n\tparseNcx(node) {\n\n\t\tconst pageTargets = qsa(node, \"pageTarget\") || [];\n\n\t\tpageTargets.forEach((item) => {\n\t\t\tthis.push(this.ncxItem(item));\n\t\t});\n\t}\n\n\t/**\n\t * Create ncxItem\n\t * @param {Node} node pageTarget\n\t * @returns {object}\n\t * @private\n\t */\n\tncxItem(node) {\n\n\t\tconst navLabel = qs(node, \"navLabel\");\n\t\tconst navLabelText = qs(navLabel, \"text\");\n\t\tconst pageText = navLabelText.textContent;\n\t\tconst content = qs(node, \"content\");\n\n\t\treturn {\n\t\t\thref: content.getAttribute(\"src\"),\n\t\t\tpage: parseInt(pageText, 10)\n\t\t};\n\t}\n\n\t/**\n\t * Process pageList items\n\t * @private\n\t */\n\tprocess() {\n\n\t\tthis.forEach((item) => {\n\t\t\tthis.pages.push(item.page);\n\t\t\tif (item.cfi) {\n\t\t\t\tthis.locations.push(item.cfi);\n\t\t\t}\n\t\t}, this);\n\t\tthis.firstPage = parseInt(this.pages[0]);\n\t\tthis.lastPage = parseInt(this.pages[this.pages.length - 1]);\n\t\tthis.totalPages = this.lastPage - this.firstPage;\n\t}\n\n\t/**\n\t * Get a page index from a EpubCFI\n\t * @param {string} cfi EpubCFI\n\t * @return {number} Page index\n\t */\n\tpageFromCfi(cfi) {\n\t\t// Check if the pageList has not been set yet\n\t\tif (this.locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\t\t// TODO: check if CFI is valid?\n\n\t\t// check if the cfi is in the location list\n\t\tlet pg, index = indexOfSorted(cfi,\n\t\t\tthis.locations,\n\t\t\tthis.epubcfi.compare\n\t\t);\n\t\tif (index != -1) {\n\t\t\tpg = this.pages[index];\n\t\t} else {\n\t\t\t// Otherwise add it to the list of locations\n\t\t\t// Insert it in the correct position in the locations page\n\t\t\tindex = locationOf(cfi, this.locations, this.epubcfi.compare);\n\t\t\t// Get the page at the location just before the new one, or return the first\n\t\t\tpg = (index - 1 >= 0) ? this.pages[index - 1] : this.pages[0];\n\t\t\tif (pg !== undefined) {\n\t\t\t\t// Add the new page in so that the locations and page array match up\n\t\t\t\t//this.pages.splice(index, 0, pg);\n\t\t\t} else {\n\t\t\t\tpg = -1;\n\t\t\t}\n\t\t}\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Get a EpubCFI by Page index\n\t * @param {string|number} pg Page index\n\t * @return {string|null} cfi\n\t */\n\tcfiFromPage(pg) {\n\t\t// check that pg is an int\n\t\tif (typeof pg !== \"number\") {\n\t\t\tpg = parseInt(pg);\n\t\t}\n\n\t\t// check if the cfi is in the page list\n\t\t// Pages could be unsorted.\n\t\tconst index = this.pages.indexOf(pg);\n\t\tlet cfi = null;\n\t\tif (index !== -1) {\n\t\t\tcfi = this.locations[index];\n\t\t}\n\t\t// TODO: handle pages not in the list\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get a Page index from Book percentage\n\t * @param {number} value Percentage\n\t * @return {number} Page index\n\t */\n\tpageFromPercentage(value) {\n\n\t\treturn Math.round(this.totalPages * value);\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a page\n\t * @param {number} pg the page\n\t * @return {number} Percentage\n\t */\n\tpercentageFromPage(pg) {\n\n\t\tconst percentage = (pg - this.firstPage) / this.totalPages;\n\t\treturn Math.round(percentage * 1000) / 1000;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a cfi\n\t * @param {string} cfi EpubCFI\n\t * @return {number} Percentage\n\t */\n\tpercentageFromCfi(cfi) {\n\n\t\tconst pg = this.pageFromCfi(cfi);\n\t\tconst percentage = this.percentageFromPage(pg);\n\t\treturn percentage;\n\t}\n\n\t/**\n\t * Load PageList from JSON\n\t * @param {object[]} items Serialized JSON data items\n\t * @private\n\t */\n\tload(items) {\n\n\t\titems.forEach((item) => {\n\t\t\tthis.push(item);\n\t\t});\n\t}\n\n\t/**\n\t * Clear PageList\n\t */\n\tclear() {\n\n\t\tif (this.length) {\n\t\t\tthis.splice(0);\n\t\t\tthis.pages.splice(0);\n\t\t\tthis.locations.splice(0);\n\t\t\tthis.firstPage = 0;\n\t\t\tthis.lastPage = 0;\n\t\t\tthis.totalPages = 0;\n\t\t}\n\t}\n\n\t/**\n\t * Destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.pages = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.firstPage = undefined;\n\t\tthis.lastPage = undefined;\n\t\tthis.totalPages = undefined;\n\t\tthis.epubcfi = undefined;\n\t}\n}\n\nexport default PageList;","import {\n    qs,\n    filterChildren\n} from \"../utils/core\";\n\n/**\n * Table Of Contents Parser\n * @link https://www.w3.org/TR/epub/#sec-nav-toc\n * @extends {Array}\n */\nclass Toc extends Array {\n    /**\n     * Constructor\n     */\n    constructor() {\n\n        super();\n        /**\n         * @member {Map} links\n         * @memberof Toc\n         * @readonly\n         */\n        this.links = new Map();\n    }\n\n    /**\n     * Get navigation item by href\n     * @param {string} target\n     * @return {object} navItem\n     * @example toc.get(\"chapter_001.xhtml\")\n     */\n    get(target) {\n\n        const arr = target.split(\"/\");\n        const key = arr.length ? arr[arr.length - 1] : target;\n\n        return this.links.get(target) || this.links.get(key);\n    }\n\n    /**\n     * Parse out the toc items\n     * @param {Node|object[]} target \n     * @returns {Promise<Toc>}\n     */\n    parse(target) {\n\n        if (Array.isArray(target)) {\n            this.load(target);\n        } else if (target.nodeName === \"nav\") {\n            this.parseNav(target);\n        } else if (target.nodeName === \"navMap\") {\n            this.parseNcx(target);\n        }\n\n        return new Promise((resolve) => {\n            resolve(this);\n        });\n    }\n\n    /**\n     * Parse toc from a Epub >= 3.0 Nav\n     * @param {Node} nav\n     * @param {object[]} [toc=null]\n     * @param {string} [parentId=null] \n     * @private\n     */\n    parseNav(nav, toc = null, parentId = null) {\n\n        const navList = filterChildren(nav, \"ol\", true);\n\n        if (!navList) return;\n        if (!navList.children) return;\n\n        const len = navList.children.length;\n        const items = toc || this;\n\n        for (let i = 0; i < len; i++) {\n            const child = navList.children[i];\n            if (child.nodeName !== \"li\")\n                continue;\n            const item = this.navItem(child, navList);\n            if (item) {\n                item.parentId = parentId;\n                items.push(item);\n                this.parseNav(child, item.subitems, item.id); // recursive call\n            }\n        }\n    }\n\n    /**\n     * Create a navItem\n     * @param {Node} node\n     * @return {object|null} navItem\n     * @private\n     */\n    navItem(node) {\n\n        const link = qs(node, \"a\") || qs(node, \"span\");\n\n        if (!link) return null;\n\n        const href = link.getAttribute(\"href\");\n        const harr = href.split(\"#\");\n        const hash = harr.length === 2 ? harr[1] : \"\";\n        const id = node.getAttribute(\"id\") || hash || href;\n        const label = link.textContent || \"\";\n        const entry = {\n            id,\n            href,\n            bind: harr[0],\n            label,\n            parentId: null,\n            subitems: []\n        };\n        this.links.set(href, entry);\n        return entry;\n    }\n\n    /**\n     * Parse from a Epub 2 NCX\n     * @link https://www.w3.org/TR/epub/#sec-opf2-ncx\n     * @param {Node} node navMap\n     * @param {object[]} [toc=null]\n     * @param {string} [parentId=null] \n     * @private\n     */\n    parseNcx(node, toc = null, parentId = null) {\n\n        if (!node.children) return;\n\n        const len = node.children.length;\n        const items = toc || this;\n\n        for (let i = 0; i < len; ++i) {\n            const child = node.children[i];\n            if (child.nodeName !== \"navPoint\")\n                continue;\n            const item = this.ncxItem(child);\n            item.parentId = parentId;\n            items.push(item);\n            this.parseNcx(child, item.subitems, item.id); // recursive call\n        }\n    }\n\n    /**\n     * Create a ncxItem\n     * @param {Node} node navPoint\n     * @return {object} ncxItem\n     * @private\n     */\n    ncxItem(node) {\n\n        const content = qs(node, \"content\");\n        const navLabel = qs(node, \"navLabel\");\n        const href = content.getAttribute(\"src\");\n        const harr = href.split(\"#\");\n        const hash = harr.length === 2 ? harr[1] : \"\";\n        const id = node.getAttribute(\"id\") || hash || href;\n        const label = navLabel.textContent || \"\";\n        const entry = {\n            id,\n            href,\n            bind: harr[0],\n            label,\n            parentId: null,\n            subitems: []\n        };\n        this.links.set(href, entry);\n        return entry;\n    }\n\n    /**\n     * Load navigation items from JSON\n     * @param {object[]} items Serialized JSON items\n     * @param {number} [level=0] \n     * @param {string} [parentId=null] \n     * @private\n     */\n    load(items, level = 0, parentId = null) {\n\n        level += 1;\n        items.forEach((item) => {\n            const href = item.href;\n            const harr = href.split(\"#\");\n            const hash = harr.length === 2 ? harr[1] : \"\";\n            item.id = item.id || hash || href;\n            item.bind = harr[0];\n            item.parentId = parentId;\n            if (level === 1) {\n                this.push(item);\n            }\n            this.links.set(href, item);\n            this.load(item.subitems, level, item.id); // recursive call\n        });\n    }\n\n    /**\n     * Clear navigation items\n     */\n    clear() {\n\n        if (this.length) {\n            this.links.clear();\n            this.splice(0);\n        }\n    }\n\n    /**\n     * destroy\n     */\n    destroy() {\n\n        this.clear();\n        this.links = undefined;\n    }\n}\n\nexport default Toc;","import Metadata from \"./packaging/metadata\";\nimport Manifest from \"./packaging/manifest\";\nimport Spine from \"./packaging/spine\";\nimport { qs } from \"./utils/core\";\n\n/**\n * Open Packaging Format Parser\n */\nclass Packaging {\n\t/**\n\t * Constructor\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * @member {Metadata} metadata\n\t\t * @memberof Packaging\n\t\t * @readonly\n\t\t */\n\t\tthis.metadata = new Metadata();\n\t\t/**\n\t\t * @member {Manifest} manifest\n\t\t * @memberof Packaging\n\t\t * @readonly\n\t\t */\n\t\tthis.manifest = new Manifest();\n\t\t/**\n\t\t * @member {Spine} spine\n\t\t * @memberof Packaging\n\t\t * @readonly\n\t\t */\n\t\tthis.spine = new Spine();\n\t\t/**\n\t\t * @member {string} direction\n\t\t * @memberof Packaging\n\t\t * @readonly\n\t\t */\n\t\tthis.direction = null;\n\t\t/**\n\t\t * @member {string} version Package version\n\t\t * @memberof Packaging\n\t\t * @readonly\n\t\t */\n\t\tthis.version = null;\n\t\t/**\n\t\t * @member {string} uniqueIdentifier\n\t\t * @memberof Packaging\n\t\t * @readonly\n\t\t */\n\t\tthis.uniqueIdentifier = null;\n\t}\n\n\t/**\n\t * Clear packaging parts\n\t */\n\tclear() {\n\n\t\tthis.metadata.clear();\n\t\tthis.manifest.clear();\n\t\tthis.spine.clear();\n\t\tthis.direction = null;\n\t\tthis.version = null;\n\t\tthis.uniqueIdentifier = null;\n\t}\n\n\t/**\n\t * Parse OPF XML\n\t * @param {Document} packageXml OPF XML\n\t * @return {Promise<Packaging>}\n\t */\n\tasync parse(packageXml) {\n\n\t\tif (!packageXml) {\n\t\t\tthrow new Error(\"Package File Not Found\");\n\t\t}\n\n\t\tconst metadataNode = qs(packageXml, \"metadata\");\n\t\tif (!metadataNode) {\n\t\t\tthrow new Error(\"No Metadata Found\");\n\t\t}\n\n\t\tconst manifestNode = qs(packageXml, \"manifest\");\n\t\tif (!manifestNode) {\n\t\t\tthrow new Error(\"No Manifest Found\");\n\t\t}\n\n\t\tconst spineNode = qs(packageXml, \"spine\");\n\t\tif (!spineNode) {\n\t\t\tthrow new Error(\"No Spine Found\");\n\t\t}\n\n\t\tconst tasks = [];\n\t\ttasks.push(this.metadata.parse(metadataNode));\n\t\ttasks.push(this.manifest.parse(manifestNode));\n\t\ttasks.push(this.spine.parse(spineNode));\n\t\tthis.direction = this.parseDirection(packageXml, spineNode);\n\t\tthis.version = this.parseVersion(packageXml);\n\t\tthis.uniqueIdentifier = this.metadata.get(\"identifier\");\n\t\tif (typeof this.uniqueIdentifier === \"undefined\") {\n\t\t\tthis.uniqueIdentifier = this.findUniqueIdentifier(packageXml);\n\t\t}\n\n\t\treturn Promise.all(tasks).then(() => {\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * Parse direction flow\n\t * @param {Document} packageXml\n\t * @param {Node} node spine node \n\t * @returns {string}\n\t * @private\n\t */\n\tparseDirection(packageXml, node) {\n\n\t\tconst el = packageXml.documentElement;\n\t\tlet dir = el.getAttribute(\"dir\");\n\t\tif (dir === null) {\n\t\t\tdir = node.getAttribute(\"page-progression-direction\");\n\t\t}\n\t\treturn dir || \"\";\n\t}\n\n\t/**\n\t * Parse package version\n\t * @param {Document} packageXml \n\t * @returns {string}\n\t * @private\n\t */\n\tparseVersion(packageXml) {\n\n\t\tconst el = packageXml.documentElement;\n\t\treturn el.getAttribute(\"version\") || \"\";\n\t}\n\n\t/**\n\t * Find Unique Identifier\n\t * @param {Document} packageXml\n\t * @return {string} Unique Identifier text\n\t * @private\n\t */\n\tfindUniqueIdentifier(packageXml) {\n\n\t\tconst el = packageXml.documentElement;\n\t\tconst uniqueIdentifier = el.getAttribute(\"unique-identifier\");\n\t\tif (!uniqueIdentifier) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tconst identifier = packageXml.getElementById(uniqueIdentifier);\n\t\tif (!identifier) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (identifier.localName === \"identifier\" &&\n\t\t\tidentifier.namespaceURI === \"http://purl.org/dc/elements/1.1/\") {\n\t\t\treturn identifier.childNodes.length > 0 ? identifier.childNodes[0].nodeValue.trim() : \"\";\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Load package from JSON\n\t * @param {object} data Serialized JSON object data\n\t * @return {Promise<Packaging>}\n\t */\n\tasync load(data) {\n\n\t\tconst tasks = [];\n\t\ttasks.push(this.metadata.load(data.metadata));\n\t\ttasks.push(this.manifest.load(data.manifest));\n\t\ttasks.push(this.spine.load(data.spine));\n\t\tthis.direction = data.direction;\n\t\tthis.version = data.version;\n\t\tthis.uniqueIdentifier = this.metadata.get(\"identifier\");\n\n\t\treturn Promise.all(tasks).then(() => {\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.metadata.destroy();\n\t\tthis.manifest.destroy();\n\t\tthis.spine.destroy();\n\n\t\tthis.metadata = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spine = undefined;\n\t\tthis.direction = undefined;\n\t\tthis.version = undefined;\n\t\tthis.uniqueIdentifier = undefined;\n\t}\n}\n\nexport default Packaging;","import { qsp } from \"../utils/core\";\n\n/**\n * Manifest class\n * @extends {Map}\n */\nclass Manifest extends Map {\n\n    constructor() {\n\n        super();\n        /**\n         * @member {string} navPath\n         * @memberof Manifest\n         * @readonly\n         */\n        this.navPath = null;\n        /**\n         * @member {string} coverPath\n         * @memberof Manifest\n         * @readonly\n         */\n        this.coverPath = null;\n    }\n\n    /**\n     * Clear manifest\n     */\n    clear() {\n\n        super.clear();\n        this.navPath = null;\n        this.coverPath = null;\n    }\n\n    /**\n     * Parse the manifest node\n     * @param {Node} node manifest\n     * @returns {Promise<Manifest>}\n     */\n    parse(node) {\n\n        const items = [...node.children];\n\n        items.forEach((item) => {\n            const props = item.getAttribute(\"properties\");\n            const entry = {\n                \"id\": item.getAttribute(\"id\"),\n                \"href\": item.getAttribute(\"href\") || \"\",\n                \"media-type\": item.getAttribute(\"media-type\") || \"\",\n                \"media-overlay\": item.getAttribute(\"media-overlay\") || \"\",\n                \"properties\": props ? props.split(\" \") : []\n            };\n            this.set(entry.id, entry);\n            if (this.navPath === null && (props === \"nav\" || entry[\"media-type\"] === \"application/x-dtbncx+xml\")) {\n                this.navPath = entry.href;\n            }\n            if (this.coverPath === null && props === \"cover-image\") {\n                this.coverPath = entry.href;\n            }\n        });\n\n        if (this.coverPath === null) {\n            this.coverPath = this.findCoverPath(node);\n        }\n\n        return Promise.resolve(this);\n    }\n\n    /**\n     * Find the Cover Path for Epub 2.0\n     * @param {Node} node manifest node\n     * @return {string} href\n     * @private\n     */\n    findCoverPath(node) {\n\n        const doc = node.ownerDocument;\n        const meta = qsp(doc, \"meta\", { name: \"cover\" });\n\n        if (meta) {\n            const id = meta.getAttribute(\"content\");\n            const item = doc.getElementById(id);\n            return item ? item.getAttribute(\"href\") : null;\n        }\n\n        return null;\n    }\n\n    /**\n     * Load manifest from JSON\n     * @param {object[]} manifest \n     * @returns {Promise<Manifest>}\n     */\n    load(manifest) {\n\n        manifest.forEach((item) => {\n            for (const prop of item.properties) {\n                switch (prop) {\n                    case \"nav\":\n                        this.navPath = item.href;\n                        break;\n                    case \"cover-image\":\n                        this.coverPath = item.href;\n                        break;\n                }\n            }\n            this.set(item.id, item);\n        });\n\n        return Promise.resolve(this);\n    }\n\n    /**\n     * destroy\n     */\n    destroy() {\n\n        this.clear();\n        this.navPath = undefined;\n        this.coverPath = undefined;\n    }\n}\n\nexport default Manifest;","/**\n * Metadata class\n * @extends {Map}\n */\nclass Metadata extends Map {\n\n    constructor() { super(); }\n\n    /**\n     * Parse the metadata node\n     * @param {Node} node metadata\n     * @returns {Promise<Metadata>}\n     */\n    parse(node) {\n\n        const items = [...node.children];\n\n        items.forEach((item) => {\n            if (item.nodeName === \"meta\") {\n                this.parseMeta(item);\n            } else if (/dc:/.test(item.nodeName)) {\n                // dc:title\n                // dc:creator\n                // dc:coverage\n                // dc:contributor\n                // dc:description\n                // dc:publisher\n                // dc:identifier\n                // dc:language\n                // dc:relation\n                // dc:subject\n                // dc:format\n                // dc:rights\n                // dc:source\n                // dc:date\n                // dc:type\n                const key = item.nodeName.substring(3);\n                this.set(key, item.textContent);\n            }\n        });\n\n        return Promise.resolve(this);\n    }\n\n    /**\n     * Parse the meta node\n     * @param {Node} item \n     * @returns {void}\n     * @private\n     */\n    parseMeta(item) {\n\n        const prop = item.getAttribute(\"property\");\n\n        if (typeof prop === \"undefined\" ||\n            typeof prop !== \"string\") {\n            return;\n        } else if (/rendition:/.test(prop)) {\n            // rendition:layout\n            // rendition:spread\n            // rendition:flow\n            // rendition:viewport\n            // rendition:orientation\n            const key = prop.substring(10);\n            this.set(key, item.textContent);\n        } else if (/dcterms:/.test(prop)) {\n            // dcterms:modified\n            const key = prop.substring(8);\n            this.set(key, item.textContent);\n        } else if (/media:/.test(prop)) {\n            // media:active-class\n            // media:duration\n            // media:narrator\n            // media:playback-active-class\n            this.set(prop, item.textContent);\n        }\n    }\n\n    /**\n     * Load metadata from JSON\n     * @param {object} metadata \n     * @returns {Promise<Metadata>}\n     */\n    load(metadata) {\n\n        Object.keys(metadata).forEach((prop) => {\n            this.set(prop, metadata[prop]);\n        });\n\n        return Promise.resolve(this);\n    }\n\n    /**\n     * destroy\n     */\n    destroy() {\n\n        this.clear();\n    }\n}\n\nexport default Metadata;","import { indexOfNode } from \"../utils/core\";\n\n/**\n * A collection of Spine Items\n * @extends {Map}\n */\nclass Spine extends Map {\n\n\tconstructor() {\n\n\t\tsuper();\n\t\t/**\n\t\t * Node index from the package.opf\n\t\t * @member {number} nodeIndex\n\t\t * @memberof Spine\n\t\t * @readonly\n\t\t */\n\t\tthis.nodeIndex = 0;\n\t}\n\n\t/**\n\t * Clear spine items\n\t */\n\tclear() {\n\n\t\tsuper.clear();\n\t\tthis.nodeIndex = 0;\n\t}\n\n\t/**\n\t * Parse element spine\n\t * @param {Node} node spine\n\t * @returns {Promise<Spine>}\n\t */\n\tparse(node) {\n\n\t\tconst items = [...node.children];\n\n\t\titems.forEach((item, index) => {\n\t\t\tconst idref = item.getAttribute(\"idref\");\n\t\t\tconst props = item.getAttribute(\"properties\");\n\t\t\tconst entry = {\n\t\t\t\tid: item.getAttribute(\"id\"),\n\t\t\t\tidref: idref,\n\t\t\t\tindex: index,\n\t\t\t\tlinear: item.getAttribute(\"linear\") || \"yes\",\n\t\t\t\tproperties: props ? props.split(\" \") : []\n\t\t\t};\n\t\t\tthis.set(idref, entry);\n\t\t});\n\t\tthis.nodeIndex = indexOfNode(node, Node.ELEMENT_NODE);\n\n\t\treturn Promise.resolve(this);\n\t}\n\n\t/**\n\t * Load spine from JSON\n\t * @param {object[]} spine \n\t * @returns {Promise<Spine>}\n\t */\n\tload(spine) {\n\n\t\tspine.forEach((item, index) => {\n\t\t\tthis.set(item.idref, {\n\t\t\t\tid: item.id || null,\n\t\t\t\tidref: item.idref,\n\t\t\t\tindex: index,\n\t\t\t\tlinear: item.linear,\n\t\t\t\tproperties: item.properties\n\t\t\t});\n\t\t});\n\t\tthis.nodeIndex = 0;\n\n\t\treturn Promise.resolve(this);\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.nodeIndex = undefined;\n\t}\n}\n\nexport default Spine;","import EventEmitter from \"event-emitter\";\nimport Annotations from \"./annotations\";\nimport EpubCFI from \"./epubcfi\";\nimport Layout from \"./layout\";\nimport Themes from \"./themes\";\nimport Defer from \"./utils/defer\";\nimport Hook from \"./utils/hook\";\nimport Viewport from \"./viewport\";\nimport Queue from \"./utils/queue\";\nimport { extend, isFloat } from \"./utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"./utils/constants\";\n\n// Default View Managers\nimport DefaultViewManager from \"./managers/default/index\";\nimport ContinuousViewManager from \"./managers/continuous/index\";\n\n/**\n * Displays an Epub as a series of Views for each Section.\n * Requires Manager and View class to handle specifics of rendering\n * the section content.\n * @param {Book} book\n * @param {object} [options]\n * @param {string} [options.axis] viewport axis\n * @param {string|number} [options.width] viewport width\n * @param {string|number} [options.height] viewport height\n * @param {string} [options.ignoreClass] class for the cfi parser to ignore\n * @param {string|class} [options.manager='default'] string values: default / continuous\n * @param {string|class} [options.view='iframe']\n * @param {string} [options.method='write'] values: `\"write\"` OR `\"srcdoc\"`\n * @param {string} [options.layout] layout to force\n * @param {string} [options.spread] force spread value\n * @param {string} [options.direction] direction `\"ltr\"` OR `\"rtl\"`\n * @param {number} [options.pageWidth] page width\n * @param {number} [options.pageHeight] page height\n * @param {number} [options.minSpreadWidth] overridden by spread: none (never) / both (always)\n * @param {string} [options.stylesheet] url of stylesheet to be injected\n * @param {string} [options.script] url of script to be injected\n * @param {object} [options.snap] use snap scrolling\n * @param {string[]} [options.sandbox=[]] iframe sandbox policy list\n */\nclass Rendition {\n\tconstructor(book, options) {\n\t\t/**\n\t\t * @member {object} settings\n\t\t * @memberof Rendition\n\t\t * @readonly\n\t\t */\n\t\tthis.settings = extend({\n\t\t\taxis: undefined,\n\t\t\twidth: null,\n\t\t\theight: null,\n\t\t\tmanager: \"default\",\n\t\t\tview: \"iframe\",\n\t\t\tflow: null,\n\t\t\tmethod: \"write\", // the 'baseUrl' value is set from the 'book.settings.replacements' property\n\t\t\tlayout: null,\n\t\t\tspread: null,\n\t\t\tminSpreadWidth: 800,\n\t\t\tscript: null,\n\t\t\tsnap: null,\n\t\t\tdirection: null, // TODO: implement to 'auto' detection\n\t\t\tignoreClass: \"\",\n\t\t\tsandbox: [],\n\t\t\tstylesheet: null\n\t\t}, options || {});\n\n\t\tif (typeof this.settings.manager === \"object\") {\n\t\t\tthis.manager = this.settings.manager;\n\t\t}\n\n\t\tthis.book = book;\n\t\t/**\n\t\t * Adds Hook methods to the Rendition prototype\n\t\t * @member {object} hooks\n\t\t * @property {Hook} hooks.content\n\t\t * @property {Hook} hooks.display\n\t\t * @property {Hook} hooks.layout\n\t\t * @property {Hook} hooks.render\n\t\t * @property {Hook} hooks.show\n\t\t * @property {Hook} hooks.unloaded\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.hooks = {\n\t\t\tcontent: new Hook(this),\n\t\t\tdisplay: new Hook(this),\n\t\t\tlayout: new Hook(this),\n\t\t\trender: new Hook(this),\n\t\t\tshow: new Hook(this),\n\t\t\tunloaded: new Hook(this)\n\t\t}\n\t\tthis.hooks.content.register(this.handleLinks.bind(this));\n\t\tthis.hooks.content.register(this.passEvents.bind(this));\n\t\tthis.hooks.content.register(this.adjustImages.bind(this));\n\n\t\tthis.book.sections.hooks.content.register(this.injectIdentifier.bind(this));\n\n\t\tif (this.settings.stylesheet) {\n\t\t\tthis.book.sections.hooks.content.register(this.injectStylesheet.bind(this));\n\t\t}\n\n\t\tif (this.settings.script) {\n\t\t\tthis.book.sections.hooks.content.register(this.injectScript.bind(this));\n\t\t}\n\t\t/**\n\t\t * @member {Annotations} annotations\n\t\t * @memberof Rendition\n\t\t * @readonly\n\t\t */\n\t\tthis.annotations = new Annotations(this);\n\t\t/**\n\t\t * @member {Themes} themes\n\t\t * @memberof Rendition\n\t\t * @readonly\n\t\t */\n\t\tthis.themes = new Themes(this);\n\t\tthis.epubcfi = new EpubCFI();\n\t\t/**\n\t\t * A Rendered Location Range\n\t\t * @typedef location\n\t\t * @type {object}\n\t\t * @property {object} start\n\t\t * @property {string} start.index\n\t\t * @property {string} start.href\n\t\t * @property {object} start.displayed\n\t\t * @property {number} start.displayed.page\n\t\t * @property {number} start.displayed.total\n\t\t * @property {string} start.cfi EpubCFI string format\n\t\t * @property {number} start.location\n\t\t * @property {number} start.percentage\n\t\t * @property {object} end\n\t\t * @property {string} end.index\n\t\t * @property {string} end.href\n\t\t * @property {object} end.displayed\n\t\t * @property {number} end.displayed.page\n\t\t * @property {number} end.displayed.total\n\t\t * @property {string} end.cfi EpubCFI string format\n\t\t * @property {number} end.location\n\t\t * @property {number} end.percentage\n\t\t * @property {boolean} atStart Location at start position\n\t\t * @property {boolean} atEnd Location at end position\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.location = undefined;\n\t\tthis.starting = new Defer();\n\t\t/**\n\t\t * returns after the rendition has started\n\t\t * @member {Promise<any>} started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.started = this.starting.promise;\n\t\tthis.q = new Queue(this);\n\t\t// Hold queue until book is opened\n\t\tthis.q.enqueue(this.book.opened);\n\t\t// Block the queue until rendering is started\n\t\tthis.q.enqueue(this.start.bind(this));\n\t}\n\n\t/**\n\t * Set the manager function\n\t * @param {Function} manager\n\t */\n\tsetManager(manager) {\n\n\t\tthis.manager = manager;\n\t}\n\n\t/**\n\t * Require the manager from passed string, or as a class function\n\t * @param {string|object} manager [description]\n\t * @return {any}\n\t */\n\trequireManager(manager) {\n\n\t\tlet ret;\n\n\t\t// If manager is a string, try to load from imported managers\n\t\tif (typeof manager === \"string\" && manager === \"default\") {\n\t\t\tret = DefaultViewManager;\n\t\t} else if (typeof manager === \"string\" && manager === \"continuous\") {\n\t\t\tret = ContinuousViewManager;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tret = manager;\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Start the rendering\n\t */\n\tstart() {\n\n\t\tconst props = this.determineLayoutProperties();\n\t\t/**\n\t\t * @member {Layout} layout\n\t\t * @memberof Rendition\n\t\t * @readonly\n\t\t */\n\t\tthis.layout = new Layout(props);\n\t\tthis.layout.on(EVENTS.LAYOUT.UPDATED, (props, changed) => {\n\t\t\t/**\n\t\t\t * Emit of updated the Layout state\n\t\t\t * @event layout\n\t\t\t * @param {Layout} props\n\t\t\t * @param {object} changed\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.LAYOUT, props, changed);\n\t\t});\n\t\t/**\n\t\t * @member {Viewport} viewport\n\t\t * @memberof Rendition\n\t\t * @readonly\n\t\t */\n\t\tthis.viewport = new Viewport(this.layout);\n\t\tthis.viewport.on(EVENTS.VIEWPORT.RESIZED, (rect) => {\n\n\t\t\tif (this.layout.flow === \"paginated\") {\n\t\t\t\tthis.layout.set({\n\t\t\t\t\twidth: rect.width,\n\t\t\t\t\theight: rect.height\n\t\t\t\t});\n\t\t\t} else if (this.layout.axis === \"horizontal\") {\n\t\t\t\tthis.layout.set({\n\t\t\t\t\theight: rect.height\n\t\t\t\t});\n\t\t\t} else if (this.layout.axis === \"vertical\") {\n\t\t\t\tthis.layout.set({\n\t\t\t\t\twidth: rect.width,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!this.location) return;\n\t\t\t/**\n\t\t\t * Emit that the rendition has been resized\n\t\t\t * @event resized\n\t\t\t * @param {object} rect\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.RESIZED, rect);\n\t\t\tthis.display(this.location.start.cfi);\n\t\t});\n\t\tthis.viewport.on(EVENTS.VIEWPORT.ORIENTATION_CHANGE, (target) => {\n\t\t\t/**\n\t\t\t * @event orientationchange\n\t\t\t * @param {object} target\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.ORIENTATION_CHANGE, target);\n\t\t});\n\n\t\tif (!this.manager) {\n\t\t\tconst manager = this.requireManager(this.settings.manager);\n\t\t\tconst options = {\n\t\t\t\tsnap: this.settings.snap,\n\t\t\t\tview: this.settings.view,\n\t\t\t\tmethod: this.settings.method,\n\t\t\t\tsandbox: this.settings.sandbox,\n\t\t\t\tignoreClass: this.settings.ignoreClass\n\t\t\t};\n\t\t\tthis.manager = new manager(this.book, options);\n\t\t}\n\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n\t\tthis.manager.on(EVENTS.MANAGERS.REMOVED, this.afterRemoved.bind(this));\n\t\tthis.manager.on(EVENTS.MANAGERS.RESIZED, this.onResized.bind(this));\n\t\tthis.manager.on(EVENTS.MANAGERS.RELOCATED, this.relocated.bind(this));\n\t\t/**\n\t\t * Emit that rendering has started\n\t\t * @event started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.STARTED);\n\t\tthis.starting.resolve();\n\t}\n\n\t/**\n\t * Call to attach the container to an element in the dom\n\t * Container must be attached before rendering can begin\n\t * @param {Element|string} element viewport element\n\t * @return {Promise<any>}\n\t */\n\tattachTo(element) {\n\n\t\treturn this.q.enqueue(() => {\n\t\t\t// Start rendering\n\t\t\tthis.manager.render(element, {\n\t\t\t\twidth: this.settings.width,\n\t\t\t\theight: this.settings.height\n\t\t\t});\n\t\t\t/**\n\t\t\t * Emit that rendering has attached to an element\n\t\t\t * @event attached\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.ATTACHED);\n\t\t});\n\t}\n\n\t/**\n\t * Display a point in the book\n\t * The request will be added to the rendering Queue,\n\t * so it will wait until book is opened, rendering started\n\t * and all other rendering tasks have finished to be called.\n\t * @param {string|number} [target] `Section.index` OR `Section.idref` OR `Section.href` OR EpubCFI\n\t * @example rendition.display()\n\t * @example rendition.display(3)\n\t * @example rendition.display(\"#chapter_001\")\n\t * @example rendition.display(\"chapter_001.xhtml\")\n\t * @example rendition.display(\"epubcfi(/6/8!/4/2/16/1:0)\")\n\t * @return {Promise<Section>}\n\t */\n\tdisplay(target) {\n\n\t\tif (this.displaying) {\n\t\t\tthis.displaying.resolve();\n\t\t}\n\t\treturn this.q.enqueue(this._display.bind(this), target);\n\t}\n\n\t/**\n\t * Tells the manager what to display immediately\n\t * @param {string} [target]\n\t * @return {Promise<Section>}\n\t * @private\n\t */\n\t_display(target) {\n\n\t\tconst displaying = new Defer();\n\t\tthis.displaying = displaying;\n\n\t\t// Check if this is a book percentage\n\t\tif (this.book.locations.length && isFloat(target)) {\n\t\t\ttarget = this.book.locations.cfiFromPercentage(parseFloat(target));\n\t\t}\n\n\t\tconst section = this.book.sections.get(target);\n\n\t\tif (!section) {\n\t\t\tdisplaying.reject(new Error(\"No Section Found\"));\n\t\t\treturn displaying.promise;\n\t\t}\n\n\t\tthis.manager.display(section, target).then(() => {\n\n\t\t\tdisplaying.resolve(section);\n\t\t\tthis.displaying = undefined;\n\t\t\t/**\n\t\t\t * Emit that a section has been displayed\n\t\t\t * @event displayed\n\t\t\t * @param {Section} section\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.DISPLAYED, section);\n\t\t}, (err) => {\n\t\t\t/**\n\t\t\t * Emit that has been an error displaying\n\t\t\t * @event displayError\n\t\t\t * @param {Error} err\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.DISPLAY_ERROR, err);\n\t\t}).then(() => {\n\t\t\tthis.viewport.update();\n\t\t});\n\n\t\treturn displaying.promise;\n\t}\n\n\t/**\n\t * Report what section has been displayed\n\t * @param {object} view\n\t * @private\n\t */\n\tafterDisplayed(view) {\n\n\t\tview.on(EVENTS.VIEWS.MARK_CLICKED, (cfiRange, data) => {\n\t\t\tthis.triggerMarkEvent(cfiRange, data, view.contents)\n\t\t});\n\n\t\tthis.hooks.render.trigger(view, this).then(() => {\n\t\t\tif (view.contents) {\n\t\t\t\tthis.hooks.content.trigger(view.contents, this).then(() => {\n\t\t\t\t\t/**\n\t\t\t\t\t * Emit that a section has been rendered\n\t\t\t\t\t * @event rendered\n\t\t\t\t\t * @param {View} view\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Report what has been removed\n\t * @param {object} view\n\t * @private\n\t */\n\tafterRemoved(view) {\n\n\t\tthis.hooks.unloaded.trigger(view, this).then(() => {\n\t\t\t/**\n\t\t\t * Emit that a section has been removed\n\t\t\t * @event removed\n\t\t\t * @param {View} view\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.REMOVED, view);\n\t\t})\n\t}\n\n\t/**\n\t * Report resize events and display the last seen location\n\t * @param {object} view \n\t * @private\n\t */\n\tonResized(view) {\n\n\t\treturn this.adjustImages(view.contents);\n\t}\n\n\t/**\n\t * Move the Rendition to a specific offset\n\t * Usually you would be better off calling display()\n\t * @param {object} offset\n\t */\n\tmoveTo(offset) {\n\n\t\tthis.manager.moveTo(offset);\n\t}\n\n\t/**\n\t * Resize viewport container\n\t * @param {number|string} [width]\n\t * @param {number|string} [height]\n\t * @returns {{ width: number, height: number }}\n\t * @example rendition.resize(800, 600)\n\t * @example rendition.resize(\"90%\", 600)\n\t */\n\tresize(width, height) {\n\n\t\treturn this.viewport.size(width, height);\n\t}\n\n\t/**\n\t * Clear all rendered views\n\t */\n\tclear() {\n\n\t\tthis.manager.clear();\n\t}\n\n\t/**\n\t * Go to the next \"page\" in the rendition\n\t * @return {Promise<any>}\n\t */\n\tnext() {\n\n\t\treturn this.q.enqueue(this.manager.next.bind(this.manager));\n\t}\n\n\t/**\n\t * Go to the previous \"page\" in the rendition\n\t * @return {Promise<any>}\n\t */\n\tprev() {\n\n\t\treturn this.q.enqueue(this.manager.prev.bind(this.manager));\n\t}\n\n\t/**\n\t * Determine the Layout properties from metadata and settings\n\t * @link http://www.idpf.org/epub/301/spec/epub-publications.html#meta-properties-rendering\n\t * @return {object} Layout properties\n\t * @private\n\t */\n\tdetermineLayoutProperties() {\n\n\t\tconst metadata = this.book.packaging.metadata;\n\t\tconst direction = this.book.packaging.direction;\n\t\treturn {\n\t\t\taxis: this.settings.axis,\n\t\t\tname: this.settings.layout || metadata.get(\"layout\"),\n\t\t\tflow: this.settings.flow || metadata.get(\"flow\"),\n\t\t\tspread: this.settings.spread || metadata.get(\"spread\"),\n\t\t\tviewport: metadata.get(\"viewport\"),\n\t\t\tdirection: this.settings.direction || direction || \"ltr\",\n\t\t\torientation: this.settings.orientation || metadata.get(\"orientation\"),\n\t\t\tminSpreadWidth: this.settings.minSpreadWidth,\n\t\t\tpageWidth: this.settings.pageWidth,\n\t\t\tpageHeight: this.settings.pageHeight\n\t\t}\n\t}\n\n\t/**\n\t * Layout configuration\n\t * @param {object} options\n\t */\n\tupdateLayout(options) {\n\n\t\tthis.layout.set(options);\n\t\tthis.display(this.location.start.cfi);\n\t}\n\n\t/**\n\t * Get the Current Location object\n\t * @return {displayedLocation|Promise} location (may be a promise)\n\t */\n\tcurrentLocation() {\n\n\t\tconst location = this.manager.currentLocation();\n\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\tlocation.then((result) => {\n\t\t\t\treturn this.located(result);\n\t\t\t});\n\t\t} else if (location) {\n\t\t\treturn this.located(location);\n\t\t}\n\t}\n\n\t/**\n\t * Creates a Rendition#locationRange from location\n\t * passed by the Manager\n\t * @param {object} location Location sections\n\t * @returns {object}\n\t * @private\n\t */\n\tlocated(location) {\n\n\t\tif (location.length === 0) return {};\n\n\t\tconst start = location[0];\n\t\tconst end = location[location.length - 1];\n\t\tconst located = {\n\t\t\tatStart: false,\n\t\t\tatEnd: false,\n\t\t\tstart: {\n\t\t\t\tcfi: start.mapping.start,\n\t\t\t\thref: start.href,\n\t\t\t\tindex: start.index,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: start.pages[0],\n\t\t\t\t\ttotal: start.total\n\t\t\t\t}\n\t\t\t},\n\t\t\tend: {\n\t\t\t\tcfi: end.mapping.end,\n\t\t\t\thref: end.href,\n\t\t\t\tindex: end.index,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: end.pages[end.pages.length - 1],\n\t\t\t\t\ttotal: end.total\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst locations = this.book.locations;\n\t\tif (locations.size) {\n\t\t\tconst locationStart = locations.locationFromCfi(start.mapping.start);\n\t\t\tconst locationEnd = locations.locationFromCfi(end.mapping.end);\n\n\t\t\tif (locationStart !== -1) {\n\t\t\t\tlocated.start.location = locationStart;\n\t\t\t\tlocated.start.percentage = locations.percentageFromLocation(locationStart);\n\t\t\t}\n\t\t\tif (locationEnd !== -1) {\n\t\t\t\tlocated.end.location = locationEnd;\n\t\t\t\tlocated.end.percentage = locations.percentageFromLocation(locationEnd);\n\t\t\t}\n\t\t}\n\n\t\tconst pageList = this.book.navigation.pageList;\n\t\tif (pageList.length) {\n\t\t\tconst pageStart = pageList.pageFromCfi(start.mapping.start);\n\t\t\tconst pageEnd = pageList.pageFromCfi(end.mapping.end);\n\n\t\t\tif (pageStart !== -1) {\n\t\t\t\tlocated.start.page = pageStart;\n\t\t\t}\n\t\t\tif (pageEnd !== -1) {\n\t\t\t\tlocated.end.page = pageEnd;\n\t\t\t}\n\t\t}\n\n\t\tconst startPage = located.start.displayed.page;\n\t\tif (this.book.sections.first().index === start.index &&\n\t\t\tstartPage.index === 0) {\n\t\t\tlocated.atStart = true;\n\t\t}\n\n\t\tconst endPage = located.end.displayed.page;\n\t\tif (this.book.sections.last().index === end.index &&\n\t\t\tendPage.index === located.end.displayed.total - 1) {\n\t\t\tlocated.atEnd = true;\n\t\t}\n\n\t\treturn located;\n\t}\n\n\t/**\n\t * relocated event handler\n\t * @fires relocated\n\t * @private\n\t */\n\trelocated(location) {\n\n\t\tconst located = this.located(location);\n\t\tif (!located || !located.start || !located.end) {\n\t\t\treturn;\n\t\t}\n\t\tthis.location = located;\n\t\t/**\n\t\t * @event relocated\n\t\t * @param {object} location\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t}\n\n\t/**\n\t * Remove and Clean Up the Rendition\n\t */\n\tdestroy() {\n\n\t\tthis.q.clear();\n\t\tthis.q = undefined;\n\t\tthis.layout.destroy();\n\t\tthis.themes.destroy();\n\t\tthis.viewport.destroy();\n\t\tthis.manager.destroy();\n\t\tthis.hooks.display.clear();\n\t\tthis.hooks.content.clear();\n\t\tthis.hooks.layout.clear();\n\t\tthis.hooks.render.clear();\n\t\tthis.hooks.show.clear();\n\t\tthis.hooks.unloaded.clear();\n\t\tthis.hooks = undefined;\n\t\tthis.layout = undefined;\n\t\tthis.themes = undefined;\n\t\tthis.manager = undefined;\n\t\tthis.epubcfi = undefined;\n\t\tthis.started = undefined;\n\t\tthis.starting = undefined;\n\t\tthis.viewport = undefined;\n\t}\n\n\t/**\n\t * Pass the events from a view's Contents\n\t * @param {Contents} view contents\n\t * @private\n\t */\n\tpassEvents(contents) {\n\n\t\tDOM_EVENTS.forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\n\t\tcontents.on(EVENTS.CONTENTS.SELECTED, (e) => this.triggerSelectedEvent(e, contents));\n\t}\n\n\t/**\n\t * Emit events passed by a view\n\t * @param {event} e\n\t * @private\n\t */\n\ttriggerViewEvent(e, contents) {\n\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\t/**\n\t * Emit a selection event's CFI Range passed from a a view\n\t * @param {string} cfirange\n\t * @private\n\t */\n\ttriggerSelectedEvent(cfirange, contents) {\n\t\t/**\n\t\t * Emit that a text selection has occurred\n\t\t * @event selected\n\t\t * @param {string} cfirange\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.SELECTED, cfirange, contents);\n\t}\n\n\t/**\n\t * Emit a markClicked event with the cfiRange and data from a mark\n\t * @param {EpubCFI} cfirange\n\t * @param {object} data \n\t * @param {Contents} contents \n\t * @private\n\t */\n\ttriggerMarkEvent(cfiRange, data, contents) {\n\t\t/**\n\t\t * Emit that a mark was clicked\n\t\t * @event markClicked\n\t\t * @param {EpubCFI} cfiRange\n\t\t * @param {object} data\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.MARK_CLICKED, cfiRange, data, contents);\n\t}\n\n\t/**\n\t * Get a Range from a Visible CFI\n\t * @param {string} epubcfi EpubCfi string\n\t * @param {string} ignoreClass\n\t * @return {Range}\n\t */\n\tgetRange(epubcfi, ignoreClass) {\n\n\t\tconst cfi = new EpubCFI(epubcfi);\n\t\tconst found = this.manager.visible().filter((view) => {\n\t\t\tif (cfi.spinePos === view.section.index) return true;\n\t\t});\n\n\t\t// Should only every return 1 item\n\t\tif (found.length) {\n\t\t\treturn found[0].contents.range(cfi, ignoreClass);\n\t\t}\n\t}\n\n\t/**\n\t * Hook to adjust images to fit in columns\n\t * @param {Contents} contents\n\t * @returns {Promise<Node|null>}\n\t * @private\n\t */\n\tadjustImages(contents) {\n\n\t\tconst content = contents.content;\n\t\tconst padding = {\n\t\t\ttop: parseFloat(content.style[\"padding-top\"]),\n\t\t\tbottom: parseFloat(content.style[\"padding-bottom\"]),\n\t\t\tleft: parseFloat(content.style[\"padding-left\"]),\n\t\t\tright: parseFloat(content.style[\"padding-right\"])\n\t\t};\n\t\tconst paddingX = padding.left + padding.right;\n\t\tconst paddingY = padding.top + padding.bottom;\n\t\tconst width = (this.layout.columnWidth ? (this.layout.columnWidth - paddingX) + \"px\" : \"100%\") + \" !important\";\n\t\tconst height = (content.offsetHeight - paddingY) + \"px !important\";\n\n\t\treturn contents.appendStylesheet(\"images\", {\n\t\t\t\"img\": {\n\t\t\t\t\"max-width\": width,\n\t\t\t\t\"max-height\": height,\n\t\t\t\t\"object-fit\": \"contain\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\",\n\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t},\n\t\t\t\"svg\": {\n\t\t\t\t\"max-width\": width,\n\t\t\t\t\"max-height\": height,\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\"\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Get the Contents object of each rendered view\n\t * @returns {Array<Contents>}\n\t */\n\tgetContents() {\n\n\t\treturn this.manager ? this.manager.getContents() : [];\n\t}\n\n\t/**\n\t * Get the views member from the manager\n\t * @returns {Views}\n\t */\n\tviews() {\n\n\t\tconst views = this.manager ? this.manager.views : undefined;\n\t\treturn views || [];\n\t}\n\n\t/**\n\t * Hook to handle link clicks in rendered content\n\t * @param {Contents} contents\n\t * @private\n\t */\n\thandleLinks(contents) {\n\n\t\tif (contents) {\n\t\t\tcontents.on(EVENTS.CONTENTS.LINK_CLICKED, (href) => {\n\t\t\t\tthis.display(href);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook to handle injecting stylesheet before\n\t * a Section is serialized\n\t * @param {Document} doc\n\t * @param {Section} section\n\t * @private\n\t */\n\tinjectStylesheet(doc, section) {\n\n\t\tconst style = doc.createElement(\"link\");\n\t\tstyle.setAttribute(\"type\", \"text/css\");\n\t\tstyle.setAttribute(\"rel\", \"stylesheet\");\n\t\tstyle.setAttribute(\"href\", this.settings.stylesheet);\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(style);\n\t}\n\n\t/**\n\t * Hook to handle injecting scripts before\n\t * a Section is serialized\n\t * @param {Document} doc\n\t * @param {Section} section\n\t * @private\n\t */\n\tinjectScript(doc, section) {\n\n\t\tconst script = doc.createElement(\"script\");\n\t\tscript.setAttribute(\"type\", \"text/javascript\");\n\t\tscript.setAttribute(\"src\", this.settings.script);\n\t\tscript.textContent = \" \"; // Needed to prevent self closing tag\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(script);\n\t}\n\n\t/**\n\t * Hook to handle the document identifier before\n\t * a Section is serialized\n\t * @param {Document} doc\n\t * @param {Section} section \n\t * @private\n\t */\n\tinjectIdentifier(doc, section) {\n\n\t\tconst ident = this.book.packaging.metadata.get(\"identifier\");\n\t\tconst meta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.relation.ispartof\");\n\t\tif (ident) meta.setAttribute(\"content\", ident);\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(meta);\n\t}\n}\n\nEventEmitter(Rendition.prototype);\n\nexport default Rendition;","import { substitute } from \"./utils/replacements\";\nimport {\n\tblob2base64,\n\tcreateBlobUrl\n} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport mime from \"./utils/mime\";\n\n/**\n * Assets container for URL replacements\n * @extends {Map}\n */\nclass Resources extends Map {\n\t/**\n\t * Constructor\n\t * @param {Function} request\n\t * @param {Function} resolve\n\t * @param {string} [replacements=null]\n\t */\n\tconstructor(request, resolve, replacements) {\n\n\t\tsuper();\n\t\tthis.archive = undefined;\n\t\tthis.storage = undefined;\n\t\tthis.request = request;\n\t\tthis.resolve = resolve;\n\t\tthis.replacements = replacements || null;\n\t}\n\n\t/**\n\t * Clear replacement URLs\n\t * @override\n\t */\n\tclear() {\n\n\t\tif (this.replacements === \"blobUrl\") {\n\t\t\tthis.forEach((value, key) => {\n\t\t\t\tURL.revokeObjectURL(value);\n\t\t\t});\n\t\t}\n\t\tsuper.clear();\n\t}\n\n\t/**\n\t * Create a url to a resource\n\t * @param {string} href\n\t * @param {string} [mimeType]\n\t * @return {Promise<string>} Promise resolves with url string\n\t */\n\tasync createUrl(href, mimeType) {\n\n\t\tconst uri = this.resolve(href); // absolute path\n\t\tconst url = new Url(uri);\n\t\tconst base64 = this.replacements === \"base64\";\n\n\t\tif (this.archive) {\n\t\t\tconst type = base64 ? \"base64\" : \"blob\";\n\t\t\treturn this.archive.request(uri, type).then((data) => {\n\t\t\t\treturn base64 ? data : URL.createObjectURL(data);\n\t\t\t});\n\t\t} else if (base64) {\n\t\t\treturn this.request(uri, \"blob\").then((blob) => {\n\t\t\t\treturn blob2base64(blob);\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.request(uri, \"blob\").then((blob) => {\n\t\t\t\tconst type = mimeType || mime.lookup(url.filename);\n\t\t\t\treturn createBlobUrl(blob, type);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Revoke URL for a resource item\n\t * @param {string} url \n\t */\n\trevokeUrl(url) {\n\n\t\tif (this.replacements === \"blobUrl\") {\n\t\t\tconst blobUrl = this.get(url);\n\t\t\tif (blobUrl) {\n\t\t\t\tURL.revokeObjectURL(blobUrl);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Substitute urls in content, with replacements,\n\t * relative to a url if provided\n\t * @param {string} content\n\t * @param {Section} section\n\t */\n\tsubstitute(content, section) {\n\n\t\tsection.output = substitute(\n\t\t\tcontent,\n\t\t\tsection,\n\t\t\t[...this.keys()],\n\t\t\t[...this.values()]\n\t\t);\n\t}\n\n\t/**\n\t * Unpack resources from manifest\n\t * @param {Manifest} manifest\n\t * @param {Archive} archive\n\t * @param {Storage} storage\n\t * @returns {Promise<Resources>}\n\t */\n\tasync unpack(manifest, archive, storage) {\n\n\t\tthis.archive = archive;\n\t\tthis.storage = storage;\n\n\t\tif (this.replacements === null) {\n\t\t\tthis.replacements = (archive || storage.name) ? \"blobUrl\" : null;\n\t\t}\n\n\t\tconst tasks = [];\n\n\t\tmanifest.forEach((item, key) => {\n\t\t\tif (item[\"media-type\"] === \"application/xhtml+xml\" ||\n\t\t\t\titem[\"media-type\"] === \"text/html\") {\n\t\t\t\tif (storage.name && !archive) {\n\t\t\t\t\ttasks.push(storage.put(this.resolve(item.href)));\n\t\t\t\t}\n\t\t\t} else if (this.replacements) {\n\t\t\t\tconst task = this.createUrl(item.href, item[\"media-type\"]).then((url) => {\n\t\t\t\t\tthis.set(item.href, url);\n\t\t\t\t\treturn url;\n\t\t\t\t});\n\t\t\t\ttasks.push(task);\n\t\t\t} else {\n\t\t\t\tthis.set(item.href, null);\n\t\t\t}\n\t\t});\n\n\t\treturn Promise.all(tasks).then(() => {\n\t\t\treturn this;\n\t\t});\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.archive = undefined;\n\t\tthis.storage = undefined;\n\t\tthis.request = undefined;\n\t\tthis.resolve = undefined;\n\t\tthis.replacements = undefined;\n\t}\n}\n\nexport default Resources;","import EpubCFI from \"./epubcfi\";\nimport Defer from \"./utils/defer\";\nimport { sprint } from \"./utils/core\";\n\n/**\n * Represents a Section of the Book\n * In most books this is equivalent to a Chapter\n */\nclass Section {\n\t/**\n\t * Constructor\n\t * @param {object} item Spine Item\n\t * @param {object} hooks \n\t */\n\tconstructor(item, hooks) {\n\t\t/**\n\t\t * @member {string} idref\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.idref = item.idref;\n\t\t/**\n\t\t * @member {boolean} linear\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.linear = item.linear === \"yes\";\n\t\t/**\n\t\t * @member {number} index\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.index = item.index;\n\t\t/**\n\t\t * @member {string} href\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.href = item.href;\n\t\t/**\n\t\t * @member {string} url\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.url = item.url;\n\t\t/**\n\t\t * @member {string} canonical\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.canonical = item.canonical;\n\t\t/**\n\t\t * @member {string} cfiBase\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.cfiBase = item.cfiBase;\n\t\t/**\n\t\t * @member {Function} next\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.next = item.next;\n\t\t/**\n\t\t * @member {Function} prev\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.prev = item.prev;\n\t\t/**\n\t\t * @member {string[]} properties\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.properties = item.properties;\n\t\tthis.hooks = hooks;\n\t\t/**\n\t\t * @member {Document} document\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.document = undefined;\n\t\t/**\n\t\t * @member {Element} contents\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.contents = undefined;\n\t\t/**\n\t\t * @member {string} output\n\t\t * @memberof Section\n\t\t * @readonly\n\t\t */\n\t\tthis.output = undefined;\n\t}\n\n\t/**\n\t * Load the section from its url\n\t * @param {Function} request a request method to use for loading\n\t * @return {Promise<Element>} a promise with the xml document\n\t */\n\tload(request) {\n\n\t\tconst loading = new Defer();\n\n\t\tif (this.contents) {\n\t\t\tloading.resolve(this.contents);\n\t\t} else {\n\t\t\trequest(this.url).then((xml) => {\n\t\t\t\tthis.document = xml;\n\t\t\t\tthis.contents = xml.documentElement;\n\t\t\t\treturn this.hooks.content.trigger(this.document, this);\n\t\t\t}).then(() => {\n\t\t\t\tloading.resolve(this.contents);\n\t\t\t}).catch((error) => {\n\t\t\t\tloading.reject(error);\n\t\t\t});\n\t\t}\n\n\t\treturn loading.promise;\n\t}\n\n\t/**\n\t * Render the contents of a section\n\t * @todo better way to return this from hooks?\n\t * @param {Function} request a request method to use for loading\n\t * @return {Promise<string>} output a serialized XML Document\n\t */\n\trender(request) {\n\n\t\tconst rendering = new Defer();\n\n\t\tthis.load(request).then((contents) => {\n\t\t\tconst serializer = new XMLSerializer();\n\t\t\tthis.output = serializer.serializeToString(contents);\n\t\t\treturn this.output;\n\t\t}).then(() => {\n\t\t\treturn this.hooks.serialize.trigger(this.output, this);\n\t\t}).then(() => {\n\t\t\trendering.resolve(this.output);\n\t\t}).catch((error) => {\n\t\t\trendering.reject(error);\n\t\t});\n\n\t\treturn rendering.promise;\n\t}\n\n\t/**\n\t * Find a string in a section\n\t * @param {string} query The query string to find\n\t * @return {object[]} A list of matches, with form { cfi, excerpt }\n\t */\n\tfind(query) {\n\n\t\tconst section = this;\n\t\tconst matches = [];\n\t\tconst q = query.toLowerCase();\n\t\tconst find = (node) => {\n\n\t\t\tconst text = node.textContent.toLowerCase();\n\t\t\tconst limit = 150;\n\t\t\tlet pos, last = -1;\n\n\t\t\twhile (pos !== -1) {\n\t\t\t\t// Search for the query\n\t\t\t\tpos = text.indexOf(q, last + 1);\n\n\t\t\t\tif (pos !== -1) {\n\t\t\t\t\t// We found it! Generate a CFI\n\t\t\t\t\tconst range = section.document.createRange();\n\t\t\t\t\trange.setStart(node, pos);\n\t\t\t\t\trange.setEnd(node, pos + q.length);\n\n\t\t\t\t\tconst cfi = section.cfiFromRange(range);\n\n\t\t\t\t\tlet excerpt;\n\t\t\t\t\t// Generate the excerpt\n\t\t\t\t\tif (node.textContent.length < limit) {\n\t\t\t\t\t\texcerpt = node.textContent;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\texcerpt = node.textContent.substring(pos - limit / 2, pos + limit / 2);\n\t\t\t\t\t\texcerpt = \"...\" + excerpt + \"...\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add the CFI to the matches list\n\t\t\t\t\tmatches.push({\n\t\t\t\t\t\tcfi: cfi,\n\t\t\t\t\t\texcerpt: excerpt\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlast = pos;\n\t\t\t}\n\t\t}\n\n\t\tsprint(section.document, (node) => find(node));\n\n\t\treturn matches;\n\t}\n\n\t/**\n\t * Search a string in multiple sequential Element of the section.\n\t * If the document.createTreeWalker api is missed(eg: IE8), use \n\t * `find` as a fallback.\n\t * @param {string} query The query string to search\n\t * @param {number} [maxSeqEle=5] The maximum number of Element that are combined for search, default value is 5.\n\t * @return {object[]} A list of matches, with form { cfi, excerpt }\n\t */\n\tsearch(query, maxSeqEle = 5) {\n\n\t\tif (typeof (document.createTreeWalker) === \"undefined\") {\n\t\t\treturn this.find(query);\n\t\t}\n\t\tconst matches = [];\n\t\tconst excerptLimit = 150;\n\t\tconst section = this;\n\t\tconst q = query.toLowerCase();\n\t\tconst search = (nodeList) => {\n\t\t\tconst textWithCase = nodeList.reduce((acc, current) => {\n\t\t\t\treturn acc + current.textContent;\n\t\t\t}, \"\");\n\t\t\tconst text = textWithCase.toLowerCase();\n\t\t\tconst pos = text.indexOf(q);\n\t\t\tif (pos !== -1) {\n\t\t\t\tconst startNodeIndex = 0, endPos = pos + q.length;\n\t\t\t\tlet endNodeIndex = 0, len = 0;\n\t\t\t\tif (pos < nodeList[startNodeIndex].length) {\n\t\t\t\t\twhile (endNodeIndex < nodeList.length - 1) {\n\t\t\t\t\t\tlen += nodeList[endNodeIndex].length;\n\t\t\t\t\t\tif (endPos <= len) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tendNodeIndex += 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst startNode = nodeList[startNodeIndex];\n\t\t\t\t\tconst endNode = nodeList[endNodeIndex];\n\t\t\t\t\tconst range = section.document.createRange();\n\t\t\t\t\trange.setStart(startNode, pos);\n\t\t\t\t\tconst beforeEndLengthCount = nodeList.slice(0, endNodeIndex).reduce((acc, current) => {\n\t\t\t\t\t\treturn acc + current.textContent.length;\n\t\t\t\t\t}, 0);\n\t\t\t\t\trange.setEnd(endNode, beforeEndLengthCount > endPos ? endPos : endPos - beforeEndLengthCount);\n\t\t\t\t\tconst cfi = section.cfiFromRange(range);\n\n\t\t\t\t\tlet excerpt = nodeList.slice(0, endNodeIndex + 1).reduce((acc, current) => {\n\t\t\t\t\t\treturn acc + current.textContent;\n\t\t\t\t\t}, \"\");\n\t\t\t\t\tif (excerpt.length > excerptLimit) {\n\t\t\t\t\t\texcerpt = excerpt.substring(pos - excerptLimit / 2, pos + excerptLimit / 2);\n\t\t\t\t\t\texcerpt = \"...\" + excerpt + \"...\";\n\t\t\t\t\t}\n\t\t\t\t\tmatches.push({\n\t\t\t\t\t\tcfi: cfi,\n\t\t\t\t\t\texcerpt: excerpt\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst treeWalker = document.createTreeWalker(section.document, NodeFilter.SHOW_TEXT, null, false);\n\t\tlet node, nodeList = [];\n\t\twhile (node = treeWalker.nextNode()) {\n\t\t\tnodeList.push(node);\n\t\t\tif (nodeList.length == maxSeqEle) {\n\t\t\t\tsearch(nodeList.slice(0, maxSeqEle));\n\t\t\t\tnodeList = nodeList.slice(1, maxSeqEle);\n\t\t\t}\n\t\t}\n\t\tif (nodeList.length > 0) {\n\t\t\tsearch(nodeList);\n\t\t}\n\t\treturn matches;\n\t}\n\n\t/**\n\t * Get a CFI from a Range in the Section\n\t * @param {Range} range\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromRange(range) {\n\n\t\treturn new EpubCFI(range, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Get a CFI from an Element in the Section\n\t * @param {Element} el\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromElement(el) {\n\n\t\treturn new EpubCFI(el, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Unload the section document\n\t */\n\tunload() {\n\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.unload();\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\t\tthis.hooks = undefined;\n\t\tthis.idref = undefined;\n\t\tthis.linear = undefined;\n\t\tthis.properties = undefined;\n\t\tthis.index = undefined;\n\t\tthis.href = undefined;\n\t\tthis.url = undefined;\n\t\tthis.next = undefined;\n\t\tthis.prev = undefined;\n\t\tthis.cfiBase = undefined;\n\t}\n}\n\nexport default Section;","import EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport Section from \"./section\";\nimport {\n    replaceBase,\n    replaceMeta,\n    replaceCanonical\n} from \"./utils/replacements\";\n\n/**\n * Sections class\n * @extends {Map}\n */\nclass Sections extends Map {\n\n    constructor() {\n\n        super();\n        /**\n         * @member {object} hooks\n         * @property {Hook} content\n         * @property {Hook} serialize\n         * @memberof Sections\n         * @readonly\n         */\n        this.hooks = {\n            content: new Hook(this),\n            serialize: new Hook(this)\n        };\n        // Register replacements\n        this.hooks.content.register(replaceBase);\n        this.hooks.content.register(replaceMeta);\n        this.hooks.content.register(replaceCanonical);\n        this.points = {};\n        this.nav = undefined;\n        this.pkg = undefined;\n    }\n\n    /**\n     * Clear sections\n     */\n    clear() {\n\n        this.forEach((i) => i.destroy());\n        this.hooks.serialize.clear();\n        this.hooks.content.clear();\n        this.hooks.content.register(replaceBase);\n        this.hooks.content.register(replaceMeta);\n        this.hooks.content.register(replaceCanonical);\n        this.points = {};\n        super.clear();\n    }\n\n    /**\n     * Get an item from the spine\n     * @param {string|number} [target]\n     * @return {Section|null} section\n     * @example sections.get();\n     * @example sections.get(3);\n     * @example sections.get(\"#chapter_001\");\n     * @example sections.get(\"chapter_001.xhtml\");\n     * @example sections.get(\"epubcfi(/6/8!/4/2/16/1:0)\")\n     * @override\n     */\n    get(target) {\n\n        let result;\n        if (typeof target === \"undefined\") {\n            result = this.first();\n        } else if (typeof target === \"number\" && isNaN(target) === false) {\n            result = [...this.values()][target];\n        } else if (typeof target === \"string\") {\n            if (EpubCFI.prototype.isCfiString(target)) {\n                const cfi = new EpubCFI(target);\n                const pos = cfi.spinePos;\n                result = [...this.values()][pos];\n            } else if (target.indexOf(\"#\") === 0) {\n                if (result = this.pkg.spine.get(target.substring(1))) {\n                    result = [...this.values()][result.index];\n                }\n            } else {\n                if (result = this.nav.toc.get(target)) {\n                    result = super.get(result.bind);\n                } else {\n                    target = target.split(\"#\")[0]; // Remove fragments\n                    result = super.get(target);\n                }\n            }\n        }\n        return result || null;\n    }\n\n    /**\n     * Find the first Section in the Spine\n     * @return {Section|null} first section\n     */\n    first() {\n\n        return this.points.first || null;\n    }\n\n    /**\n     * Find the last Section in the Spine\n     * @return {Section|null} last section\n     */\n    last() {\n\n        return this.points.last || null;\n    }\n\n    /**\n     * Unpack items from a opf into spine items\n     * @param {Packaging} packaging\n     * @param {Navigation} navigation \n     * @param {Function} resolve URL resolve\n     * @param {Function} canonical Resolve canonical url\n     * @returns {Promise<Sections>}\n     */\n    unpack(packaging, navigation, resolve, canonical) {\n\n        this.pkg = packaging;\n        this.nav = navigation;\n        const manifest = packaging.manifest;\n        const spine = packaging.spine;\n        const toc = navigation.toc;\n        spine.forEach((itemref, key) => {\n\n            const item = manifest.get(key);\n            const data = {};\n\n            data.cfiBase = EpubCFI.prototype.generateChapterComponent(\n                spine.nodeIndex,\n                itemref.index,\n                itemref.id\n            );\n\n            if (item) {\n                const link = toc.get(item.href);\n                data.bind = link ? link.bind : item.href;\n                data.href = item.href;\n                data.url = resolve(item.href, true);\n                data.canonical = canonical(item.href);\n                data.properties = [];\n\n                if (item.properties.length) {\n                    data.properties.push.apply(\n                        data.properties,\n                        item.properties\n                    );\n                }\n            }\n\n            data.idref = itemref.idref;\n            data.index = itemref.index;\n            data.linear = itemref.linear;\n\n            if (data.linear === \"yes\") {\n                data.next = () => {\n                    let nextIndex = data.index;\n                    while (nextIndex < this.size - 1) {\n                        let next = this.get(nextIndex + 1);\n                        if (next && next.linear) {\n                            return next;\n                        }\n                        nextIndex += 1;\n                    }\n                    return null;\n                };\n                data.prev = () => {\n                    let prevIndex = data.index;\n                    while (prevIndex > 0) {\n                        let prev = this.get(prevIndex - 1);\n                        if (prev && prev.linear) {\n                            return prev;\n                        }\n                        prevIndex -= 1;\n                    }\n                    return null;\n                };\n            } else {\n                data.prev = () => {\n                    return null;\n                }\n                data.next = () => {\n                    return null;\n                }\n            }\n\n            const section = new Section(data, this.hooks);\n            this.set(data.bind, section);\n        });\n\n        if (this.size) {\n            let nextIndex = 0;\n            while (nextIndex < this.size) {\n                let next = this.get(nextIndex);\n                if (next && next.linear) {\n                    this.points[\"first\"] = next;\n                    break;\n                }\n                nextIndex += 1;\n            }\n        }\n\n        if (this.size) {\n            let prevIndex = this.size;\n            while (prevIndex > 0) {\n                let prev = this.get(prevIndex - 1);\n                if (prev && prev.linear) {\n                    this.points[\"last\"] = prev;\n                    break;\n                }\n                prevIndex -= 1;\n            }\n        }\n\n        return new Promise((resolve) => {\n            resolve(this);\n        });\n    }\n\n    /**\n     * destroy\n     */\n    destroy() {\n\n        this.clear();\n        this.hooks = undefined;\n        this.points = undefined;\n        this.nav = undefined;\n        this.pkg = undefined;\n    }\n}\n\nexport default Sections;","import EventEmitter from \"event-emitter\";\nimport localforage from \"localforage\";\nimport request from \"./utils/request\";\nimport mime from \"./utils/mime\";\nimport Defer from \"./utils/defer\";\nimport Input from \"./input\";\n\n/**\n * Handles saving and requesting files from local storage\n * @extends {Input}\n */\nclass Storage extends Input {\n\t/**\n\t * Constructor\n\t * @param {string} name This should be the name of the application for modals\n\t */\n\tconstructor(name) {\n\n\t\tsuper();\n\t\t/**\n\t\t * @member {string} name\n\t\t * @memberof Storage\n\t\t * @readonly\n\t\t */\n\t\tthis.name = name;\n\t\t/**\n\t\t * @member {boolean} online Current status\n\t\t * @memberof Storage\n\t\t * @readonly\n\t\t */\n\t\tthis.online = window.navigator.onLine;\n\t}\n\n\t/**\n\t * Create LocalForage instance\n\t */\n\tcreateInstance() {\n\n\t\tif (localforage) {\n\t\t\tthis.instance = localforage.createInstance({\n\t\t\t\tname: this.name\n\t\t\t});\n\t\t\tthis.appendListeners();\n\t\t} else {\n\t\t\tthrow new TypeError(\"LocalForage lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Append event listeners\n\t * @private\n\t */\n\tappendListeners() {\n\n\t\twindow.addEventListener(\"online\", this.status.bind(this));\n\t\twindow.addEventListener(\"offline\", this.status.bind(this));\n\t}\n\n\t/**\n\t * Remove event listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\n\t\twindow.removeEventListener(\"online\", this.status.bind(this));\n\t\twindow.removeEventListener(\"offline\", this.status.bind(this));\n\t}\n\n\t/**\n\t * Update the online / offline status\n\t * @param {Event} event \n\t * @private\n\t */\n\tstatus(event) {\n\n\t\tthis.online = event.type === \"online\";\n\n\t\tif (this.online) {\n\t\t\tthis.emit(\"online\");\n\t\t} else {\n\t\t\tthis.emit(\"offline\");\n\t\t}\n\t}\n\n\t/**\n\t * Get entry from Storage\n\t * @param {string|number} input key\n\t * @returns {Promise<any>}\n\t * @example storage.get(0).then(data => ...)\n\t * @example storage.get('https://example.com/to/book.epub').then(data => ...)\n\t */\n\tasync get(input) {\n\n\t\tconst key = this.getKey(input);\n\t\treturn this.instance.getItem(key);\n\t}\n\n\t/**\n\t * Set data into Storage\n\t * @param {string|number} input\n\t * @param {ArrayBuffer} data\n\t * @return {Promise<ArrayBuffer|null>}\n\t */\n\tasync set(input, data) {\n\n\t\tconst key = this.getKey(input);\n\t\treturn this.instance.setItem(key, data);\n\t}\n\n\t/**\n\t * Put data into Storage\n\t * @param {string} url \n\t * @returns {Promise<ArrayBuffer>}\n\t */\n\tasync put(url) {\n\n\t\treturn this.get(url).then((data) => {\n\t\t\treturn data || request(url, \"binary\").then((result) => {\n\t\t\t\treturn this.set(url, result);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Dispatch a request by URL\n\t * @param {string} url a url to request from storage\n\t * @param {string} [type] specify the type of the returned result\n\t * @param {boolean} [withCredentials]\n\t * @param {string[]} [headers]\n\t * @return {Promise<Blob|string|JSON|Document|XMLDocument>}\n\t */\n\tasync dispatch(url, type, withCredentials, headers) {\n\n\t\tif (this.online) {\n\t\t\t//-- From network\n\t\t\tconst tasks = [];\n\t\t\ttasks.push(request(\n\t\t\t\turl,\n\t\t\t\ttype,\n\t\t\t\twithCredentials,\n\t\t\t\theaders\n\t\t\t));\n\t\t\ttasks.push(this.put(url));\n\t\t\treturn Promise.all(tasks).then((result) => {\n\t\t\t\treturn result[0] || null;\n\t\t\t});\n\t\t} else {\n\t\t\t//-- From storage\n\t\t\treturn this.request(url, type);\n\t\t}\n\t}\n\n\t/**\n\t * Get entry key from input\n\t * @param {string|number} input \n\t * @returns {string} key\n\t * @private\n\t */\n\tgetKey(input) {\n\n\t\tlet key;\n\t\tif (typeof input === \"string\") {\n\t\t\tkey = input;\n\t\t} else {\n\t\t\tkey = `book-${input}`;\n\t\t}\n\t\treturn key;\n\t}\n\n\t/**\n\t * Get a Blob from Storage by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<Blob|null>}\n\t * @override\n\t */\n\tasync getBlob(url, mimeType) {\n\n\t\treturn this.get(url).then((data) => {\n\t\t\tif (!data) return null;\n\t\t\tconst type = mimeType || mime.lookup(url);\n\t\t\treturn new Blob([data], { type });\n\t\t});\n\t}\n\n\t/**\n\t * Get a Text from Storage by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<string|null>}\n\t * @override\n\t */\n\tasync getText(url, mimeType) {\n\n\t\treturn this.get(url).then((data) => {\n\t\t\tif (!data) return null;\n\t\t\tconst def = new Defer();\n\t\t\tconst reader = new FileReader();\n\t\t\tconst type = mimeType || mime.lookup(url);\n\t\t\tconst blob = new Blob([data], { type });\n\t\t\treader.onloadend = () => {\n\t\t\t\tdef.resolve(reader.result);\n\t\t\t};\n\t\t\treader.readAsText(blob, type);\n\t\t\treturn def.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Storage by URL\n\t * @param {string} url\n\t * @param {string} [mimeType]\n\t * @returns {Promise<string|null>} base64 encoded\n\t * @override\n\t */\n\tasync getBase64(url, mimeType) {\n\n\t\treturn this.get(url).then((data) => {\n\t\t\tif (!data) return null;\n\t\t\tconst def = new Defer();\n\t\t\tconst reader = new FileReader();\n\t\t\tconst type = mimeType || mime.lookup(url);\n\t\t\tconst blob = new Blob([data], { type });\n\t\t\treader.onloadend = () => {\n\t\t\t\tdef.resolve(reader.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob, type);\n\t\t\treturn def.promise;\n\t\t});\n\t}\n\n\t/**\n\t * destroy\n\t * @override\n\t */\n\tdestroy() {\n\n\t\tsuper.destroy();\n\t\tthis.removeListeners();\n\t}\n}\n\nEventEmitter(Storage.prototype);\n\nexport default Storage;","import EventEmitter from \"event-emitter\";\nimport Url from \"./utils/url\";\nimport { EVENTS } from \"./utils/constants\";\n\n/**\n * Themes to apply to displayed content\n */\nclass Themes extends Map {\n\t/**\n\t * Constructor\n\t * @param {Rendition} rendition\n\t */\n\tconstructor(rendition) {\n\n\t\tsuper();\n\t\tthis.rendition = rendition;\n\t\t/**\n\t\t * @member {string} current\n\t\t * @memberof Themes\n\t\t * @readonly\n\t\t */\n\t\tthis.current = null;\n\t\t/**\n\t\t * Injected css rules\n\t\t * @member {object} rules\n\t\t * @memberof Themes\n\t\t * @readonly\n\t\t */\n\t\tthis.rules = {};\n\t\tthis.rendition.hooks.content.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.content.register(this.update.bind(this));\n\t}\n\n\t/**\n\t * Add themes to be used by a rendition\n\t * @param {IArguments} args\n\t * @example register(\"light\", \"/path/to/light.css\")\n\t * @example register(\"light\", \"https://example.com/to/light.css\")\n\t * @example register(\"light\", { body: { color: \"purple\"}})\n\t * @example register({ light: {...}, dark: {...}})\n\t */\n\tregister() {\n\n\t\tif (arguments.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (arguments.length === 1 && typeof (arguments[0]) === \"object\") {\n\t\t\treturn this.registerThemes(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof (arguments[1]) === \"string\") {\n\t\t\treturn this.registerUrl(arguments[0], arguments[1]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof (arguments[1]) === \"object\") {\n\t\t\treturn this.registerRules(arguments[0], arguments[1]);\n\t\t}\n\t}\n\n\t/**\n\t * Register themes object\n\t * @param {object} themes\n\t */\n\tregisterThemes(themes) {\n\n\t\tfor (const theme in themes) {\n\t\t\tif (themes.hasOwnProperty(theme)) {\n\t\t\t\tif (typeof (themes[theme]) === \"string\") {\n\t\t\t\t\tthis.registerUrl(theme, themes[theme]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.registerRules(theme, themes[theme]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Register a url\n\t * @param {string} name Theme name\n\t * @param {string} input URL string\n\t * @example registerUrl(\"light\", \"light.css\")\n\t * @example registerUrl(\"light\", \"http://example.com/light.css\")\n\t */\n\tregisterUrl(name, input) {\n\n\t\tconst url = new Url(input);\n\t\tthis.set(name, {\n\t\t\tinjected: false,\n\t\t\turl: url.toString()\n\t\t});\n\t}\n\n\t/**\n\t * Register rule\n\t * @param {string} name\n\t * @param {object} rules\n\t * @example registerRules(\"light\", { body: { color: \"purple\"}})\n\t */\n\tregisterRules(name, rules) {\n\n\t\tthis.set(name, {\n\t\t\tinjected: false,\n\t\t\trules: rules\n\t\t});\n\t}\n\n\t/**\n\t * Select a theme\n\t * @param {string} [name] Theme name\n\t * @description Use null to reject the current selected theme\n\t */\n\tselect(name) {\n\n\t\tconst prev = this.current;\n\n\t\tlet theme;\n\t\tif (name) {\n\t\t\ttheme = this.get(name);\n\t\t} else if (prev && name === null) {\n\t\t\ttheme = this.get(prev);\n\t\t}\n\t\tif (this.current === name || !theme) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.current = name;\n\n\t\tconst contents = this.rendition.getContents();\n\t\tcontents.forEach((content) => {\n\t\t\tif (!content) {\n\t\t\t\treturn;\n\t\t\t} else if (name) {\n\t\t\t\tcontent.removeClass(prev);\n\t\t\t\tcontent.appendClass(name);\n\t\t\t\tthis.append(name, theme, content);\n\t\t\t} else if (prev) {\n\t\t\t\tcontent.removeClass(prev);\n\t\t\t\tthis.remove(prev, theme, content);\n\t\t\t}\n\t\t});\n\t\t/**\n\t\t * Emit which occurs when theme is selected\n\t\t * @event selected\n\t\t * @param {string} name Theme key\n\t\t * @param {object} theme Theme value\n\t\t * @memberof Themes\n\t\t */\n\t\tthis.emit(EVENTS.THEMES.SELECTED, name, theme);\n\t}\n\n\t/**\n\t * Append theme to contents\n\t * @param {string} key\n\t * @param {object} theme \n\t * @param {Contents} contents\n\t * @private\n\t */\n\tappend(key, theme, contents) {\n\n\t\tif (theme.url) {\n\t\t\tcontents.appendStylesheet(key, theme.url);\n\t\t\ttheme.injected = true;\n\t\t}\n\t\tif (theme.rules) {\n\t\t\tcontents.appendStylesheet(key, theme.rules);\n\t\t\ttheme.injected = true;\n\t\t}\n\t\tif (theme.injected) {\n\t\t\t/**\n\t\t\t * Emit of injected a stylesheet into contents\n\t\t\t * @event injected\n\t\t\t * @param {string} key Theme key\n\t\t\t * @param {object} theme Theme value\n\t\t\t * @param {Contents} contents\n\t\t\t * @memberof Themes\n\t\t\t */\n\t\t\tthis.emit(EVENTS.THEMES.INJECTED, key, theme, contents);\n\t\t}\n\t}\n\n\t/**\n\t * Remove theme from contents\n\t * @param {string} key \n\t * @param {object} theme \n\t * @param {Contents} contents \n\t * @private\n\t */\n\tremove(key, theme, contents) {\n\n\t\tif (contents.removeStylesheet(key)) {\n\t\t\ttheme.injected = false;\n\t\t\t/**\n\t\t\t * Emit of rejected a stylesheet into contents\n\t\t\t * @event rejected\n\t\t\t * @param {string} key Theme key\n\t\t\t * @param {object} theme Theme value\n\t\t\t * @param {Contents} contents\n\t\t\t * @memberof Themes\n\t\t\t */\n\t\t\tthis.emit(EVENTS.THEMES.REJECTED, key, theme, contents);\n\t\t}\n\t}\n\n\t/**\n\t * Clear all themes\n\t */\n\tclear() {\n\n\t\tthis.select(null);\n\t\tsuper.clear();\n\t}\n\n\t/**\n\t * Inject all themes into contents\n\t * @param {Contents} contents\n\t * @private\n\t */\n\tinject(contents) {\n\n\t\tif (!this.current) return;\n\t\t\n\t\tthis.forEach((theme, key) => {\n\n\t\t\tif (this.current === key) {\n\t\t\t\tthis.append(key, theme, contents);\n\t\t\t}\n\t\t});\n\n\t\tcontents.appendClass(this.current);\n\t}\n\n\t/**\n\t * Update all themes into contents\n\t * @param {Contents} contents\n\t * @private\n\t */\n\tupdate(contents) {\n\n\t\tconst rules = this.rules;\n\n\t\tfor (const rule in rules) {\n\t\t\tif (rules.hasOwnProperty(rule)) {\n\t\t\t\tcontents.css(rule,\n\t\t\t\t\trules[rule].value,\n\t\t\t\t\trules[rule].priority\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Append rule\n\t * @param {string} name\n\t * @param {string} value\n\t * @param {boolean} [priority=false]\n\t */\n\tappendRule(name, value, priority = false) {\n\n\t\tconst rule = {\n\t\t\tvalue: value,\n\t\t\tpriority: priority\n\t\t};\n\t\tconst contents = this.rendition.getContents();\n\t\tcontents.forEach((content) => {\n\t\t\tif (content) {\n\t\t\t\tcontent.css(name,\n\t\t\t\t\trule.value,\n\t\t\t\t\trule.priority\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tthis.rules[name] = rule;\n\t}\n\n\t/**\n\t * Remove rule\n\t * @param {string} name\n\t */\n\tremoveRule(name) {\n\n\t\tdelete this.rules[name];\n\t\tconst contents = this.rendition.getContents();\n\t\tcontents.forEach((content) => {\n\t\t\tif (content) {\n\t\t\t\tcontent.css(name);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Remove all rules\n\t */\n\tremoveRules() {\n\n\t\tObject.keys(this.rules).forEach((key) => {\n\t\t\tthis.removeRule(key);\n\t\t});\n\t}\n\n\t/**\n\t * Adjust the font size of a rendition\n\t * @param {string} size\n\t */\n\tfontSize(size) {\n\n\t\tthis.appendRule(\"font-size\", size);\n\t}\n\n\t/**\n\t * Adjust the font-family of a rendition\n\t * @param {string} f\n\t */\n\tfont(f) {\n\n\t\tthis.appendRule(\"font-family\", f, true);\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tthis.clear();\n\t\tthis.removeRules();\n\t\tthis.current = undefined;\n\t\tthis.rules = undefined;\n\t}\n}\n\nEventEmitter(Themes.prototype);\n\nexport default Themes;","/**\n * @module constants\n */\n\nexport const EPUBJS_VERSION = \"0.3\";\n\n// Dom events to listen for\nexport const DOM_EVENTS = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"mousemove\", \"click\", \"touchend\", \"touchstart\", \"touchmove\"];\n\nexport const EVENTS = {\n    BOOK: {\n        OPEN_FAILED: \"openFailed\"\n    },\n    CONTENTS: {\n        EXPAND: \"expand\",\n        RESIZED: \"resized\",\n        SELECTED: \"selected\",\n        SELECTED_RANGE: \"selectedRange\",\n        LINK_CLICKED: \"linkClicked\"\n    },\n    LOCATIONS: {\n        CHANGED: \"changed\"\n    },\n    MANAGERS: {\n        RESIZE: \"resize\",\n        RESIZED: \"resized\",\n        ORIENTATION_CHANGE: \"orientationchange\",\n        ADDED: \"added\",\n        SCROLL: \"scroll\",\n        SCROLLED: \"scrolled\",\n        REMOVED: \"removed\",\n        RELOCATED: \"relocated\"\n    },\n    VIEWS: {\n        AXIS: \"axis\",\n        WRITING_MODE: \"writingMode\",\n        LOAD_ERROR: \"loaderror\",\n        RENDERED: \"rendered\",\n        RESIZED: \"resized\",\n        DISPLAYED: \"displayed\",\n        SHOWN: \"shown\",\n        HIDDEN: \"hidden\",\n        MARK_CLICKED: \"markClicked\"\n    },\n    RENDITION: {\n        STARTED: \"started\",\n        ATTACHED: \"attached\",\n        DISPLAYED: \"displayed\",\n        DISPLAY_ERROR: \"displayerror\",\n        RENDERED: \"rendered\",\n        REMOVED: \"removed\",\n        RESIZED: \"resized\",\n        ORIENTATION_CHANGE: \"orientationchange\",\n        RELOCATED: \"relocated\",\n        MARK_CLICKED: \"markClicked\",\n        SELECTED: \"selected\",\n        LAYOUT: \"layout\"\n    },\n    LAYOUT: {\n        UPDATED: \"updated\"\n    },\n    ANNOTATION: {\n        ATTACH: \"attach\",\n        DETACH: \"detach\"\n    },\n    THEMES: {\n        SELECTED: \"selected\",\n        INJECTED: \"injected\",\n        REJECTED: \"rejected\"\n    },\n    VIEWPORT: {\n        RESIZED: \"resized\",\n        ORIENTATION_CHANGE: \"orientationchange\"\n    }\n}","/**\n * @module core\n */\n\n/**\n * Generates a UUID\n * @link https://stackoverflow.com/questions/105034/how-do-i-create-a-guid-uuid\n * @returns {string} uuid\n */\nexport const uuid = () => {\n\n\tlet d = new Date().getTime();\n\tconst uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n\t\tconst r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c == \"x\" ? r : (r & 0x7 | 0x8)).toString(16);\n\t});\n\treturn uuid;\n}\n\n/**\n * Gets the height of a document\n * @returns {number} height\n */\nexport const documentHeight = () => {\n\n\treturn Math.max(\n\t\tdocument.documentElement.clientHeight,\n\t\tdocument.body.scrollHeight,\n\t\tdocument.documentElement.scrollHeight,\n\t\tdocument.body.offsetHeight,\n\t\tdocument.documentElement.offsetHeight\n\t);\n}\n\n/**\n * Checks if a node is an element\n * @param {object} obj\n * @returns {boolean}\n */\nexport const isElement = (obj) => {\n\n\treturn !!(obj && obj.nodeType == Node.ELEMENT_NODE);\n}\n\n/**\n * isNumber\n * @param {any} n\n * @returns {boolean}\n */\nexport const isNumber = (n) => {\n\n\treturn !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * isFloat\n * @param {any} n\n * @returns {boolean}\n */\nexport const isFloat = (n) => {\n\n\tconst f = parseFloat(n);\n\n\tif (isNumber(n) === false) {\n\t\treturn false;\n\t}\n\n\tif (typeof n === \"string\" && n.indexOf(\".\") > -1) {\n\t\treturn true;\n\t}\n\n\treturn Math.floor(f) !== f;\n}\n\n/**\n * Get a prefixed css property\n * @param {string} unprefixed\n * @returns {string}\n */\nexport const prefixed = (unprefixed) => {\n\n\tconst vendors = [\"Webkit\", \"webkit\", \"Moz\", \"O\", \"ms\"];\n\tconst prefixes = [\"-webkit-\", \"-webkit-\", \"-moz-\", \"-o-\", \"-ms-\"];\n\tconst lower = unprefixed.toLowerCase();\n\tconst length = vendors.length;\n\n\tif (typeof (document) === \"undefined\" || typeof (document.body.style[lower]) !== \"undefined\") {\n\t\treturn unprefixed;\n\t}\n\n\tfor (let i = 0; i < length; i++) {\n\t\tif (typeof (document.body.style[prefixes[i] + lower]) !== \"undefined\") {\n\t\t\treturn prefixes[i] + lower;\n\t\t}\n\t}\n\n\treturn unprefixed;\n}\n\n/**\n * Apply defaults to an object\n * @param {object} obj\n * @returns {object}\n */\nexport const defaults = (obj, ...args) => {\n\n\tfor (let i = 1, length = args.length; i < length; i++) {\n\t\tconst source = args[i];\n\t\tfor (const prop in source) {\n\t\t\tif (obj[prop] === void 0) obj[prop] = source[prop];\n\t\t}\n\t}\n\treturn obj;\n}\n\n/**\n * Extend properties of an object\n * @param {object} target\n * @returns {object}\n */\nexport const extend = (target, ...args) => {\n\n\targs.forEach((source) => {\n\t\tif (!source) return;\n\t\tObject.getOwnPropertyNames(source).forEach((prop) => {\n\t\t\tObject.defineProperty(\n\t\t\t\ttarget,\n\t\t\t\tprop,\n\t\t\t\tObject.getOwnPropertyDescriptor(source, prop)\n\t\t\t);\n\t\t});\n\t});\n\treturn target;\n}\n\n/**\n * Finds where something would fit into a sorted array\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [start]\n * @param {function} [end]\n * @returns {number} location (in array)\n */\nexport const locationOf = (item, array, compareFunction, start, end) => {\n\n\tconst _start = start || 0;\n\tconst _end = end || array.length;\n\tconst pivot = parseInt(_start + (_end - _start) / 2);\n\n\tif (!compareFunction) {\n\t\tcompareFunction = (a, b) => {\n\t\t\tif (a > b) return 1;\n\t\t\tif (a < b) return -1;\n\t\t\tif (a == b) return 0;\n\t\t};\n\t}\n\tif (_end - _start <= 0) {\n\t\treturn pivot;\n\t}\n\n\tconst compared = compareFunction(array[pivot], item);\n\n\tif (_end - _start === 1) {\n\t\treturn compared >= 0 ? pivot : pivot + 1;\n\t}\n\tif (compared === 0) {\n\t\treturn pivot;\n\t}\n\tif (compared === -1) {\n\t\treturn locationOf(item, array, compareFunction, pivot, _end);\n\t} else {\n\t\treturn locationOf(item, array, compareFunction, _start, pivot);\n\t}\n}\n\n/**\n * Fast quicksort insert for sorted array -- based on:\n * @link https://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @returns {number} location (in array)\n */\nexport const insert = (item, array, compareFunction) => {\n\n\tconst location = locationOf(item, array, compareFunction);\n\tarray.splice(location, 0, item);\n\n\treturn location;\n}\n\n/**\n * Finds index of something in a sorted array\n * Returns -1 if not found\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [start]\n * @param {function} [end]\n * @returns {number} index (in array) or -1\n */\nexport const indexOfSorted = (item, array, compareFunction, start, end) => {\n\n\tconst _start = start || 0;\n\tconst _end = end || array.length;\n\tconst pivot = parseInt(_start + (_end - _start) / 2);\n\n\tif (!compareFunction) {\n\t\tcompareFunction = (a, b) => {\n\t\t\tif (a > b) return 1;\n\t\t\tif (a < b) return -1;\n\t\t\tif (a == b) return 0;\n\t\t};\n\t}\n\tif (_end - _start <= 0) {\n\t\treturn -1; // Not found\n\t}\n\n\tconst compared = compareFunction(array[pivot], item);\n\n\tif (_end - _start === 1) {\n\t\treturn compared === 0 ? pivot : -1;\n\t}\n\tif (compared === 0) {\n\t\treturn pivot; // Found\n\t}\n\tif (compared === -1) {\n\t\treturn indexOfSorted(item, array, compareFunction, pivot, _end);\n\t} else {\n\t\treturn indexOfSorted(item, array, compareFunction, _start, pivot);\n\t}\n}\n\n/**\n * Find the bounds of an element\n * taking padding and margin into account\n * @param {Element} el\n * @returns {{ height: number, width: number }}\n */\nexport const bounds = (el) => {\n\n\tconst style = window.getComputedStyle(el);\n\tconst widthProps = [\n\t\t\"width\",\n\t\t\"paddingRight\",\n\t\t\"paddingLeft\",\n\t\t\"marginRight\",\n\t\t\"marginLeft\",\n\t\t\"borderRightWidth\",\n\t\t\"borderLeftWidth\"\n\t];\n\tconst heightProps = [\n\t\t\"height\",\n\t\t\"paddingTop\",\n\t\t\"paddingBottom\",\n\t\t\"marginTop\",\n\t\t\"marginBottom\",\n\t\t\"borderTopWidth\",\n\t\t\"borderBottomWidth\"\n\t];\n\tconst ret = {\n\t\theight: 0,\n\t\twidth: 0\n\t};\n\n\twidthProps.forEach((prop) => {\n\t\tret.width += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach((prop) => {\n\t\tret.height += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn ret;\n}\n\n/**\n * Find the bounds of an element\n * taking padding, margin and borders into account\n * @param {Element} el\n * @returns {{ height: number, width: number }}\n */\nexport const borders = (el) => {\n\n\tconst style = window.getComputedStyle(el);\n\tconst widthProps = [\n\t\t\"paddingRight\",\n\t\t\"paddingLeft\",\n\t\t\"marginRight\",\n\t\t\"marginLeft\",\n\t\t\"borderRightWidth\",\n\t\t\"borderLeftWidth\"\n\t];\n\tconst heightProps = [\n\t\t\"paddingTop\",\n\t\t\"paddingBottom\",\n\t\t\"marginTop\",\n\t\t\"marginBottom\",\n\t\t\"borderTopWidth\",\n\t\t\"borderBottomWidth\"\n\t];\n\tconst ret = {\n\t\theight: 0,\n\t\twidth: 0\n\t};\n\n\twidthProps.forEach((prop) => {\n\t\tret.width += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach((prop) => {\n\t\tret.height += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn ret;\n}\n\n/**\n * Find the bounds of any node\n * allows for getting bounds of text nodes by wrapping them in a range\n * @param {Node} node\n * @returns {DOMRect}\n */\nexport const nodeBounds = (node) => {\n\n\tlet rect;\n\tconst doc = node.ownerDocument;\n\tif (node.nodeType == Node.TEXT_NODE) {\n\t\tconst range = doc.createRange();\n\t\trange.selectNodeContents(node);\n\t\trect = range.getBoundingClientRect();\n\t} else {\n\t\trect = node.getBoundingClientRect();\n\t}\n\treturn rect;\n}\n\n/**\n * Find the equivalent of getBoundingClientRect of a browser window\n * @returns {{ width: number, height: number, top: number, left: number, right: number, bottom: number }}\n */\nexport const windowBounds = () => {\n\n\tconst width = window.innerWidth;\n\tconst height = window.innerHeight;\n\n\treturn {\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: width,\n\t\tbottom: height,\n\t\twidth: width,\n\t\theight: height\n\t};\n}\n\n/**\n * Gets the index of a node in its parent\n * @param {Node} node\n * @param {string} typeId\n * @return {number} index\n */\nexport const indexOfNode = (node, typeId) => {\n\n\tconst parent = node.parentNode;\n\tconst children = parent.childNodes;\n\tlet index = -1;\n\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst sib = children[i];\n\t\tif (sib.nodeType === typeId) {\n\t\t\tindex++;\n\t\t}\n\t\tif (sib == node) break;\n\t}\n\n\treturn index;\n}\n\n/**\n * Gets the index of a text node in its parent\n * @param {Node} textNode\n * @returns {number} index\n */\nexport const indexOfTextNode = (textNode) => {\n\n\treturn indexOfNode(textNode, Node.TEXT_NODE);\n}\n\n/**\n * Gets the index of an element node in its parent\n * @param {Element} elementNode\n * @returns {number} index\n */\nexport const indexOfElementNode = (elementNode) => {\n\n\treturn indexOfNode(elementNode, Node.ELEMENT_NODE);\n}\n\n/**\n * Check if extension is xml\n * @param {string} ext\n * @returns {boolean}\n */\nexport const isXml = (ext) => {\n\n\treturn [\"xml\", \"opf\", \"ncx\"].indexOf(ext) > -1;\n}\n\n/**\n * Create a new blob\n * @param {any} content\n * @param {string} mime\n * @returns {Blob}\n */\nexport const createBlob = (content, mime) => {\n\n\treturn new Blob([content], { type: mime });\n}\n\n/**\n * Create a new blob url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n */\nexport const createBlobUrl = (content, mime) => {\n\n\tconst blob = createBlob(content, mime);\n\treturn URL.createObjectURL(blob);\n}\n\n/**\n * Remove a blob url\n * @param {string} url\n */\nexport const revokeBlobUrl = (url) => {\n\n\treturn URL.revokeObjectURL(url);\n}\n\n/**\n * Create a new base64 encoded url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n */\nexport const createBase64Url = (content, mime) => {\n\n\tif (typeof (content) !== \"string\") {\n\t\t// Only handles strings\n\t\treturn;\n\t}\n\n\tconst data = btoa(content);\n\tconst datauri = \"data:\" + mime + \";base64,\" + data;\n\n\treturn datauri;\n}\n\n/**\n * Get type of an object\n * @param {object} obj\n * @returns {string} type\n */\nexport const type = (obj) => {\n\n\treturn Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * Parse xml (or html) markup\n * @param {string} markup\n * @param {string} mime\n * @returns {Document} document\n */\nexport const parse = (markup, mime) => {\n\n\t// Remove byte order mark before parsing\n\t// https://www.w3.org/International/questions/qa-byte-order-mark\n\tif (markup.charCodeAt(0) === 0xFEFF) {\n\t\tmarkup = markup.slice(1);\n\t}\n\n\tconst parser = new DOMParser();\n\treturn parser.parseFromString(markup, mime);\n}\n\n/**\n * querySelector polyfill\n * @param {Element} el\n * @param {string} sel selector string\n * @returns {Element} element\n */\nexport const qs = (el, sel) => {\n\n\tif (!el) {\n\t\tthrow new Error(\"No Element Provided\");\n\t}\n\n\tif (typeof el.querySelector !== \"undefined\") {\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\tconst elements = el.getElementsByTagName(sel);\n\t\tif (elements.length) {\n\t\t\treturn elements[0];\n\t\t}\n\t}\n}\n\n/**\n * querySelectorAll polyfill\n * @param {Element} el\n * @param {string} sel selector string\n * @returns {Element[]} elements\n */\nexport const qsa = (el, sel) => {\n\n\tif (typeof el.querySelector !== \"undefined\") {\n\t\treturn el.querySelectorAll(sel);\n\t} else {\n\t\treturn el.getElementsByTagName(sel);\n\t}\n}\n\n/**\n * querySelector by property\n * @param {Element} el\n * @param {string} sel selector string\n * @param {object[]} props\n * @returns {Element[]} elements\n */\nexport const qsp = (el, sel, props) => {\n\n\tif (typeof el.querySelector !== \"undefined\") {\n\t\tsel += \"[\";\n\t\tfor (const prop in props) {\n\t\t\tsel += prop + \"~='\" + props[prop] + \"'\";\n\t\t}\n\t\tsel += \"]\";\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\tconst q = el.getElementsByTagName(sel);\n\t\tconst filtered = Array.prototype.slice.call(q, 0).filter((el) => {\n\t\t\tfor (const prop in props) {\n\t\t\t\tif (el.getAttribute(prop) === props[prop]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tif (filtered) {\n\t\t\treturn filtered[0];\n\t\t}\n\t}\n}\n\n/**\n * Sprint through all text nodes in a document\n * @param {Element} root element to start with\n * @param {function} func function to run on each element\n */\nexport const sprint = (root, func) => {\n\n\tconst doc = root.ownerDocument || root;\n\tif (typeof (doc.createTreeWalker) !== \"undefined\") {\n\t\ttreeWalker(root, func, NodeFilter.SHOW_TEXT);\n\t} else {\n\t\twalk(root, (node) => {\n\t\t\tif (node && node.nodeType === Node.TEXT_NODE) {\n\t\t\t\tfunc(node);\n\t\t\t}\n\t\t}, true);\n\t}\n}\n\n/**\n * Create a treeWalker\n * @param {Element} root element to start with\n * @param {function} func function to run on each element\n * @param {function|object} filter function or object to filter with\n */\nexport const treeWalker = (root, func, filter) => {\n\n\tconst treeWalker = document.createTreeWalker(root, filter, null, false);\n\tlet node;\n\twhile (node = treeWalker.nextNode()) {\n\t\tfunc(node);\n\t}\n}\n\n/**\n * @param {Node} node\n * @param {method} callback false for continue,true for break inside callback\n * @returns {boolean}\n */\nexport const walk = (node, callback) => {\n\n\tif (callback(node)) {\n\t\treturn true;\n\t}\n\tnode = node.firstChild;\n\tif (node) {\n\t\tdo {\n\t\t\tlet walked = walk(node, callback); // recursive call\n\t\t\tif (walked) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.nextSibling;\n\t\t} while (node);\n\t}\n\treturn false;\n}\n\n/**\n * Convert a blob to a base64 encoded string\n * @param {Blog} blob\n * @returns {Promise}\n */\nexport const blob2base64 = (blob) => {\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(blob);\n\t\treader.onloadend = () => {\n\t\t\tresolve(reader.result);\n\t\t};\n\t});\n}\n\n/**\n * querySelector with filter by epub type\n * @param {Element} html\n * @param {string} element element type to find\n * @param {string} type epub type to find\n * @returns {Element[]} elements\n */\nexport const querySelectorByType = (html, element, type) => {\n\n\tlet query;\n\tif (typeof html.querySelector !== \"undefined\") {\n\t\tquery = html.querySelector(`${element}[*|type=\"${type}\"]`);\n\t}\n\t// Handle IE not supporting namespaced epub:type in querySelector\n\tif (!query || query.length === 0) {\n\t\tquery = qsa(html, element);\n\t\tfor (let i = 0; i < query.length; i++) {\n\t\t\tif (query[i].getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") === type ||\n\t\t\t\tquery[i].getAttribute(\"epub:type\") === type) {\n\t\t\t\treturn query[i];\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn query;\n\t}\n}\n\n/**\n * Find direct descendents of an element\n * @param {Element} el\n * @returns {Element[]} children\n */\nexport const findChildren = (el) => {\n\n\tconst result = [];\n\tconst childNodes = el.childNodes;\n\tfor (let i = 0; i < childNodes.length; i++) {\n\t\tconst node = childNodes[i];\n\t\tif (node.nodeType === Node.ELEMENT_NODE) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Find all parents (ancestors) of an element\n * @param {Node} node\n * @returns {Node[]} parents\n */\nexport const parents = (node) => {\n\n\tconst nodes = [node];\n\tfor (; node; node = node.parentNode) {\n\t\tnodes.unshift(node);\n\t}\n\treturn nodes\n}\n\n/**\n * Find all direct descendents of a specific type\n * @param {Element} el\n * @param {string} nodeName\n * @param {boolean} [single]\n * @returns {Element[]} children\n */\nexport const filterChildren = (el, nodeName, single) => {\n\n\tconst result = [];\n\tconst childNodes = el.childNodes;\n\tfor (let i = 0; i < childNodes.length; i++) {\n\t\tconst node = childNodes[i];\n\t\tif (node.nodeType === Node.ELEMENT_NODE &&\n\t\t\tnode.nodeName.toLowerCase() === nodeName) {\n\t\t\tif (single) {\n\t\t\t\treturn node;\n\t\t\t} else {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t}\n\t}\n\tif (!single) {\n\t\treturn result;\n\t}\n}\n\n/**\n * Filter all parents (ancestors) with tag name\n * @param {Node} node\n * @param {string} tagname\n * @returns {Node[]} parents\n */\nexport const getParentByTagName = (node, tagname) => {\n\n\tif (node === null || tagname === \"\") return;\n\tlet parent = node.parentNode;\n\twhile (parent.nodeType === Node.ELEMENT_NODE) {\n\t\tif (parent.tagName.toLowerCase() === tagname) {\n\t\t\treturn parent;\n\t\t}\n\t\tparent = parent.parentNode;\n\t}\n}","import { uuid } from \"./core\";\n\n/**\n * Creates a new pending promise and provides methods to resolve or reject it.\n */\nclass Defer {\n    constructor() {\n        /**\n         * @member {string} id\n         * @memberof Defer\n         * @readonly\n         */\n        this.id = uuid();\n        /**\n         * A method to resolve the associated Promise with the value passed.\n         * If the promise is already settled it does nothing.\n         * @member {method} resolve\n         * @param {anything} value : This value is used to resolve the promise\n         * If the value is a Promise then the associated promise assumes the state\n         * of Promise passed as value.\n         * @memberof Defer\n         * @readonly\n         */\n        this.resolve = null;\n        /**\n         * A method to reject the associated Promise with the value passed.\n         * If the promise is already settled it does nothing.\n         * @member {method} reject\n         * @param {anything} reason: The reason for the rejection of the Promise.\n         * Generally its an Error object. If however a Promise is passed, then the Promise\n         * itself will be the reason for rejection no matter the state of the Promise.\n         * @memberof Defer\n         * @readonly\n         */\n        this.reject = null;\n        /**\n         * A newly created Pomise object.\n         * Initially in pending state.\n         * @member {Promise} promise\n         * @memberof Defer\n         * @readonly\n         */\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n\nexport default Defer;","/**\n * Hooks allow for injecting functions that must all complete in order before finishing\n * They will execute in parallel but all must finish before continuing\n * Functions may return a promise if they are async.\n */\nclass Hook {\n\t/**\n\t * Constructor\n\t * @param {any} context scope of this\n\t * @example this.content = new Hook(this);\n\t */\n\tconstructor(context) {\n\n\t\tthis.context = context || this;\n\t\tthis.tasks = [];\n\t}\n\n\t/**\n\t * Adds a function to be run before a hook completes\n\t * @example this.content.register(() => {...});\n\t */\n\tregister() {\n\n\t\tfor (let i = 0; i < arguments.length; ++i) {\n\t\t\tif (typeof arguments[i] === \"function\") {\n\t\t\t\tthis.tasks.push(arguments[i]);\n\t\t\t} else if (arguments[i] instanceof Array) {\n\t\t\t\t// unpack array\n\t\t\t\tthis.register(arguments[i]); // recursive call\n\t\t\t} else {\n\t\t\t\tthrow new TypeError(\"Invalid argument type\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes a function\n\t * @example this.content.deregister(() => {...});\n\t */\n\tderegister(func) {\n\n\t\tfor (let i = 0; i < this.tasks.length; i++) {\n\t\t\tif (this.tasks[i] === func) {\n\t\t\t\tthis.tasks.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Triggers a hook to run all functions\n\t * @example this.content.trigger(args).then(() => {...});\n\t * @returns {Promise[]}\n\t */\n\ttrigger() {\n\n\t\tconst args = arguments;\n\t\tconst context = this.context;\n\t\tconst promises = [];\n\t\tlet executing;\n\n\t\tthis.tasks.forEach((task) => {\n\t\t\ttry {\n\t\t\t\texecuting = task.apply(context, args);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\n\t\t\tif (executing && typeof executing[\"then\"] === \"function\") {\n\t\t\t\t// Task is a function that returns a promise\n\t\t\t\tpromises.push(executing);\n\t\t\t}\n\t\t});\n\n\t\treturn Promise.all(promises);\n\t}\n\n\t/**\n\t * list\n\t * @returns {Array}\n\t */\n\tlist() {\n\n\t\treturn this.tasks;\n\t}\n\n\t/**\n\t * clear\n\t */\n\tclear() {\n\n\t\tthis.tasks = [];\n\t}\n}\n\nexport default Hook;","/**\n * @module mime\n */\n\n/**\n * From Zip.js, by Gildas Lormeau edited down\n * @private\n */\nconst table = {\n\t\"application\": {\n\t\t\"ecmascript\": [\"es\", \"ecma\"],\n\t\t\"javascript\": \"js\",\n\t\t\"ogg\": \"ogx\",\n\t\t\"pdf\": \"pdf\",\n\t\t\"postscript\": [\"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\"],\n\t\t\"rdf+xml\": \"rdf\",\n\t\t\"smil\": [\"smi\", \"smil\"],\n\t\t\"xhtml+xml\": [\"xhtml\", \"xht\"],\n\t\t\"xml\": [\"xml\", \"xsl\", \"xsd\", \"opf\", \"ncx\"],\n\t\t\"zip\": \"zip\",\n\t\t\"x-httpd-eruby\": \"rhtml\",\n\t\t\"x-latex\": \"latex\",\n\t\t\"x-maker\": [\"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\"],\n\t\t\"x-object\": \"o\",\n\t\t\"x-shockwave-flash\": [\"swf\", \"swfl\"],\n\t\t\"x-silverlight\": \"scr\",\n\t\t\"epub+zip\": \"epub\",\n\t\t\"font-tdpfr\": \"pfr\",\n\t\t\"inkml+xml\": [\"ink\", \"inkml\"],\n\t\t\"json\": \"json\",\n\t\t\"jsonml+json\": \"jsonml\",\n\t\t\"mathml+xml\": \"mathml\",\n\t\t\"metalink+xml\": \"metalink\",\n\t\t\"mp4\": \"mp4s\",\n\t\t// \"oebps-package+xml\" : \"opf\",\n\t\t\"omdoc+xml\": \"omdoc\",\n\t\t\"oxps\": \"oxps\",\n\t\t\"vnd.amazon.ebook\": \"azw\",\n\t\t\"widget\": \"wgt\",\n\t\t// \"x-dtbncx+xml\" : \"ncx\",\n\t\t\"x-dtbook+xml\": \"dtb\",\n\t\t\"x-dtbresource+xml\": \"res\",\n\t\t\"x-font-bdf\": \"bdf\",\n\t\t\"x-font-ghostscript\": \"gsf\",\n\t\t\"x-font-linux-psf\": \"psf\",\n\t\t\"x-font-otf\": \"otf\",\n\t\t\"x-font-pcf\": \"pcf\",\n\t\t\"x-font-snf\": \"snf\",\n\t\t\"x-font-ttf\": [\"ttf\", \"ttc\"],\n\t\t\"x-font-type1\": [\"pfa\", \"pfb\", \"pfm\", \"afm\"],\n\t\t\"x-font-woff\": \"woff\",\n\t\t\"x-mobipocket-ebook\": [\"prc\", \"mobi\"],\n\t\t\"x-mspublisher\": \"pub\",\n\t\t\"x-nzb\": \"nzb\",\n\t\t\"x-tgif\": \"obj\",\n\t\t\"xaml+xml\": \"xaml\",\n\t\t\"xml-dtd\": \"dtd\",\n\t\t\"xproc+xml\": \"xpl\",\n\t\t\"xslt+xml\": \"xslt\",\n\t\t\"internet-property-stream\": \"acx\",\n\t\t\"x-compress\": \"z\",\n\t\t\"x-compressed\": \"tgz\",\n\t\t\"x-gzip\": \"gz\",\n\t},\n\t\"audio\": {\n\t\t\"flac\": \"flac\",\n\t\t\"midi\": [\"mid\", \"midi\", \"kar\", \"rmi\"],\n\t\t\"mpeg\": [\"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\"],\n\t\t\"mpegurl\": \"m3u\",\n\t\t\"ogg\": [\"oga\", \"ogg\", \"spx\"],\n\t\t\"x-aiff\": [\"aif\", \"aiff\", \"aifc\"],\n\t\t\"x-ms-wma\": \"wma\",\n\t\t\"x-wav\": \"wav\",\n\t\t\"adpcm\": \"adp\",\n\t\t\"mp4\": \"mp4a\",\n\t\t\"webm\": \"weba\",\n\t\t\"x-aac\": \"aac\",\n\t\t\"x-caf\": \"caf\",\n\t\t\"x-matroska\": \"mka\",\n\t\t\"x-pn-realaudio-plugin\": \"rmp\",\n\t\t\"xm\": \"xm\",\n\t\t\"mid\": [\"mid\", \"rmi\"]\n\t},\n\t\"image\": {\n\t\t\"gif\": \"gif\",\n\t\t\"ief\": \"ief\",\n\t\t\"jpeg\": [\"jpeg\", \"jpg\", \"jpe\"],\n\t\t\"pcx\": \"pcx\",\n\t\t\"png\": \"png\",\n\t\t\"svg+xml\": [\"svg\", \"svgz\"],\n\t\t\"tiff\": [\"tiff\", \"tif\"],\n\t\t\"x-icon\": \"ico\",\n\t\t\"bmp\": \"bmp\",\n\t\t\"webp\": \"webp\",\n\t\t\"x-pict\": [\"pic\", \"pct\"],\n\t\t\"x-tga\": \"tga\",\n\t\t\"cis-cod\": \"cod\"\n\t},\n\t\"text\": {\n\t\t\"cache-manifest\": [\"manifest\", \"appcache\"],\n\t\t\"css\": \"css\",\n\t\t\"csv\": \"csv\",\n\t\t\"html\": [\"html\", \"htm\", \"shtml\", \"stm\"],\n\t\t\"mathml\": \"mml\",\n\t\t\"plain\": [\"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\"],\n\t\t\"richtext\": \"rtx\",\n\t\t\"tab-separated-values\": \"tsv\",\n\t\t\"x-bibtex\": \"bib\"\n\t},\n\t\"video\": {\n\t\t\"mpeg\": [\"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\"],\n\t\t\"mp4\": [\"mp4\", \"mp4v\", \"mpg4\"],\n\t\t\"quicktime\": [\"qt\", \"mov\"],\n\t\t\"ogg\": \"ogv\",\n\t\t\"vnd.mpegurl\": [\"mxu\", \"m4u\"],\n\t\t\"x-flv\": \"flv\",\n\t\t\"x-la-asf\": [\"lsf\", \"lsx\"],\n\t\t\"x-mng\": \"mng\",\n\t\t\"x-ms-asf\": [\"asf\", \"asx\", \"asr\"],\n\t\t\"x-ms-wm\": \"wm\",\n\t\t\"x-ms-wmv\": \"wmv\",\n\t\t\"x-ms-wmx\": \"wmx\",\n\t\t\"x-ms-wvx\": \"wvx\",\n\t\t\"x-msvideo\": \"avi\",\n\t\t\"x-sgi-movie\": \"movie\",\n\t\t\"x-matroska\": [\"mpv\", \"mkv\", \"mk3d\", \"mks\"],\n\t\t\"3gpp2\": \"3g2\",\n\t\t\"h261\": \"h261\",\n\t\t\"h263\": \"h263\",\n\t\t\"h264\": \"h264\",\n\t\t\"jpeg\": \"jpgv\",\n\t\t\"jpm\": [\"jpm\", \"jpgm\"],\n\t\t\"mj2\": [\"mj2\", \"mjp2\"],\n\t\t\"vnd.ms-playready.media.pyv\": \"pyv\",\n\t\t\"vnd.uvvu.mp4\": [\"uvu\", \"uvvu\"],\n\t\t\"vnd.vivo\": \"viv\",\n\t\t\"webm\": \"webm\",\n\t\t\"x-f4v\": \"f4v\",\n\t\t\"x-m4v\": \"m4v\",\n\t\t\"x-ms-vob\": \"vob\",\n\t\t\"x-smv\": \"smv\"\n\t}\n};\n\nconst mimeTypes = (() => {\n\tconst types = {};\n\tfor (const type in table) {\n\t\tif (table.hasOwnProperty(type)) {\n\t\t\tfor (const subtype in table[type]) {\n\t\t\t\tif (table[type].hasOwnProperty(subtype)) {\n\t\t\t\t\tconst val = table[type][subtype];\n\t\t\t\t\tif (typeof val === \"string\") {\n\t\t\t\t\t\ttypes[val] = type + \"/\" + subtype;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0; i < val.length; i++) {\n\t\t\t\t\t\t\ttypes[val[i]] = type + \"/\" + subtype;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn types;\n})();\n\nconst defaultValue = \"text/plain\";\n\n/**\n * lookup\n * @param {string} filename \n * @returns {string}\n */\nconst lookup = (filename) => {\n\n\tlet value;\n\tif (filename) {\n\t\tconst type = filename.split(\".\").pop().toLowerCase();\n\t\tvalue = mimeTypes[type];\n\t}\n\treturn value || defaultValue;\n};\n\nexport default { lookup };","/**\n * Creates a Path object for parsing and manipulation of a path strings\n * @link https://nodejs.org/api/path.html\n */\nclass Path {\n\t/**\n\t * Constructor\n\t * @param {string} uri a url string (relative or absolute)\n\t */\n\tconstructor(uri) {\n\n\t\tif (uri.indexOf(\"://\") > -1) {\n\t\t\turi = new URL(uri).pathname;\n\t\t}\n\n\t\tconst parsed = this.parse(uri);\n\t\t/**\n\t\t * @member {string} directory\n\t\t * @memberof Path\n\t\t * @readonly\n\t\t */\n\t\tthis.directory = parsed.dir + \"/\";\n\t\t/**\n\t\t * @member {string} filename\n\t\t * @memberof Path\n\t\t * @readonly\n\t\t */\n\t\tthis.filename = parsed.base;\n\t\t/**\n\t\t * @member {string} extension\n\t\t * @memberof Path\n\t\t * @readonly\n\t\t */\n\t\tthis.extension = parsed.ext.slice(1);\n\t\t/**\n\t\t * @member {string} path\n\t\t * @memberof Path\n\t\t * @readonly\n\t\t */\n\t\tthis.path = uri;\n\t}\n\n\t/**\n\t * Parse the path\n\t * @link https://nodejs.org/api/path.html#path_path_parse_path\n\t * @param {string} path\n\t * @returns {object}\n\t */\n\tparse(path) {\n\n\t\tconst ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n\n\t\tif (path.length === 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tconst parts = this.splitPath(path);\n\t\tif (!parts || parts.length !== 4) {\n\t\t\tthrow new Error(`Invalid path: ${path}`);\n\t\t}\n\n\t\tret.root = parts[0];\n\n\t\tif (this.isDirectory(path)) {\n\t\t\tret.dir = parts[0] + parts[1] + parts[2];\n\t\t} else {\n\t\t\tret.dir = parts[0] + parts[1].slice(0, -1);\n\t\t\tret.base = parts[2];\n\t\t\tret.ext = parts[3];\n\t\t\tret.name = parts[2].slice(0, parts[2].length - parts[3].length);\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * dirname\n\t * @link https://nodejs.org/api/path.html#pathdirnamepath\n\t * @param {string} path \n\t * @returns {string}\n\t */\n\tdirname(path) {\n\n\t\tconst result = this.splitPath(path);\n\t\tconst root = result[0];\n\t\tconst dir = result[1];\n\n\t\tif (!root && !dir) {\n\t\t\treturn \".\";\n\t\t}\n\n\t\treturn root + dir;\n\t}\n\n\t/**\n\t * isAbsolute\n\t * @link https://nodejs.org/api/path.html#pathisabsolutepath\n\t * @param {string} path\n\t * @returns {boolean}\n\t */\n\tisAbsolute(path) {\n\n\t\treturn path.charAt(0) === \"/\";\n\t}\n\n\t/**\n\t * Check if path ends with a directory\n\t * @param {string} path\n\t * @returns {boolean}\n\t */\n\tisDirectory(path) {\n\n\t\treturn path.charAt(path.length - 1) === \"/\";\n\t}\n\n\t/**\n\t * Resolve path\n\t * @link https://nodejs.org/api/path.html#pathresolvepaths\n\t * @returns {string} resolved\n\t */\n\tresolve() {\n\n\t\tlet resolvedPath = \"\";\n\t\tlet resolvedAbsolute = false;\n\n\t\tfor (let i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n\n\t\t\tlet path;\n\t\t\tif (i >= 0) {\n\t\t\t\tpath = arguments[i];\n\t\t\t} else {\n\t\t\t\tpath = process ? process.cwd() : \"/\";\n\t\t\t}\n\n\t\t\tif (path.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresolvedPath = path + \"/\" + resolvedPath;\n\t\t\tresolvedAbsolute = this.isAbsolute(path);\n\t\t}\n\n\t\tresolvedPath = this.normalizeArray(\n\t\t\tresolvedPath.split(\"/\"),\n\t\t\t!resolvedAbsolute\n\t\t).join(\"/\");\n\t\treturn ((resolvedAbsolute ? \"/\" : \"\") + resolvedPath) || \".\";\n\t}\n\n\t/**\n\t * Relative path resolve\n\t * @link https://nodejs.org/api/path.html#pathrelativefrom-to\n\t * @param {string} from\n\t * @param {string} to \n\t * @returns {string} relative path\n\t */\n\trelative(from, to) {\n\n\t\tif (from === to) return \"\";\n\n\t\tfrom = this.resolve(from);\n\t\tto = this.resolve(to);\n\n\t\tif (from === to) return \"\";\n\n\t\tconst fromParts = this.trimArray(from.split(\"/\"));\n\t\tconst toParts = this.trimArray(to.split(\"/\"));\n\n\t\tconst length = Math.min(fromParts.length, toParts.length);\n\t\tlet samePartsLength = length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tif (fromParts[i] !== toParts[i]) {\n\t\t\t\tsamePartsLength = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet outputParts = [];\n\t\tfor (let i = samePartsLength; i < fromParts.length; i++) {\n\t\t\toutputParts.push(\"..\");\n\t\t}\n\n\t\toutputParts = outputParts.concat(toParts.slice(samePartsLength));\n\t\treturn outputParts.join(\"/\");\n\t}\n\n\t/**\n\t * Normalize path\n\t * @link https://nodejs.org/api/path.html#pathnormalizepath\n\t * @param {string} path \n\t * @returns {string}\n\t */\n\tnormalize(path) {\n\n\t\tconst isAbsolute = this.isAbsolute(path);\n\t\tconst trailingSlash = path && path[path.length - 1] === \"/\";\n\n\t\tpath = this.normalizeArray(path.split(\"/\"), !isAbsolute).join(\"/\");\n\n\t\tif (!path && !isAbsolute) {\n\t\t\tpath = \".\";\n\t\t}\n\t\tif (path && trailingSlash) {\n\t\t\tpath += \"/\";\n\t\t}\n\n\t\treturn (isAbsolute ? \"/\" : \"\") + path;\n\t}\n\n\t/**\n\t * Return the path string\n\t * @returns {string} path\n\t */\n\ttoString() {\n\n\t\treturn this.path;\n\t}\n\n\tnormalizeArray(parts, allowAboveRoot) {\n\n\t\tconst res = [];\n\t\tfor (let i = 0; i < parts.length; i++) {\n\t\t\tconst p = parts[i];\n\n\t\t\tif (!p || p === \".\") {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (p === \"..\") {\n\t\t\t\tif (res.length && res[res.length - 1] !== \"..\") {\n\t\t\t\t\tres.pop();\n\t\t\t\t} else if (allowAboveRoot) {\n\t\t\t\t\tres.push(\"..\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tres.push(p);\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tsplitPath(filename) {\n\n\t\tconst pattern = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n\t\treturn pattern.exec(filename).slice(1);\n\t}\n\n\ttrimArray(arr) {\n\n\t\tconst lastIndex = arr.length - 1;\n\n\t\tlet start = 0;\n\t\tfor (; start <= lastIndex; start++) {\n\t\t\tif (arr[start]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet end = lastIndex;\n\t\tfor (; end >= 0; end--) {\n\t\t\tif (arr[end]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (start === 0 && end === lastIndex) {\n\t\t\treturn arr;\n\t\t}\n\n\t\tif (start > end) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn arr.slice(start, end + 1);\n\t}\n}\n\nexport default Path;","import Defer from \"./defer\";\n\n/**\n * Queue for handling tasks one at a time\n */\nclass Queue {\n    /**\n     * Constructor\n     * @param {object} context what this will resolve to in the tasks\n     */\n    constructor(context) {\n\n        this._q = [];\n        this.context = context;\n        this.running = false;\n        this.paused = false;\n    }\n\n    /**\n     * Add an item to the queue\n     * @param {any} task\n     * @param {any[]} [args]\n     * @return {Promise<any>}\n     */\n    enqueue(task, ...args) {\n\n        let queued;\n        if (typeof task === \"function\") {\n            const deferred = new Defer();\n            const promise = deferred.promise;\n            queued = {\n                task,\n                args,\n                deferred,\n                promise\n            };\n        } else {\n            // Task is a promise\n            queued = {\n                promise: task\n            };\n        }\n\n        this._q.push(queued);\n\n        // Wait to start queue flush\n        if (this.paused === false && !this.running) {\n            this.run();\n        }\n\n        return queued.promise;\n    }\n\n    /**\n     * Run one item\n     * @return {Promise<any>}\n     */\n    dequeue() {\n\n        let inwait;\n        if (this._q.length && !this.paused) {\n            inwait = this._q.shift();\n            const task = inwait.task;\n            if (task) {\n                const result = task.apply(this.context, inwait.args);\n                if (result && typeof result[\"then\"] === \"function\") {\n                    // Task is a function that returns a promise\n                    return result.then((val) => {\n                        inwait.deferred.resolve(val);\n                    }, (err) => {\n                        inwait.deferred.reject(err);\n                    });\n                } else {\n                    // Task resolves immediately\n                    inwait.deferred.resolve(result);\n                    return inwait.promise;\n                }\n            } else if (inwait.promise) {\n                // Task is a promise\n                return inwait.promise;\n            }\n        } else {\n            inwait = new Defer();\n            inwait.deferred.resolve();\n            return inwait.promise;\n        }\n    }\n\n    /**\n     * Run All Immediately\n     */\n    dump() {\n\n        while (this._q.length) {\n            this.dequeue();\n        }\n    }\n\n    /**\n     * Run all tasks sequentially, at convince\n     * @return {Promise<any>}\n     */\n    run() {\n\n        if (this.running === false) {\n            this.running = true;\n            this.deferred = new Defer();\n        }\n\n        requestAnimationFrame(() => {\n\n            if (this._q.length) {\n                this.dequeue().then(() => {\n                    this.run();\n                });\n            } else {\n                this.deferred.resolve();\n                this.running = false;\n            }\n        });\n\n        if (this.paused) {\n            this.paused = false;\n        }\n\n        return this.deferred.promise;\n    }\n\n    /**\n     * Clear all items in wait\n     */\n    clear() {\n\n        this._q = [];\n    }\n\n    /**\n     * Get the number of tasks in the queue\n     * @return {number} tasks\n     */\n    length() {\n\n        return this._q.length;\n    }\n\n    /**\n     * Pause a running queue\n     */\n    pause() {\n\n        this.paused = true;\n    }\n\n    /**\n     * End the queue\n     */\n    stop() {\n\n        this._q = [];\n        this.running = false;\n        this.paused = true;\n    }\n}\n\nexport default Queue;","import { parents } from \"./core\";\n\n/**\n * Lightweight Polyfill for DOM Range\n */\nclass RangeObject {\n\n    constructor() {\n\n        this.collapsed = false;\n        this.commonAncestorContainer = undefined;\n        this.endContainer = undefined;\n        this.endOffset = undefined;\n        this.startContainer = undefined;\n        this.startOffset = undefined;\n    }\n\n    /**\n     * Set start\n     * @param {Node} startNode \n     * @param {Node} startOffset \n     */\n    setStart(startNode, startOffset) {\n\n        this.startContainer = startNode;\n        this.startOffset = startOffset;\n\n        if (!this.endContainer) {\n            this.collapse(true);\n        } else {\n            this.commonAncestorContainer = this._commonAncestorContainer();\n        }\n\n        this._checkCollapsed();\n    }\n\n    /**\n     * Set end\n     * @param {Node} endNode \n     * @param {Node} endOffset \n     */\n    setEnd(endNode, endOffset) {\n\n        this.endContainer = endNode;\n        this.endOffset = endOffset;\n\n        if (!this.startContainer) {\n            this.collapse(false);\n        } else {\n            this.collapsed = false;\n            this.commonAncestorContainer = this._commonAncestorContainer();\n        }\n\n        this._checkCollapsed();\n    }\n\n    /**\n     * collapse\n     * @param {boolean} toStart \n     */\n    collapse(toStart) {\n\n        this.collapsed = true;\n\n        if (toStart) {\n            this.endContainer = this.startContainer;\n            this.endOffset = this.startOffset;\n            this.commonAncestorContainer = this.startContainer.parentNode;\n        } else {\n            this.startContainer = this.endContainer;\n            this.startOffset = this.endOffset;\n            this.commonAncestorContainer = this.endOffset.parentNode;\n        }\n    }\n\n    /**\n     * Select Node\n     * @param {Node} referenceNode \n     */\n    selectNode(referenceNode) {\n\n        const parent = referenceNode.parentNode;\n        const index = Array.prototype.indexOf.call(parent.childNodes, referenceNode);\n        this.setStart(parent, index);\n        this.setEnd(parent, index + 1);\n    }\n\n    /**\n     * Select Node Contents\n     * @param {Node} referenceNode \n     */\n    selectNodeContents(referenceNode) {\n\n        const endIndex = (referenceNode.nodeType === Node.TEXT_NODE)\n            ? referenceNode.textContent.length\n            : parent.childNodes.length;\n        this.setStart(referenceNode, 0);\n        this.setEnd(referenceNode, endIndex);\n    }\n\n    _commonAncestorContainer(startContainer, endContainer) {\n\n        const startParents = parents(startContainer || this.startContainer);\n        const endParents = parents(endContainer || this.endContainer);\n\n        if (startParents[0] != endParents[0]) return undefined;\n\n        for (let i = 0; i < startParents.length; i++) {\n            if (startParents[i] != endParents[i]) {\n                return startParents[i - 1];\n            }\n        }\n    }\n\n    _checkCollapsed() {\n\n        if (this.startContainer === this.endContainer &&\n            this.startOffset === this.endOffset) {\n            this.collapsed = true;\n        } else {\n            this.collapsed = false;\n        }\n    }\n\n    toString() {\n        // TODO: implement walking between start and end to find text\n    }\n}\n\nexport default RangeObject;","/**\n * @module replacements\n */\n\nimport { qs } from \"./core\";\n\n/**\n * replaceBase\n * @param {Document} doc \n * @param {Section} section \n */\nexport const replaceBase = (doc, section) => {\n\n\tif (!doc) return;\n\n\tlet head = qs(doc, \"head\");\n\tlet base = qs(head, \"base\");\n\n\tif (!base) {\n\t\tbase = doc.createElement(\"base\");\n\t\thead.insertBefore(base, head.firstChild);\n\t}\n\n\tlet url = section.url;\n\tconst absolute = (url.indexOf(\"://\") > -1);\n\n\tif (!absolute) {\n\t\tconst uri = new URL(url, doc.baseURI);\n\t\turl = uri.href;\n\t}\n\n\tbase.setAttribute(\"href\", url);\n}\n\n/**\n * replaceCanonical\n * @param {Document} doc \n * @param {Section} section \n */\nexport const replaceCanonical = (doc, section) => {\n\n\tif (!doc) return;\n\n\tlet url = section.canonical;\n\tlet head = qs(doc, \"head\");\n\tlet link = qs(head, \"link[rel='canonical']\");\n\n\tif (link) {\n\t\tlink.setAttribute(\"href\", url);\n\t} else {\n\t\tlink = doc.createElement(\"link\");\n\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\tlink.setAttribute(\"href\", url);\n\t\thead.appendChild(link);\n\t}\n}\n\n/**\n * replaceMeta\n * @param {Document} doc \n * @param {Section} section \n */\nexport const replaceMeta = (doc, section) => {\n\n\tif (!doc) return;\n\n\tlet head = qs(doc, \"head\");\n\tlet meta = qs(head, \"link[property='dc.identifier']\");\n\n\tif (meta) {\n\t\tmeta.setAttribute(\"content\", section.idref);\n\t} else {\n\t\tmeta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.identifier\");\n\t\tmeta.setAttribute(\"content\", section.idref);\n\t\thead.appendChild(meta);\n\t}\n}\n\n/**\n * replaceLinks\n * @param {Node} contents \n * @param {function} fn \n * @todo move me to Contents\n */\nexport const replaceLinks = (contents, fn) => {\n\n\tconst links = contents.querySelectorAll(\"a[href]\");\n\n\tif (!links.length) return;\n\n\tconst replaceLink = (link) => {\n\n\t\tconst href = link.getAttribute(\"href\");\n\n\t\tif (href.indexOf(\"mailto:\") === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (href.indexOf(\"://\") > -1) { // is absolute\n\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\t\t} else {\n\t\t\tlink.onclick = (e) => {\n\t\t\t\tfn(href);\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\t};\n\n\tfor (let i = 0; i < links.length; i++) {\n\t\treplaceLink(links[i]);\n\t}\n}\n\nconst relative = (p1, p2) => {\n\n\tconst arr = p1.split(\"/\");\n\tlet result = \"\";\n\tfor (let i = 1; i < arr.length; ++i) {\n\t\tresult += \"../\"\n\t}\n\treturn result + p2;\n};\n\n/**\n * substitute\n * @param {string} content \n * @param {string[]} urls \n * @param {string[]} replacements \n */\nexport const substitute = (content, section, urls, replacements) => {\n\n\turls.forEach((url, i) => {\n\t\tif (url && replacements[i]) {\n\t\t\t// Account for special characters in the file name.\n\t\t\t// See https://stackoverflow.com/a/6318729.\n\t\t\turl = relative(section.href, url);\n\t\t\turl = url.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n\t\t\tcontent = content.replace(new RegExp(url, \"g\"), replacements[i]);\n\t\t}\n\t});\n\treturn content;\n}","import Path from \"./path\";\nimport Defer from \"./defer\";\nimport { isXml, parse } from \"./core\";\n\n// TODO: fallback for url if window isn't defined\nconst SUPPORTS_URL = window && window.URL ? true : false;\nconst BLOB_RESPONSE = SUPPORTS_URL ? \"blob\" : \"arraybuffer\";\n\nconst read = (e, def) => {\n\n\tconst xhr = e.target;\n\n\tif (xhr.status === 403) {\n\t\tdef.reject({\n\t\t\tmessage: \"Forbidden\",\n\t\t\ttarget: xhr,\n\t\t\tstack: new Error().stack\n\t\t});\n\t}\n}\n\nconst load = (e, type, def) => {\n\n\tconst xhr = e.target;\n\n\tlet r;\n\tif (xhr.responseType === \"document\") {\n\t\tif (xhr.response === null &&\n\t\t\txhr.responseXML === null) {\n\t\t\tdef.reject({\n\t\t\t\tmessage: \"Empty Response\",\n\t\t\t\ttarget: xhr,\n\t\t\t\tstack: new Error().stack\n\t\t\t});\n\t\t} else if (xhr.responseXML) {\n\t\t\tr = xhr.responseXML;\n\t\t} else if (isXml(type)) {\n\t\t\tr = parse(xhr.response, \"text/xml\");\n\t\t} else if (type === \"xhtml\") {\n\t\t\tr = parse(xhr.response, \"application/xhtml+xml\");\n\t\t} else if (type === \"html\" || type === \"htm\") {\n\t\t\tr = parse(xhr.response, \"text/html\");\n\t\t}\n\t} else if (xhr.responseType === \"json\") {\n\t\tr = xhr.response;\n\t} else if (xhr.responseType === \"blob\") {\n\t\tif (SUPPORTS_URL) {\n\t\t\tr = xhr.response;\n\t\t} else {\n\t\t\t// Safari doesn't support responseType blob, \n\t\t\t// so create a blob from arraybuffer\n\t\t\tr = new Blob([xhr.response]);\n\t\t}\n\t} else {\n\t\tr = xhr.response;\n\t}\n\n\tdef.resolve(r);\n}\n\n/**\n * request\n * @param {string|ArrayBuffer} url \n * @param {string} [type] \n * @param {boolean} [withCredentials=false] \n * @param {object[]} [headers=[]] \n * @returns {Promise<any>}\n */\nconst request = (url, type, withCredentials = false, headers = []) => {\n\n\tconst def = new Defer();\n\tconst xhr = new XMLHttpRequest();\n\n\ttype = type || new Path(url).extension;\n\txhr.withCredentials = withCredentials;\n\n\tif (isXml(type)) {\n\t\txhr.responseType = \"document\";\n\t\txhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t} else if (type === \"xhtml\") {\n\t\txhr.responseType = \"document\";\n\t} else if (type === \"html\" || type === \"htm\") {\n\t\txhr.responseType = \"document\";\n\t} else if (type === \"binary\") {\n\t\txhr.responseType = \"arraybuffer\";\n\t} else if (type === \"blob\") {\n\t\txhr.responseType = BLOB_RESPONSE;\n\t} else if (type === \"json\") {\n\t\txhr.responseType = \"json\";\n\t}\n\n\txhr.onreadystatechange = (e) => read(e, def);\n\txhr.onload = (e) => load(e, type, def);\n\txhr.onerror = (e) => {\n\t\tdef.reject({\n\t\t\tmessage: \"Error\",\n\t\t\ttarget: e.target,\n\t\t\tstack: new Error().stack\n\t\t});\n\t};\n\txhr.open(\"GET\", url, true);\n\n\tfor (const header in headers) {\n\t\txhr.setRequestHeader(header, headers[header]);\n\t}\n\n\txhr.send();\n\n\treturn def.promise;\n}\n\nexport default request;","/**\n * createDefiner\n * @returns {Element}\n */\nexport const createDefiner = () => {\n\n\tconst definer = document.createElement(\"div\");\n\tdefiner.dir = \"rtl\";\n\n\tdefiner.style.position = \"fixed\";\n\tdefiner.style.width = \"1px\";\n\tdefiner.style.height = \"1px\";\n\tdefiner.style.top = \"0px\";\n\tdefiner.style.left = \"0px\";\n\tdefiner.style.overflow = \"hidden\";\n\n\tconst innerDiv = document.createElement(\"div\");\n\tinnerDiv.style.width = \"2px\";\n\n\tconst spanA = document.createElement(\"span\");\n\tspanA.style.width = \"1px\";\n\tspanA.style.display = \"inline-block\";\n\n\tconst spanB = document.createElement(\"span\");\n\tspanB.style.width = \"1px\";\n\tspanB.style.display = \"inline-block\";\n\n\tinnerDiv.appendChild(spanA);\n\tinnerDiv.appendChild(spanB);\n\tdefiner.appendChild(innerDiv);\n\n\treturn definer;\n}\n\n/**\n * Detect RTL scroll type\n * @link https://github.com/othree/jquery.rtl-scroll-type/blob/master/src/jquery.rtl-scroll.js\n * @returns {string} scroll type\n */\nconst scrollType = () => {\n\n\tlet type = \"reverse\";\n\tconst definer = createDefiner();\n\tdocument.body.appendChild(definer);\n\n\tif (definer.scrollLeft > 0) {\n\t\ttype = \"default\";\n\t} else {\n\t\tif (typeof Element !== \"undefined\" &&\n\t\t\tElement.prototype.scrollIntoView) {\n\t\t\tdefiner.children[0].children[1].scrollIntoView();\n\t\t\tif (definer.scrollLeft < 0) {\n\t\t\t\ttype = \"negative\";\n\t\t\t}\n\t\t} else {\n\t\t\tdefiner.scrollLeft = 1;\n\t\t\tif (definer.scrollLeft === 0) {\n\t\t\t\ttype = \"negative\";\n\t\t\t}\n\t\t}\n\t}\n\n\tdocument.body.removeChild(definer);\n\treturn type;\n}\n\nexport default scrollType;","import Path from \"./path\";\n\n/**\n * Creates a Url object for parsing and manipulation of a url string\n */\nclass Url {\n\t/**\n\t * Constructor\n\t * @param {string} url a url string (relative or absolute)\n\t * @param {string} [base] optional base for the url, default to window.location.href\n\t */\n\tconstructor(url, base) {\n\n\t\tthis.Url = undefined;\n\t\tthis.href = url;\n\t\tthis.protocol = \"\";\n\t\tthis.origin = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.search = \"\";\n\t\tthis.base = base;\n\n\t\tconst absolute = (url.indexOf(\"://\") > -1);\n\t\t\n\t\tif (!absolute &&\n\t\t\tbase !== false &&\n\t\t\ttypeof (base) !== \"string\" &&\n\t\t\twindow && window.location) {\n\t\t\tthis.base = window.location.href;\n\t\t}\n\n\t\tlet pathname = url;\n\t\t// URL Polyfill doesn't throw an error if base is empty\n\t\tif (absolute || this.base) {\n\t\t\ttry {\n\t\t\t\tif (this.base) { // Safari doesn't like an undefined base\n\t\t\t\t\tthis.Url = new URL(url, this.base);\n\t\t\t\t} else {\n\t\t\t\t\tthis.Url = new URL(url);\n\t\t\t\t}\n\t\t\t\tthis.href = this.Url.href;\n\t\t\t\tthis.protocol = this.Url.protocol;\n\t\t\t\tthis.origin = this.Url.origin;\n\t\t\t\tthis.hash = this.Url.hash;\n\t\t\t\tthis.search = this.Url.search;\n\n\t\t\t\tpathname = this.Url.pathname + (this.Url.search ? this.Url.search : \"\");\n\t\t\t} catch (e) {\n\t\t\t\t// Skip URL parsing\n\t\t\t\tthis.Url = undefined;\n\t\t\t\t// resolve the pathname from the base\n\t\t\t\tif (this.base) {\n\t\t\t\t\tconst basePath = new Path(this.base);\n\t\t\t\t\tpathname = basePath.resolve(pathname);\n\t\t\t\t}\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t\t// override URL.origin property for Firefox browser\n\t\t\tif (this.origin === \"null\" && this.protocol === \"file:\") {\n\t\t\t\tthis.origin = \"file://\";\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * @member {Path} path\n\t\t * @memberof Url\n\t\t * @readonly\n\t\t */\n\t\tthis.path = new Path(pathname);\n\t\tthis.directory = this.path.directory;\n\t\tthis.filename = this.path.filename;\n\t\tthis.extension = this.path.extension;\n\t}\n\n\t/**\n\t * Resolves a relative path to a absolute url\n\t * @param {string} path\n\t * @returns {string} url\n\t */\n\tresolve(path) {\n\n\t\tif (path.indexOf(\"://\") > -1) { // is absolute\n\t\t\treturn path;\n\t\t}\n\n\t\tconst dir = this.path.directory;\n\t\tconst fullpath = Path.prototype.resolve(dir, path);\n\t\treturn this.origin + fullpath;\n\t}\n\n\t/**\n\t * Resolve a path relative to the url\n\t * @param {string} path\n\t * @returns {string} path\n\t */\n\trelative(path) {\n\n\t\tconst dir = this.path.directory;\n\t\treturn Path.prototype.relative(path, dir);\n\t}\n\n\t/**\n\t * toString\n\t * @returns {string}\n\t */\n\ttoString() {\n\n\t\treturn this.href;\n\t}\n}\n\nexport default Url;","import EventEmitter from \"event-emitter\";\nimport { isNumber } from \"./utils/core\";\nimport { EVENTS } from \"./utils/constants\";\n\n/**\n * viewport configuration class\n */\nclass Viewport {\n\t/**\n\t * Constructor\n\t * @param {Layout} layout\n\t */\n\tconstructor(layout) {\n\n\t\tthis.layout = layout;\n\t\tthis.layout.on(EVENTS.LAYOUT.UPDATED, (props, changed) => {\n\t\t\tif (changed.axis) {\n\t\t\t\tthis.updateAxis(props.axis);\n\t\t\t} else if (changed.flow) {\n\t\t\t\tthis.updateFlow(props.flow);\n\t\t\t} else if (changed.direction) {\n\t\t\t\tthis.direction(props.direction);\n\t\t\t}\n\t\t});\n\t\t/**\n\t\t * viewport container\n\t\t * @member {Element} container\n\t\t * @memberof Viewport\n\t\t * @readonly\n\t\t */\n\t\tthis.container = null;\n\t\t/**\n\t\t * viewport element\n\t\t * @member {Element} target\n\t\t * @memberof Viewport\n\t\t * @readonly\n\t\t */\n\t\tthis.target = null;\n\t\t/**\n\t\t * viewport rect\n\t\t * @member {object} rect\n\t\t * @memberof Viewport\n\t\t * @readonly\n\t\t */\n\t\tthis.rect = {\n\t\t\tbottom: 0,\n\t\t\theight: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\twidth: 0,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t};\n\t}\n\n\t/**\n\t * Attach to viewport element\n\t * @param {Element|string} input viewport element\n\t * @param {object} options\n\t * @param {string|number} options.width viewport container width\n\t * @param {string|number} options.height viewport container height\n\t * @param {object} options.views\n\t * @returns {Element|null} attached element\n\t */\n\tattachTo(input, options) {\n\n\t\tconst element = this.getElement(input);\n\t\tif (!element) return null;\n\t\tthis.views = options.views;\n\t\tthis.container = this.create(options);\n\t\tthis.container.appendChild(this.views.container);\n\t\telement.appendChild(this.container);\n\t\tthis.target = element;\n\t\tthis.appendListeners();\n\t\treturn element;\n\t}\n\n\t/**\n\t * Create viewport-container\n\t * @param {object} options \n\t * @param {string|number} [options.width]\n\t * @param {string|number} [options.height]\n\t * @returns {Element} container\n\t * @private\n\t */\n\tcreate(options) {\n\n\t\tlet szw = options.width;\n\t\tlet szh = options.height;\n\n\t\tif (szw && isNumber(szw)) {\n\t\t\tszw = szw + \"px\";\n\t\t}\n\n\t\tif (szh && isNumber(szh)) {\n\t\t\tszh = szh + \"px\";\n\t\t}\n\n\t\tconst container = document.createElement(\"div\");\n\t\tcontainer.classList.add(\"viewport-container\");\n\t\tcontainer.style.wordSpacing = \"0\";\n\t\tcontainer.style.lineHeight = \"0\";\n\t\tcontainer.style.verticalAlign = \"top\";\n\t\tcontainer.style.position = \"relative\";\n\t\tcontainer.style.display = \"flex\";\n\t\tcontainer.style.flexWrap = \"nowrap\";\n\t\tcontainer.style.width = szw || \"100%\";\n\t\tcontainer.style.height = szh || \"100%\";\n\t\tcontainer.style.overflow = \"hidden\";\n\t\treturn container;\n\t}\n\n\t/**\n\t * appendListeners\n\t * @private\n\t */\n\tappendListeners() {\n\t\t//-- ORIENTATION_CHANGE\n\t\tscreen.orientation.addEventListener(\"change\", this.orientation.bind(this));\n\t\t//-- RESIZED\n\t\tthis.resizeFunc = new ResizeObserver((e) => {\n\t\t\trequestAnimationFrame(() => this.resized(e));\n\t\t});\n\t\tthis.resizeFunc.observe(this.container);\n\t}\n\n\t/**\n\t * removeListeners\n\t * @private\n\t */\n\tremoveListeners() {\n\t\t//-- ORIENTATION_CHANGE\n\t\tscreen.orientation.removeEventListener(\"change\", this.orientation.bind(this));\n\t\t//-- RESIZE\n\t\tif (this.resizeFunc) {\n\t\t\tthis.resizeFunc.disconnect();\n\t\t}\n\t}\n\n\t/**\n\t * Get viewport element\n\t * @param {Element|string} input \n\t * @returns {Element}\n\t * @private\n\t */\n\tgetElement(input) {\n\n\t\tlet element;\n\t\tif (typeof input === \"string\") {\n\t\t\telement = document.getElementById(input);\n\t\t} else if (input instanceof Element) {\n\t\t\telement = input;\n\t\t} else {\n\t\t\tthrow new TypeError(\"Invalid argument type\");\n\t\t}\n\t\treturn element;\n\t}\n\n\t/**\n\t * orientationchanged\n\t * @param {Event} e \n\t * @private\n\t */\n\torientation(e) {\n\n\t\tthis.emit(EVENTS.VIEWPORT.ORIENTATION_CHANGE, e.target);\n\t}\n\n\t/**\n\t * resized event handler\n\t * @param {object} entries \n\t * @private\n\t */\n\tresized(entries) {\n\n\t\tlet changed = false;\n\t\tconst cmp = (rect) => Object.keys(this.rect).forEach(p => {\n\t\t\tif (!rect) return;\n\t\t\tif (this.rect[p] !== rect[p] && rect[p] !== void 0) {\n\t\t\t\tthis.rect[p] = rect[p];\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tentries.forEach((entry) => cmp(entry.contentRect));\n\t\tif (!changed) return;\n\t\tthis.emit(EVENTS.VIEWPORT.RESIZED, this.rect);\n\t}\n\n\t/**\n\t * size\n\t * @param {string|number} [width] \n\t * @param {string|number} [height] \n\t * @returns {object}\n\t */\n\tsize(width, height) {\n\n\t\tthis.rect.width = this.target.clientWidth;\n\t\tthis.rect.height = this.target.clientHeight;\n\n\t\tif (!width) {\n\t\t\twidth = this.rect.width;\n\t\t\tthis.container.style.width = width + \"px\";\n\t\t} else if (isNumber(width)) {\n\t\t\tthis.container.style.width = width + \"px\";\n\t\t\tthis.rect.width = width;\n\t\t} else {\n\t\t\tthis.container.style.width = width;\n\t\t\tthis.rect.width = this.container.clientWidth;\n\t\t}\n\n\t\tif (!height) {\n\t\t\theight = this.rect.height;\n\t\t\tthis.container.style.height = height + \"px\";\n\t\t} else if (isNumber(height)) {\n\t\t\tthis.container.style.height = height + \"px\";\n\t\t\tthis.rect.height = height;\n\t\t} else {\n\t\t\tthis.container.style.height = height;\n\t\t\tthis.rect.height = this.container.clientHeight;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: this.rect.width,\n\t\t\theight: this.rect.height\n\t\t};\n\t}\n\n\t/**\n\t * Update direction\n\t * @param {string} [value] `layout.direction` value\n\t * @private\n\t */\n\tdirection(value) {\n\n\t\tconst dir = value || this.layout.direction;\n\t\tthis.target.dir = dir;\n\t\tthis.target.classList.add(dir);\n\t}\n\n\t/**\n\t * Update axis\n\t * @param {string} [value] values: `\"horizontal\"` OR `\"vertical\"`\n\t * @private\n\t */\n\tupdateAxis(value) {\n\n\t\tconst axis = value || this.layout.axis;\n\t\t\n\t\tif (axis === \"horizontal\") {\n\t\t\tthis.views.container.style[\"flex-wrap\"] = \"nowrap\";\n\t\t} else {\n\t\t\tthis.views.container.style[\"flex-wrap\"] = \"wrap\";\n\t\t}\n\t}\n\n\t/**\n\t * Update flow\n\t * @param {string} [value] `layout.flow` value\n\t * @private\n\t */\n\tupdateFlow(value) {\n\n\t\tconst flow = value || this.layout.flow;\n\n\t\tif (flow === \"paginated\") {\n\t\t\tthis.views.container.style[\"overflow-y\"] = \"hidden\";\n\t\t\tthis.views.container.style[\"overflow-x\"] = \"hidden\";\n\t\t\tthis.views.container.style[\"flex-wrap\"] = \"nowrap\";\n\t\t} else if (this.layout.axis === \"horizontal\") {\n\t\t\tthis.views.container.style[\"overflow-y\"] = \"hidden\";\n\t\t\tthis.views.container.style[\"overflow-x\"] = \"auto\";\n\t\t\tthis.views.container.style[\"flex-wrap\"] = \"nowrap\";\n\t\t} else if (this.layout.axis === \"vertical\") {\n\t\t\tthis.views.container.style[\"overflow-y\"] = \"auto\";\n\t\t\tthis.views.container.style[\"overflow-x\"] = \"hidden\";\n\t\t\tthis.views.container.style[\"flex-wrap\"] = \"wrap\";\n\t\t}\n\n\t\tthis.target.className = flow;\n\t}\n\n\t/**\n\t * Update viewport container\n\t */\n\tupdate() {\n\n\t\tthis.updateAxis();\n\t\tthis.updateFlow();\n\t\tthis.direction();\n\t}\n\n\t/**\n\t * destroy\n\t */\n\tdestroy() {\n\n\t\tif (this.target) {\n\t\t\tthis.removeListeners();\n\t\t\tthis.target.removeChild(this.container);\n\t\t\tthis.container.removeChild(this.views.container);\n\t\t\tthis.container = undefined;\n\t\t\tthis.target = undefined;\n\t\t\tthis.rect = undefined;\n\t\t}\n\t}\n}\n\nEventEmitter(Viewport.prototype);\n\nexport default Viewport;","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\nvar setFunctionLength = require('set-function-length');\n\nvar $TypeError = require('es-errors/type');\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = require('es-define-property');\nvar $max = GetIntrinsic('%Math.max%');\n\nmodule.exports = function callBind(originalFunction) {\n\tif (typeof originalFunction !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\tvar func = $reflectApply(bind, $call, arguments);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\ttrue\n\t);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar defineDataProperty = require('define-data-property');\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar supportsDescriptors = require('has-property-descriptors')();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object) {\n\t\tif (predicate === true) {\n\t\t\tif (object[name] === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (!isFunction(predicate) || !predicate()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (supportsDescriptors) {\n\t\tdefineDataProperty(object, name, value, true);\n\t} else {\n\t\tdefineDataProperty(object, name, value);\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\n/** @type {import('.')} */\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true) || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString /*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\nvar forEach = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (toStr.call(list) === '[object Array]') {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n\nmodule.exports = forEach;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar undefined;\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar test = {\n\t__proto__: null,\n\tfoo: {}\n};\n\nvar $Object = Object;\n\n/** @type {import('.')} */\nmodule.exports = function hasProto() {\n\t// @ts-expect-error: TS errors on an inherited property for some reason\n\treturn { __proto__: test }.foo === test.foo\n\t\t&& !(test instanceof $Object);\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function isNaN(value) {\n\treturn value !== value;\n};\n","'use strict';\n\nvar callBind = require('call-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Number);\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\tif (Number.isNaN && Number.isNaN(NaN) && !Number.isNaN('a')) {\n\t\treturn Number.isNaN;\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function shimNumberIsNaN() {\n\tvar polyfill = getPolyfill();\n\tdefine(Number, { isNaN: polyfill }, {\n\t\tisNaN: function testIsNaN() {\n\t\t\treturn Number.isNaN !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\n/** @type {import('.')} */\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar objectKeys = require('object-keys');\nvar hasSymbols = require('has-symbols/shams')();\nvar callBound = require('call-bind/callBound');\nvar toObject = Object;\nvar $push = callBound('Array.prototype.push');\nvar $propIsEnumerable = callBound('Object.prototype.propertyIsEnumerable');\nvar originalGetSymbols = hasSymbols ? Object.getOwnPropertySymbols : null;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function assign(target, source1) {\n\tif (target == null) { throw new TypeError('target must be an object'); }\n\tvar to = toObject(target); // step 1\n\tif (arguments.length === 1) {\n\t\treturn to; // step 2\n\t}\n\tfor (var s = 1; s < arguments.length; ++s) {\n\t\tvar from = toObject(arguments[s]); // step 3.a.i\n\n\t\t// step 3.a.ii:\n\t\tvar keys = objectKeys(from);\n\t\tvar getSymbols = hasSymbols && (Object.getOwnPropertySymbols || originalGetSymbols);\n\t\tif (getSymbols) {\n\t\t\tvar syms = getSymbols(from);\n\t\t\tfor (var j = 0; j < syms.length; ++j) {\n\t\t\t\tvar key = syms[j];\n\t\t\t\tif ($propIsEnumerable(from, key)) {\n\t\t\t\t\t$push(keys, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// step 3.a.iii:\n\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\tvar nextKey = keys[i];\n\t\t\tif ($propIsEnumerable(from, nextKey)) { // step 3.a.iii.2\n\t\t\t\tvar propValue = from[nextKey]; // step 3.a.iii.2.a\n\t\t\t\tto[nextKey] = propValue; // step 3.a.iii.2.b\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to; // step 4\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t/*\n\t * v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t * note: this does not detect the bug unless there's 20 characters\n\t */\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t/*\n\t * Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t * which is 72% slower than our shim, and Firefox 40's native implementation.\n\t */\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n\treturn false;\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar gOPD = require('gopd');\n\n/** @type {(O: object) => string} */\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\n\n/** @type {<T = unknown>(array: readonly T[], value: unknown) => number} */\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {(receiver: import('.').TypedArray) => string | typeof Uint8Array.prototype.slice.call | typeof Uint8Array.prototype.set.call} Getter */\n/** @type {{ [k in `\\$${import('.').TypedArrayName}`]?: Getter } & { __proto__: null }} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(fn);\n\t\t}\n\t});\n}\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<typeof tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, Getter>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */\n\t\tfunction (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = $slice(typedArray, 1);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<typeof tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, Getter>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${import('.').TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = $slice(name, 1);\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\t/** @type {string} */\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6838__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6361__;","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n","'use strict';\nvar has = require('../internals/map-helpers').has;\n\n// Perform ? RequireInternalSlot(M, [[MapData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar classof = require('../internals/classof-raw');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar ArrayBufferPrototype = ArrayBuffer && ArrayBuffer.prototype;\nvar slice = ArrayBufferPrototype && uncurryThis(ArrayBufferPrototype.slice);\n\nmodule.exports = function (O) {\n  if (arrayBufferByteLength(O) !== 0) return false;\n  if (!slice) return false;\n  try {\n    slice(O, 0, 0);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar toIndex = require('../internals/to-index');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\nvar detachTransferable = require('../internals/detach-transferable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar getBuiltIn = require('../internals/get-built-in');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, method, argument, reject) {\n  try {\n    var returnMethod = getMethod(iterator, 'return');\n    if (returnMethod) {\n      return getBuiltIn('Promise').resolve(call(returnMethod, iterator)).then(function () {\n        method(argument);\n      }, function (error) {\n        reject(error);\n      });\n    }\n  } catch (error2) {\n    return reject(error2);\n  } method(argument);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar perform = require('../internals/perform');\nvar anObject = require('../internals/an-object');\nvar create = require('../internals/object-create');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar InternalStateModule = require('../internals/internal-state');\nvar getBuiltIn = require('../internals/get-built-in');\nvar getMethod = require('../internals/get-method');\nvar AsyncIteratorPrototype = require('../internals/async-iterator-prototype');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Promise = getBuiltIn('Promise');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ASYNC_ITERATOR_HELPER = 'AsyncIteratorHelper';\nvar WRAP_FOR_VALID_ASYNC_ITERATOR = 'WrapForValidAsyncIterator';\nvar setInternalState = InternalStateModule.set;\n\nvar createAsyncIteratorProxyPrototype = function (IS_ITERATOR) {\n  var IS_GENERATOR = !IS_ITERATOR;\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ASYNC_ITERATOR : ASYNC_ITERATOR_HELPER);\n\n  var getStateOrEarlyExit = function (that) {\n    var stateCompletion = perform(function () {\n      return getInternalState(that);\n    });\n\n    var stateError = stateCompletion.error;\n    var state = stateCompletion.value;\n\n    if (stateError || (IS_GENERATOR && state.done)) {\n      return { exit: true, value: stateError ? Promise.reject(state) : Promise.resolve(createIterResultObject(undefined, true)) };\n    } return { exit: false, value: state };\n  };\n\n  return defineBuiltIns(create(AsyncIteratorPrototype), {\n    next: function next() {\n      var stateCompletion = getStateOrEarlyExit(this);\n      var state = stateCompletion.value;\n      if (stateCompletion.exit) return state;\n      var handlerCompletion = perform(function () {\n        return anObject(state.nextHandler(Promise));\n      });\n      var handlerError = handlerCompletion.error;\n      var value = handlerCompletion.value;\n      if (handlerError) state.done = true;\n      return handlerError ? Promise.reject(value) : Promise.resolve(value);\n    },\n    'return': function () {\n      var stateCompletion = getStateOrEarlyExit(this);\n      var state = stateCompletion.value;\n      if (stateCompletion.exit) return state;\n      state.done = true;\n      var iterator = state.iterator;\n      var returnMethod, result;\n      var completion = perform(function () {\n        if (state.inner) try {\n          iteratorClose(state.inner.iterator, 'normal');\n        } catch (error) {\n          return iteratorClose(iterator, 'throw', error);\n        }\n        return getMethod(iterator, 'return');\n      });\n      returnMethod = result = completion.value;\n      if (completion.error) return Promise.reject(result);\n      if (returnMethod === undefined) return Promise.resolve(createIterResultObject(undefined, true));\n      completion = perform(function () {\n        return call(returnMethod, iterator);\n      });\n      result = completion.value;\n      if (completion.error) return Promise.reject(result);\n      return IS_ITERATOR ? Promise.resolve(result) : Promise.resolve(result).then(function (resolved) {\n        anObject(resolved);\n        return createIterResultObject(undefined, true);\n      });\n    }\n  });\n};\n\nvar WrapForValidAsyncIteratorPrototype = createAsyncIteratorProxyPrototype(true);\nvar AsyncIteratorHelperPrototype = createAsyncIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(AsyncIteratorHelperPrototype, TO_STRING_TAG, 'Async Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR) {\n  var AsyncIteratorProxy = function AsyncIterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ASYNC_ITERATOR : ASYNC_ITERATOR_HELPER;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  AsyncIteratorProxy.prototype = IS_ITERATOR ? WrapForValidAsyncIteratorPrototype : AsyncIteratorHelperPrototype;\n\n  return AsyncIteratorProxy;\n};\n","'use strict';\n// https://github.com/tc39/proposal-iterator-helpers\n// https://github.com/tc39/proposal-array-from-async\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar getBuiltIn = require('../internals/get-built-in');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar closeAsyncIteration = require('../internals/async-iterator-close');\n\nvar createMethod = function (TYPE) {\n  var IS_TO_ARRAY = TYPE === 0;\n  var IS_FOR_EACH = TYPE === 1;\n  var IS_EVERY = TYPE === 2;\n  var IS_SOME = TYPE === 3;\n  return function (object, fn, target) {\n    anObject(object);\n    var MAPPING = fn !== undefined;\n    if (MAPPING || !IS_TO_ARRAY) aCallable(fn);\n    var record = getIteratorDirect(object);\n    var Promise = getBuiltIn('Promise');\n    var iterator = record.iterator;\n    var next = record.next;\n    var counter = 0;\n\n    return new Promise(function (resolve, reject) {\n      var ifAbruptCloseAsyncIterator = function (error) {\n        closeAsyncIteration(iterator, reject, error, reject);\n      };\n\n      var loop = function () {\n        try {\n          if (MAPPING) try {\n            doesNotExceedSafeInteger(counter);\n          } catch (error5) { ifAbruptCloseAsyncIterator(error5); }\n          Promise.resolve(anObject(call(next, iterator))).then(function (step) {\n            try {\n              if (anObject(step).done) {\n                if (IS_TO_ARRAY) {\n                  target.length = counter;\n                  resolve(target);\n                } else resolve(IS_SOME ? false : IS_EVERY || undefined);\n              } else {\n                var value = step.value;\n                try {\n                  if (MAPPING) {\n                    var result = fn(value, counter);\n\n                    var handler = function ($result) {\n                      if (IS_FOR_EACH) {\n                        loop();\n                      } else if (IS_EVERY) {\n                        $result ? loop() : closeAsyncIteration(iterator, resolve, false, reject);\n                      } else if (IS_TO_ARRAY) {\n                        try {\n                          target[counter++] = $result;\n                          loop();\n                        } catch (error4) { ifAbruptCloseAsyncIterator(error4); }\n                      } else {\n                        $result ? closeAsyncIteration(iterator, resolve, IS_SOME || value, reject) : loop();\n                      }\n                    };\n\n                    if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                    else handler(result);\n                  } else {\n                    target[counter++] = value;\n                    loop();\n                  }\n                } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n              }\n            } catch (error2) { reject(error2); }\n          }, reject);\n        } catch (error) { reject(error); }\n      };\n\n      loop();\n    });\n  };\n};\n\nmodule.exports = {\n  toArray: createMethod(0),\n  forEach: createMethod(1),\n  every: createMethod(2),\n  some: createMethod(3),\n  find: createMethod(4)\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createAsyncIteratorProxy = require('../internals/async-iterator-create-proxy');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar closeAsyncIteration = require('../internals/async-iterator-close');\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n  var iterator = state.iterator;\n  var mapper = state.mapper;\n\n  return new Promise(function (resolve, reject) {\n    var doneAndReject = function (error) {\n      state.done = true;\n      reject(error);\n    };\n\n    var ifAbruptCloseAsyncIterator = function (error) {\n      closeAsyncIteration(iterator, doneAndReject, error, doneAndReject);\n    };\n\n    Promise.resolve(anObject(call(state.next, iterator))).then(function (step) {\n      try {\n        if (anObject(step).done) {\n          state.done = true;\n          resolve(createIterResultObject(undefined, true));\n        } else {\n          var value = step.value;\n          try {\n            var result = mapper(value, state.counter++);\n\n            var handler = function (mapped) {\n              resolve(createIterResultObject(mapped, false));\n            };\n\n            if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n            else handler(result);\n          } catch (error2) { ifAbruptCloseAsyncIterator(error2); }\n        }\n      } catch (error) { doneAndReject(error); }\n    }, doneAndReject);\n  });\n});\n\n// `AsyncIterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new AsyncIteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar shared = require('../internals/shared-store');\nvar isCallable = require('../internals/is-callable');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar USE_FUNCTION_CONSTRUCTOR = 'USE_FUNCTION_CONSTRUCTOR';\nvar ASYNC_ITERATOR = wellKnownSymbol('asyncIterator');\nvar AsyncIterator = globalThis.AsyncIterator;\nvar PassedAsyncIteratorPrototype = shared.AsyncIteratorPrototype;\nvar AsyncIteratorPrototype, prototype;\n\nif (PassedAsyncIteratorPrototype) {\n  AsyncIteratorPrototype = PassedAsyncIteratorPrototype;\n} else if (isCallable(AsyncIterator)) {\n  AsyncIteratorPrototype = AsyncIterator.prototype;\n} else if (shared[USE_FUNCTION_CONSTRUCTOR] || globalThis[USE_FUNCTION_CONSTRUCTOR]) {\n  try {\n    // eslint-disable-next-line no-new-func -- we have no alternatives without usage of modern syntax\n    prototype = getPrototypeOf(getPrototypeOf(getPrototypeOf(Function('return async function*(){}()')())));\n    if (getPrototypeOf(prototype) === Object.prototype) AsyncIteratorPrototype = prototype;\n  } catch (error) { /* empty */ }\n}\n\nif (!AsyncIteratorPrototype) AsyncIteratorPrototype = {};\nelse if (IS_PURE) AsyncIteratorPrototype = create(AsyncIteratorPrototype);\n\nif (!isCallable(AsyncIteratorPrototype[ASYNC_ITERATOR])) {\n  defineBuiltIn(AsyncIteratorPrototype, ASYNC_ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = AsyncIteratorPrototype;\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\n// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nmodule.exports = function (value, done) {\n  return { value: value, done: done };\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n","'use strict';\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) defineBuiltIn(target, key, src[key], options);\n  return target;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw new $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getBuiltInNodeModule = require('../internals/get-built-in-node-module');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","'use strict';\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar IS_NODE = require('../internals/environment-is-node');\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n","'use strict';\n// `GetIteratorDirect(obj)` abstract operation\n// https://tc39.es/proposal-iterator-helpers/#sec-getiteratordirect\nmodule.exports = function (obj) {\n  return {\n    iterator: obj,\n    next: obj.next,\n    done: false\n  };\n};\n","'use strict';\nvar classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nmodule.exports = false;\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar create = require('../internals/object-create');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar InternalStateModule = require('../internals/internal-state');\nvar getMethod = require('../internals/get-method');\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ITERATOR_HELPER = 'IteratorHelper';\nvar WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';\nvar setInternalState = InternalStateModule.set;\n\nvar createIteratorProxyPrototype = function (IS_ITERATOR) {\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);\n\n  return defineBuiltIns(create(IteratorPrototype), {\n    next: function next() {\n      var state = getInternalState(this);\n      // for simplification:\n      //   for `%WrapForValidIteratorPrototype%.next` our `nextHandler` returns `IterResultObject`\n      //   for `%IteratorHelperPrototype%.next` - just a value\n      if (IS_ITERATOR) return state.nextHandler();\n      try {\n        var result = state.done ? undefined : state.nextHandler();\n        return createIterResultObject(result, state.done);\n      } catch (error) {\n        state.done = true;\n        throw error;\n      }\n    },\n    'return': function () {\n      var state = getInternalState(this);\n      var iterator = state.iterator;\n      state.done = true;\n      if (IS_ITERATOR) {\n        var returnMethod = getMethod(iterator, 'return');\n        return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);\n      }\n      if (state.inner) try {\n        iteratorClose(state.inner.iterator, 'normal');\n      } catch (error) {\n        return iteratorClose(iterator, 'throw', error);\n      }\n      iteratorClose(iterator, 'normal');\n      return createIterResultObject(undefined, true);\n    }\n  });\n};\n\nvar WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);\nvar IteratorHelperPrototype = createIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR) {\n  var IteratorProxy = function Iterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;\n\n  return IteratorProxy;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new IteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  defineBuiltIn(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-map -- safe\nvar MapPrototype = Map.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-map -- safe\n  Map: Map,\n  set: uncurryThis(MapPrototype.set),\n  get: uncurryThis(MapPrototype.get),\n  has: uncurryThis(MapPrototype.has),\n  remove: uncurryThis(MapPrototype['delete']),\n  proto: MapPrototype\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar MapHelpers = require('../internals/map-helpers');\n\nvar Map = MapHelpers.Map;\nvar MapPrototype = MapHelpers.proto;\nvar forEach = uncurryThis(MapPrototype.forEach);\nvar entries = uncurryThis(MapPrototype.entries);\nvar next = entries(new Map()).next;\n\nmodule.exports = function (map, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: entries(map), next: next }, function (entry) {\n    return fn(entry[1], entry[0]);\n  }) : forEach(map, fn);\n};\n","'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","'use strict';\nvar toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\n/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  // eslint-disable-next-line no-useless-assignment -- avoid memory leak\n  activeXDocument = null;\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\n\nvar $SyntaxError = SyntaxError;\nvar $parseInt = parseInt;\nvar fromCharCode = String.fromCharCode;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\n\nvar codePoints = {\n  '\\\\\"': '\"',\n  '\\\\\\\\': '\\\\',\n  '\\\\/': '/',\n  '\\\\b': '\\b',\n  '\\\\f': '\\f',\n  '\\\\n': '\\n',\n  '\\\\r': '\\r',\n  '\\\\t': '\\t'\n};\n\nvar IS_4_HEX_DIGITS = /^[\\da-f]{4}$/i;\n// eslint-disable-next-line regexp/no-control-character -- safe\nvar IS_C0_CONTROL_CODE = /^[\\u0000-\\u001F]$/;\n\nmodule.exports = function (source, i) {\n  var unterminated = true;\n  var value = '';\n  while (i < source.length) {\n    var chr = at(source, i);\n    if (chr === '\\\\') {\n      var twoChars = slice(source, i, i + 2);\n      if (hasOwn(codePoints, twoChars)) {\n        value += codePoints[twoChars];\n        i += 2;\n      } else if (twoChars === '\\\\u') {\n        i += 2;\n        var fourHexDigits = slice(source, i, i + 4);\n        if (!exec(IS_4_HEX_DIGITS, fourHexDigits)) throw new $SyntaxError('Bad Unicode escape at: ' + i);\n        value += fromCharCode($parseInt(fourHexDigits, 16));\n        i += 4;\n      } else throw new $SyntaxError('Unknown escape sequence: \"' + twoChars + '\"');\n    } else if (chr === '\"') {\n      unterminated = false;\n      i++;\n      break;\n    } else {\n      if (exec(IS_C0_CONTROL_CODE, chr)) throw new $SyntaxError('Bad control character in string literal at: ' + i);\n      value += chr;\n      i++;\n    }\n  }\n  if (unterminated) throw new $SyntaxError('Unterminated string at: ' + i);\n  return { value: value, end: i };\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","'use strict';\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","'use strict';\n// `SameValueZero` abstract operation\n// https://tc39.es/ecma262/#sec-samevaluezero\nmodule.exports = function (x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y || x !== x && y !== y;\n};\n","'use strict';\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar globalThis = require('../internals/global-this');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.38.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2024 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","'use strict';\nvar store = require('../internals/shared-store');\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/environment-v8-version');\nvar ENVIRONMENT = require('../internals/environment');\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/environment-v8-version');\nvar fails = require('../internals/fails');\nvar globalThis = require('../internals/global-this');\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n","'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","'use strict';\nvar trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","'use strict';\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createAsyncIteratorProxy = require('../internals/async-iterator-create-proxy');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar closeAsyncIteration = require('../internals/async-iterator-close');\nvar IS_PURE = require('../internals/is-pure');\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n  var iterator = state.iterator;\n  var predicate = state.predicate;\n\n  return new Promise(function (resolve, reject) {\n    var doneAndReject = function (error) {\n      state.done = true;\n      reject(error);\n    };\n\n    var ifAbruptCloseAsyncIterator = function (error) {\n      closeAsyncIteration(iterator, doneAndReject, error, doneAndReject);\n    };\n\n    var loop = function () {\n      try {\n        Promise.resolve(anObject(call(state.next, iterator))).then(function (step) {\n          try {\n            if (anObject(step).done) {\n              state.done = true;\n              resolve(createIterResultObject(undefined, true));\n            } else {\n              var value = step.value;\n              try {\n                var result = predicate(value, state.counter++);\n\n                var handler = function (selected) {\n                  selected ? resolve(createIterResultObject(value, false)) : loop();\n                };\n\n                if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                else handler(result);\n              } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n            }\n          } catch (error2) { doneAndReject(error2); }\n        }, doneAndReject);\n      } catch (error) { doneAndReject(error); }\n    };\n\n    loop();\n  });\n});\n\n// `AsyncIterator.prototype.filter` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    return new AsyncIteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/async-iterator-iteration').find;\n\n// `AsyncIterator.prototype.find` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  find: function find(predicate) {\n    return $find(this, predicate);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $forEach = require('../internals/async-iterator-iteration').forEach;\n\n// `AsyncIterator.prototype.forEach` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    return $forEach(this, fn);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar map = require('../internals/async-iterator-map');\nvar IS_PURE = require('../internals/is-pure');\n\n// `AsyncIterator.prototype.map` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar getBuiltIn = require('../internals/get-built-in');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar closeAsyncIteration = require('../internals/async-iterator-close');\n\nvar Promise = getBuiltIn('Promise');\nvar $TypeError = TypeError;\n\n// `AsyncIterator.prototype.reduce` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    aCallable(reducer);\n    var record = getIteratorDirect(this);\n    var iterator = record.iterator;\n    var next = record.next;\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    var counter = 0;\n\n    return new Promise(function (resolve, reject) {\n      var ifAbruptCloseAsyncIterator = function (error) {\n        closeAsyncIteration(iterator, reject, error, reject);\n      };\n\n      var loop = function () {\n        try {\n          Promise.resolve(anObject(call(next, iterator))).then(function (step) {\n            try {\n              if (anObject(step).done) {\n                noInitial ? reject(new $TypeError('Reduce of empty iterator with no initial value')) : resolve(accumulator);\n              } else {\n                var value = step.value;\n                if (noInitial) {\n                  noInitial = false;\n                  accumulator = value;\n                  loop();\n                } else try {\n                  var result = reducer(accumulator, value, counter);\n\n                  var handler = function ($result) {\n                    accumulator = $result;\n                    loop();\n                  };\n\n                  if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                  else handler(result);\n                } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n              }\n              counter++;\n            } catch (error2) { reject(error2); }\n          }, reject);\n        } catch (error) { reject(error); }\n      };\n\n      loop();\n    });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar anInstance = require('../internals/an-instance');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar createProperty = require('../internals/create-property');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar CONSTRUCTOR = 'constructor';\nvar ITERATOR = 'Iterator';\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar $TypeError = TypeError;\nvar NativeIterator = globalThis[ITERATOR];\n\n// FF56- have non-standard global helper `Iterator`\nvar FORCED = IS_PURE\n  || !isCallable(NativeIterator)\n  || NativeIterator.prototype !== IteratorPrototype\n  // FF44- non-standard `Iterator` passes previous tests\n  || !fails(function () { NativeIterator({}); });\n\nvar IteratorConstructor = function Iterator() {\n  anInstance(this, IteratorPrototype);\n  if (getPrototypeOf(this) === IteratorPrototype) throw new $TypeError('Abstract class Iterator not directly constructable');\n};\n\nvar defineIteratorPrototypeAccessor = function (key, value) {\n  if (DESCRIPTORS) {\n    defineBuiltInAccessor(IteratorPrototype, key, {\n      configurable: true,\n      get: function () {\n        return value;\n      },\n      set: function (replacement) {\n        anObject(this);\n        if (this === IteratorPrototype) throw new $TypeError(\"You can't redefine this property\");\n        if (hasOwn(this, key)) this[key] = replacement;\n        else createProperty(this, key, replacement);\n      }\n    });\n  } else IteratorPrototype[key] = value;\n};\n\nif (!hasOwn(IteratorPrototype, TO_STRING_TAG)) defineIteratorPrototypeAccessor(TO_STRING_TAG, ITERATOR);\n\nif (FORCED || !hasOwn(IteratorPrototype, CONSTRUCTOR) || IteratorPrototype[CONSTRUCTOR] === Object) {\n  defineIteratorPrototypeAccessor(CONSTRUCTOR, IteratorConstructor);\n}\n\nIteratorConstructor.prototype = IteratorPrototype;\n\n// `Iterator` constructor\n// https://github.com/tc39/proposal-iterator-helpers\n$({ global: true, constructor: true, forced: FORCED }, {\n  Iterator: IteratorConstructor\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://github.com/tc39/proposal-iterator-helpers\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.find` method\n// https://github.com/tc39/proposal-iterator-helpers\n$({ target: 'Iterator', proto: true, real: true }, {\n  find: function find(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.forEach` method\n// https://github.com/tc39/proposal-iterator-helpers\n$({ target: 'Iterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    aCallable(fn);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar map = require('../internals/iterator-map');\nvar IS_PURE = require('../internals/is-pure');\n\n// `Iterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\nvar $TypeError = TypeError;\n\n// `Iterator.prototype.reduce` method\n// https://github.com/tc39/proposal-iterator-helpers\n$({ target: 'Iterator', proto: true, real: true }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    aCallable(reducer);\n    var record = getIteratorDirect(this);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar hasOwn = require('../internals/has-own-property');\nvar toString = require('../internals/to-string');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar fails = require('../internals/fails');\nvar parseJSONString = require('../internals/parse-json-string');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nvar JSON = globalThis.JSON;\nvar Number = globalThis.Number;\nvar SyntaxError = globalThis.SyntaxError;\nvar nativeParse = JSON && JSON.parse;\nvar enumerableOwnProperties = getBuiltIn('Object', 'keys');\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis([].push);\n\nvar IS_DIGIT = /^\\d$/;\nvar IS_NON_ZERO_DIGIT = /^[1-9]$/;\nvar IS_NUMBER_START = /^[\\d-]$/;\nvar IS_WHITESPACE = /^[\\t\\n\\r ]$/;\n\nvar PRIMITIVE = 0;\nvar OBJECT = 1;\n\nvar $parse = function (source, reviver) {\n  source = toString(source);\n  var context = new Context(source, 0, '');\n  var root = context.parse();\n  var value = root.value;\n  var endIndex = context.skip(IS_WHITESPACE, root.end);\n  if (endIndex < source.length) {\n    throw new SyntaxError('Unexpected extra character: \"' + at(source, endIndex) + '\" after the parsed data at: ' + endIndex);\n  }\n  return isCallable(reviver) ? internalize({ '': value }, '', reviver, root) : value;\n};\n\nvar internalize = function (holder, name, reviver, node) {\n  var val = holder[name];\n  var unmodified = node && val === node.value;\n  var context = unmodified && typeof node.source == 'string' ? { source: node.source } : {};\n  var elementRecordsLen, keys, len, i, P;\n  if (isObject(val)) {\n    var nodeIsArray = isArray(val);\n    var nodes = unmodified ? node.nodes : nodeIsArray ? [] : {};\n    if (nodeIsArray) {\n      elementRecordsLen = nodes.length;\n      len = lengthOfArrayLike(val);\n      for (i = 0; i < len; i++) {\n        internalizeProperty(val, i, internalize(val, '' + i, reviver, i < elementRecordsLen ? nodes[i] : undefined));\n      }\n    } else {\n      keys = enumerableOwnProperties(val);\n      len = lengthOfArrayLike(keys);\n      for (i = 0; i < len; i++) {\n        P = keys[i];\n        internalizeProperty(val, P, internalize(val, P, reviver, hasOwn(nodes, P) ? nodes[P] : undefined));\n      }\n    }\n  }\n  return call(reviver, holder, name, val, context);\n};\n\nvar internalizeProperty = function (object, key, value) {\n  if (DESCRIPTORS) {\n    var descriptor = getOwnPropertyDescriptor(object, key);\n    if (descriptor && !descriptor.configurable) return;\n  }\n  if (value === undefined) delete object[key];\n  else createProperty(object, key, value);\n};\n\nvar Node = function (value, end, source, nodes) {\n  this.value = value;\n  this.end = end;\n  this.source = source;\n  this.nodes = nodes;\n};\n\nvar Context = function (source, index) {\n  this.source = source;\n  this.index = index;\n};\n\n// https://www.json.org/json-en.html\nContext.prototype = {\n  fork: function (nextIndex) {\n    return new Context(this.source, nextIndex);\n  },\n  parse: function () {\n    var source = this.source;\n    var i = this.skip(IS_WHITESPACE, this.index);\n    var fork = this.fork(i);\n    var chr = at(source, i);\n    if (exec(IS_NUMBER_START, chr)) return fork.number();\n    switch (chr) {\n      case '{':\n        return fork.object();\n      case '[':\n        return fork.array();\n      case '\"':\n        return fork.string();\n      case 't':\n        return fork.keyword(true);\n      case 'f':\n        return fork.keyword(false);\n      case 'n':\n        return fork.keyword(null);\n    } throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  },\n  node: function (type, value, start, end, nodes) {\n    return new Node(value, end, type ? null : slice(this.source, start, end), nodes);\n  },\n  object: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectKeypair = false;\n    var object = {};\n    var nodes = {};\n    while (i < source.length) {\n      i = this.until(['\"', '}'], i);\n      if (at(source, i) === '}' && !expectKeypair) {\n        i++;\n        break;\n      }\n      // Parsing the key\n      var result = this.fork(i).string();\n      var key = result.value;\n      i = result.end;\n      i = this.until([':'], i) + 1;\n      // Parsing value\n      i = this.skip(IS_WHITESPACE, i);\n      result = this.fork(i).parse();\n      createProperty(nodes, key, result);\n      createProperty(object, key, result.value);\n      i = this.until([',', '}'], result.end);\n      var chr = at(source, i);\n      if (chr === ',') {\n        expectKeypair = true;\n        i++;\n      } else if (chr === '}') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, object, this.index, i, nodes);\n  },\n  array: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectElement = false;\n    var array = [];\n    var nodes = [];\n    while (i < source.length) {\n      i = this.skip(IS_WHITESPACE, i);\n      if (at(source, i) === ']' && !expectElement) {\n        i++;\n        break;\n      }\n      var result = this.fork(i).parse();\n      push(nodes, result);\n      push(array, result.value);\n      i = this.until([',', ']'], result.end);\n      if (at(source, i) === ',') {\n        expectElement = true;\n        i++;\n      } else if (at(source, i) === ']') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, array, this.index, i, nodes);\n  },\n  string: function () {\n    var index = this.index;\n    var parsed = parseJSONString(this.source, this.index + 1);\n    return this.node(PRIMITIVE, parsed.value, index, parsed.end);\n  },\n  number: function () {\n    var source = this.source;\n    var startIndex = this.index;\n    var i = startIndex;\n    if (at(source, i) === '-') i++;\n    if (at(source, i) === '0') i++;\n    else if (exec(IS_NON_ZERO_DIGIT, at(source, i))) i = this.skip(IS_DIGIT, i + 1);\n    else throw new SyntaxError('Failed to parse number at: ' + i);\n    if (at(source, i) === '.') i = this.skip(IS_DIGIT, i + 1);\n    if (at(source, i) === 'e' || at(source, i) === 'E') {\n      i++;\n      if (at(source, i) === '+' || at(source, i) === '-') i++;\n      var exponentStartIndex = i;\n      i = this.skip(IS_DIGIT, i);\n      if (exponentStartIndex === i) throw new SyntaxError(\"Failed to parse number's exponent value at: \" + i);\n    }\n    return this.node(PRIMITIVE, Number(slice(source, startIndex, i)), startIndex, i);\n  },\n  keyword: function (value) {\n    var keyword = '' + value;\n    var index = this.index;\n    var endIndex = index + keyword.length;\n    if (slice(this.source, index, endIndex) !== keyword) throw new SyntaxError('Failed to parse value at: ' + index);\n    return this.node(PRIMITIVE, value, index, endIndex);\n  },\n  skip: function (regex, i) {\n    var source = this.source;\n    for (; i < source.length; i++) if (!exec(regex, at(source, i))) break;\n    return i;\n  },\n  until: function (array, i) {\n    i = this.skip(IS_WHITESPACE, i);\n    var chr = at(this.source, i);\n    for (var j = 0; j < array.length; j++) if (array[j] === chr) return i;\n    throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  }\n};\n\nvar NO_SOURCE_SUPPORT = fails(function () {\n  var unsafeInt = '9007199254740993';\n  var source;\n  nativeParse(unsafeInt, function (key, value, context) {\n    source = context.source;\n  });\n  return source !== unsafeInt;\n});\n\nvar PROPER_BASE_PARSE = NATIVE_SYMBOL && !fails(function () {\n  // Safari 9 bug\n  return 1 / nativeParse('-0 \\t') !== -Infinity;\n});\n\n// `JSON.parse` method\n// https://tc39.es/ecma262/#sec-json.parse\n// https://github.com/tc39/proposal-json-parse-with-source\n$({ target: 'JSON', stat: true, forced: NO_SOURCE_SUPPORT }, {\n  parse: function parse(text, reviver) {\n    return PROPER_BASE_PARSE && !isCallable(reviver) ? nativeParse(text) : $parse(text, reviver);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aMap = require('../internals/a-map');\nvar remove = require('../internals/map-helpers').remove;\n\n// `Map.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  deleteAll: function deleteAll(/* ...elements */) {\n    var collection = aMap(this);\n    var allDeleted = true;\n    var wasDeleted;\n    for (var k = 0, len = arguments.length; k < len; k++) {\n      wasDeleted = remove(collection, arguments[k]);\n      allDeleted = allDeleted && wasDeleted;\n    } return !!allDeleted;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aMap = require('../internals/a-map');\nvar MapHelpers = require('../internals/map-helpers');\n\nvar get = MapHelpers.get;\nvar has = MapHelpers.has;\nvar set = MapHelpers.set;\n\n// `Map.prototype.emplace` method\n// https://github.com/tc39/proposal-upsert\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  emplace: function emplace(key, handler) {\n    var map = aMap(this);\n    var value, inserted;\n    if (has(map, key)) {\n      value = get(map, key);\n      if ('update' in handler) {\n        value = handler.update(value, key, map);\n        set(map, key, value);\n      } return value;\n    }\n    inserted = handler.insert(key, map);\n    set(map, key, inserted);\n    return inserted;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\n// `Map.prototype.every` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  every: function every(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(map, function (value, key) {\n      if (!boundFunction(value, key, map)) return false;\n    }, true) !== false;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar MapHelpers = require('../internals/map-helpers');\nvar iterate = require('../internals/map-iterate');\n\nvar Map = MapHelpers.Map;\nvar set = MapHelpers.set;\n\n// `Map.prototype.filter` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newMap = new Map();\n    iterate(map, function (value, key) {\n      if (boundFunction(value, key, map)) set(newMap, key, value);\n    });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\n// `Map.prototype.findKey` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  findKey: function findKey(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var result = iterate(map, function (value, key) {\n      if (boundFunction(value, key, map)) return { key: key };\n    }, true);\n    return result && result.key;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\n// `Map.prototype.find` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  find: function find(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var result = iterate(map, function (value, key) {\n      if (boundFunction(value, key, map)) return { value: value };\n    }, true);\n    return result && result.value;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar sameValueZero = require('../internals/same-value-zero');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\n// `Map.prototype.includes` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  includes: function includes(searchElement) {\n    return iterate(aMap(this), function (value) {\n      if (sameValueZero(value, searchElement)) return true;\n    }, true) === true;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\n// `Map.prototype.keyOf` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  keyOf: function keyOf(searchElement) {\n    var result = iterate(aMap(this), function (value, key) {\n      if (value === searchElement) return { key: key };\n    }, true);\n    return result && result.key;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar MapHelpers = require('../internals/map-helpers');\nvar iterate = require('../internals/map-iterate');\n\nvar Map = MapHelpers.Map;\nvar set = MapHelpers.set;\n\n// `Map.prototype.mapKeys` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  mapKeys: function mapKeys(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newMap = new Map();\n    iterate(map, function (value, key) {\n      set(newMap, boundFunction(value, key, map), value);\n    });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar MapHelpers = require('../internals/map-helpers');\nvar iterate = require('../internals/map-iterate');\n\nvar Map = MapHelpers.Map;\nvar set = MapHelpers.set;\n\n// `Map.prototype.mapValues` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  mapValues: function mapValues(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newMap = new Map();\n    iterate(map, function (value, key) {\n      set(newMap, key, boundFunction(value, key, map));\n    });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/iterate');\nvar set = require('../internals/map-helpers').set;\n\n// `Map.prototype.merge` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, arity: 1, forced: true }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  merge: function merge(iterable /* ...iterables */) {\n    var map = aMap(this);\n    var argumentsLength = arguments.length;\n    var i = 0;\n    while (i < argumentsLength) {\n      iterate(arguments[i++], function (key, value) {\n        set(map, key, value);\n      }, { AS_ENTRIES: true });\n    }\n    return map;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aCallable = require('../internals/a-callable');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\nvar $TypeError = TypeError;\n\n// `Map.prototype.reduce` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var map = aMap(this);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    aCallable(callbackfn);\n    iterate(map, function (value, key) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = callbackfn(accumulator, value, key, map);\n      }\n    });\n    if (noInitial) throw new $TypeError('Reduce of empty map with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar bind = require('../internals/function-bind-context');\nvar aMap = require('../internals/a-map');\nvar iterate = require('../internals/map-iterate');\n\n// `Map.prototype.some` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  some: function some(callbackfn /* , thisArg */) {\n    var map = aMap(this);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(map, function (value, key) {\n      if (boundFunction(value, key, map)) return true;\n    }, true) === true;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aCallable = require('../internals/a-callable');\nvar aMap = require('../internals/a-map');\nvar MapHelpers = require('../internals/map-helpers');\n\nvar $TypeError = TypeError;\nvar get = MapHelpers.get;\nvar has = MapHelpers.has;\nvar set = MapHelpers.set;\n\n// `Map.prototype.update` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: true }, {\n  update: function update(key, callback /* , thunk */) {\n    var map = aMap(this);\n    var length = arguments.length;\n    aCallable(callback);\n    var isPresentInMap = has(map, key);\n    if (!isPresentInMap && length < 3) {\n      throw new $TypeError('Updating absent value');\n    }\n    var value = isPresentInMap ? get(map, key) : aCallable(length > 2 ? arguments[2] : undefined)(key, map);\n    set(map, key, callback(value, key, map));\n    return map;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import assert from \"assert\"\nimport Book from \"../src/book\"\n\nconst assertion = (book, { archived, url }) => {\n\tassert.equal(book.isOpen, true)\n\tassert.equal(book.archived, archived)\n\tassert.equal(book.url.toString(), url)\n\tassert.equal(book.container.directory, \"OPS/\")\n\tassert.equal(book.container.fullPath, \"OPS/package.opf\")\n\tassert.equal(book.container.encoding, \"UTF-8\")\n\tassert.equal(book.container.mediaType, \"application/oebps-package+xml\")\n}\n\ndescribe(\"Book\", () => {\n\tdescribe(\"open book from epub file of local server\", () => {\n\t\tconst book = new Book()\n\t\tit(\"should open a archived epub\", async () => {\n\t\t\tawait book.open(\"../assets/alice.epub\")\n\t\t\tassertion(book, {\n\t\t\t\tarchived: true,\n\t\t\t\turl: \"/\"\n\t\t\t})\n\t\t})\n\t\tit(\"should have a blob coverUrl\", async () => {\n\t\t\tconst coverUrl = await book.coverUrl()\n\t\t\tassert(/blob:/.test(coverUrl))\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t})\n\t})\n\tdescribe(\"open book from epub file of remote server\", () => {\n\t\tconst book = new Book()\n\t\tit(\"should open a archived epub\", async () => {\n\t\t\tawait book.open(\"https://intity.github.io/epub-js/assets/alice.epub\")\n\t\t\tassertion(book, {\n\t\t\t\tarchived: true,\n\t\t\t\turl: \"/\"\n\t\t\t})\n\t\t})\n\t\tit(\"should have a blob coverUrl\", async () => {\n\t\t\tconst coverUrl = await book.coverUrl()\n\t\t\tassert(/blob:/.test(coverUrl))\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t})\n\t})\n\tdescribe(\"open book from array buffer\", () => {\n\t\tlet book, data\n\t\tbefore(async () => {\n\t\t\tconst response = await fetch(\"../assets/alice.epub\")\n\t\t\tdata = await response.arrayBuffer()\n\t\t\tbook = new Book()\n\t\t})\n\t\tit(\"should open a archived epub\", async () => {\n\t\t\tawait book.open(data)\n\t\t\tassertion(book, {\n\t\t\t\tarchived: true,\n\t\t\t\turl: \"/\"\n\t\t\t})\n\t\t})\n\t\tit(\"should have a blob coverUrl\", async () => {\n\t\t\tconst coverUrl = await book.coverUrl()\n\t\t\tassert(/blob:/.test(coverUrl))\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t\tdata = undefined;\n\t\t})\n\t})\n\tdescribe(\"open book from data URL in base64 encoding\", () => {\n\t\tlet book, data\n\t\tbefore(async () => {\n\t\t\tbook = new Book()\n\t\t\tconst response = await fetch(\"../assets/alice.epub\")\n\t\t\tconst blob = await response.blob()\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst reader = new FileReader()\n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tdata = e.target.result\n\t\t\t\t\tresolve(data)\n\t\t\t\t}\n\t\t\t\treader.onerror = (err) => reject(err)\n\t\t\t\treader.readAsDataURL(blob)\n\t\t\t})\n\t\t})\n\t\tit(\"should open a archived epub\", async () => {\n\t\t\tawait book.open(data, \"base64\")\n\t\t\tassertion(book, {\n\t\t\t\tarchived: true,\n\t\t\t\turl: \"/\"\n\t\t\t})\n\t\t})\n\t\tit(\"should have a blob coverUrl\", async () => {\n\t\t\tconst coverUrl = await book.coverUrl()\n\t\t\tassert(/blob:/.test(coverUrl))\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t\tdata = undefined;\n\t\t})\n\t})\n\tdescribe(\"open book from epub file without cover\", () => {\n\t\tconst book = new Book()\n\t\tit(\"should open a archived epub\", async () => {\n\t\t\tawait book.open(\"../assets/alice_without_cover.epub\")\n\t\t\tassertion(book, {\n\t\t\t\tarchived: true,\n\t\t\t\turl: \"/\"\n\t\t\t})\n\t\t})\n\t\tit(\"should have a empty coverUrl\", async () => {\n\t\t\tconst coverUrl = await book.coverUrl()\n\t\t\tassert.equal(coverUrl, null)\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t})\n\t})\n\tdescribe(\"open book from directory of local server\", () => {\n\t\tconst book = new Book()\n\t\tit(\"should open a unarchived epub\", async () => {\n\t\t\tawait book.open(\"../assets/alice/\")\n\t\t\tassertion(book, {\n\t\t\t\tarchived: false,\n\t\t\t\turl: `${location.origin + location.pathname.replace(\"/test/\", \"\")}/assets/alice/`\n\t\t\t})\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t})\n\t})\n\tdescribe(\"open book from directory of remote server\", () => {\n\t\tconst book = new Book()\n\t\tit(\"should open a unarchived epub\", async () => {\n\t\t\tawait book.open(\"https://intity.github.io/epub-js/assets/alice/\")\n\t\t\tassertion(book, {\n\t\t\t\tarchived: false,\n\t\t\t\turl: \"https://intity.github.io/epub-js/assets/alice/\"\n\t\t\t})\n\t\t})\n\t\tafter(() => {\n\t\t\tbook.destroy()\n\t\t})\n\t})\n})","import assert from \"assert\"\nimport request from \"../src/utils/request\"\nimport EpubCFI from \"../src/epubcfi\"\n\ndescribe(\"EpubCFI\", () => {\n\tlet doc1, doc2, doc3\n\tbefore(async () => {\n\t\tdoc1 = await request(\"../assets/chapter1.xhtml\")\n\t\tdoc2 = await request(\"../assets/chapter1-highlights.xhtml\")\n\t\tdoc3 = await request(\"../assets/highlight.xhtml\")\n\t})\n\tdescribe(\"#constructor()\", () => {\n\t\tit(\"should parse a cfi on init\", () => {\n\t\t\tconst cfi = new EpubCFI(\"epubcfi(/6/2[cover]!/6)\")\n\t\t\tassert.equal(cfi.spinePos, 0)\n\t\t})\n\t\tit(\"should parse a cfi and ignore the base if present\", () => {\n\t\t\tconst cfi = new EpubCFI(\"epubcfi(/6/2[cover]!/6)\", \"/6/6[end]\")\n\t\t\tassert.equal(cfi.spinePos, 0)\n\t\t})\n\t})\n\tdescribe(\"#parse()\", () => {\n\t\tit(\"should parse a cfi\", () => {\n\t\t\tconst cfi = \"epubcfi(/6/2[cover]!/6)\"\n\t\t\tconst parsed = EpubCFI.prototype.parse(cfi)\n\t\t\tassert.equal(parsed.spinePos, 0)\n\t\t})\n\t\txit(\"should parse a cfi and ignore the base if present\", () => {\n\t\t\tconst cfi = \"epubcfi(/6/2[cover]!/6)\"\n\t\t\tconst parsed = EpubCFI.prototype.parse(cfi, \"/6/6[end]\")\n\t\t\tassert.equal(parsed.spinePos, 0)\n\t\t}) // TODO: comparison of the base component from the parse method is not implemented\n\t\tit(\"should parse a cfi with a character offset\", () => {\n\t\t\tconst cfi = \"epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\"\n\t\t\tconst parsed = EpubCFI.prototype.parse(cfi)\n\t\t\tassert.equal(parsed.path.terminal.offset, 3)\n\t\t})\n\t\tit(\"should parse a cfi with a range\", () => {\n\t\t\tconst cfi = \"epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\"\n\t\t\tconst parsed = EpubCFI.prototype.parse(cfi)\n\t\t\tassert.equal(parsed.range, true)\n\t\t\tassert.equal(parsed.start.steps.length, 2)\n\t\t\tassert.equal(parsed.end.steps.length, 1)\n\t\t\tassert.equal(parsed.start.terminal.offset, 1)\n\t\t\tassert.equal(parsed.end.terminal.offset, 4)\n\t\t})\n\t})\n\tdescribe(\"#toString()\", () => {\n\t\tit(\"should parse a cfi and write it back\", () => {\n\t\t\tconst cfi1 = \"epubcfi(/6/2[cover]!/6)\"\n\t\t\tconst cfi2 = \"epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\"\n\t\t\tconst cfi3 = \"epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\"\n\t\t\tassert.equal(new EpubCFI(cfi1).toString(), cfi1)\n\t\t\tassert.equal(new EpubCFI(cfi2).toString(), cfi2)\n\t\t\tassert.equal(new EpubCFI(cfi3).toString(), cfi3)\n\t\t})\n\t})\n\tdescribe(\"#checkType()\", () => {\n\t\tit(\"should determine the type as cfi string\", () => {\n\t\t\tassert.equal(EpubCFI.prototype.checkType(\"epubcfi(/6/2[cover]!/6)\"), \"string\")\n\t\t})\n\t\tit(\"should determine the type as EpubCFI instance\", () => {\n\t\t\tconst cfi = new EpubCFI(\"epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\")\n\t\t\tassert.equal(EpubCFI.prototype.checkType(cfi), \"EpubCFI\")\n\t\t})\n\t\tit(\"should determine the type as node\", () => {\n\t\t\tconst node = document.createElement(\"div\")\n\t\t\tassert.equal(EpubCFI.prototype.checkType(node), \"node\")\n\t\t})\n\t\tit(\"should determine the type as range\", () => {\n\t\t\tconst range = document.createRange()\n\t\t\tassert.equal(EpubCFI.prototype.checkType(range), \"range\")\n\t\t})\n\t\tit(\"should determine the type as undefined\", () => {\n\t\t\tassert.equal(EpubCFI.prototype.checkType(\"/6/2[cover]!/6\"), undefined)\n\t\t})\n\t})\n\tdescribe(\"#compare()\", () => {\n\t\tit(\"should compare CFIs\", () => {\n\t\t\tconst epubcfi = new EpubCFI()\n\t\t\t// Spines\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/4[cover]!/4)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4)\"\n\t\t\t), 1, \"First spine is greater\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/4[cover]!/4)\",\n\t\t\t\t\"epubcfi(/6/6[cover]!/4)\"\n\t\t\t), -1, \"Second spine is greater\")\n\t\t\t// First is deeper\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/8/2)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/6)\"\n\t\t\t), 1, \"First Element is after Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/2)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/6)\"\n\t\t\t), -1, \"First Element is before Second\")\n\t\t\t// Second is deeper\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/8/2)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/6/4/2/2)\"\n\t\t\t), 1, \"First Element is after Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/4)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/6/4/2/2)\"\n\t\t\t), -1, \"First Element is before Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/6)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/6/8/1:0)\"\n\t\t\t), -1, \"First is less specific, so is before Second\")\n\t\t\t// Same Depth\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/6/8)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/6/2)\"\n\t\t\t), 1, \"First Element is after Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/20)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/6/10)\"\n\t\t\t), -1, \"First Element is before Second\")\n\t\t\t// Text nodes\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/5)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/3)\"\n\t\t\t), 1, \"First TextNode is after Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/7)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/13)\"\n\t\t\t), -1, \"First TextNode is before Second\")\n\t\t\t// Char offset\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/5:1)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/5:0)\"\n\t\t\t), 1, \"First Char Offset after Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/5:2)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/5:30)\"\n\t\t\t), -1, \"Second Char Offset before Second\")\n\t\t\t// Normal example\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/8/5:1)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/6/15:2)\"\n\t\t\t), 1, \"First Element after Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/8/1:0)\",\n\t\t\t\t\"epubcfi(/6/2[cover]!/4/8/1:0)\"\n\t\t\t), 0, \"All Equal\")\n\t\t\t// Different Lengths\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/10/1:317)\",\n\t\t\t\t\"epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/10/2[page18]/1:0)\"\n\t\t\t), -1, \"First CFI is before Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/12/1:0)\",\n\t\t\t\t\"epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/12/2/1:9)\"\n\t\t\t), -1, \"First CFI is before Second\")\n\t\t\tassert.equal(epubcfi.compare(\n\t\t\t\t\"epubcfi(/6/16!/4/12/1:0)\",\n\t\t\t\t\"epubcfi(/6/16!/4/12/2/1:9)\"\n\t\t\t), -1, \"First CFI is before Second\")\n\t\t})\n\t})\n\tdescribe(\"#fromNode()\", () => {\n\t\tconst base = \"/6/4[chap01ref]\"\n\t\tit(\"should get a cfi from a p node\", () => {\n\t\t\tconst elm = doc2.getElementById(\"c001p0004\")\n\t\t\tconst cfi = new EpubCFI(elm, base)\n\t\t\tassert.equal(elm.nodeType, Node.ELEMENT_NODE, \"provided a element node\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004])\")\n\t\t})\n\t\tit(\"should get a cfi from a text node\", () => {\n\t\t\tconst elm = doc2.getElementById(\"c001p0004\")\n\t\t\tconst txt = elm.childNodes[0]\n\t\t\tconst cfi = new EpubCFI(txt, base)\n\t\t\tassert.equal(txt.nodeType, Node.TEXT_NODE, \"provided a text node\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004]/1)\")\n\t\t})\n\t\tit(\"should get a cfi from a text node inside a highlight\", () => {\n\t\t\tconst elm = doc2.getElementById(\"highlight-1\")\n\t\t\tconst txt = elm.childNodes[0]\n\t\t\tconst cfi = new EpubCFI(txt, base, \"annotator-hl\")\n\t\t\tassert.equal(txt.nodeType, Node.TEXT_NODE, \"provided a text node\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017]/1)\")\n\t\t})\n\t\tit(\"should get a cfi from a highlight node\", () => {\n\t\t\tconst txt = doc2.getElementById(\"highlight-1\")\n\t\t\tconst cfi = new EpubCFI(txt, base, \"annotator-hl\")\n\t\t\tassert.equal(txt.nodeType, Node.ELEMENT_NODE, \"provided a highlight node\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017])\")\n\t\t})\n\t})\n\tdescribe(\"#fromRange()\", () => {\n\t\tconst base = \"/6/4[chap01ref]\"\n\t\tit(\"should get a cfi from a collapsed range\", () => {\n\t\t\tconst t1 = doc1.getElementById(\"c001p0004\").childNodes[0]\n\t\t\tconst range = doc1.createRange()\n\t\t\trange.setStart(t1, 6)\n\t\t\tconst cfi = new EpubCFI(range, base)\n\t\t\tassert.equal(cfi.range, false)\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004]/1:6)\")\n\t\t})\n\t\tit(\"should get a cfi from a range\", () => {\n\t\t\tconst t1 = doc1.getElementById(\"c001p0004\").childNodes[0]\n\t\t\tconst t2 = doc1.getElementById(\"c001p0007\").childNodes[0]\n\t\t\tconst range = doc1.createRange()\n\t\t\trange.setStart(t1, 6)\n\t\t\trange.setEnd(t2, 27)\n\t\t\tconst cfi = new EpubCFI(range, base)\n\t\t\tassert.equal(cfi.range, true)\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2,/10/2[c001p0004]/1:6,/16/2[c001p0007]/1:27)\")\n\t\t})\n\t\tit(\"should get a cfi from a range with offset 0\", () => {\n\t\t\tconst t1 = doc1.getElementById(\"c001p0004\").childNodes[0]\n\t\t\tconst range = doc1.createRange()\n\t\t\trange.setStart(t1, 0)\n\t\t\trange.setEnd(t1, 1)\n\t\t\tconst cfi = new EpubCFI(range, base)\n\t\t\tassert.equal(cfi.range, true)\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004],/1:0,/1:1)\")\n\t\t})\n\t\tit(\"should get a cfi from a range inside a highlight\", () => {\n\t\t\tconst t1 = doc2.getElementById(\"highlight-1\").childNodes[0]\n\t\t\tconst range = doc2.createRange()\n\t\t\trange.setStart(t1, 6)\n\t\t\tconst cfi = new EpubCFI(range, base, \"annotator-hl\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017]/1:43)\")\n\t\t})\n\t\tit(\"should get a cfi from a range past a highlight\", () => {\n\t\t\tconst t1 = doc2.getElementById(\"c001s0001\").childNodes[1]\n\t\t\tconst range = doc2.createRange()\n\t\t\trange.setStart(t1, 25)\n\t\t\tconst cfi = new EpubCFI(range, base, \"annotator-hl\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/4/2[c001s0001]/1:41)\")\n\t\t}) // TODO: might need to have double ranges in front\n\t\tit(\"should get a cfi from a range in between two highlights\", () => {\n\t\t\tconst t1 = doc3.getElementById(\"p2\").childNodes[1]\n\t\t\tconst range = doc3.createRange()\n\t\t\trange.setStart(t1, 4)\n\t\t\tconst cfi = new EpubCFI(range, base, \"annotator-hl\")\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/4[p2]/1:123)\")\n\t\t})\n\t\tit(\"should correctly count text nodes, independent of any elements present in between\", () => {\n\t\t\tconst t1 = doc3.getElementById(\"p3\").childNodes[2]\n\t\t\tconst range = doc3.createRange()\n\t\t\trange.setStart(t1, 4)\n\t\t\tconst cfi = new EpubCFI(range, base)\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/6[p3]/3:4)\")\n\t\t})\n\t})\n\tdescribe(\"#toRange()\", () => {\n\t\tconst base = \"/6/4[chap01ref]\"\n\t\tconst ignoreClass = \"annotator-hl\"\n\t\tit(\"should get a range from a cfi\", () => {\n\t\t\tconst t1 = doc2.getElementById(\"c001p0004\").childNodes[0]\n\t\t\tconst ogRange = doc2.createRange()\n\t\t\togRange.setStart(t1, 6)\n\t\t\tconst cfi = new EpubCFI(ogRange, base)\n\t\t\t// Check it was parse correctly\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004]/1:6)\")\n\t\t\t// Check the range\n\t\t\tconst newRange = cfi.toRange(doc2)\n\t\t\tassert.equal(newRange.startContainer, t1)\n\t\t\tassert.equal(newRange.startOffset, 6)\n\t\t\tassert.equal(newRange.collapsed, true)\n\t\t})\n\t\tit(\"should get a range from a cfi with a range\", () => {\n\t\t\tconst t1 = doc2.getElementById(\"c001p0004\").childNodes[0]\n\t\t\tconst t2 = doc2.getElementById(\"c001p0007\").childNodes[0]\n\t\t\tconst ogRange = doc2.createRange()\n\t\t\togRange.setStart(t1, 6)\n\t\t\togRange.setEnd(t2, 27)\n\t\t\tconst cfi = new EpubCFI(ogRange, base)\n\t\t\t// Check it was parse correctly\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2,/10/2[c001p0004]/1:6,/16/2[c001p0007]/1:27)\")\n\t\t\t// Check the range\n\t\t\tconst newRange = cfi.toRange(doc2)\n\t\t\tassert.equal(newRange.startContainer, t1)\n\t\t\tassert.equal(newRange.startOffset, 6)\n\t\t\tassert.equal(newRange.endContainer, t2)\n\t\t\tassert.equal(newRange.endOffset, 27)\n\t\t\tassert.equal(newRange.collapsed, false)\n\t\t})\n\t\txit(\"should get a cfi from a range inside a highlight\", () => {\n\t\t\tconst t1 = doc2.getElementById(\"highlight-1\").childNodes[0]\n\t\t\tconst ogRange = doc2.createRange()\n\t\t\togRange.setStart(t1, 6)\n\t\t\tconst cfi = new EpubCFI(ogRange, base, ignoreClass)\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017]/1:43)\")\n\t\t\t// Check the range\n\t\t\tconst newRange = cfi.toRange(doc2, ignoreClass)\n\t\t\tassert.equal(newRange.startContainer, t1)\n\t\t\tassert.equal(newRange.startContainer.textContent, t1.textContent)\n\t\t\tassert.equal(newRange.startOffset, 6)\n\t\t\tassert.equal(newRange.collapsed, true)\n\t\t})\n\t\txit(\"should get a cfi from a range inside a highlight range\", () => {\n\t\t\tconst t1 = doc2.getElementById(\"highlight-2\").childNodes[0]\n\t\t\tconst t2 = doc2.getElementById(\"c001s0001\").childNodes[1]\n\t\t\tconst ogRange = doc2.createRange()\n\t\t\togRange.setStart(t1, 5)\n\t\t\togRange.setEnd(t2, 25)\n\t\t\tconst cfi = new EpubCFI(ogRange, base, ignoreClass)\n\t\t\tassert.equal(cfi.toString(), \"epubcfi(/6/4[chap01ref]!/4/2/4/2[c001s0001],/1:5,/1:41)\")\n\t\t\t// Check the range\n\t\t\tconst newRange = cfi.toRange(doc2, ignoreClass)\n\t\t\tassert.equal(newRange.startContainer, t1)\n\t\t\tassert.equal(newRange.startContainer.textContent, t1.textContent)\n\t\t\tassert.equal(newRange.startOffset, 5)\n\t\t\tassert.equal(newRange.endContainer, t2)\n\t\t\tassert.equal(newRange.endContainer.textContent, t2.textContent)\n\t\t\tassert.equal(newRange.endOffset, 25)\n\t\t\tassert.equal(newRange.collapsed, false)\n\t\t})\n\t})\n\tdescribe(\"#isCfiString()\", () => {\n\t\tit(\"should check if the string is wrapped using 'epubcfi()'\", () => {\n\t\t\tconst cfi = new EpubCFI()\n\t\t\tassert.equal(cfi.isCfiString(\"epubcfi(/6/4[chap01ref]!/4/2,/10/2[c001p0004]/1:6,/16/2[c001p0007]/1:27)\"), true)\n\t\t})\n\t})\n})","import assert from \"assert\"\nimport Book from \"../src/book\"\nimport Locations from \"../src/locations\"\n\ndescribe(\"Locations\", () => {\n\tlet book, rendition, sections = {}\n\tbefore(async () => {\n\t\tbook = new Book(\"../assets/alice/\")\n\t\tawait book.opened\n\t\trendition = book.renderTo(document.body)\n\t\tconst set = (index, section) => {\n\t\t\tsections[index] = {\n\t\t\t\tcfi: rendition.currentLocation().start.cfi,\n\t\t\t\tidx: section.index\n\t\t\t}\n\t\t}\n\t\tconst tasks = []\n\t\tfor (let i = 2; i < 13; ++i) {\n\t\t\ttasks.push(rendition.display(i).then((s) => set(i, s)))\n\t\t}\n\t\treturn Promise.all(tasks)\n\t})\n\tdescribe(\"#parse()\", () => {\n\t\tit(\"should parse locations from a document\", async () => {\n\t\t\tconst sec = book.section(sections[2].idx)\n\t\t\tconst lcs = new Locations()\n\t\t\tawait lcs.parse(sec.contents, sec.cfiBase, 549)\n\t\t\tconst loc = [...lcs.values()][0]\n\t\t\tassert.equal(lcs.size, 1)\n\t\t\tassert.equal(loc.cfi, \"epubcfi(/6/6!/4/2,/4[pgepubid00001]/1:0,/14/4/2/1:33)\")\n\t\t\tassert.equal(loc.index, 0)\n\t\t\tassert.equal(loc.percentage, 0)\n\t\t})\n\t})\n\tdescribe(\"#generate()\", () => {\n\t\tit(\"should generate locations\", async () => {\n\t\t\tawait book.locations.generate(549)\n\t\t\tassert.equal(book.locations.size, 101)\n\t\t})\n\t})\n\tdescribe(\"#set()\", () => {\n\t\tit(\"should set current location by EpubCFI\", async () => {\n\t\t\tconst locs = book.locations\n\t\t\tconst curr = book.locations.current\n\t\t\tlocs.set({ cfi: sections[3].cfi })\n\t\t\tassert.equal(curr.index, 1)\n\t\t\tassert.equal(curr.percentage, 0.01)\n\t\t\tlocs.set({ cfi: sections[4].cfi })\n\t\t\tassert.equal(curr.index, 14)\n\t\t\tassert.equal(curr.percentage, 0.14)\n\t\t\tlocs.set({ cfi: sections[5].cfi })\n\t\t\tassert.equal(curr.index, 25)\n\t\t\tassert.equal(curr.percentage, 0.25)\n\t\t\tlocs.set({ cfi: sections[6].cfi })\n\t\t\tassert.equal(curr.index, 36)\n\t\t\tassert.equal(curr.percentage, 0.36)\n\t\t\tlocs.set({ cfi: sections[7].cfi })\n\t\t\tassert.equal(curr.index, 50)\n\t\t\tassert.equal(curr.percentage, 0.50)\n\t\t\tlocs.set({ cfi: sections[8].cfi })\n\t\t\tassert.equal(curr.index, 61)\n\t\t\tassert.equal(curr.percentage, 0.61)\n\t\t\tlocs.set({ cfi: sections[9].cfi })\n\t\t\tassert.equal(curr.index, 71)\n\t\t\tassert.equal(curr.percentage, 0.71)\n\t\t\tlocs.set({ cfi: sections[10].cfi })\n\t\t\tassert.equal(curr.index, 77)\n\t\t\tassert.equal(curr.percentage, 0.77)\n\t\t\tlocs.set({ cfi: sections[11].cfi })\n\t\t\tassert.equal(curr.index, 89)\n\t\t\tassert.equal(curr.percentage, 0.89)\n\t\t\tlocs.set({ cfi: sections[12].cfi })\n\t\t\tassert.equal(curr.index, 95)\n\t\t\tassert.equal(curr.percentage, 0.95)\n\t\t})\n\t\tit(\"should set current location by index\", () => {\n\t\t\tconst locs = book.locations\n\t\t\tconst curr = book.locations.current\n\t\t\tconst keys = [...locs.keys()]\n\t\t\tlocs.on(\"changed\", (current, changed) => {\n\t\t\t\tif (changed.index) {\n\t\t\t\t\tassert.equal(current.cfi, keys[changed.index])\n\t\t\t\t\tassert.equal(current.index, changed.index)\n\t\t\t\t}\n\t\t\t})\n\t\t\tlocs.set({ index: 1 }) // section:3\n\t\t\tassert.equal(curr.percentage, 0.01)\n\t\t\tlocs.set({ index: 14 }) // section:4\n\t\t\tassert.equal(curr.percentage, 0.14)\n\t\t\tlocs.set({ index: 25 }) // section:5\n\t\t\tassert.equal(curr.percentage, 0.25)\n\t\t\tlocs.set({ index: 36 }) // section:6\n\t\t\tassert.equal(curr.percentage, 0.36)\n\t\t\tlocs.set({ index: 50 }) // section:7\n\t\t\tassert.equal(curr.percentage, 0.50)\n\t\t\tlocs.set({ index: 61 }) // section:8\n\t\t\tassert.equal(curr.percentage, 0.61)\n\t\t\tlocs.set({ index: 71 }) // section:9\n\t\t\tassert.equal(curr.percentage, 0.71)\n\t\t\tlocs.set({ index: 77 }) // section:10\n\t\t\tassert.equal(curr.percentage, 0.77)\n\t\t\tlocs.set({ index: 89 }) // section:11\n\t\t\tassert.equal(curr.percentage, 0.89)\n\t\t\tlocs.set({ index: 95 }) // section:12\n\t\t\tassert.equal(curr.percentage, 0.95)\n\t\t})\n\t\tit(\"should set current location by percentage\", () => {\n\t\t\tconst locs = book.locations\n\t\t\tconst curr = book.locations.current\n\t\t\tconst keys = [...locs.keys()]\n\t\t\tlocs.on(\"changed\", (current, changed) => {\n\t\t\t\tif (changed.percentage) {\n\t\t\t\t\tassert.equal(current.cfi, keys[current.index])\n\t\t\t\t\tassert.equal(current.percentage, changed.percentage)\n\t\t\t\t}\n\t\t\t})\n\t\t\tlocs.set({ percentage: 0.01 }) // section:3\n\t\t\tassert.equal(curr.index, 1)\n\t\t\tlocs.set({ percentage: 0.14 }) // section:4\n\t\t\tassert.equal(curr.index, 14)\n\t\t\tlocs.set({ percentage: 0.25 }) // section:5\n\t\t\tassert.equal(curr.index, 25)\n\t\t\tlocs.set({ percentage: 0.36 }) // section:6\n\t\t\tassert.equal(curr.index, 36)\n\t\t\tlocs.set({ percentage: 0.50 }) // section:7\n\t\t\tassert.equal(curr.index, 50)\n\t\t\tlocs.set({ percentage: 0.61 }) // section:8\n\t\t\tassert.equal(curr.index, 61)\n\t\t\tlocs.set({ percentage: 0.71 }) // section:9\n\t\t\tassert.equal(curr.index, 71)\n\t\t\tlocs.set({ percentage: 0.77 }) // section:10\n\t\t\tassert.equal(curr.index, 77)\n\t\t\tlocs.set({ percentage: 0.89 }) // section:11\n\t\t\tassert.equal(curr.index, 89)\n\t\t\tlocs.set({ percentage: 0.95 }) // section:12\n\t\t\tassert.equal(curr.index, 95)\n\t\t})\n\t})\n\tdescribe(\"#cfiFromPercentage()\", () => {\n\t\tit(\"should get EpubCFI from percentage\", () => {\n\t\t\tconst locs = book.locations\n\t\t\tconst keys = [...locs.keys()]\n\t\t\tkeys.forEach((key, index) => {\n\t\t\t\tconst percentage = index / (locs.size - 1)\n\t\t\t\tassert.equal(key, locs.cfiFromPercentage(percentage))\n\t\t\t})\n\t\t})\n\t})\n\tdescribe(\"#clear()\", () => {\n\t\tit(\"should clear locations\", () => {\n\t\t\tbook.locations.clear()\n\t\t\tassert.equal(book.locations.size, 0)\n\t\t})\n\t})\n\tafter(() => {\n\t\tbook.destroy()\n\t\tbook = undefined\n\t\trendition = undefined\n\t\tsections = undefined\n\t})\n})","import assert from \"assert\"\nimport Navigation from \"../src/navigation\"\nimport request from \"../src/utils/request\"\n\ndescribe(\"Navigation\", () => {\n    const items = {}\n    before(async () => {\n        const tasks = []\n        const task = async (index, path) => {\n            return request(path).then((doc) => {\n                items[index] = {\n                    nav: new Navigation(),\n                    doc\n                }\n            })\n        }\n        tasks.push(task(0, \"../assets/alice/OPS/nav.xhtml\"))\n        tasks.push(task(1, \"../assets/alice/OPS/nav.ncx\"))\n        tasks.push(task(2, \"../assets/alice/OPS/nav.json\"))\n        return Promise.all(tasks)\n    })\n    describe(\"#parse()\", () => {\n        it(\"should parse navigation from nav.xhtml document\", async () => {\n            const nav = items[0].nav\n            const doc = items[0].doc\n            await nav.parse(doc)\n            assert.equal(nav.landmarks.size, 1)\n            assert.equal(nav.pageList.length, 48)\n            assert.equal(nav.toc.links.size, 11)\n        })\n        it(\"should parse navigation from nav.ncx document\", async () => {\n            const nav = items[1].nav\n            const doc = items[1].doc\n            await nav.parse(doc)\n            assert.equal(nav.pageList.length, 48)\n            assert.equal(nav.toc.links.size, 11)\n        })\n        it(\"should load navigation from nav.json object\", async () => {\n            const nav = items[2].nav\n            const doc = items[2].doc\n            await nav.load(doc)\n            assert.equal(nav.landmarks.size, 1)\n            assert.equal(nav.pageList.length, 48)\n            assert.equal(nav.toc.links.size, 11)\n        })\n    })\n    describe(\"#clear()\", () => {\n        it(\"should clear navigation parts\", () => {\n            const nav = items[0].nav\n            nav.clear()\n            assert.equal(nav.landmarks.size, 0)\n            assert.equal(nav.pageList.length, 0)\n            assert.equal(nav.toc.length, 0)\n        })\n    })\n    after(() => {\n        const len = items.length\n        for (let i = 0; i < len; ++i) {\n            items[i].doc = undefined\n            items[i].nav.destroy()\n            delete items[i]\n        }\n    })\n})","import assert from \"assert\"\nimport request from \"../src/utils/request\"\nimport Packaging from \"../src/packaging\"\n\ndescribe(\"Packaging\", () => {\n    let pkg1, pkg2\n    before(async () => {\n        pkg1 = await request(\"../assets/alice/OPS/package.opf\", null)\n        pkg2 = await request(\"../assets/alice/OPS/package.json\", \"json\")\n    })\n    describe(\"#parse()\", () => {\n        it (\"should parse package.opf from document\", async () => {\n            const packaging = new Packaging()\n            await packaging.parse(pkg1)\n            assert.equal(packaging.version, \"3.0\")\n            assert.equal(packaging.metadata.size, 9)\n            assert.equal(packaging.manifest.size, 42)\n            assert.equal(packaging.spine.size, 13)\n        })\n    })\n    describe(\"#load()\", () => {\n        it (\"should load package.json from object\", async () => {\n            const packaging = new Packaging()\n            await packaging.load(pkg2)\n            assert.equal(packaging.version, \"3.0\")\n            assert.equal(packaging.metadata.size, 9)\n            assert.equal(packaging.manifest.size, 42)\n            assert.equal(packaging.spine.size, 13)\n        })\n    })\n    after(() => {\n        pkg1 = undefined\n        pkg2 = undefined\n    })\n})","import assert from \"assert\"\nimport Path from \"../src/utils/path\"\n\ndescribe(\"Path\", () => {\n    describe(\"#constructor()\", () => {\n        it(\"should init object properties from path\", () => {\n            const path = new Path(\"/fred/chasen/derf.html\")\n            assert.equal(path.path, \"/fred/chasen/derf.html\")\n            assert.equal(path.directory, \"/fred/chasen/\")\n            assert.equal(path.extension, \"html\")\n            assert.equal(path.filename, \"derf.html\")\n        })\n        it(\"should init object properties from url\", () => {\n            const path = new Path(\"http://example.com/fred/chasen/derf.html\")\n            assert.equal(path.path, \"/fred/chasen/derf.html\")\n            assert.equal(path.directory, \"/fred/chasen/\")\n            assert.equal(path.extension, \"html\")\n            assert.equal(path.filename, \"derf.html\")\n        })\n    })\n    describe(\"#dirname()\", () => {\n        it(\"should get directory from path\", () => {\n            const path = Path.prototype.dirname(\"/fred/chasen/derf.html\")\n            assert.equal(path, \"/fred/chasen/\")\n        })\n        it(\"should get directory from relative path\", () => {\n            const path = Path.prototype.dirname(\"fred/chasen/derf.html\")\n            assert.equal(path, \"fred/chasen/\")\n        })\n    })\n    describe(\"#parse()\", () => {\n        it(\"should parse a path\", () => {\n            const path = Path.prototype.parse(\"/fred/chasen/derf.html\")\n            assert.equal(path.dir, \"/fred/chasen\")\n            assert.equal(path.ext, \".html\")\n            assert.equal(path.base, \"derf.html\")\n            assert.equal(path.name, \"derf\")\n        })\n        it(\"should parse a relative path\", () => {\n            const path = Path.prototype.parse(\"fred/chasen/derf.html\")\n            assert.equal(path.dir, \"fred/chasen\")\n            assert.equal(path.ext, \".html\")\n            assert.equal(path.base, \"derf.html\")\n            assert.equal(path.name, \"derf\")\n        })\n    })\n    describe(\"#isDirectory()\", () => {\n        it(\"should recognize a directory\", () => {\n            const isDir = Path.prototype.isDirectory\n            assert.equal(isDir(\"fred/chasen\"), false)\n            assert.equal(isDir(\"fred/chasen/\"), true)\n            assert.equal(isDir(\"/fred/chasen\"), false)\n            assert.equal(isDir(\"/fred/chasen/\"), true)\n            assert.equal(isDir(\"/fred/chasen/derf.html\"), false)\n        })\n    })\n    describe(\"#resolve()\", () => {\n        it(\"should resolve a path\", () => {\n            const a = Path.prototype.dirname(\"/fred/chasen/index.html\")\n            const b = \"derf.html\"\n            const resolved = Path.prototype.resolve(a, b)\n            assert.equal(resolved, \"/fred/chasen/derf.html\")\n        })\n        it(\"should resolve a relative path\", () => {\n            const a = Path.prototype.dirname(\"fred/chasen/index.html\")\n            const b = \"derf.html\"\n            const resolved = Path.prototype.resolve(a, b)\n            assert.equal(resolved, \"/fred/chasen/derf.html\")\n        })\n        it(\"should resolve a level up\", () => {\n            const a = Path.prototype.dirname(\"/fred/chasen/index.html\")\n            const b = \"../derf.html\"\n            const resolved = Path.prototype.resolve(a, b)\n            assert.equal(resolved, \"/fred/derf.html\")\n        })\n    })\n    describe(\"#relative()\", () => {\n        it(\"should find a relative path at the same level\", () => {\n            const a = Path.prototype.dirname(\"/fred/chasen/index.html\")\n            const b = \"/fred/chasen/derf.html\"\n            const relative = Path.prototype.relative(a, b)\n            assert.equal(relative, \"derf.html\")\n        })\n        it(\"should find a relative path down a level\", () => {\n            const a = Path.prototype.dirname(\"/fred/chasen/index.html\")\n            const b = \"/fred/chasen/ops/derf.html\"\n            const relative = Path.prototype.relative(a, b)\n            assert.equal(relative, \"ops/derf.html\")\n        })\n        it(\"should resolve a level up\", () => {\n            const a = Path.prototype.dirname(\"/fred/chasen/index.html\")\n            const b = \"/fred/derf.html\"\n            const relative = Path.prototype.relative(a, b)\n            assert.equal(relative, \"../derf.html\")\n        })\n    })\n})","import assert from \"assert\"\nimport Book from \"../src/book\"\n\nconst url = () => /epub-js/.test(location.href) ? \"/epub-js\" : \"\"\n\ndescribe(\"Rendition\", () => {\n    let book, rendition\n    before(async () => {\n        book = new Book(\"../assets/handbook/\")\n        await book.opened\n        rendition = book.renderTo(document.body, {\n            width: \"100%\",\n\t\t\theight: \"100%\"\n        })\n    })\n    describe(\"#display()\", () => {\n        it(\"should be displayed by default\", async () => {\n            const section = await rendition.display()\n            assert.equal(section.index, 0)\n            assert.equal(section.idref, \"s0\")\n            assert.equal(section.href, \"xhtml/nav.xhtml\")\n            assert.equal(section.url, `${url()}/assets/handbook/EPUB/xhtml/nav.xhtml`)\n        })\n        it(\"should be displayed by index\", async () => {\n            const section = await rendition.display(2)\n            assert.equal(section.index, 2)\n            assert.equal(section.idref, \"s2\")\n            assert.equal(section.href, \"xhtml/mathml.xhtml\")\n            assert.equal(section.url, `${url()}/assets/handbook/EPUB/xhtml/mathml.xhtml`)\n        })\n        it(\"should be displayed by idref\", async () => {\n            const section = await rendition.display(\"#s2\")\n            assert.equal(section.index, 2)\n            assert.equal(section.idref, \"s2\")\n            assert.equal(section.href, \"xhtml/mathml.xhtml\")\n            assert.equal(section.url, `${url()}/assets/handbook/EPUB/xhtml/mathml.xhtml`)\n        })\n        it(\"should be displayed by href\", async () => {\n            const section = await rendition.display(\"xhtml/mathml.xhtml\")\n            assert.equal(section.index, 2)\n            assert.equal(section.idref, \"s2\")\n            assert.equal(section.href, \"xhtml/mathml.xhtml\")\n            assert.equal(section.url, `${url()}/assets/handbook/EPUB/xhtml/mathml.xhtml`)\n        })\n        it(\"should be displayed by EpubCFI\", async () => {\n            const section = await rendition.display(\"epubcfi(/6/6!/4/2[mathml]/2/1:0)\")\n            assert.equal(section.index, 2)\n            assert.equal(section.idref, \"s2\")\n            assert.equal(section.href, \"xhtml/mathml.xhtml\")\n            assert.equal(section.url, `${url()}/assets/handbook/EPUB/xhtml/mathml.xhtml`)\n        })\n    })\n    after(() => {\n        book.destroy()\n        book = undefined\n        rendition = undefined\n    })\n})","import assert from \"assert\"\nimport Book from \"../src/book\"\n\nconst url = () => /epub-js/.test(location.href) ? \"/epub-js\" : \"\"\n\ndescribe(\"Section\", () => {\n    let book, section1, section2\n    before(async () => {\n        book = new Book(\"../assets/alice/\")\n        await book.opened\n        section1 = book.section(\"chapter_001.xhtml\")\n        section2 = book.section(\"chapter_010.xhtml\")\n    })\n    describe(\"#load()\", () => {\n        it(\"should load section #001\", async () => {\n            assert.equal(section1.idref, \"chapter_001\")\n            assert.equal(section1.linear, true)\n            assert.equal(section1.index, 3)\n            assert.equal(section1.href, \"chapter_001.xhtml\")\n            assert.equal(section1.url, `${url()}/assets/alice/OPS/chapter_001.xhtml`)\n            assert.equal(section1.cfiBase, \"/6/8\")\n            await section1.load(book.request)\n            assert.equal(section1.document instanceof Document, true)\n            assert.equal(section1.contents instanceof Element, true)\n        })\n        it(\"should load section #010\", async () => {\n            assert.equal(section2.idref, \"chapter_010\")\n            assert.equal(section2.linear, true)\n            assert.equal(section2.index, 12)\n            assert.equal(section2.href, \"chapter_010.xhtml\")\n            assert.equal(section2.url, `${url()}/assets/alice/OPS/chapter_010.xhtml`)\n            assert.equal(section2.cfiBase, \"/6/26\")\n            await section2.load(book.request)\n            assert.equal(section2.document instanceof Document, true)\n            assert.equal(section2.contents instanceof Element, true)\n        })\n    })\n    describe(\"#render()\", () => {\n        it(\"should render section #001\", async () => {\n            await section1.render(book.request)\n            assert.equal(typeof section1.output === \"string\", true)\n        })\n        it(\"should render section #010\", async () => {\n            await section2.render(book.request)\n            assert.equal(typeof section2.output === \"string\", true)\n        })\n    })\n    describe(\"#find()\", () => {\n        it(\"should finds a single result in a section\", () => {\n            const pattern = \"they were filled with cupboards and book-shelves\"\n            const results = section1.find(pattern)\n            assert.equal(results.length, 1)\n            assert.equal(results[0].cfi, \"epubcfi(/6/8!/4/2/16,/1:275,/1:323)\")\n            assert.equal(results[0].excerpt, \"... see anything; then she looked at the sides of the well and\\n\\t\\tnoticed that they were filled with cupboards and book-shelves; here and there she saw\\n\\t\\t...\")\n        })\n        it(\"should finds multiple results in a section\", () => {\n            const pattern = \"white rabbit\"\n            const results = section1.find(pattern)\n            assert.equal(results.length, 2)\n            assert.equal(results[0].cfi, \"epubcfi(/6/8!/4/2/8,/1:240,/1:252)\")\n            assert.equal(results[0].excerpt, \"...e worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her....\")\n            assert.equal(results[1].cfi, \"epubcfi(/6/8!/4/2/20,/1:148,/1:160)\")\n            assert.equal(results[1].excerpt, \"...ut it was\\n\\t\\tall dark overhead; before her was another long passage and the White Rabbit was still\\n\\t\\tin sight, hurrying down it. There was not a moment...\")\n        })\n    })\n    describe(\"#search()\", () => {\n        it(\"should finds a single result in a section\", () => {\n            const pattern = \"they were filled with cupboards and book-shelves\"\n            const results = section1.search(pattern)\n            assert.equal(results.length, 1)\n            assert.equal(results[0].cfi, \"epubcfi(/6/8!/4/2/16,/1:275,/1:323)\")\n            assert.equal(results[0].excerpt, \"... see anything; then she looked at the sides of the well and\\n\\t\\tnoticed that they were filled with cupboards and book-shelves; here and there she saw\\n\\t\\t...\")\n        })\n        it(\"should finds multiple results in a section\", () => {\n            const pattern = \"white rabbit\"\n            const results = section1.search(pattern)\n            assert.equal(results.length, 2)\n            assert.equal(results[0].cfi, \"epubcfi(/6/8!/4/2/8,/1:240,/1:252)\")\n            assert.equal(results[0].excerpt, \"...e worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her....\")\n            assert.equal(results[1].cfi, \"epubcfi(/6/8!/4/2/20,/1:148,/1:160)\")\n            assert.equal(results[1].excerpt, \"...ut it was\\n\\t\\tall dark overhead; before her was another long passage and the White Rabbit was still\\n\\t\\tin sight, hurrying down it. There was not a moment...\")\n        })\n        it(\"should finds result that spanning multiple document nodes, tag at ending\", () => {\n            const pattern = \"I beg\"\n            const results = section2.search(pattern)\n            assert.equal(results.length, 1)\n            assert.equal(results[0].cfi, \"epubcfi(/6/26!/4/2/6,/1:5,/2/1:3)\")\n            assert.equal(results[0].excerpt, \"\\\"Oh, I beg\")\n        })\n        it(\"should finds result that spanning multiple document nodes, tag at middle\", () => {\n            const pattern = \"I beg your pardon\"\n            const results = section2.search(pattern)\n            assert.equal(results.length, 1)\n            assert.equal(results[0].cfi, \"epubcfi(/6/26!/4/2/6,/1:5,/3:12)\")\n            assert.equal(results[0].excerpt, \"\\\"Oh, I beg your pardon!\\\" she exclaimed in a tone of great dismay.\")\n        })\n    })\n    after(() => {\n        book.destroy()\n        book = undefined\n        section1 = undefined\n        section2 = undefined\n    })\n})","import assert from \"assert\"\nimport Book from \"../src/book\"\n\ndescribe(\"Sections\", () => {\n    let book\n    before(async () => {\n        book = new Book(\"../assets/alice/\")\n        await book.opened\n    })\n    describe(\"#get()\", () => {\n        it(\"should get default section\", () => {\n            const section = book.sections.get()\n            assert.equal(section.idref, \"titlepage\")\n            assert.equal(section.linear, true)\n            assert.equal(section.index, 2)\n            assert.equal(section.href, \"titlepage.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/titlepage.xhtml\")\n            assert.equal(section.cfiBase, \"/6/6\")\n        })\n        it(\"should get section from index\", () => {\n            const section = book.sections.get(1)\n            assert.equal(section.idref, \"nav\")\n            assert.equal(section.linear, false)\n            assert.equal(section.index, 1)\n            assert.equal(section.href, \"nav.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/nav.xhtml\")\n            assert.equal(section.cfiBase, \"/6/4\")\n        })\n        it(\"should get section from id\", () => {\n            const section = book.sections.get(\"#chapter_010\")\n            assert.equal(section.idref, \"chapter_010\")\n            assert.equal(section.linear, true)\n            assert.equal(section.index, 12)\n            assert.equal(section.href, \"chapter_010.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/chapter_010.xhtml\")\n            assert.equal(section.cfiBase, \"/6/26\")\n        })\n        it(\"should get section from href\", () => {\n            const section = book.sections.get(\"chapter_001.xhtml\")\n            assert.equal(section.idref, \"chapter_001\")\n            assert.equal(section.linear, true)\n            assert.equal(section.index, 3)\n            assert.equal(section.href, \"chapter_001.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/chapter_001.xhtml\")\n            assert.equal(section.cfiBase, \"/6/8\")\n        })\n        it(\"should get section from epubcfi\", () => {\n            const section = book.sections.get(\"epubcfi(/6/8!/4/2/16/1:0)\")\n            assert.equal(section.idref, \"chapter_001\")\n            assert.equal(section.linear, true)\n            assert.equal(section.index, 3)\n            assert.equal(section.href, \"chapter_001.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/chapter_001.xhtml\")\n            assert.equal(section.cfiBase, \"/6/8\")\n        })\n    })\n    describe(\"#first()\", () => {\n        it(\"should get first section\", () => {\n            const section = book.sections.first()\n            assert.equal(section.idref, \"titlepage\")\n            assert.equal(section.linear, true)\n            assert.equal(section.index, 2)\n            assert.equal(section.href, \"titlepage.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/titlepage.xhtml\")\n            assert.equal(section.cfiBase, \"/6/6\")\n        })\n    })\n    describe(\"#last()\", () => {\n        it(\"should get last section\", () => {\n            const section = book.sections.last()\n            assert.equal(section.idref, \"chapter_010\")\n            assert.equal(section.linear, true)\n            assert.equal(section.index, 12)\n            assert.equal(section.href, \"chapter_010.xhtml\")\n            assert.equal(section.url, \"/assets/alice/OPS/chapter_010.xhtml\")\n            assert.equal(section.cfiBase, \"/6/26\")\n        })\n    })\n    after(() => {\n        book.destroy()\n        book = undefined\n    })\n})","import assert from \"assert\"\nimport Book from \"../src/book\"\n\nconst url = () => `${location.href.replace(\"/test/\", \"\")}/examples/themes.css`\n\ndescribe(\"Themes\", () => {\n    let book, rendition, theme\n    before(async () => {\n        book = new Book(\"../assets/alice/\")\n        rendition = book.renderTo(document.body, {\n            spread: \"none\"\n        })\n        await book.opened\n        await rendition.display()\n    })\n    describe(\"#register()\", () => {\n        it(\"should register a theme by url\", async () => {\n            rendition.themes.register(\"light\", url())\n            await rendition.hooks.content\n            theme = rendition.themes.get(\"light\")\n            assert.equal(theme.url, url())\n            rendition.themes.register(\"dark\", url())\n            await rendition.hooks.content\n            theme = rendition.themes.get(\"dark\")\n            assert.equal(theme.url, url())\n            rendition.themes.clear()\n            assert.equal(rendition.themes.size, 0)\n        })\n        it(\"should register a theme by rules\", async () => {\n            rendition.themes.register(\"light\", { background: \"#fff\", color: \"#000\" })\n            await rendition.hooks.content\n            theme = rendition.themes.get(\"light\")\n            assert.equal(theme.rules.background, \"#fff\")\n            assert.equal(theme.rules.color, \"#000\")\n            rendition.themes.register(\"dark\", { background: \"#000\", color: \"#fff\" })\n            await rendition.hooks.content\n            theme = rendition.themes.get(\"dark\")\n            assert.equal(theme.rules.background, \"#000\")\n            assert.equal(theme.rules.color, \"#fff\")\n            rendition.themes.clear()\n            assert.equal(rendition.themes.size, 0)\n        })\n        it(\"should register a themes from object with rules\", async () => {\n            rendition.themes.register({\n                light: {\n                    body: {\n                        background: \"#fff\",\n                        color: \"#000\"\n                    }\n                },\n                dark: {\n                    body: {\n                        background: \"#000\",\n                        color: \"#fff\"\n                    }\n                }\n            })\n            await rendition.hooks.content\n            theme = rendition.themes.get(\"light\")\n            assert.equal(theme.rules.body.background, \"#fff\")\n            assert.equal(theme.rules.body.color, \"#000\")\n            theme = rendition.themes.get(\"dark\")\n            assert.equal(theme.rules.body.background, \"#000\")\n            assert.equal(theme.rules.body.color, \"#fff\")\n            rendition.themes.clear()\n            assert.equal(rendition.themes.size, 0)\n        })\n        it(\"should register a themes from object with urls\", async () => {\n            rendition.themes.register({\n                light: url(),\n                dark: url()\n            })\n            await rendition.hooks.content\n            theme = rendition.themes.get(\"light\")\n            assert.equal(theme.url, url())\n            theme = rendition.themes.get(\"dark\")\n            assert.equal(theme.url, url())\n        })\n    })\n    describe(\"#select()\", () => {\n        it (\"switching theme using select method\", async () => {\n            rendition.themes.on(\"selected\", (key, theme) => {\n                if (key === null) {\n                    assert.equal(theme.injected, false)\n                } else {\n                    assert.equal(theme.injected, true)\n                }\n            })\n            rendition.themes.select(\"light\")\n            await rendition.hooks.content\n            assert.equal(rendition.themes.current, \"light\")\n            rendition.themes.select(\"dark\")\n            await rendition.hooks.content\n            assert.equal(rendition.themes.current, \"dark\")\n            rendition.themes.select(null)\n            assert.equal(rendition.themes.current, null)\n        })\n    })\n    describe(\"#appendRule()\", () => {\n        it(\"should inject css rule into contents\", () => {\n            rendition.themes.appendRule(\"font-size\", \"100%\")\n            const rule = rendition.themes.rules[\"font-size\"]\n            assert.equal(rule.value, \"100%\")\n        })\n    })\n    describe(\"#removeRule()\", () => {\n        it(\"should reject css rule into contents\", () => {\n            rendition.themes.removeRule(\"font-size\")\n            const rule = rendition.themes.rules[\"font-size\"]\n            assert.equal(rule, undefined)\n        })\n    })\n    describe(\"#clear()\", () => {\n        it(\"should clear all themes\", async () => {\n            rendition.themes.clear()\n            await rendition.hooks.content\n            assert.equal(rendition.themes.size, 0)\n        })\n    })\n    after(() => {\n        book.destroy()\n        book = undefined\n        rendition = undefined\n        theme = undefined\n    })\n})","import assert from \"assert\"\nimport Url from \"../src/utils/url\"\n\ndescribe(\"Url\", () => {\n    describe(\"#constructor()\", () => {\n        it(\"should init object properties from url\", () => {\n            const url = new Url(\"http://example.com/fred/chasen/derf.html\")\n            assert.equal(url.href, \"http://example.com/fred/chasen/derf.html\")\n            assert.equal(url.directory, \"/fred/chasen/\")\n            assert.equal(url.extension, \"html\")\n            assert.equal(url.filename, \"derf.html\")\n            assert.equal(url.origin, \"http://example.com\")\n            assert.equal(url.protocol, \"http:\")\n            assert.equal(url.search, \"\")\n        })\n    })\n    describe(\"#resolve()\", () => {\n        it(\"should join subfolders\", () => {\n            const a = \"http://example.com/fred/chasen/\"\n            const b = \"ops/derf.html\"\n            const resolved = new Url(a).resolve(b)\n            assert.equal(resolved, \"http://example.com/fred/chasen/ops/derf.html\")\n        })\n        it(\"should resolve up a level\", () => {\n            const a = \"http://example.com/fred/chasen/index.html\"\n            const b = \"../derf.html\"\n            const resolved = new Url(a).resolve(b)\n            assert.equal(resolved, \"http://example.com/fred/derf.html\")\n        })\n        it(\"should resolve absolute\", () => {\n            const a = \"http://example.com/fred/chasen/index.html\"\n            const b = \"/derf.html\"\n            const resolved = new Url(a).resolve(b)\n            assert.equal(resolved, \"http://example.com/derf.html\")\n        })\n        it(\"should resolve with search strings\", () => {\n            const a = \"http://example.com/fred/chasen/index.html?debug=true\"\n            const b = \"/derf.html\"\n            const resolved = new Url(a).resolve(b)\n            assert.equal(resolved, \"http://example.com/derf.html\")\n        })\n        // it(\"should handle directory with a dot\", () => {\n        // \tconst a = \"http://example.com/fred/chasen/index.epub/\"\n        // \tconst url = new Url(a)\n        // \tassert.equal(url.directory, \"/fred/chasen/index.epub/\")\n        // \tassert.equal(url.extension, \"\")\n        // }) // Doesn't work with path.parse\n        it(\"should handle file urls\", () => {\n            const directory = \"/var/mobile/Containers/Data/Application/F47E4434-9B98-4654-93F1-702336B08EE6/Documents/books/moby-dick/\"\n            const href = \"file://\" + directory + \"derf.html\"\n            const url = new Url(href)\n            assert.equal(url.href, href)\n            assert.equal(url.directory, directory)\n            assert.equal(url.extension, \"html\")\n            assert.equal(url.filename, \"derf.html\")\n            assert.equal(url.origin, \"file://\") // origin should be blank\n            assert.equal(url.protocol, \"file:\")\n            assert.equal(url.search, \"\")\n        })\n        it(\"should resolve with file urls\", () => {\n            const a = \"file:///var/mobile/Containers/Data/Application/books/\"\n            const b = \"derf.html\"\n            const resolved = new Url(a).resolve(b)\n            assert.equal(resolved, \"file:///var/mobile/Containers/Data/Application/books/derf.html\")\n        })\n    })\n})"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__6838__","__WEBPACK_EXTERNAL_MODULE__6361__","_typeof","o","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","input","prim","toPrimitive","undefined","res","call","hint","TypeError","String","_toPrimitive","_createClass","Constructor","protoProps","staticProps","isDeepEqual","isDeepStrictEqual","_require$codes","codes","ERR_AMBIGUOUS_ARGUMENT","ERR_INVALID_ARG_TYPE","ERR_INVALID_ARG_VALUE","ERR_INVALID_RETURN_VALUE","ERR_MISSING_ARGS","AssertionError","inspect","_require$types","isPromise","isRegExp","objectAssign","objectIs","RegExpPrototypeTest","lazyLoadComparison","comparison","Map","warned","assert","ok","NO_EXCEPTION_SENTINEL","innerFail","obj","message","Error","innerOk","fn","argLen","value","generatedMessage","err","actual","expected","operator","stackStartFn","_len","arguments","args","Array","_key","apply","concat","fail","internalMessage","argsLen","process","emitWarning","console","warn","bind","errArgs","equal","notEqual","deepEqual","notDeepEqual","deepStrictEqual","notDeepStrictEqual","strictEqual","notStrictEqual","Comparison","keys","_this","this","instance","_classCallCheck","forEach","expectedException","msg","name","push","a","b","compareExceptionKey","isPrototypeOf","getActual","e","checkIsPromise","then","catch","waitForActual","promiseFn","Promise","resolve","resultPromise","expectsError","error","details","fnType","expectsNoError","internalMatch","string","regexp","fnName","match","strict","_len6","_key6","throws","_len2","_key2","rejects","_len3","_key3","result","doesNotThrow","_len4","_key4","doesNotReject","_len5","_key5","ifError","newErr","origStack","stack","tmp2","split","shift","tmp1","pos","indexOf","slice","join","doesNotMatch","ownKeys","r","t","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","_toPropertyKey","getOwnPropertyDescriptors","defineProperties","arg","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Function","toString","has","get","set","Wrapper","_construct","_getPrototypeOf","create","_setPrototypeOf","Parent","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","p","setPrototypeOf","__proto__","getPrototypeOf","endsWith","str","search","this_len","substring","blue","green","red","white","kReadableOperator","strictEqualObject","notStrictEqualObject","notIdentical","copyError","source","inspectValue","val","compact","customInspect","depth","maxArrayLength","Infinity","showHidden","breakLength","showProxy","sorted","getters","_Error","_inspect$custom","subClass","superClass","_inherits","Derived","hasNativeReflectConstruct","_super","Super","NewTarget","options","limit","stackTraceLimit","stderr","isTTY","getColorDepth","other","lastPos","end","skipped","actualInspected","actualLines","expectedLines","indicator","inputLength","columns","count","Math","floor","maxCount","log","repeat","pop","maxLines","max","_actualLines","printedLines","skippedMsg","cur","expectedLine","actualLine","divergingLines","createErrDiff","base","_res","knownOperators","code","captureStackTrace","recurseTimes","ctx","custom","util","createErrorType","Base","NodeError","_Base","arg1","arg2","arg3","getMessage","oneOf","thing","isArray","len","map","determiner","start","substr","replace","type","reason","inspected","RangeError","_slicedToArray","arr","_arrayWithHoles","l","n","u","f","next","done","return","_iterableToArrayLimit","minLen","_arrayLikeToArray","from","test","_unsupportedIterableToArray","_nonIterableRest","arr2","regexFlagsSupported","flags","arrayFromSet","array","arrayFromMap","is","objectGetOwnPropertySymbols","numberIsNaN","Number","isNaN","uncurryThis","hasOwnProperty","propertyIsEnumerable","objectToString","isAnyArrayBuffer","isArrayBufferView","isDate","isMap","isSet","isNativeError","isBoxedPrimitive","isNumberObject","isStringObject","isBooleanObject","isBigIntObject","isSymbolObject","isFloat32Array","isFloat64Array","isNonIndex","charCodeAt","pow","getOwnNonIndexProperties","compare","x","y","min","innerDeepEqual","val1","val2","memos","buf1","buf2","val1Tag","keys1","keys2","keyCheck","Date","getTime","RegExp","byteLength","Uint8Array","buffer","byteOffset","areSimilarTypedArrays","offset","areSimilarFloatArrays","_keys","_keys2","size","BigInt","isEqualBoxedPrimitive","getEnumerables","k","iterationType","aKeys","bKeys","symbolKeysA","symbolKeysB","_symbolKeysB","position","val2MemoA","val2MemoB","areEq","memo","aValues","Set","add","setMightHaveLoosePrim","bValues","_i","_val","setHasEqualElement","setEquiv","aEntries","_aEntries$i","item1","item2","mapMightHaveLoosePrim","bEntries","_i2","_bEntries$_i","item","mapHasEqualEntry","mapEquiv","keysA","objEquiv","delete","setValues","findLooseMatchingPrimitives","altValue","curB","key1","key2","Annotation","cfiRange","data","cb","className","styles","sectionIndex","EpubCFI","spinePos","mark","update","attach","view","highlight","underline","emit","EVENTS","ANNOTATION","ATTACH","detach","unhighlight","ununderline","DETACH","text","EventEmitter","Annotations","rendition","super","hooks","render","register","inject","unloaded","reject","append","encodeURI","annotation","views","index","section","remove","note","show","hide","Archive","Input","createInstance","JSZip","open","encoding","loadAsync","base64","openUrl","zipUrl","isBase64","request","url","window","decodeURIComponent","file","getBlob","mimeType","entry","mime","lookup","async","Blob","getText","getBase64","CONTAINER_PATH_0","INPUT_TYPE","Book","ArrayBuffer","settings","extend","canonical","replacements","method","withCredentials","headers","store","archive","storage","Storage","container","Container","packaging","Packaging","resources","Resources","sections","Sections","locations","Locations","load","navigation","Navigation","BOOK","OPEN_FAILED","init","archived","cover","path","isOpen","opening","Defer","opened","promise","loading","loaded","clear","openAs","determineType","Url","openEpub","format","openContainer","unarchive","parse","uri","fullPath","openPackaging","Path","loadNavigation","unpack","resolved","absolute","directory","extension","manifest","serialize","substitute","coverPath","tasks","values","all","navPath","renderTo","element","Rendition","attachTo","setRequestCredentials","credentials","setRequestHeaders","dispatch","coverUrl","createUrl","getRange","cfi","contents","toRange","document","identifier","ident","metadata","filename","EPUBJS_VERSION","destroy","mediaType","version","doc","qs","rootfile","getAttribute","dirname","characterSet","hasNavigator","navigator","isChrome","userAgent","isWebkit","AXIS_V","Contents","content","body","contentRect","bottom","height","left","right","top","width","scripts","active","defaultView","mode","writingMode","appendListeners","w","frame","isNumber","style","parseInt","getComputedStyle","h","textSize","range","createRange","selectNodeContents","rect","getBoundingClientRect","border","borders","clientHeight","round","scrollWidth","documentElement","scrollHeight","overflow","elt","overflowX","overflowY","css","property","priority","setProperty","removeProperty","viewport","parsed","scale","minimum","maximum","scalable","querySelector","hasAttribute","defaults","newContent","createElement","setAttribute","head","appendChild","scrollTo","expand","CONTENTS","EXPAND","resize","entries","changed","cmp","RESIZED","locationOf","ignoreClass","targetPos","isCfiString","endContainer","startContainer","startOffset","endOffset","textContent","setEnd","nodeType","Node","ELEMENT_NODE","newRange","Range","setStart","parentNode","id","el","getElementById","selectNode","createLink","src","node","removeChild","rel","href","onload","onerror","createStyle","rules","selector","sheet","cssRules","items","insertRule","appendStylesheet","def","removeStylesheet","clearStylesheets","appendScript","removeScript","clearScripts","appendClass","classList","removeClass","cfiFromRange","cfiBase","cfiFromNode","layout","Mapping","flow","szw","pageWidth","szh","dir","direction","axis","pgw","pgh","pageHeight","clw","columnWidth","gap","offsetX","offsetY","translate","mapPage","dev","page","WRITING_MODE","prefixed","DOM_EVENTS","eventName","addEventListener","triggerEvent","passive","selectionHandler","resizeObserver","ResizeObserver","requestAnimationFrame","observe","replaceLinks","LINK_CLICKED","removeListeners","removeEventListener","disconnect","mutationObserver","selectionEndTimeout","clearTimeout","setTimeout","selection","getSelection","rangeCount","getRangeAt","collapsed","cfirange","SELECTED","SELECTED_RANGE","imageLoadListeners","images","querySelectorAll","img","naturalWidth","mediaQueryListeners","sheets","styleSheets","mediaChangeHandler","m","matches","j","media","matchMedia","mediaText","onchange","fontLoadListeners","fonts","transitionListeners","mutationListener","MutationObserver","mutation","mutations","observer","attributes","childList","characterData","subtree","cfiFrom","parseComponent","steps","checkType","fromRange","fromNode","collapse","toStart","terminal","cfiOne","cfiTwo","stepsA","terminalA","stepsB","terminalB","generateChapterComponent","spineNodeIndex","getBaseComponent","cfiStr","getPathComponent","indirection","ranges","getCharecterOffsetComponent","joinSteps","part","segment","pathTo","assertion","step","curNode","DOCUMENT_NODE","filteredStep","unshift","equalStep","stepA","stepB","parent","isText","needsIgnoring","TEXT_NODE","contains","prevSibling","previousSibling","nextSibling","sibling","filteredPosition","children","normalizedMap","childNodes","_node","tagName","findNode","_doc","walkToNode","evaluate","xpath","stepsToXpath","xtype","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","fixMiss","lastStepIndex","childIndex","child","ownerDocument","patchOffset","output","currNodeType","prevNodeType","prevIndex","baseComponent","pathComponent","component","parts","parseTerminal","parseStep","num","isElement","hasBrackets","txt","curr","totalOffset","findChildren","textNodes","segmentString","stepsToQuerySelector","query","startSteps","endSteps","hasOffset","reqClass","missed","RangeObject","response","deferred","handleResponse","isXml","JSON","Layout","spread","orientation","minSpreadWidth","spreadWidth","delta","divisor","opt","calculate","LAYOUT","UPDATED","totalLength","pageLength","spreads","pages","ceil","percentage","pause","break","current","Location","processing","generated","q","Queue","generate","chars","isInteger","linear","enqueue","run","loc","prev","counter","treeWalker","trim","dist","func","what","NodeFilter","SHOW_TEXT","task","createTreeWalker","nextNode","currentNode","locationFromCfi","ind","percentageFromCfi","percentageFromLocation","cfiFromLocation","cfiFromPercentage","ret","idref","save","stringify","LOCATIONS","CHANGED","stop","AXIS_H","ContinuousViewManager","DefaultViewManager","book","snap","offsetDelta","forceEvenPages","paginated","snapper","Snap","display","fill","full","check","moveTo","distX","distY","scrollBy","removeShownListeners","off","VIEWS","DISPLAYED","promises","isVisible","displayed","offsetLeft","offsetTop","vph","lsc","rtl","visibleLength","contentLength","scrollLeft","scrollTop","scrollType","last","prepend","first","scrolled","relocated","MANAGERS","SCROLLED","on","sandbox","location","mapping","rendered","Views","appendEventListeners","onpagehide","displaying","find","onscroll","onscrollend","timeout","scrollend","debounce","removeEventListeners","requireView","IframeView","createView","ADDED","resized","updateWritingMode","ish","isv","offsetWidth","offsetHeight","visible","currentLocation","RELOCATED","paginatedLocation","scrolledLocation","startPos","endPos","startPage","endPage","total","abs","clientWidth","offsetPrev","offsetNext","vpos","silent","ignore","SCROLL","getContents","isRendered","PI_D2","PI","EASING_EQUATIONS","easeOutSine","sin","easeInOutSine","cos","easeInOutQuint","easeInCubic","manager","duration","minVelocity","minDistance","easing","supportsTouch","setup","scroller","afterScrolledTimeout","isVertical","touchCanceler","resizeCanceler","snapping","startTouchX","startTouchY","startTime","endTouchX","endTouchY","endTime","addListeners","DocumentTouch","disableScroll","enableScroll","onResize","onScroll","onTouchStart","onTouchMove","onTouchEnd","afterDisplayed","ev","triggerViewEvent","screenX","screenY","touches","deltaY","swipped","wasSwiped","snapWidth","distance","velocity","needsSnap","howMany","snapTo","smoothScrollTo","destination","tick","now","time","insertBefore","firstChild","insert","splice","uuid","marks","iframe","seamless","LOAD_ERROR","RENDERED","reset","flex","expanding","sz","reframe","contentDocument","onLoad","blobUrl","createBlobUrl","srcdoc","write","close","event","defer","link","visibility","transform","SHOWN","HIDDEN","Marks","assign","emitter","MARK_CLICKED","Highlight","listeners","appendMark","Underline","removeMark","revokeBlobUrl","devMode","findRanges","rangeListToCfiList","rangePairToCfiPair","findStart","findEnd","startRange","endRange","removeAllRanges","addRange","walk","FILTER_ACCEPT","FILTER_REJECT","safeFilter","acceptNode","countPages","hor","ltr","found","elPos","nodeBounds","findTextStartRange","findTextEndRange","splitTextNodeIntoRanges","splitter","rangePair","cifPair","rectContains","clientX","clientY","rects","getClientRects","dispatchEvent","opts","bubbles","MouseEvent","clone","proxyMouse","nodeName","events","Mark","dataset","createElementNS","unbind","NS_URI","g","updateStyle","line","landmarks","Landmarks","pageList","PageList","toc","Toc","qsa","nav","parseNav","navItem","filterChildren","label","epubcfi","firstPage","lastPage","totalPages","parseNcx","packageUrl","ncxItem","navLabel","pageText","pageFromCfi","pg","indexOfSorted","cfiFromPage","pageFromPercentage","percentageFromPage","links","parentId","navList","subitems","harr","hash","level","Metadata","Manifest","spine","Spine","uniqueIdentifier","packageXml","metadataNode","manifestNode","spineNode","parseDirection","parseVersion","findUniqueIdentifier","localName","namespaceURI","nodeValue","findCoverPath","meta","qsp","prop","properties","parseMeta","nodeIndex","indexOfNode","script","stylesheet","Hook","handleLinks","passEvents","adjustImages","injectIdentifier","injectStylesheet","injectScript","annotations","themes","Themes","starting","started","setManager","requireManager","determineLayoutProperties","RENDITION","Viewport","VIEWPORT","ORIENTATION_CHANGE","REMOVED","afterRemoved","onResized","STARTED","ATTACHED","_display","isFloat","parseFloat","DISPLAY_ERROR","triggerMarkEvent","trigger","updateLayout","located","atStart","atEnd","locationStart","locationEnd","pageStart","pageEnd","triggerSelectedEvent","padding","paddingX","paddingY","getElementsByTagName","URL","revokeObjectURL","createObjectURL","blob","blob2base64","revokeUrl","put","xml","rendering","serializer","XMLSerializer","serializeToString","toLowerCase","sprint","excerpt","maxSeqEle","nodeList","reduce","acc","startNodeIndex","endNodeIndex","startNode","endNode","beforeEndLengthCount","excerptLimit","cfiFromElement","unload","replaceBase","replaceMeta","replaceCanonical","points","pkg","itemref","nextIndex","Section","online","onLine","localforage","status","getKey","getItem","setItem","reader","FileReader","onloadend","readAsText","readAsDataURL","registerThemes","registerUrl","registerRules","theme","injected","select","THEMES","INJECTED","REJECTED","rule","appendRule","removeRule","removeRules","fontSize","font","RESIZE","AXIS","d","c","random","isFinite","unprefixed","prefixes","lower","vendors","getOwnPropertyNames","compareFunction","_start","_end","pivot","compared","typeId","sib","ext","createBlob","markup","DOMParser","parseFromString","sel","elements","filtered","callback","parents","nodes","single","context","deregister","executing","list","table","mimeTypes","types","subtype","pathname","splitPath","isDirectory","isAbsolute","charAt","resolvedPath","resolvedAbsolute","cwd","normalizeArray","relative","to","fromParts","trimArray","toParts","samePartsLength","outputParts","normalize","trailingSlash","allowAboveRoot","exec","lastIndex","_q","running","paused","queued","dequeue","inwait","dump","commonAncestorContainer","_commonAncestorContainer","_checkCollapsed","referenceNode","endIndex","startParents","endParents","baseURI","replaceLink","onclick","urls","p1","p2","SUPPORTS_URL","BLOB_RESPONSE","xhr","XMLHttpRequest","responseType","overrideMimeType","onreadystatechange","read","responseXML","header","setRequestHeader","send","definer","createDefiner","innerDiv","spanA","spanB","Element","scrollIntoView","protocol","origin","fullpath","updateAxis","updateFlow","getElement","wordSpacing","lineHeight","verticalAlign","flexWrap","screen","resizeFunc","GetIntrinsic","callBind","$indexOf","allowMissing","intrinsic","setFunctionLength","$TypeError","$apply","$call","$reflectApply","$defineProperty","$max","originalFunction","applyBind","isValue","isPlainFunction","normalizeOpts","dscr","desc","gs","$SyntaxError","gopd","nonEnumerable","nonWritable","nonConfigurable","loose","hasSymbols","toStr","defineDataProperty","supportsDescriptors","object","predicate","predicates","EvalError","SyntaxError","URIError","foo","bar","trzy","dest","_undefined","opts1","searchString","once","methods","descriptors","callable","listener","__eeOnceListener__","__ee__","candidate","isCallable","thisArg","receiver","forEachArray","forEachString","forEachObject","concatty","that","bound","arrLike","slicy","boundLength","boundArgs","joiny","Empty","implementation","$Error","$EvalError","$RangeError","$ReferenceError","$URIError","$Function","getEvalledConstructor","expressionSyntax","$gOPD","throwTypeError","ThrowTypeError","calleeThrows","gOPDthrows","hasProto","getProto","needsEval","TypedArray","INTRINSICS","AggregateError","Atomics","BigInt64Array","BigUint64Array","DataView","decodeURI","encodeURIComponent","eval","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","SharedArrayBuffer","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","WeakRef","WeakSet","errorProto","doEval","gen","LEGACY_ALIASES","hasOwn","$concat","$spliceApply","$replace","$strSlice","$exec","rePropName","reEscapeChar","getBaseIntrinsic","alias","intrinsicName","number","quote","subString","stringToPath","intrinsicBaseName","intrinsicRealName","skipFurtherCaching","isOwn","hasPropertyDescriptors","hasArrayLengthDefineBug","$Object","origSymbol","hasSymbolSham","sym","symObj","syms","toStringTag","$hasOwn","ctor","superCtor","super_","TempCtor","hasToStringTag","$toString","callBound","isStandardArguments","isLegacyArguments","callee","supportsStandardArguments","badArrayLike","isCallableMarker","fnToStr","reflectApply","_","constructorRegex","isES6ClassFn","fnStr","tryFunctionObject","isIE68","isDDA","strClass","GeneratorFunction","isFnRegex","generatorFunc","getGeneratorFunc","getPolyfill","shim","polyfill","NaN","whichTypedArray","getRawTag","symToStringTag","trimmedEndIndex","reTrimStart","freeGlobal","objectProto","nativeObjectToString","tag","unmasked","freeSelf","reWhitespace","isObject","toNumber","nativeMax","nativeMin","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","baseGetTag","isObjectLike","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","keysShim","isArgs","isEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","isFunction","isArguments","isString","theKeys","skipProto","skipConstructor","equalsConstructorPrototypeIfNotBuggy","origKeys","originalKeys","keysWorksWithArguments","objectKeys","toObject","$push","$propIsEnumerable","originalGetSymbols","source1","s","getSymbols","nextKey","propValue","letters","lacksProperEnumerationOrder","preventExtensions","thrower","assignHasPendingExceptions","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","versions","addListener","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","chdir","umask","hasDescriptors","gOPD","$floor","functionLengthIsConfigurable","functionLengthIsWritable","isPrototype","possibleTypes","classRe","functionToString","copy","readUInt8","isArgumentsObject","isGeneratorFunction","isTypedArray","BigIntSupported","SymbolSupported","ObjectToString","numberValue","stringValue","booleanValue","bigIntValue","symbolValue","checkBoxedPrimitive","prototypeValueOf","isMapToString","isSetToString","isWeakMapToString","isWeakSetToString","isArrayBufferToString","isArrayBuffer","working","isDataViewToString","isDataView","isView","isUint8Array","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isBigInt64Array","isBigUint64Array","isWeakMap","isWeakSet","SharedArrayBufferCopy","isSharedArrayBufferToString","isSharedArrayBuffer","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","formatRegExp","objects","isNull","deprecate","noDeprecation","throwDeprecation","traceDeprecation","trace","debugs","debugEnvRegex","NODE_DEBUG","debugEnv","toUpperCase","seen","stylize","stylizeNoColor","colors","isBoolean","_extend","isUndefined","stylizeWithColor","formatValue","styleType","primitive","simple","formatPrimitive","visibleKeys","idx","arrayToHash","isError","formatError","braces","toUTCString","formatProperty","formatArray","reduceToSingleString","ar","re","pad","debuglog","pid","isNullOrUndefined","isPrimitive","isBuffer","months","getHours","getMinutes","getSeconds","getDate","getMonth","inherits","kCustomPromisifiedSymbol","callbackifyOnRejected","newReason","promisify","original","promiseResolve","promiseReject","callbackify","callbackified","maybeCb","rej","availableTypedArrays","globalThis","typedArrays","$slice","cache","typedArray","proto","superProto","getter","trySlices","tryTypedArrays","possibleNames","out","tryToString","argument","it","isPossiblePrototype","$String","Prototype","uncurryThisAccessor","classof","O","arrayBufferByteLength","ArrayBufferPrototype","isDetached","toIndex","notDetached","detachTransferable","PROPER_STRUCTURED_CLONE_TRANSFER","structuredClone","DataViewPrototype","isResizable","maxByteLength","getInt8","setInt8","arrayBuffer","newLength","preserveResizability","newBuffer","newByteLength","fixedLength","transfer","copyLength","toIndexedObject","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","fromIndex","includes","DESCRIPTORS","SILENT_ON_NON_WRITABLE_LENGTH_SET","getBuiltIn","getMethod","returnMethod","error2","perform","anObject","createNonEnumerableProperty","defineBuiltIns","wellKnownSymbol","InternalStateModule","AsyncIteratorPrototype","createIterResultObject","iteratorClose","TO_STRING_TAG","ASYNC_ITERATOR_HELPER","WRAP_FOR_VALID_ASYNC_ITERATOR","setInternalState","createAsyncIteratorProxyPrototype","IS_ITERATOR","IS_GENERATOR","getInternalState","getterFor","getStateOrEarlyExit","stateCompletion","stateError","state","exit","handlerCompletion","nextHandler","handlerError","completion","inner","WrapForValidAsyncIteratorPrototype","AsyncIteratorHelperPrototype","AsyncIteratorProxy","record","aCallable","doesNotExceedSafeInteger","getIteratorDirect","closeAsyncIteration","TYPE","IS_TO_ARRAY","IS_FOR_EACH","IS_EVERY","IS_SOME","MAPPING","ifAbruptCloseAsyncIterator","loop","error5","handler","$result","error4","error3","toArray","every","some","createAsyncIteratorProxy","mapper","doneAndReject","mapped","shared","defineBuiltIn","IS_PURE","USE_FUNCTION_CONSTRUCTOR","ASYNC_ITERATOR","AsyncIterator","PassedAsyncIteratorPrototype","ENTRIES","stringSlice","TO_STRING_TAG_SUPPORT","classofRaw","CORRECT_ARGUMENTS","tryGet","getOwnPropertyDescriptorModule","definePropertyModule","exceptions","fails","F","createPropertyDescriptor","bitmap","makeBuiltIn","setter","defineGlobalProperty","global","unsafe","P","WorkerThreads","channel","$detach","getBuiltInNodeModule","$ArrayBuffer","$MessageChannel","MessageChannel","transferable","port1","postMessage","EXISTS","IndexSizeError","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","ENVIRONMENT","Deno","v8","userAgentStartsWith","Bun","TEST","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","copyConstructorProperties","isForced","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","NATIVE_BIND","FunctionPrototype","getDescriptor","PROPER","CONFIGURABLE","uncurryThisWithBind","IS_NODE","getBuiltinModule","namespace","Iterators","ITERATOR","getIteratorMethod","usingIterator","iteratorMethod","V","dummy","NewTargetPrototype","inspectSource","NATIVE_WEAK_MAP","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","facade","STATE","enforce","ArrayPrototype","documentAll","replacement","feature","detection","POLYFILL","NATIVE","USE_SYMBOL_AS_UID","$Symbol","ITERATOR_INSTEAD_OF_RECORD","isArrayIteratorMethod","getIterator","Result","stopped","ResultPrototype","iterable","unboundFunction","iterFn","AS_ENTRIES","IS_RECORD","INTERRUPTED","condition","callFn","kind","innerResult","innerError","IteratorPrototype","ITERATOR_HELPER","WRAP_FOR_VALID_ITERATOR","createIteratorProxyPrototype","WrapForValidIteratorPrototype","IteratorHelperPrototype","IteratorProxy","createIteratorProxy","callWithSafeIterationClosing","PrototypeOfArrayIteratorPrototype","arrayIterator","BUGGY_SAFARI_ITERATORS","toLength","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","CONFIGURABLE_LENGTH","TEMPLATE","arity","MapPrototype","iterateSimple","MapHelpers","interruptible","trunc","$default","activeXDocument","definePropertiesModule","enumBugKeys","html","documentCreateElement","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObjectViaActiveX","temp","parentWindow","NullProtoObject","ActiveXObject","iframeDocument","JS","domain","contentWindow","Properties","V8_PROTOTYPE_DEFINE_BUG","IE8_DOM_DEFINE","toPropertyKey","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","propertyIsEnumerableModule","internalObjectKeys","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","names","$propertyIsEnumerable","NASHORN_BUG","requireObjectCoercible","aPossiblePrototype","CORRECT_SETTER","pref","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","$parseInt","fromCharCode","at","codePoints","IS_4_HEX_DIGITS","IS_C0_CONTROL_CODE","unterminated","chr","twoChars","fourHexDigits","uid","SHARED","copyright","license","V8","V8_VERSION","symbol","toIntegerOrInfinity","integer","IndexedObject","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","postfix","NATIVE_SYMBOL","passed","required","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","defineBuiltInAccessor","$","$transfer","transferToFixedLength","setArrayLength","properErrorOnNonWritableLength","argCount","deletePropertyOrThrow","selected","real","$find","$forEach","reducer","noInitial","accumulator","anInstance","createProperty","CONSTRUCTOR","NativeIterator","FORCED","IteratorConstructor","defineIteratorPrototypeAccessor","Iterator","iterate","parseJSONString","nativeParse","enumerableOwnProperties","IS_DIGIT","IS_NON_ZERO_DIGIT","IS_NUMBER_START","IS_WHITESPACE","internalize","holder","reviver","elementRecordsLen","unmodified","nodeIsArray","internalizeProperty","Context","fork","skip","keyword","expectKeypair","until","expectElement","startIndex","regex","NO_SOURCE_SUPPORT","unsafeInt","PROPER_BASE_PARSE","$parse","aMap","deleteAll","wasDeleted","collection","allDeleted","emplace","inserted","callbackfn","boundFunction","newMap","findKey","sameValueZero","searchElement","keyOf","mapKeys","mapValues","merge","argumentsLength","isPresentInMap","inheritIfRequired","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","DOMException","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","$delete","params","$value","v","dindex","entriesLength","getAll","$has","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","__esModule","definition","describe","after","before","fetch","doc1","doc2","doc3","xit","cfi1","cfi2","cfi3","elm","t1","t2","ogRange","sec","lcs","locs","pkg1","pkg2","isDir","section1","section2","Document","results","background","color","light","dark"],"sourceRoot":""}