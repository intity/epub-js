/*! For license information please see test.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("JSZip"),require("localforage")):"function"==typeof define&&define.amd?define(["JSZip","localforage"],e):"object"==typeof exports?exports.ePub=e(require("JSZip"),require("localforage")):t.ePub=e(t.JSZip,t.localforage)}(self,(t,e)=>(()=>{var r={34:(t,e,r)=>{"use strict";var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},41:(t,e,r)=>{"use strict";var n=r(3036),i=r(8068),s=r(9675),o=r(5795);t.exports=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new s("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!o&&o(t,e);if(n)n(t,e,{configurable:null===l&&h?h.configurable:!l,enumerable:null===a&&h?h.enumerable:!a,value:r,writable:null===c&&h?h.writable:!c});else{if(!u&&(a||c||l))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}}},57:(t,e,r)=>{"use strict";r.d(e,{A:()=>a}),r(8111),r(7588);var n=r(3068),i=r(9046),s=r(5720);class o{constructor(t){this.layout=t,this.layout.on(s.qY.LAYOUT.UPDATED,(t,e)=>{e.axis?this.updateAxis(t.axis):e.flow?this.updateFlow(t.flow):e.direction&&this.direction(t.direction)}),this.container=null,this.target=null,this.rect={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}}attachTo(t,e){const r=this.getElement(t);return r?(this.views=e.views,this.container=this.create(e),this.container.appendChild(this.views.container),r.appendChild(this.container),this.target=r,this.appendListeners(),r):null}create(t){let e=t.width,r=t.height;e&&(0,i.isNumber)(e)&&(e+="px"),r&&(0,i.isNumber)(r)&&(r+="px");const n=document.createElement("div");return n.classList.add("viewport-container"),n.style.wordSpacing="0",n.style.lineHeight="0",n.style.verticalAlign="top",n.style.position="relative",n.style.display="flex",n.style.flexWrap="nowrap",n.style.width=e||"100%",n.style.height=r||"100%",n.style.overflow="hidden",n}appendListeners(){screen.orientation.addEventListener("change",this.orientation.bind(this)),this.resizeFunc=new ResizeObserver(t=>{requestAnimationFrame(()=>this.resized(t))}),this.resizeFunc.observe(this.container)}removeListeners(){screen.orientation.removeEventListener("change",this.orientation.bind(this)),this.resizeFunc&&this.resizeFunc.disconnect()}getElement(t){let e;if("string"==typeof t)e=document.getElementById(t);else{if(!(t instanceof Element))throw new TypeError("Invalid argument type");e=t}return e}orientation(t){this.emit(s.qY.VIEWPORT.ORIENTATION_CHANGE,t.target)}resized(t){let e=!1;const r=t=>Object.keys(this.rect).forEach(r=>{t&&this.rect[r]!==t[r]&&void 0!==t[r]&&(this.rect[r]=t[r],e=!0)});t.forEach(t=>r(t.contentRect)),e&&this.emit(s.qY.VIEWPORT.RESIZED,this.rect)}size(t,e){return this.rect.width=this.target.clientWidth,this.rect.height=this.target.clientHeight,t?(0,i.isNumber)(t)?(this.container.style.width=t+"px",this.rect.width=t):(this.container.style.width=t,this.rect.width=this.container.clientWidth):(t=this.rect.width,this.container.style.width=t+"px"),e?(0,i.isNumber)(e)?(this.container.style.height=e+"px",this.rect.height=e):(this.container.style.height=e,this.rect.height=this.container.clientHeight):(e=this.rect.height,this.container.style.height=e+"px"),{width:this.rect.width,height:this.rect.height}}direction(t){const e=t||this.layout.direction;this.target.dir=e,this.target.classList.add(e)}updateAxis(t){const e=t||this.layout.axis;this.views.container.style.display="horizontal"===e?"flex":"grid"}updateFlow(t){const e=t||this.layout.flow;"paginated"===e?(this.views.container.style.display="flex",this.views.container.style["overflow-y"]="hidden",this.views.container.style["overflow-x"]="hidden"):"horizontal"===this.layout.axis?(this.views.container.style.display="flex",this.views.container.style["overflow-y"]="hidden",this.views.container.style["overflow-x"]="auto"):"vertical"===this.layout.axis&&(this.views.container.style.display="grid",this.views.container.style["overflow-y"]="auto",this.views.container.style["overflow-x"]="hidden"),this.target.className=e}update(){this.updateAxis(),this.updateFlow(),this.direction()}destroy(){this.target&&(this.removeListeners(),this.target.removeChild(this.container),this.container.removeChild(this.views.container),this.container=void 0,this.target=void 0,this.rect=void 0)}}n(o.prototype);const a=o},76:t=>{"use strict";t.exports=Function.prototype.call},81:(t,e,r)=>{"use strict";var n=r(9565),i=r(9306),s=r(8551),o=r(6823),a=r(851),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?a(t):e;if(i(r))return s(n(r,t));throw new c(o(t)+" is not iterable")}},116:(t,e,r)=>{"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),c=r(1767),l=r(9539),u=r(4549)("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{find:function(t){a(this);try{o(t)}catch(t){l(this,"throw",t)}if(u)return i(u,this,t);var e=c(this),r=0;return s(e,function(e,n){if(t(e,r++))return n(e)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},124:(t,e,r)=>{var n=r(9325);t.exports=function(){return n.Date.now()}},148:(t,e,r)=>{"use strict";var n=r(9762),i=Array.prototype.forEach,s=Object.create;t.exports=function(t){var e=s(null);return i.call(arguments,function(t){n(t)&&function(t,e){var r;for(r in t)e[r]=t[r]}(Object(t),e)}),e}},181:(t,e,r)=>{"use strict";var n=r(8175),i={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!n(t)&&hasOwnProperty.call(i,typeof t)}},214:(t,e,r)=>{"use strict";t.exports=r(525)()?String.prototype.contains:r(1521)},230:(t,e,r)=>{"use strict";var n=r(6518),i=r(9306),s=r(6194),o=r(6223),a=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=s(this),r=arguments.length<2,n=r?void 0:arguments[1];if(i(t),o(e,function(i,s){r?(r=!1,n=i):n=t(n,i,s,e)}),r)throw new a("Reduce of empty map with no initial value");return n}})},280:(t,e,r)=>{"use strict";r.d(e,{A:()=>h}),r(8111),r(7588);var n=r(3068),i=r(8285),s=r(8077),o=r(3755),a=r(5548),c=r(9046),l=r(5720);class u{constructor(t,e){this.id="vi-"+(0,c.uuid)(),this.contents=null,this.container=null,this.displayed=!1,this.document=null,this.expanding=!1,this.frame=null,this.marks=null,this.width=0,this.height=0,this.layout=t,this.section=e,this.settings=null,this.init()}init(){this.container=document.createElement("div"),this.container.classList.add("view-container"),this.container.style.height="0",this.container.style.width="0",this.container.style.overflow="hidden",this.container.style.position="relative",this.container.setAttribute("ref",this.section.index)}clear(){let t=0;return this.marks&&this.marks.forEach((e,r)=>{t=e instanceof o.A?this.unhighlight(e.data.epubcfi)?t+=1:t:this.ununderline(e.data.epubcfi)?t+=1:t}),t}create(){}render(t){const e=new i.A;return this.create(),this.section.render(t).then(t=>this.load(t)).then(t=>{this.update(),e.resolve(t)},t=>{this.emit(l.qY.VIEWS.LOAD_ERROR,t),e.reject(t)}).then(()=>{this.emit(l.qY.VIEWS.RENDERED,this)}),e.promise}reset(){this.frame&&(this.frame.style.width="0",this.frame.style.height="0",this.width=0,this.height=0)}update(){this.contents.format(this.layout),this.axis(),this.mode(),this.expand()}axis(){"horizontal"===this.layout.axis?this.container.style.flex="none":this.container.style.flex="initial"}mode(t){}expand(){if(!this.frame||this.expanding)return;this.expanding=!0;const t=this.contents.textSize(),e=this.layout.pageWidth;if("paginated"===this.layout.flow&&(t.width%e>0&&(t.width=Math.ceil(t.width/e)*e),this.settings.forceEvenPages)){const r=t.width/e;this.layout.divisor>1&&"reflowable"===this.layout.name&&r%2>0&&(t.width+=e)}this.width===t.width&&this.height===t.height||this.reframe(t.width,t.height),this.expanding=!1}reframe(t,e){this.frame&&(this.container.style.width=t+"px",this.container.style.height=e+"px",this.frame.style.width=t+"px",this.frame.style.height=e+"px",this.width=t,this.height=e,this.marks&&this.marks.render())}load(t){return Promise.resolve()}display(t){const e=new i.A;return this.displayed?e.resolve(this):this.render(t).then(()=>{this.emit(l.qY.VIEWS.DISPLAYED),this.displayed=!0,e.resolve(this)},t=>{e.reject(t)}),e.promise}show(){this.container.style.visibility="visible",this.frame&&(this.frame.style.visibility="visible"),this.emit(l.qY.VIEWS.SHOWN,this)}hide(){this.container.style.visibility="hidden",this.frame&&(this.frame.style.visibility="hidden"),this.emit(l.qY.VIEWS.HIDDEN,this)}offset(){return{top:this.container.offsetTop,left:this.container.offsetLeft}}position(){return this.container.getBoundingClientRect()}locationOf(t){const e=this.contents.locationOf(t,this.settings.ignoreClass);return{left:e.left,top:e.top}}highlight(t,e={},r=null,n="epubjs-hl",i={}){if(!this.contents)return;e.epubcfi=t,null===this.marks&&(this.marks=new s.A(this.frame,this.container));const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},i),c=r=>{this.emit(l.qY.VIEWS.MARK_CLICKED,t,e)},u=encodeURI("epubjs-hl:"+t),h=this.contents.range(t),p=new o.A(h,{className:n,data:e,attributes:a,listeners:[c,r]}),d=this.marks.appendMark(u,p);return d.element.setAttribute("ref",n),d.element.addEventListener("click",c),d.element.addEventListener("touchstart",c),r&&(d.element.addEventListener("click",r),d.element.addEventListener("touchstart",r)),d}unhighlight(t){const e=encodeURI("epubjs-hl:"+t),r=this.marks.get(e);let n=!1;return r&&(r.listeners.forEach(t=>{t&&(r.element.removeEventListener("click",t),r.element.removeEventListener("touchstart",t))}),this.marks.removeMark(e),n=!0),n}underline(t,e={},r=null,n="epubjs-ul",i={}){if(!this.contents)return;e.epubcfi=t,null===this.marks&&(this.marks=new s.A(this.frame,this.container));const o=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},i),c=r=>{this.emit(l.qY.VIEWS.MARK_CLICKED,t,e)},u=encodeURI("epubjs-ul:"+t),h=this.contents.range(t),p=new a.A(h,{className:n,data:e,attributes:o,listeners:[c,r]}),d=this.marks.appendMark(u,p);return d.element.setAttribute("ref",n),d.element.addEventListener("click",c),d.element.addEventListener("touchstart",c),r&&(d.element.addEventListener("click",r),d.element.addEventListener("touchstart",r)),d}ununderline(t){const e=encodeURI("epubjs-ul:"+t),r=this.marks.get(e);let n=!1;return r&&(r.listeners.forEach(t=>{t&&(r.element.removeEventListener("click",t),r.element.removeEventListener("touchstart",t))}),this.marks.removeMark(e),n=!0),n}destroy(){this.marks&&this.displayed&&(this.marks.element.remove(),this.marks.clear(),this.marks=void 0),this.displayed&&(this.displayed=void 0,this.container.removeChild(this.frame),this.container=void 0,this.contents.destroy(),this.contents=void 0),this.expanding=void 0,this.document=void 0,this.frame=void 0,this.size=void 0,this.id=void 0,this.width=void 0,this.height=void 0,this.settings=void 0}}n(u.prototype);const h=u},283:(t,e,r)=>{"use strict";var n=r(9504),i=r(9039),s=r(4901),o=r(9297),a=r(3724),c=r(350).CONFIGURABLE,l=r(3706),u=r(1181),h=u.enforce,p=u.get,d=String,f=Object.defineProperty,g=n("".slice),y=n("".replace),m=n([].join),v=a&&!i(function(){return 8!==f(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=t.exports=function(t,e,r){"Symbol("===g(d(e),0,7)&&(e="["+y(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!o(t,"name")||c&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&r&&o(r,"arity")&&t.length!==r.arity&&f(t,"length",{value:r.arity});try{r&&o(r,"constructor")&&r.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=h(t);return o(n,"source")||(n.source=m(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w(function(){return s(this)&&p(this).source||l(this)},"toString")},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},350:(t,e,r)=>{"use strict";var n=r(3724),i=r(9297),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,l=a&&(!n||n&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},397:(t,e,r)=>{"use strict";var n=r(7751);t.exports=n("document","documentElement")},414:t=>{"use strict";t.exports=Math.round},421:t=>{"use strict";t.exports={}},453:(t,e,r)=>{"use strict";var n,i=r(9612),s=r(9383),o=r(1237),a=r(9290),c=r(9538),l=r(8068),u=r(9675),h=r(5345),p=r(1514),d=r(8968),f=r(6188),g=r(8002),y=r(5880),m=r(414),v=r(3093),b=Function,w=function(t){try{return b('"use strict"; return ('+t+").constructor;")()}catch(t){}},x=r(5795),E=r(3036),A=function(){throw new u},O=x?function(){try{return A}catch(t){try{return x(arguments,"callee").get}catch(t){return A}}}():A,S=r(4039)(),q=r(3628),T=r(1064),k=r(8648),j=r(1002),R=r(76),N={},C="undefined"!=typeof Uint8Array&&q?q(Uint8Array):n,I={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":S&&q?q([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":N,"%AsyncGenerator%":N,"%AsyncGeneratorFunction%":N,"%AsyncIteratorPrototype%":N,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":N,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&q?q(q([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&S&&q?q((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":c,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&S&&q?q((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&q?q(""[Symbol.iterator]()):n,"%Symbol%":S?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":O,"%TypedArray%":C,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":R,"%Function.prototype.apply%":j,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":T,"%Math.abs%":p,"%Math.floor%":d,"%Math.max%":f,"%Math.min%":g,"%Math.pow%":y,"%Math.round%":m,"%Math.sign%":v,"%Reflect.getPrototypeOf%":k};if(q)try{null.error}catch(t){var P=q(q(t));I["%Error.prototype%"]=P}var L=function t(e){var r;if("%AsyncFunction%"===e)r=w("async function () {}");else if("%GeneratorFunction%"===e)r=w("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=w("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&q&&(r=q(i.prototype))}return I[e]=r,r},D={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=r(6743),_=r(9957),F=M.call(R,Array.prototype.concat),B=M.call(j,Array.prototype.splice),U=M.call(R,String.prototype.replace),z=M.call(R,String.prototype.slice),W=M.call(R,RegExp.prototype.exec),Y=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V=/\\(\\)?/g,H=function(t,e){var r,n=t;if(_(D,n)&&(n="%"+(r=D[n])[0]+"%"),_(I,n)){var i=I[n];if(i===N&&(i=L(n)),void 0===i&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===W(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=z(t,0,1),r=z(t,-1);if("%"===e&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return U(t,Y,function(t,e,r,i){n[n.length]=r?U(i,V,"$1"):e||t}),n}(t),n=r.length>0?r[0]:"",i=H("%"+n+"%",e),s=i.name,o=i.value,a=!1,c=i.alias;c&&(n=c[0],B(r,F([0,1],c)));for(var h=1,p=!0;h<r.length;h+=1){var d=r[h],f=z(d,0,1),g=z(d,-1);if(('"'===f||"'"===f||"`"===f||'"'===g||"'"===g||"`"===g)&&f!==g)throw new l("property names with quotes must have matching quotes");if("constructor"!==d&&p||(a=!0),_(I,s="%"+(n+="."+d)+"%"))o=I[s];else if(null!=o){if(!(d in o)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(x&&h+1>=r.length){var y=x(o,d);o=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:o[d]}else p=_(o,d),o=o[d];p&&!a&&(I[s]=o)}}return o}},456:(t,e,r)=>{"use strict";var n=r(6518),i=r(4576),s=r(9504),o=r(4154),a=r(5169),c=s(1.1.toString),l=i.Uint8Array,u=!l||!l.prototype.toHex||!function(){try{return"ffffffffffffffff"===new l([255,255,255,255,255,255,255,255]).toHex()}catch(t){return!1}}();l&&n({target:"Uint8Array",proto:!0,forced:u},{toHex:function(){o(this),a(this.buffer);for(var t="",e=0,r=this.length;e<r;e++){var n=c(this[e],16);t+=1===n.length?"0"+n:n}return t}})},487:(t,e,r)=>{"use strict";var n=r(6897),i=r(3036),s=r(3126),o=r(2205);t.exports=function(t){var e=s(arguments),r=t.length-(arguments.length-1);return n(e,1+(r>0?r:0),!0)},i?i(t.exports,"apply",{value:o}):t.exports.apply=o},507:(t,e,r)=>{"use strict";var n=r(9565);t.exports=function(t,e,r){for(var i,s,o=r?t:t.iterator,a=t.next;!(i=n(a,o)).done;)if(void 0!==(s=e(i.value)))return s}},525:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"==typeof e.contains&&!0===e.contains("dwa")&&!1===e.contains("foo")}},537:(t,e,r)=>{var n=r(5606),i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},s=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(l(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(t).replace(s,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];r<i;a=n[++r])m(a)||!E(a)?o+=" "+a:o+=" "+l(a);return o},e.deprecate=function(t,r){if(void 0!==n&&!0===n.noDeprecation)return t;if(void 0===n)return function(){return e.deprecate(t,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),i=!0}return t.apply(this,arguments)}};var o={},a=/^$/;if(n.env.NODE_DEBUG){var c=n.env.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+c+"$","i")}function l(t,r){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&e._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),p(n,t,n.depth)}function u(t,e){var r=l.styles[e];return r?"["+l.colors[r][0]+"m"+t+"["+l.colors[r][1]+"m":t}function h(t,e){return t}function p(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return b(i)||(i=p(t,i,n)),i}var s=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return v(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}(t,r);if(s)return s;var o=Object.keys(r),a=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),O(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(r);if(0===o.length){if(S(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(x(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return t.stylize(Date.prototype.toString.call(r),"date");if(O(r))return d(r)}var l,u="",h=!1,E=["{","}"];return g(r)&&(h=!0,E=["[","]"]),S(r)&&(u=" [Function"+(r.name?": "+r.name:"")+"]"),x(r)&&(u=" "+RegExp.prototype.toString.call(r)),A(r)&&(u=" "+Date.prototype.toUTCString.call(r)),O(r)&&(u=" "+d(r)),0!==o.length||h&&0!=r.length?n<0?x(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),l=h?function(t,e,r,n,i){for(var s=[],o=0,a=e.length;o<a;++o)j(e,String(o))?s.push(f(t,e,r,n,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(f(t,e,r,n,i,!0))}),s}(t,r,n,a,o):o.map(function(e){return f(t,r,n,a,e,h)}),t.seen.pop(),function(t,e,r){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(l,u,E)):E[0]+u+E[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),j(n,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(r)?p(t,c.value,null):p(t,c.value,r-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").slice(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),w(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function g(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return void 0===t}function x(t){return E(t)&&"[object RegExp]"===q(t)}function E(t){return"object"==typeof t&&null!==t}function A(t){return E(t)&&"[object Date]"===q(t)}function O(t){return E(t)&&("[object Error]"===q(t)||t instanceof Error)}function S(t){return"function"==typeof t}function q(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!o[t])if(a.test(t)){var r=n.pid;o[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else o[t]=function(){};return o[t]},e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=r(9032),e.isArray=g,e.isBoolean=y,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=w,e.isRegExp=x,e.types.isRegExp=x,e.isObject=E,e.isDate=A,e.types.isDate=A,e.isError=O,e.types.isNativeError=O,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(1135);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,r;console.log("%s - %s",(r=[T((t=new Date).getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":"),[t.getDate(),k[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=r(6698),e._extend=function(t,e){if(!e||!E(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(R&&t[R]){var e;if("function"!=typeof(e=t[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,R,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise(function(t,n){e=t,r=n}),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push(function(t,n){t?r(t):e(n)});try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),R&&Object.defineProperty(e,R,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=R,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,e).then(function(t){n.nextTick(o.bind(null,null,t))},function(t){n.nextTick(N.bind(null,t,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,i(t)),e}},592:(t,e,r)=>{"use strict";var n=r(3036),i=function(){return!!n};i.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},616:(t,e,r)=>{"use strict";var n=r(9039);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},622:(t,e,r)=>{"use strict";r.d(e,{A:()=>u}),r(4114);var n=r(9046),i=r(8285),s=r(3362),o=r(2596),a=r(5720);const c="horizontal";class l extends s.A{constructor(t,e){super(t,e),this.name="continuous",this.settings=(0,n.extend)({axis:null,snap:null,view:"iframe",method:null,offset:500,offsetDelta:250,ignoreClass:"",forceEvenPages:!1},e||{})}render(t,e){super.render(t,e),this.paginated&&this.settings.snap&&(this.snapper=new o.A(this,this.settings.snap))}async display(t,e){return super.display(t,e).then(()=>this.fill())}fill(t){const e=t||new i.A;return this.q.enqueue(()=>this.check()).then(t=>{t?this.fill(e):e.resolve()}),e.promise}moveTo(t){let e=0,r=0;this.paginated?e=Math.floor(t.left/this.layout.delta)*this.layout.delta:r=t.top,(e>0||r>0)&&this.scrollBy(e,r,!0)}removeShownListeners(t){t.off(a.qY.VIEWS.DISPLAYED)}async update(t){const e=this.views,r=t||this.settings.offset||0,n=[];for(let t=0;t<e.length;t++){const i=e[t];if(this.isVisible(i,r,r))if(i.displayed)i.show();else{const t=i.display(this.load).then(t=>{t.show()});n.push(t)}}return n.length?Promise.all(n):Promise.resolve(null)}async check(t,e){const r=[],n=this.layout.axis===c,i=this.views.container,s="rtl"===this.layout.direction;let o=this.settings.offset||0;t&&n&&(o=t),e&&!n&&(o=e);const a=this.viewport.rect,l=n?Math.floor(a.width):a.height,u=n?i.scrollWidth:i.scrollHeight;let h=n?i.scrollLeft:i.scrollTop;0===this.writingMode.indexOf(c)&&(s&&"default"===this.scrollType&&(h=u-l-h),s&&"negative"===this.scrollType&&(h*=-1));const p=h-o;return h+l+o>=u&&(()=>{const t=this.views.last(),e=t&&t.section.next();e&&r.push(this.append(e))})(),p<0&&(()=>{const t=this.views.first(),e=t&&t.section.prev();e&&r.push(this.prepend(e))})(),r.length?Promise.all(r).then(()=>this.update(o)):Promise.resolve(null)}scrolled(t){this.q.enqueue(()=>this.check()).then(()=>{this.relocated(),this.emit(a.qY.MANAGERS.SCROLLED,{top:t.target.scrollTop,left:t.target.scrollLeft})})}next(){return 0===this.views.length?Promise.resolve(null):(this.paginated&&this.layout.axis===c?this.scrollBy(this.layout.delta,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(()=>this.check()))}prev(){return 0===this.views.length?Promise.resolve(null):(this.paginated&&this.layout.axis===c?this.scrollBy(-this.layout.delta,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(()=>this.check()))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}const u=l},655:(t,e,r)=>{"use strict";var n=r(6955),i=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},659:(t,e,r)=>{var n=r(1873),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var i=o.call(t);return n&&(e?t[a]=r:delete t[a]),i}},679:(t,e,r)=>{"use strict";var n=r(1625),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new i("Incorrect invocation")}},684:t=>{"use strict";t.exports=function(t,e){var r="function"==typeof Iterator&&Iterator.prototype[t];if(r)try{r.call({next:null},e).next()}catch(t){return!0}}},741:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},757:(t,e,r)=>{"use strict";var n=r(7751),i=r(4901),s=r(1625),o=r(7040),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&s(e.prototype,a(t))}},851:(t,e,r)=>{"use strict";var n=r(6955),i=r(5966),s=r(4117),o=r(6269),a=r(8227)("iterator");t.exports=function(t){if(!s(t))return i(t,a)||i(t,"@@iterator")||o[n(t)]}},944:t=>{"use strict";var e=TypeError;t.exports=function(t){var r=t&&t.alphabet;if(void 0===r||"base64"===r||"base64url"===r)return r||"base64";throw new e("Incorrect `alphabet` option")}},984:(t,e,r)=>{"use strict";r.d(e,{A:()=>i}),r(4603),r(7566),r(8721);var n=r(1010);const i=class{constructor(t,e){this.Url=void 0,this.href=t,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=e;const r=t.indexOf("://")>-1;!r&&!1!==e&&"string"!=typeof e&&window&&window.location&&(this.base=window.location.href);let i=t;if(r||this.base){try{this.base?this.Url=new URL(t,this.base):this.Url=new URL(t),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch(t){this.Url=void 0,this.base&&(i=new n.A(this.base).resolve(i)),console.error(t)}"null"===this.origin&&"file:"===this.protocol&&(this.origin="file://")}this.path=new n.A(i),this.directory=this.path.directory,this.filename=this.path.filename,this.extension=this.path.extension}resolve(t){if(t.indexOf("://")>-1)return t;const e=this.path.directory,r=n.A.prototype.resolve(e,t);return this.origin+r}relative(t){const e=this.path.directory;return n.A.prototype.relative(t,e)}toString(){return this.href}}},1002:t=>{"use strict";t.exports=Function.prototype.apply},1010:(t,e,r)=>{"use strict";r.d(e,{A:()=>n}),r(4114),r(4603),r(7566),r(8721);const n=class{constructor(t){t.indexOf("://")>-1&&(t=new URL(t).pathname);const e=this.parse(t);this.directory=e.dir+"/",this.filename=e.base,this.extension=e.ext.slice(1),this.path=t}parse(t){const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;const r=this.splitPath(t);if(!r||4!==r.length)throw new Error(`Invalid path: ${t}`);return e.root=r[0],this.isDirectory(t)?e.dir=r[0]+r[1]+r[2]:(e.dir=r[0]+r[1].slice(0,-1),e.base=r[2],e.ext=r[3],e.name=r[2].slice(0,r[2].length-r[3].length)),e}dirname(t){const e=this.splitPath(t),r=e[0],n=e[1];return r||n?r+n:"."}isAbsolute(t){return"/"===t.charAt(0)}isDirectory(t){return"/"===t.charAt(t.length-1)}resolve(){let t="",e=!1;for(let r=arguments.length-1;r>=-1&&!e;r--){let n;n=r>=0?arguments[r]:"/",0!==n.length&&(t=n+"/"+t,e=this.isAbsolute(n))}return t=this.normalizeArray(t.split("/"),!e).join("/"),(e?"/":"")+t||"."}relative(t,e){if(t===e)return"";if((t=this.resolve(t))===(e=this.resolve(e)))return"";const r=this.trimArray(t.split("/")),n=this.trimArray(e.split("/")),i=Math.min(r.length,n.length);let s=i;for(let t=0;t<i;t++)if(r[t]!==n[t]){s=t;break}let o=[];for(let t=s;t<r.length;t++)o.push("..");return o=o.concat(n.slice(s)),o.join("/")}normalize(t){const e=this.isAbsolute(t),r=t&&"/"===t[t.length-1];return(t=this.normalizeArray(t.split("/"),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}toString(){return this.path}normalizeArray(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];i&&"."!==i&&(".."===i?r.length&&".."!==r[r.length-1]?r.pop():e&&r.push(".."):r.push(i))}return r}splitPath(t){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)}trimArray(t){const e=t.length-1;let r=0;for(;r<=e&&!t[r];r++);let n=e;for(;n>=0&&!t[n];n--);return 0===r&&n===e?t:r>n?[]:t.slice(r,n+1)}}},1064:(t,e,r)=>{"use strict";var n=r(9612);t.exports=n.getPrototypeOf||null},1072:(t,e,r)=>{"use strict";var n=r(1828),i=r(8727);t.exports=Object.keys||function(t){return n(t,i)}},1093:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var r=e.call(t),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},1108:(t,e,r)=>{"use strict";var n=r(6955);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},1135:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},1181:(t,e,r)=>{"use strict";var n,i,s,o=r(8622),a=r(4576),c=r(34),l=r(6699),u=r(9297),h=r(7629),p=r(6119),d=r(421),f="Object already initialized",g=a.TypeError,y=a.WeakMap;if(o||h.state){var m=h.state||(h.state=new y);m.get=m.get,m.has=m.has,m.set=m.set,n=function(t,e){if(m.has(t))throw new g(f);return e.facade=t,m.set(t,e),e},i=function(t){return m.get(t)||{}},s=function(t){return m.has(t)}}else{var v=p("state");d[v]=!0,n=function(t,e){if(u(t,v))throw new g(f);return e.facade=t,l(t,v,e),e},i=function(t){return u(t,v)?t[v]:{}},s=function(t){return u(t,v)}}t.exports={set:n,get:i,has:s,enforce:function(t){return s(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=i(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return r}}}},1189:(t,e,r)=>{"use strict";var n=Array.prototype.slice,i=r(1093),s=Object.keys,o=s?function(t){return s(t)}:r(8875),a=Object.keys;o.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(n.call(t)):a(t)})}else Object.keys=o;return Object.keys||o},t.exports=o},1237:t=>{"use strict";t.exports=EvalError},1261:(t,e,r)=>{"use strict";r.d(e,{A:()=>c}),r(8111),r(7588);var n=r(3412),i=r(9357),s=r(2575),o=r(6838);class a extends s.A{constructor(){super(),this.createInstance()}createInstance(){if(!o)throw new Error("JSZip lib not loaded");this.instance=new o}open(t,e){if("base64"===e){const e=t.split(",");t=2===e.length?e[1]:t}return this.instance.loadAsync(t,{base64:"base64"===e})}clear(){const t=this.instance.files;Object.keys(t).forEach(t=>this.instance.remove(t))}async openUrl(t,e){return(0,n.A)(t,"binary").then(t=>this.instance.loadAsync(t,{base64:e}))}get(t){const e=window.decodeURIComponent(t.substring(1));return this.instance.file(e)}async getBlob(t,e){const r=this.get(t);if(r){const t=e||i.A.lookup(r.name);return r.async("uint8array").then(e=>new Blob([e],{type:t}))}return new Promise(t=>{t(null)})}async getText(t){const e=this.get(t);return e?e.async("string").then(t=>t):new Promise(t=>{t(null)})}async getBase64(t,e){const r=this.get(t);if(r){const t=e||i.A.lookup(r.name);return r.async("base64").then(e=>"data:"+t+";base64,"+e)}return new Promise(t=>{t(null)})}}const c=a},1270:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(8111),r(7588);const n=(t,e,r,n)=>{const i=t.top-n.top,s=t.left-n.left,o=i+t.height,a=s+t.width;return i<=r&&s<=e&&o>r&&a>e},i=(t,e,r)=>{let i=t.clientX,s=t.clientY;t.touches&&t.touches.length&&(i=t.touches[0].clientX,s=t.touches[0].clientY),r.forEach((r,o)=>{((t,e,r,i)=>{const s=t.getBoundingClientRect(),o=e.getBoundingClientRect();if(!n(s,r,i,o))return!1;const a=t.getClientRects();for(let t=0,e=a.length;t<e;t++)if(n(a[t],r,i,o))return!0;return!1})(r,e,i,s)&&r.dispatchEvent((t=>{const e=Object.assign({},t,{bubbles:!1});return new MouseEvent(t.type,e)})(t))})},s=(t,e)=>{let r;r="iframe"===t.nodeName||"IFRAME"===t.nodeName?t.contentDocument:t;const n=["mouseup","mousedown","click","touchstart"];for(const s of n)r.addEventListener(s,r=>i(r,t,e),!1)}},1291:(t,e,r)=>{"use strict";var n=r(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},1333:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(t,e);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},1379:(t,e,r)=>{"use strict";var n=r(6518),i=r(6194),s=r(2248),o=s.get,a=s.has,c=s.set;n({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,e){var r,n,s=i(this);return a(s,t)?(r=o(s,t),"update"in e&&(r=e.update(r,t,s),c(s,t,r)),r):(n=e.insert(t,s),c(s,t,n),n)}})},1385:(t,e,r)=>{"use strict";var n=r(9539);t.exports=function(t,e,r){for(var i=t.length-1;i>=0;i--)if(void 0!==t[i])try{r=n(t[i].iterator,e,r)}catch(t){e="throw",r=t}if("throw"===e)throw r;return r}},1469:(t,e,r)=>{"use strict";var n=r(7433);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},1514:t=>{"use strict";t.exports=Math.abs},1517:(t,e,r)=>{"use strict";var n=r(6518),i=r(6194),s=r(2248).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=i(this),r=!0,n=0,o=arguments.length;n<o;n++)t=s(e,arguments[n]),r=r&&t;return!!r}})},1521:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},1548:(t,e,r)=>{"use strict";var n=r(4576),i=r(9039),s=r(9519),o=r(4215),a=n.structuredClone;t.exports=!!a&&!i(function(){if("DENO"===o&&s>92||"NODE"===o&&s>94||"BROWSER"===o&&s>97)return!1;var t=new ArrayBuffer(8),e=a(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength})},1549:(t,e,r)=>{"use strict";r(6632)},1619:(t,e,r)=>{"use strict";r.d(e,{A:()=>m}),r(8111),r(2489),r(7588);var n=r(3068),i=r(7961),s=r(7421),o=r(7173),a=r(7257),c=r(8285),l=r(8510),u=r(57),h=r(1758),p=r(9046),d=r(5720),f=r(3362),g=r(622);class y{constructor(t,e){this.settings=(0,p.extend)({width:null,height:null,manager:"default",view:"iframe",flow:null,method:"write",layout:null,spread:null,minSpreadWidth:800,script:null,snap:null,direction:null,ignoreClass:"",sandbox:[],stylesheet:null},e||{}),this.book=t,this.hooks={content:new l.A(this),display:new l.A(this),layout:new l.A(this),render:new l.A(this),show:new l.A(this),unloaded:new l.A(this)},this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.sections.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.sections.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.sections.hooks.content.register(this.injectScript.bind(this)),this.annotations=new i.A(this),this.themes=new a.A(this),this.epubcfi=new s.A,this.location=null,this.starting=new c.A,this.started=this.starting.promise,this.q=new h.A(this),this.q.enqueue(this.book.opened),this.q.enqueue(this.start.bind(this))}requireManager(t){let e;return"string"==typeof t?e="continuous"===t?g.A:f.A:"function"==typeof t&&(e=t),e}start(){const t=this.determineLayoutProperties();if(this.layout=new o.A(t),this.layout.on(d.qY.LAYOUT.UPDATED,(t,e)=>{this.emit(d.qY.RENDITION.LAYOUT,t,e)}),this.viewport=new u.A(this.layout),this.viewport.on(d.qY.VIEWPORT.RESIZED,t=>{"paginated"===this.layout.flow?this.layout.set({width:t.width,height:t.height}):"horizontal"===this.layout.axis?this.layout.set({height:t.height}):"vertical"===this.layout.axis&&this.layout.set({width:t.width}),this.location&&this.emit(d.qY.RENDITION.RESIZED,t)}),this.viewport.on(d.qY.VIEWPORT.ORIENTATION_CHANGE,t=>{this.emit(d.qY.RENDITION.ORIENTATION_CHANGE,t)}),!this.manager){const t=this.requireManager(this.settings.manager),e={snap:this.settings.snap,view:this.settings.view,method:this.settings.method,sandbox:this.settings.sandbox,ignoreClass:this.settings.ignoreClass};this.manager=new t(this.book,e)}this.manager.on(d.qY.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(d.qY.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(d.qY.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(d.qY.MANAGERS.RELOCATED,this.relocated.bind(this)),this.emit(d.qY.RENDITION.STARTED),navigator.epubReadingSystem={name:"epub-js",version:d.JX,layoutStyle:this.layout.style,hasFeature:t=>{switch(t){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;default:return!1}}},this.starting.resolve()}attachTo(t){return this.q.enqueue(()=>{this.manager.render(t,{width:this.settings.width,height:this.settings.height}),this.emit(d.qY.RENDITION.ATTACHED)})}display(t){return this.q.enqueue(this._display.bind(this),t)}_display(t){const e=new c.A;this.book.locations.size&&(0,p.isFloat)(t)&&(t=this.book.locations.cfiFromPercentage(parseFloat(t)));const r=this.book.sections.get(t);return r?(this.manager.display(r,t).then(()=>{e.resolve(r),this.emit(d.qY.RENDITION.DISPLAYED,r)},t=>{this.emit(d.qY.RENDITION.DISPLAY_ERROR,t)}).then(()=>{this.viewport.update()}),e.promise):(e.reject(new Error("No Section Found")),e.promise)}afterDisplayed(t){t.on(d.qY.VIEWS.MARK_CLICKED,(e,r)=>{this.triggerMarkEvent(e,r,t.contents)}),this.hooks.render.trigger(t,this).then(()=>{t.contents?this.hooks.content.trigger(t.contents,this).then(()=>{this.emit(d.qY.RENDITION.RENDERED,t)}):this.emit(d.qY.RENDITION.RENDERED,t)})}afterRemoved(t){this.hooks.unloaded.trigger(t,this).then(()=>{this.emit(d.qY.RENDITION.REMOVED,t)})}onResized(t){return this.adjustImages(t.contents)}moveTo(t){this.manager.moveTo(t)}resize(t,e){return this.viewport.size(t,e)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager))}determineLayoutProperties(){const{metadata:t,direction:e}=this.book.packaging;return{name:this.settings.layout||t.get("layout"),flow:this.settings.flow||t.get("flow"),spread:this.settings.spread||t.get("spread"),viewport:t.get("viewport"),direction:this.settings.direction||e||"ltr",orientation:this.settings.orientation||t.get("orientation"),minSpreadWidth:this.settings.minSpreadWidth,pageWidth:this.settings.pageWidth,pageHeight:this.settings.pageHeight}}updateLayout(t){this.layout.set(t)}currentLocation(){const t=this.manager.currentLocation();if(t&&t.then&&"function"==typeof t.then)t.then(t=>this.located(t));else if(t)return this.located(t)}located(t){if(0===t.length)return{};const e=t[0],r=t[t.length-1],n={atStart:!1,atEnd:!1,start:{cfi:e.mapping.start,href:e.href,index:e.index,displayed:{page:e.pages[0],total:e.total}},end:{cfi:r.mapping.end,href:r.href,index:r.index,displayed:{page:r.pages[r.pages.length-1],total:r.total}}},i=this.book.locations;if(i.size){const t=i.locationFromCfi(e.mapping.start),s=i.locationFromCfi(r.mapping.end);-1!==t&&(n.start.location=t,n.start.percentage=i.percentageFromLocation(t)),-1!==s&&(n.end.location=s,n.end.percentage=i.percentageFromLocation(s))}const s=this.book.navigation.pageList;if(s.length){const t=s.pageFromCfi(e.mapping.start),i=s.pageFromCfi(r.mapping.end);-1!==t&&(n.start.page=t),-1!==i&&(n.end.page=i)}const o=n.start.displayed.page;this.book.sections.first().index===e.index&&0===o.index&&(n.atStart=!0);const a=n.end.displayed.page;return this.book.sections.last().index===r.index&&a.index===n.end.displayed.total-1&&(n.atEnd=!0),n}relocated(t){const e=this.located(t);(e||e.start&&e.end)&&(this.location=e,this.emit(d.qY.RENDITION.RELOCATED,this.location))}passEvents(t){d.py.forEach(e=>{t.on(e,e=>this.triggerViewEvent(e,t))}),t.on(d.qY.CONTENTS.SELECTED,e=>this.triggerSelectedEvent(e,t))}triggerViewEvent(t,e){this.emit(t.type,t,e)}triggerSelectedEvent(t,e){this.emit(d.qY.RENDITION.SELECTED,t,e)}triggerMarkEvent(t,e,r){this.emit(d.qY.RENDITION.MARK_CLICKED,t,e,r)}getRange(t,e){const r=new s.A(t),n=this.manager.visible().filter(t=>{if(r.spinePos===t.section.index)return!0});if(n.length)return n[0].contents.range(r,e)}adjustImages(t){const e=t?t.content:null;if(!e)return Promise.resolve(null);const r=parseFloat(e.style["padding-top"]),n=parseFloat(e.style["padding-bottom"]),i=parseFloat(e.style["padding-left"])+parseFloat(e.style["padding-right"]),s=r+n,o=(this.layout.columnWidth?this.layout.columnWidth-i+"px":"100%")+" !important",a=e.offsetHeight-s+"px !important";return t.appendStylesheet("images",{img:{"max-width":o,"max-height":a,"object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":o,"max-height":a,"page-break-inside":"avoid","break-inside":"avoid"}})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(t){t&&t.on(d.qY.CONTENTS.LINK_CLICKED,t=>{this.display(t)})}injectStylesheet(t,e){const r=t.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),t.getElementsByTagName("head")[0].appendChild(r)}injectScript(t,e){const r=t.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",t.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(t,e){const r=this.book.packaging.metadata.get("identifier"),n=t.createElement("meta");n.setAttribute("name","dc.relation.ispartof"),r&&n.setAttribute("content",r),t.getElementsByTagName("head")[0].appendChild(n)}destroy(){this.q.destroy(),this.layout.destroy(),this.themes.destroy(),this.viewport.destroy(),this.manager.destroy(),this.hooks.display.clear(),this.hooks.content.clear(),this.hooks.layout.clear(),this.hooks.render.clear(),this.hooks.show.clear(),this.hooks.unloaded.clear(),this.hooks=void 0,this.layout=void 0,this.themes=void 0,this.manager=void 0,this.epubcfi=void 0,this.started=void 0,this.starting=void 0,this.viewport=void 0,this.q=void 0}}n(y.prototype);const m=y},1625:(t,e,r)=>{"use strict";var n=r(9504);t.exports=n({}.isPrototypeOf)},1701:(t,e,r)=>{"use strict";var n=r(6518),i=r(9565),s=r(9306),o=r(8551),a=r(1767),c=r(9462),l=r(6319),u=r(9539),h=r(684),p=r(4549),d=r(6395),f=!d&&!h("map",function(){}),g=!d&&!f&&p("map",TypeError),y=d||f||g,m=c(function(){var t=this.iterator,e=o(i(this.next,t));if(!(this.done=!!e.done))return l(t,this.mapper,[e.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:y},{map:function(t){o(this);try{s(t)}catch(t){u(this,"throw",t)}return g?i(g,this,t):new m(a(this),{mapper:t})}})},1758:(t,e,r)=>{"use strict";r.d(e,{A:()=>i}),r(4114);var n=r(8285);const i=class extends Array{constructor(t){super(),this.context=t,this.running=!1,this.paused=!1}enqueue(t,...e){let r;if("function"==typeof t){const i=new n.A;r={task:t,args:e,deferred:i,promise:i.promise}}else r={promise:t};return this.push(r),!1!==this.paused||this.running||this.run(),r.promise}dequeue(){let t;if(!this.length||this.paused)return t=new n.A,t.deferred.resolve(),t.promise;{t=this.shift();const e=t.task;if(e){const r=e.apply(this.context,t.args);return r&&"function"==typeof r.then?r.then(e=>{t.deferred.resolve(e)},e=>{t.deferred.reject(e)}):(t.deferred.resolve(r),t.promise)}if(t.promise)return t.promise}}dump(){for(;this.length;)this.dequeue()}run(){return!1===this.running&&(this.running=!0,this.deferred=new n.A),requestAnimationFrame(()=>{this.length?this.dequeue().then(()=>{this.run()}):(this.deferred.resolve(),this.running=!1)}),this.paused&&(this.paused=!1),this.deferred.promise}clear(){this.splice(0)}pause(){this.paused=!0}stop(){this.splice(0),this.running=!1,this.paused=!0}destroy(){this.splice(0),this.running=void 0,this.paused=void 0}}},1767:t=>{"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1800:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},1828:(t,e,r)=>{"use strict";var n=r(9504),i=r(9297),s=r(5397),o=r(9617).indexOf,a=r(421),c=n([].push);t.exports=function(t,e){var r,n=s(t),l=0,u=[];for(r in n)!i(a,r)&&i(n,r)&&c(u,r);for(;e.length>l;)i(n,r=e[l++])&&(~o(u,r)||c(u,r));return u}},1873:(t,e,r)=>{var n=r(9325).Symbol;t.exports=n},1946:(t,e,r)=>{"use strict";var n=r(9504),i=r(9306),s=r(4117),o=r(6198),a=r(8981),c=r(2248),l=r(6223),u=c.Map,h=c.has,p=c.set,d=n([].push);t.exports=function(t){var e,r,n,c=a(this),f=o(c),g=[],y=new u,m=s(t)?function(t){return t}:i(t);for(e=0;e<f;e++)n=m(r=c[e]),h(y,n)||p(y,n,r);return l(y,function(t){d(g,t)}),g}},2093:(t,e,r)=>{"use strict";t.exports=r(3380)()?Object.keys:r(4232)},2106:(t,e,r)=>{"use strict";var n=r(283),i=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),i.f(t,e,r)}},2134:(t,e,r)=>{"use strict";r.d(e,{A:()=>n}),r(4114);const n=class{constructor(){this.element=null,this.range=null}bind(t,e){this.element=t,this.container=e}unbind(){const t=this.element;return this.element=null,t}clear(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}render(){}dispatchEvent(t){this.element&&this.element.dispatchEvent(t)}getBoundingClientRect(){return this.element.getBoundingClientRect()}getClientRects(){const t=[];let e=this.element.firstChild;for(;e;)t.push(e.getBoundingClientRect()),e=e.nextSibling;return t}}},2140:(t,e,r)=>{"use strict";var n={};n[r(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},2195:(t,e,r)=>{"use strict";var n=r(9504),i=n({}.toString),s=n("".slice);t.exports=function(t){return s(i(t),8,-1)}},2205:(t,e,r)=>{"use strict";var n=r(6743),i=r(1002),s=r(3144);t.exports=function(){return s(n,i,arguments)}},2211:(t,e,r)=>{"use strict";var n=r(9039);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2248:(t,e,r)=>{"use strict";var n=r(9504),i=Map.prototype;t.exports={Map,set:n(i.set),get:n(i.get),has:n(i.has),remove:n(i.delete),proto:i}},2299:(t,e,r)=>{"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,s,o,a=[],c=!0,l=!1;try{if(s=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var o=void 0!==/a/g.flags,a=function(t){var e=[];return t.forEach(function(t){return e.push(t)}),e},c=function(t){var e=[];return t.forEach(function(t,r){return e.push([r,t])}),e},l=Object.is?Object.is:r(7653),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:r(4133);function p(t){return t.call.bind(t)}var d=p(Object.prototype.hasOwnProperty),f=p(Object.prototype.propertyIsEnumerable),g=p(Object.prototype.toString),y=r(537).types,m=y.isAnyArrayBuffer,v=y.isArrayBufferView,b=y.isDate,w=y.isMap,x=y.isRegExp,E=y.isSet,A=y.isNativeError,O=y.isBoxedPrimitive,S=y.isNumberObject,q=y.isStringObject,T=y.isBooleanObject,k=y.isBigIntObject,j=y.isSymbolObject,R=y.isFloat32Array,N=y.isFloat64Array;function C(t){if(0===t.length||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return 10===t.length&&t>=Math.pow(2,32)}function I(t){return Object.keys(t).filter(C).concat(u(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function P(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function L(t,e,r,n){if(t===e)return 0!==t||!r||l(t,e);if(r){if("object"!==s(t))return"number"==typeof t&&h(t)&&h(e);if("object"!==s(e)||null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(null===t||"object"!==s(t))return(null===e||"object"!==s(e))&&t==e;if(null===e||"object"!==s(e))return!1}var i,a,c,u,p=g(t);if(p!==g(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var d=I(t),f=I(e);return d.length===f.length&&M(t,e,r,n,1,d)}if("[object Object]"===p&&(!w(t)&&w(e)||!E(t)&&E(e)))return!1;if(b(t)){if(!b(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(x(t)){if(!x(e)||(c=t,u=e,!(o?c.source===u.source&&c.flags===u.flags:RegExp.prototype.toString.call(c)===RegExp.prototype.toString.call(u))))return!1}else if(A(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(v(t)){if(r||!R(t)&&!N(t)){if(!function(t,e){return t.byteLength===e.byteLength&&0===P(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return!1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}(t,e))return!1;var y=I(t),C=I(e);return y.length===C.length&&M(t,e,r,n,0,y)}if(E(t))return!(!E(e)||t.size!==e.size)&&M(t,e,r,n,2);if(w(t))return!(!w(e)||t.size!==e.size)&&M(t,e,r,n,3);if(m(t)){if(a=e,(i=t).byteLength!==a.byteLength||0!==P(new Uint8Array(i),new Uint8Array(a)))return!1}else if(O(t)&&!function(t,e){return S(t)?S(e)&&l(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):q(t)?q(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):T(t)?T(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):k(t)?k(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):j(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}(t,e))return!1}return M(t,e,r,n,0)}function D(t,e){return e.filter(function(e){return f(t,e)})}function M(t,e,r,i,o,l){if(5===arguments.length){l=Object.keys(t);var h=Object.keys(e);if(l.length!==h.length)return!1}for(var p=0;p<l.length;p++)if(!d(e,l[p]))return!1;if(r&&5===arguments.length){var g=u(t);if(0!==g.length){var y=0;for(p=0;p<g.length;p++){var m=g[p];if(f(t,m)){if(!f(e,m))return!1;l.push(m),y++}else if(f(e,m))return!1}var v=u(e);if(g.length!==v.length&&D(e,v).length!==y)return!1}else{var b=u(e);if(0!==b.length&&0!==D(e,b).length)return!1}}if(0===l.length&&(0===o||1===o&&0===t.length||0===t.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var w=i.val1.get(t);if(void 0!==w){var x=i.val2.get(e);if(void 0!==x)return w===x}i.position++}i.val1.set(t,i.position),i.val2.set(e,i.position);var E=function(t,e,r,i,o,l){var u=0;if(2===l){if(!function(t,e,r,n){for(var i=null,o=a(t),c=0;c<o.length;c++){var l=o[c];if("object"===s(l)&&null!==l)null===i&&(i=new Set),i.add(l);else if(!e.has(l)){if(r)return!1;if(!B(t,e,l))return!1;null===i&&(i=new Set),i.add(l)}}if(null!==i){for(var u=a(e),h=0;h<u.length;h++){var p=u[h];if("object"===s(p)&&null!==p){if(!_(i,p,r,n))return!1}else if(!r&&!t.has(p)&&!_(i,p,r,n))return!1}return 0===i.size}return!0}(t,e,r,o))return!1}else if(3===l){if(!function(t,e,r,i){for(var o=null,a=c(t),l=0;l<a.length;l++){var u=n(a[l],2),h=u[0],p=u[1];if("object"===s(h)&&null!==h)null===o&&(o=new Set),o.add(h);else{var d=e.get(h);if(void 0===d&&!e.has(h)||!L(p,d,r,i)){if(r)return!1;if(!U(t,e,h,p,i))return!1;null===o&&(o=new Set),o.add(h)}}}if(null!==o){for(var f=c(e),g=0;g<f.length;g++){var y=n(f[g],2),m=y[0],v=y[1];if("object"===s(m)&&null!==m){if(!z(o,t,m,v,r,i))return!1}else if(!(r||t.has(m)&&L(t.get(m),v,!1,i)||z(o,t,m,v,!1,i)))return!1}return 0===o.size}return!0}(t,e,r,o))return!1}else if(1===l)for(;u<t.length;u++){if(!d(t,u)){if(d(e,u))return!1;for(var h=Object.keys(t);u<h.length;u++){var p=h[u];if(!d(e,p)||!L(t[p],e[p],r,o))return!1}return h.length===Object.keys(e).length}if(!d(e,u)||!L(t[u],e[u],r,o))return!1}for(u=0;u<i.length;u++){var f=i[u];if(!L(t[f],e[f],r,o))return!1}return!0}(t,e,r,l,i,o);return i.val1.delete(t),i.val2.delete(e),E}function _(t,e,r,n){for(var i=a(t),s=0;s<i.length;s++){var o=i[s];if(L(e,o,r,n))return t.delete(o),!0}return!1}function F(t){switch(s(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(h(t))return!1}return!0}function B(t,e,r){var n=F(r);return null!=n?n:e.has(n)&&!t.has(n)}function U(t,e,r,n,i){var s=F(r);if(null!=s)return s;var o=e.get(s);return!(void 0===o&&!e.has(s)||!L(n,o,!1,i))&&!t.has(s)&&L(n,o,!1,i)}function z(t,e,r,n,i,s){for(var o=a(t),c=0;c<o.length;c++){var l=o[c];if(L(r,l,i,s)&&L(n,e.get(l),i,s))return t.delete(l),!0}return!1}t.exports={isDeepEqual:function(t,e){return L(t,e,!1)},isDeepStrictEqual:function(t,e){return L(t,e,!0)}}},2303:(t,e,r)=>{"use strict";var n=r(4576),i=r(9504),s=n.Uint8Array,o=n.SyntaxError,a=n.parseInt,c=Math.min,l=/[^\da-f]/i,u=i(l.exec),h=i("".slice);t.exports=function(t,e){var r=t.length;if(r%2!=0)throw new o("String should be an even number of characters");for(var n=e?c(e.length,r/2):r/2,i=e||new s(n),p=0,d=0;d<n;){var f=h(t,p,p+=2);if(u(l,f))throw new o("String should only contain hex characters");i[d++]=a(f,16)}return{bytes:i,read:p}}},2359:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(6223);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0),n=o(e,function(t,n){if(r(t,n,e))return{value:t}},!0);return n&&n.value}})},2360:(t,e,r)=>{"use strict";var n,i=r(8551),s=r(6801),o=r(8727),a=r(421),c=r(397),l=r(4055),u=r(6119),h="prototype",p="script",d=u("IE_PROTO"),f=function(){},g=function(t){return"<"+p+">"+t+"</"+p+">"},y=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;m="undefined"!=typeof document?document.domain&&n?y(n):(e=l("iframe"),r="java"+p+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):y(n);for(var i=o.length;i--;)delete m[h][o[i]];return m()};a[d]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f[h]=i(t),r=new f,f[h]=null,r[d]=t):r=m(),void 0===e?r:s.f(r,e)}},2464:(t,e,r)=>{"use strict";var n=r(8452),i=r(6642);t.exports=function(){var t=i();return n(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}},2488:(t,e,r)=>{"use strict";r.d(e,{A:()=>n}),r(4114);const n=class extends Array{constructor(){super(),this.container=null,this.init()}init(){this.container=document.createElement("div"),this.container.classList.add("views-container"),this.container.style.display="flex",this.container.style.width="100%",this.container.style.height="100%"}first(){return this[0]}last(){return this[this.length-1]}get(t){return this[t]}append(t){return this.container.appendChild(t.container),this.push(t),t}prepend(t){return this.container.insertBefore(t.container,this.container.firstChild),this.unshift(t),t}insert(t,e){const r=this.container.children;return e<r.length?this.container.insertBefore(t.container,r[e]):this.container.appendChild(t.container),this.splice(e,0,t),t}remove(t,e){const r=e||this.indexOf(t);r>-1&&(this.container.removeChild(t.container),this.splice(r,1),t.destroy())}clear(){const t=this.length;for(let e=0;e<t;++e){const t=this[e];t&&this.remove(t,e)}}find(t){for(let e=0;e<this.length;e++){const r=this[e];if(r.displayed&&r.section.index==t.index)return r}}displayed(){const t=[];for(let e=0;e<this.length;e++){const r=this[e];r.displayed&&t.push(r)}return t}show(){for(let t=0;t<this.length;t++){const e=this[t];e.displayed&&e.show()}}hide(){for(let t=0;t<this.length;t++){const e=this[t];e.displayed&&e.hide()}}update(){for(let t=0;t<this.length;++t){const e=this[t];e.displayed&&e.update()}}destroy(){this.clear(),this.container=void 0}}},2489:(t,e,r)=>{"use strict";var n=r(6518),i=r(9565),s=r(9306),o=r(8551),a=r(1767),c=r(9462),l=r(6319),u=r(6395),h=r(9539),p=r(684),d=r(4549),f=!u&&!p("filter",function(){}),g=!u&&!f&&d("filter",TypeError),y=u||f||g,m=c(function(){for(var t,e,r=this.iterator,n=this.predicate,s=this.next;;){if(t=o(i(s,r)),this.done=!!t.done)return;if(e=t.value,l(r,n,[e,this.counter++],!0))return e}});n({target:"Iterator",proto:!0,real:!0,forced:y},{filter:function(t){o(this);try{s(t)}catch(t){h(this,"throw",t)}return g?i(g,this,t):new m(a(this),{predicate:t})}})},2529:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},2552:(t,e,r)=>{var n=r(1873),i=r(659),s=r(9350),o=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):s(t)}},2575:(t,e,r)=>{"use strict";r.d(e,{A:()=>o}),r(8335);var n=r(9046),i=r(8285),s=r(1010);const o=class{constructor(){this.instance=null}async request(t,e){let r;return r="blob"===(e=e||new s.A(t).extension)||"binary"===e?this.getBlob(t):"base64"===e?this.getBase64(t):this.getText(t),r.then(r=>{const n=new i.A;if(r){const t=this.handleResponse(r,e);n.resolve(t)}else n.reject({message:"File not found in: "+t,stack:(new Error).stack});return n.promise})}handleResponse(t,e){let r;return r=(0,n.isXml)(e)?(0,n.parse)(t,"text/xml"):"xhtml"===e?(0,n.parse)(t,"application/xhtml+xml"):"html"==e||"htm"==e?(0,n.parse)(t,"text/html"):"json"===e?JSON.parse(t):t,r}async getBlob(t,e){}async getText(t,e){}async getBase64(t,e){}destroy(){this.instance=void 0}}},2588:(t,e,r)=>{"use strict";r.d(e,{Kj:()=>o,OB:()=>i,V2:()=>c,iQ:()=>a,rG:()=>s}),r(8111),r(7588),r(4603),r(7566),r(8721);var n=r(9046);const i=(t,e)=>{if(!t)return;let r=(0,n.qs)(t,"head"),i=(0,n.qs)(r,"base");i||(i=t.createElement("base"),r.insertBefore(i,r.firstChild));let s=e.url;s.indexOf("://")>-1||(s=new URL(s,t.baseURI).href),i.setAttribute("href",s)},s=(t,e)=>{if(!t)return;let r=e.canonical,i=(0,n.qs)(t,"head"),s=(0,n.qs)(i,"link[rel='canonical']");s?s.setAttribute("href",r):(s=t.createElement("link"),s.setAttribute("rel","canonical"),s.setAttribute("href",r),i.appendChild(s))},o=(t,e)=>{if(!t)return;let r=(0,n.qs)(t,"head"),i=(0,n.qs)(r,"link[property='dc.identifier']");i?i.setAttribute("content",e.idref):(i=t.createElement("meta"),i.setAttribute("name","dc.identifier"),i.setAttribute("content",e.idref),r.appendChild(i))},a=(t,e)=>{const r=t.querySelectorAll("a[href]");return r.length?(r.forEach(t=>(t=>{const r=t.getAttribute("href");if(0===r.indexOf("mailto:"))return 0;r.indexOf("://")>-1?t.setAttribute("target","_blank"):t.onclick=t=>(e(r),!1)})(t)),r):r},c=(t,e,r,n)=>(r.forEach((r,i)=>{r&&n[i]&&(r=((t,e)=>{const r=t.split("/");let n="";for(let t=1;t<r.length;++t)n+="../";return n+e})(e.href,r),r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp(r,"g"),n[i]))}),t)},2596:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var n=r(3068),i=r(8285),s=r(9046),o=r(5720);const a=Math.PI/2,c={easeOutSine:t=>Math.sin(t*a),easeInOutSine:t=>-.5*(Math.cos(Math.PI*t)-1),easeInOutQuint:t=>(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2),easeInCubic:t=>Math.pow(t,3)};class l{constructor(t,e){this.settings=(0,s.extend)({duration:300,minVelocity:.2,minDistance:10,easing:c.easeInCubic},e||{}),this.supportsTouch()&&this.setup(t)}setup(t){this.manager=t,this.layout=this.manager.layout,this.element=this.manager.views.container,this.scroller=this.element,this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical="vertical"===this.manager.layout.axis,this.manager.paginated&&!this.isVertical&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}disableScroll(){}enableScroll(){}addListeners(){window.addEventListener("resize",this.onResize.bind(this)),this.scroller.addEventListener("scroll",this.onScroll.bind(this)),this.scroller.addEventListener("touchstart",this.onTouchStart.bind(this),{passive:!0}),this.scroller.addEventListener("touchmove",this.onTouchMove.bind(this),{passive:!0}),this.scroller.addEventListener("touchend",this.onTouchEnd.bind(this),{passive:!0}),this.on("touchstart",this.onTouchStart.bind(this)),this.on("touchmove",this.onTouchMove.bind(this)),this.on("touchend",this.onTouchEnd.bind(this)),this.manager.on(o.qY.MANAGERS.ADDED,this.afterDisplayed.bind(this))}removeListeners(){window.removeEventListener("resize",this.onResize.bind(this)),this.scroller.removeEventListener("scroll",this.onScroll.bind(this)),this.scroller.removeEventListener("touchstart",this.onTouchStart.bind(this),{passive:!0}),this.scroller.removeEventListener("touchmove",this.onTouchMove.bind(this),{passive:!0}),this.scroller.removeEventListener("touchend",this.onTouchEnd.bind(this),{passive:!0}),this.off("touchstart",this.onTouchStart.bind(this)),this.off("touchmove",this.onTouchMove.bind(this)),this.off("touchend",this.onTouchEnd.bind(this)),this.manager.off(o.qY.MANAGERS.ADDED,this.afterDisplayed.bind(this))}afterDisplayed(t){const e=t.contents;["touchstart","touchmove","touchend"].forEach(t=>{e.on(t,t=>this.triggerViewEvent(t,e))})}triggerViewEvent(t,e){this.emit(t.type,t,e)}onScroll(t){this.scrollLeft=this.scroller.scrollLeft,this.scrollTop=this.scroller.scrollTop}onResize(t){this.resizeCanceler=!0}onTouchStart(t){const{screenX:e,screenY:r}=t.touches[0];this.touchCanceler=!0,this.startTouchX||(this.startTouchX=e,this.startTouchY=r,this.startTime=(new Date).getTime()),this.endTouchX=e,this.endTouchY=r,this.endTime=(new Date).getTime()}onTouchMove(t){const{screenX:e,screenY:r}=t.touches[0],n=Math.abs(r-this.endTouchY);this.touchCanceler=!0,n<10&&(this.element.scrollLeft-=e-this.endTouchX),this.endTouchX=e,this.endTouchY=r,this.endTime=(new Date).getTime()}onTouchEnd(t){this.touchCanceler=!1;let e=this.wasSwiped();0!==e?this.snap(e):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){const t=this.layout.pageWidth*this.layout.divisor,e=this.endTouchX-this.startTouchX,r=Math.abs(e),n=e/(this.endTime-this.startTime),i=this.settings.minVelocity;return r<=this.settings.minDistance||r>=t?0:n>i?-1:n<-i?1:void 0}needsSnap(){return this.scrollLeft%(this.layout.pageWidth*this.layout.divisor)!==0}snap(t=0){const e=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor;let n=Math.round(e/r)*r;return t&&(n+=t*r),this.smoothScrollTo(n)}smoothScrollTo(t){const e=new i.A,r=this.scrollLeft,n=(new Date).getTime(),s=this.settings.duration;this.snapping=!0;const o=()=>{const i=(new Date).getTime(),a=Math.min(1,(i-n)/s);if(this.touchCanceler||this.resizeCanceler)return this.resizeCanceler=!1,this.snapping=!1,void e.resolve();a<1?(requestAnimationFrame(o),this.scrollTo(r+(t-r)*a,0)):(this.scrollTo(t,0),this.snapping=!1,e.resolve())};return o.call(this),e.promise}scrollTo(t=0,e=0){this.scroller.scrollLeft=t,this.scroller.scrollTop=e}destroy(){void 0!==this.scroller&&(this.removeListeners(),this.scroller=void 0)}}n(l.prototype);const u=l},2603:(t,e,r)=>{"use strict";var n=r(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},2652:(t,e,r)=>{"use strict";var n=r(6080),i=r(9565),s=r(8551),o=r(6823),a=r(4209),c=r(6198),l=r(1625),u=r(81),h=r(851),p=r(9539),d=TypeError,f=function(t,e){this.stopped=t,this.result=e},g=f.prototype;t.exports=function(t,e,r){var y,m,v,b,w,x,E,A=r&&r.that,O=!(!r||!r.AS_ENTRIES),S=!(!r||!r.IS_RECORD),q=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),k=n(e,A),j=function(t){return y&&p(y,"normal"),new f(!0,t)},R=function(t){return O?(s(t),T?k(t[0],t[1],j):k(t[0],t[1])):T?k(t,j):k(t)};if(S)y=t.iterator;else if(q)y=t;else{if(!(m=h(t)))throw new d(o(t)+" is not iterable");if(a(m)){for(v=0,b=c(t);b>v;v++)if((w=R(t[v]))&&l(g,w))return w;return new f(!1)}y=u(t,m)}for(x=S?t.next:y.next;!(E=i(x,y)).done;){try{w=R(E.value)}catch(t){p(y,"throw",t)}if("object"==typeof w&&w&&l(g,w))return w}return new f(!1)}},2665:(t,e,r)=>{"use strict";r.d(e,{A:()=>a}),r(4114),r(8111),r(7588);var n=r(9507),i=r(5263),s=r(8940),o=r(9046);const a=class{constructor(){this.landmarks=new n.A,this.pageList=new i.A,this.toc=new s.A}clear(){this.landmarks.clear(),this.pageList.clear(),this.toc.clear()}async parse(t){const e=[],r=t.documentElement;return"html"===r.tagName?(0,o.qsa)(t,"nav").forEach(t=>{switch(t.getAttribute("epub:type")){case"landmarks":e.push(this.landmarks.parse(t));break;case"page-list":e.push(this.pageList.parse(t));break;case"toc":e.push(this.toc.parse(t))}}):"ncx"===r.tagName&&[...r.children].forEach(t=>{switch(t.tagName){case"navMap":e.push(this.toc.parse(t));break;case"pageList":e.push(this.pageList.parse(t))}}),Promise.all(e).then(()=>this)}async load(t){const e=[];return e.push(this.landmarks.parse(t.landmarks||[])),e.push(this.pageList.parse(t["page-list"]||[])),e.push(this.toc.parse(t.toc||[])),Promise.all(e).then(()=>this)}forEach(...t){this.toc.forEach(...t)}destroy(){this.clear(),this.landmarks.destroy(),this.landmarks=void 0,this.pageList.destroy(),this.pageList=void 0,this.toc.destroy(),this.toc=void 0}}},2682:(t,e,r)=>{"use strict";var n=r(9600),i=Object.prototype.toString,s=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){if(!n(e))throw new TypeError("iterator must be a function");var o,a;arguments.length>=3&&(o=r),a=t,"[object Array]"===i.call(a)?function(t,e,r){for(var n=0,i=t.length;n<i;n++)s.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,o):"string"==typeof t?function(t,e,r){for(var n=0,i=t.length;n<i;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,o):function(t,e,r){for(var n in t)s.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,o)}},2777:(t,e,r)=>{"use strict";var n=r(9565),i=r(34),s=r(757),o=r(5966),a=r(4270),c=r(8227),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var r,c=o(t,u);if(c){if(void 0===e&&(e="default"),r=n(c,t,e),!i(r)||s(r))return r;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2787:(t,e,r)=>{"use strict";var n=r(9297),i=r(4901),s=r(8981),o=r(6119),a=r(2211),c=o("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=s(t);if(n(e,c))return e[c];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof l?u:null}},2796:(t,e,r)=>{"use strict";var n=r(9039),i=r(4901),s=/#|\.prototype\./,o=function(t,e){var r=c[a(t)];return r===u||r!==l&&(i(e)?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},2804:t=>{"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=e+"+/",n=e+"-_",i=function(t){for(var e={},r=0;r<64;r++)e[t.charAt(r)]=r;return e};t.exports={i2c:r,c2i:i(r),i2cUrl:n,c2iUrl:i(n)}},2812:t=>{"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},2839:(t,e,r)=>{"use strict";var n=r(4576).navigator,i=n&&n.userAgent;t.exports=i?String(i):""},2955:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(9046);const i=class{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(t,e){this.startContainer=t,this.startOffset=e,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(t,e){this.endContainer=t,this.endOffset=e,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(t){this.collapsed=!0,t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(t){const e=t.parentNode,r=Array.prototype.indexOf.call(e.childNodes,t);this.setStart(e,r),this.setEnd(e,r+1)}selectNodeContents(t){const e=t.nodeType===Node.TEXT_NODE?t.textContent.length:parent.childNodes.length;this.setStart(t,0),this.setEnd(t,e)}_commonAncestorContainer(t,e){const r=(0,n.parents)(t||this.startContainer),i=(0,n.parents)(e||this.endContainer);if(r[0]==i[0])for(let t=0;t<r.length;t++)if(r[t]!=i[t])return r[t-1]}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}},2967:(t,e,r)=>{"use strict";var n=r(6706),i=r(34),s=r(7750),o=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return s(r),o(n),i(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},3003:t=>{"use strict";t.exports=function(t){return t!=t}},3036:t=>{"use strict";var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}t.exports=e},3068:(t,e,r)=>{"use strict";var n,i,s,o,a,c,l,u=r(8263),h=r(5499),p=Function.prototype.apply,d=Function.prototype.call,f=Object.create,g=Object.defineProperty,y=Object.defineProperties,m=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var r,i;return h(e),i=this,n.call(this,t,r=function(){s.call(i,t,r),p.call(e,this,arguments)}),r.__eeOnceListener__=e,this},a={on:n=function(t,e){var r;return h(e),m.call(this,"__ee__")?r=this.__ee__:(r=v.value=f(null),g(this,"__ee__",v),v.value=null),r[t]?"object"==typeof r[t]?r[t].push(e):r[t]=[r[t],e]:r[t]=e,this},once:i,off:s=function(t,e){var r,n,i,s;if(h(e),!m.call(this,"__ee__"))return this;if(!(r=this.__ee__)[t])return this;if("object"==typeof(n=r[t]))for(s=0;i=n[s];++s)i!==e&&i.__eeOnceListener__!==e||(2===n.length?r[t]=n[s?0:1]:n.splice(s,1));else n!==e&&n.__eeOnceListener__!==e||delete r[t];return this},emit:o=function(t){var e,r,n,i,s;if(m.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(r=arguments.length,s=new Array(r-1),e=1;e<r;++e)s[e-1]=arguments[e];for(i=i.slice(),e=0;n=i[e];++e)p.call(n,this,s)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),e=1;e<r;++e)s[e-1]=arguments[e];p.call(i,this,s)}}},c={on:u(n),once:u(i),off:u(s),emit:u(o)},l=y({},c),t.exports=e=function(t){return null==t?f(l):y(Object(t),c)},e.methods=a},3093:(t,e,r)=>{"use strict";var n=r(4459);t.exports=function(t){return n(t)||0===t?t:t<0?-1:1}},3126:(t,e,r)=>{"use strict";var n=r(6743),i=r(9675),s=r(76),o=r(3144);t.exports=function(t){if(t.length<1||"function"!=typeof t[0])throw new i("a function is required");return o(n,s,t)}},3144:(t,e,r)=>{"use strict";var n=r(6743),i=r(1002),s=r(76),o=r(7119);t.exports=o||n.call(s,i)},3167:(t,e,r)=>{"use strict";var n=r(4901),i=r(34),s=r(2967);t.exports=function(t,e,r){var o,a;return s&&n(o=e.constructor)&&o!==r&&i(a=o.prototype)&&a!==r.prototype&&s(t,a),t}},3238:(t,e,r)=>{"use strict";var n=r(4576),i=r(7811),s=r(7394),o=n.DataView;t.exports=function(t){if(!i||0!==s(t))return!1;try{return new o(t),!1}catch(t){return!0}}},3241:(t,e,r)=>{"use strict";var n=r(4644),i=r(7957),s=n.aTypedArray,o=n.getTypedArrayConstructor;(0,n.exportTypedArrayMethod)("groupBy",function(t){var e=arguments.length>1?arguments[1]:void 0;return i(s(this),t,e,o)},!0)},3317:t=>{"use strict";t.exports=function(t,e){return t===e||t!=t&&e!=e}},3362:(t,e,r)=>{"use strict";r.d(e,{A:()=>m}),r(4114),r(8111),r(116),r(7588),r(1701);var n=r(3068),i=r(7501),s=r(2488),o=r(1758),a=r(8797),c=r(4844),l=r(4112),u=r(8285),h=r(5720),p=r(9046),d=r(8221);const f="horizontal",g="vertical";class y{constructor(t,e){this.name="default",this.load=t.load.bind(t),this.layout=t.rendition.layout,this.layout.on(h.qY.LAYOUT.UPDATED,(t,e)=>{e.flow&&(this.paginated="paginated"===t.flow),this.views.update(),this.calculate()}),this.settings=(0,p.extend)({view:"iframe",method:null,sandbox:[],ignoreClass:"",forceEvenPages:!0},e||{}),this.paginated="paginated"===this.layout.flow,this.location=[],this.mapping=new i.A(this.layout),this.rendered=!1,this.scrollType=null,this.views=new s.A,this.viewport=t.rendition.viewport,this.writingMode=null,this.q=new o.A(this)}render(t,e){this.scrollType=(0,l.A)(),this.viewport.attachTo(t,{views:this.views,width:e.width,height:e.height}),this.rendered=!0,this.appendEventListeners(),window.onpagehide=this.destroy.bind(this)}display(t,e){const r=new u.A;(e===t.href||(0,p.isNumber)(e))&&(e=void 0);const n=this.views.find(t);if(n){const t=n.offset();let i,s=t.top;return"ltr"===this.layout.direction?(i=t.left,this.scrollTo(i,s,!0)):(i=t.left+n.width,this.scrollTo(i,s,!0)),e&&this.moveTo(n.locationOf(e),n.width),r.resolve(),r.promise}return this.clear(),this.append(t).then(t=>{if(e){const r=t.locationOf(e);this.moveTo(r,t.width)}return t},t=>{r.reject(t)}).then(t=>{this.views.show(),r.resolve(t)}),r.promise}appendEventListeners(){const t=this.views.container;t.addEventListener("scroll",this.onscroll.bind(this)),"onscrollend"in window&&t.addEventListener("scrollend",this.onscrollend.bind(this));const e="default"===this.name?0:30;this.scrollend=d(this.scrolled.bind(this),e)}removeEventListeners(){const t=this.views.container;t.removeEventListener("scroll",this.onscroll.bind(this)),"onscrollend"in window&&t.removeEventListener("scrollend",this.onscrollend.bind(this)),this.scrollend=void 0}requireView(t){let e;return"string"==typeof t?e="inline"===t?c.A:a.A:"function"==typeof t&&(e=t),e}createView(t){return new(this.requireView(this.settings.view))(this.layout,t,{snap:this.settings.snap,method:this.settings.method,sandbox:this.settings.sandbox,ignoreClass:this.settings.ignoreClass,forceEvenPages:this.settings.forceEvenPages})}displayed(t){this.emit(h.qY.MANAGERS.ADDED,t)}resized(t){this.relocated(),this.emit(h.qY.MANAGERS.RESIZED,t)}moveTo(t,e){let r,n=0;const i=this.views.container;this.paginated?(n=Math.floor(t.left/this.layout.delta)*this.layout.delta,n+this.layout.delta>i.scrollWidth&&(n=i.scrollWidth-this.layout.delta),r=Math.floor(t.top/this.layout.delta)*this.layout.delta,r+this.layout.delta>i.scrollHeight&&(r=i.scrollHeight-this.layout.delta)):r=t.top,"rtl"===this.layout.direction&&(n+=this.layout.delta,n-=e),this.scrollTo(n,r,!0)}append(t){const e=this.createView(t);return e.on(h.qY.VIEWS.DISPLAYED,()=>{this.displayed(e)}),e.on(h.qY.VIEWS.RESIZED,t=>{this.resized(e)}),e.on(h.qY.VIEWS.WRITING_MODE,t=>{this.updateWritingMode(t)}),this.views.append(e),e.display(this.load)}prepend(t){const e=this.createView(t);return e.on(h.qY.VIEWS.DISPLAYED,()=>{this.displayed(e)}),e.on(h.qY.VIEWS.RESIZED,t=>{this.counter(e),this.resized(e)}),e.on(h.qY.VIEWS.WRITING_MODE,t=>{this.updateWritingMode(t)}),this.views.prepend(e),e.display(this.load)}counter(t){const e=t.contents.content;if(this.layout.axis===g){const t=e.scrollHeight;this.scrollBy(0,t,!0)}else{const t=e.scrollWidth;this.scrollBy(t,0,!0)}}next(){let t,e;const r=new u.A,n=this.layout.direction,i=this.layout.axis===f&&this.paginated,s=this.layout.axis===g&&this.paginated,o=this.views.container;return 0===this.views.length?(r.resolve(null),r.promise):(i&&"ltr"===n?(this.scrollLeft=o.scrollLeft,t=o.scrollLeft+o.offsetWidth+this.layout.delta,t<=o.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):i&&"rtl"===n?(this.scrollLeft=o.scrollLeft,"default"===this.scrollType?(t=o.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=o.scrollLeft+-1*this.layout.delta,t>-1*o.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):s&&o.scrollTop+o.offsetHeight<o.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next(),e?(this.clear(),this.calculate(),this.append(e).then(t=>{i||"rtl"!==n||"default"!==this.scrollType||this.scrollTo(o.scrollWidth,0,!0),this.views.show(),r.resolve(t)},t=>{r.reject(t)})):(this.relocated(),r.resolve(null)),r.promise)}prev(){let t,e;const r=new u.A,n=this.layout.direction,i=this.layout.axis===f&&this.paginated,s=this.layout.axis===g&&this.paginated,o=this.views.container;return 0===this.views.length?(r.resolve(null),r.promise):(i&&"ltr"===n?(this.scrollLeft=o.scrollLeft,t=o.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):i&&"rtl"===n?(this.scrollLeft=o.scrollLeft,"default"===this.scrollType?(t=o.scrollLeft+o.offsetWidth,t<o.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=o.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):s&&o.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev(),e?(this.clear(),this.calculate(),this.prepend(e).then(t=>{i&&("rtl"===n?"default"===this.scrollType?this.scrollTo(0,0,!0):this.scrollTo(-1*o.scrollWidth+this.layout.delta,0,!0):this.scrollTo(o.scrollWidth-this.layout.delta,0,!0)),this.views.show(),r.resolve(t)},t=>{r.reject(t)})):(this.relocated(),r.resolve(null)),r.promise)}current(){const t=this.visible();return t.length?t[t.length-1]:null}clear(){this.views.hide(),this.scrollTo(0,0,!0),this.views.clear()}relocated(){this.currentLocation(),this.emit(h.qY.MANAGERS.RELOCATED,this.location)}currentLocation(){return this.layout.axis===f&&this.paginated?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){const t=this.views.container;return this.visible().map(e=>{const{href:r,index:n}=e.section;let i,s,o,a,c;if(this.layout.axis===g){const r=t.scrollTop;i=Math.abs(r),s=Math.abs(r)+t.clientHeight,o=Math.ceil(i/t.clientHeight),a=Math.ceil(s/t.clientHeight),c=this.layout.count(e.height,t.clientHeight).pages}else{const r=t.scrollLeft;i=Math.abs(r),s=Math.abs(r)+t.clientWidth,o=Math.ceil(i/t.clientWidth),a=Math.ceil(s/t.clientWidth),c=this.layout.count(e.height,t.clientWidth).pages}const l=[];for(let t=o;t<a;t++)l.push({index:t});const u=this.mapping.page(e.contents,e.section.cfiBase,i,s);return{axis:this.layout.axis,href:r,index:n,pages:l,total:c,mapping:u}})}paginatedLocation(){const t=this.views.container,e=this.viewport.rect,r=t.scrollLeft;return this.visible().map(t=>{const{href:n,index:i}=t.section,s=this.layout.count(t.width).pages,o=Math.abs(r),a=Math.abs(r)+e.width,c=Math.floor(o/this.layout.pageWidth),l=Math.floor(a/this.layout.pageWidth),u=[];for(let t=c;t<l;t++)u.push({index:t});const h=this.mapping.page(t.contents,t.section.cfiBase,o,a);return{axis:this.layout.axis,href:n,index:i,pages:u,total:s,mapping:h}})}isVisible(t,e,r){const n=t.position(),i=this.viewport.rect;return this.layout.axis===f&&n.right>i.left-e&&n.left<i.right+r||this.layout.axis===g&&n.bottom>i.top-e&&n.top<i.bottom+r}visible(){const t=this.views.displayed(),e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];this.isVisible(n,0,0)&&e.push(n)}return e}scrollBy(t,e,r){const n="rtl"===this.layout.direction?-1:1,i=this.views.container;r&&(this.ignore=!0),t&&(i.scrollLeft+=t*n),e&&(i.scrollTop+=e)}scrollTo(t,e,r){r&&(this.ignore=!0),this.views.container.scrollLeft=t,this.views.container.scrollTop=e}scrolled(t){this.paginated&&"default"===this.name||(this.relocated(),this.emit(h.qY.MANAGERS.SCROLLED,{top:t.target.scrollTop,left:t.target.scrollLeft}))}onscroll(t){this.paginated&&"default"===this.name||(this.ignore?this.ignore=!1:(this.emit(h.qY.MANAGERS.SCROLL,{top:t.target.scrollTop,left:t.target.scrollLeft}),"onscrollend"in window||this.scrollend(t)))}onscrollend(t){this.scrollend(t)}calculate(){this.paginated?(this.layout.calculate(this.viewport.rect.width,this.viewport.rect.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this.viewport.rect.width,this.viewport.rect.height)}updateWritingMode(t){this.writingMode=t}getContents(){const t=[];return this.views?(this.views.forEach(e=>{e&&t.push(e.contents)}),t):t}isRendered(){return this.rendered}destroy(){this.views&&(this.removeEventListeners(),this.views.destroy(),this.views=void 0,this.ignore=void 0,this.mapping.destroy(),this.mapping=void 0,this.location=void 0,this.rendered=void 0,this.paginated=void 0,this.scrollType=void 0,this.writingMode=void 0)}}n(y.prototype);const m=y},3380:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},3392:(t,e,r)=>{"use strict";var n=r(9504),i=0,s=Math.random(),o=n(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},3412:(t,e,r)=>{"use strict";r.d(e,{A:()=>l}),r(4114),r(4603),r(7566),r(8721);var n=r(1010),i=r(8285),s=r(9046);const o=!(!window||!window.URL),a=o?"blob":"arraybuffer",c=(t,e,r="Error")=>{const n=t.target;e.dump.error=n.status,e.reject({message:r,target:n,stack:(new Error).stack,trace:{dump:e.dump,uuid:e.id}})},l=(t,e,r=!1,l=[])=>{const u=new i.A,h=new XMLHttpRequest;e=e||new n.A(t).extension,h.withCredentials=r,(0,s.isXml)(e)?(h.responseType="document",h.overrideMimeType("text/xml")):"xhtml"===e||"html"===e||"htm"===e?h.responseType="document":"binary"===e?h.responseType="arraybuffer":"blob"===e?h.responseType=a:"json"===e?h.responseType="json":"text"===e&&(h.responseType="text"),h.onreadystatechange=t=>((t,e)=>{const r=t.target;403===r.status?c(t,e,"Forbidden"):e.dump.read?e.dump.read.push(r.status):e.dump.read=[r.status]})(t,u),h.onload=t=>((t,e,r)=>{const n=t.target;let i;"document"===n.responseType?null===n.response&&null===n.responseXML?r.reject({message:"Empty Response",target:n,stack:(new Error).stack,trace:{dump:r.dump,uuid:r.id}}):n.responseXML?i=n.responseXML:(0,s.isXml)(e)?i=(0,s.parse)(n.response,"text/xml"):"xhtml"===e?i=(0,s.parse)(n.response,"application/xhtml+xml"):"html"!==e&&"htm"!==e||(i=(0,s.parse)(n.response,"text/html")):i="json"===n.responseType?n.response:"blob"===n.responseType?o?n.response:new Blob([n.response]):n.response,r.dump.load=[n.status,n.responseType],r.resolve(i)})(t,e,u),h.onprogress=t=>((t,e)=>{const r=t.target;e.dump.progress=r.status})(t,u),h.onloadstart=t=>((t,e)=>{const r=t.target;e.dump.start=r.status})(t,u),h.onloadend=t=>((t,e)=>{const r=t.target;e.dump.end=r.status})(t,u),h.onerror=t=>c(t,u),h.open("GET",t,!0);for(const t in l)h.setRequestHeader(t,l[t]);return h.send(),u.promise}},3463:t=>{"use strict";var e=TypeError;t.exports=function(t){if("string"==typeof t)return t;throw new e("Argument is not a string")}},3495:(t,e,r)=>{"use strict";r.d(e,{A:()=>c}),r(4114),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(7421),i=r(8510),s=r(3864),o=r(2588);class a extends Map{constructor(){super(),this.hooks={content:new i.A(this),serialize:new i.A(this)},this.hooks.content.register(o.OB),this.hooks.content.register(o.Kj),this.hooks.content.register(o.rG),this.points={},this.nav=void 0,this.pkg=void 0}clear(){this.forEach(t=>t.destroy()),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks.content.register(o.OB),this.hooks.content.register(o.Kj),this.hooks.content.register(o.rG),this.points={},super.clear()}get(t){let e;if(void 0===t)e=this.first();else if("number"==typeof t&&!1===isNaN(t))e=[...this.values()][t];else if("string"==typeof t)if(n.A.prototype.isCfiString(t)){const r=new n.A(t).spinePos;e=[...this.values()][r]}else 0===t.indexOf("#")?(e=this.pkg.spine.get(t.substring(1)))&&(e=[...this.values()][e.index]):(e=this.nav.toc.get(t))?e=super.get(e.bind):(t=t.split("#")[0],e=super.get(t));return e||null}first(){return this.points.first||null}last(){return this.points.last||null}unpack(t,e,r,i){this.pkg=t,this.nav=e;const o=t.manifest,a=t.spine,c=e.toc;if(a.forEach((t,e)=>{const l=o.get(e),u={};if(u.cfiBase=n.A.prototype.generateChapterComponent(a.nodeIndex,t.index,t.id),l){const t=c.get(l.href);u.bind=t?t.bind:l.href,u.href=l.href,u.url=r(l.href,!0),u.canonical=i(l.href),u.properties=[],l.properties.length&&u.properties.push.apply(u.properties,l.properties)}u.idref=t.idref,u.index=t.index,u.linear=t.linear,"yes"===u.linear?(u.next=()=>{let t=u.index;for(;t<this.size-1;){let e=this.get(t+1);if(e&&e.linear)return e;t+=1}return null},u.prev=()=>{let t=u.index;for(;t>0;){let e=this.get(t-1);if(e&&e.linear)return e;t-=1}return null}):(u.prev=()=>null,u.next=()=>null);const h=new s.A(u,this.hooks);this.set(u.bind,h)}),this.size){let t=0;for(;t<this.size;){let e=this.get(t);if(e&&e.linear){this.points.first=e;break}t+=1}}if(this.size){let t=this.size;for(;t>0;){let e=this.get(t-1);if(e&&e.linear){this.points.last=e;break}t-=1}}return Promise.resolve(this)}destroy(){this.clear(),this.hooks=void 0,this.points=void 0,this.nav=void 0,this.pkg=void 0}}const c=a},3506:(t,e,r)=>{"use strict";var n=r(3925),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s("Can't set "+i(t)+" as a prototype")}},3517:(t,e,r)=>{"use strict";var n=r(9504),i=r(9039),s=r(4901),o=r(6955),a=r(7751),c=r(3706),l=function(){},u=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),d=!h.test(l),f=function(t){if(!s(t))return!1;try{return u(l,[],t),!0}catch(t){return!1}},g=function(t){if(!s(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(h,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!u||i(function(){var t;return f(f.call)||!f(Object)||!f(function(){t=!0})||t})?g:f},3595:(t,e,r)=>{"use strict";var n=r(2093),i=r(7134),s=Math.max;t.exports=function(t,e){var r,o,a,c=s(arguments.length,2);for(t=Object(i(t)),a=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},o=1;o<c;++o)n(e=arguments[o]).forEach(a);if(void 0!==r)throw r;return t}},3628:(t,e,r)=>{"use strict";var n=r(8648),i=r(1064),s=r(7176);t.exports=n?function(t){return n(t)}:i?function(t){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("getProto: not an object");return i(t)}:s?function(t){return s(t)}:null},3706:(t,e,r)=>{"use strict";var n=r(9504),i=r(4901),s=r(7629),o=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},3717:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},3724:(t,e,r)=>{"use strict";var n=r(9039);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3755:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var n=r(2134);class i extends n.A{constructor(t,{className:e,data:r,attributes:n,listeners:i}){super(),this.range=t,this.className=e,this.data=r||{},this.attributes=n||{},this.listeners=i||[]}bind(t,e){super.bind(t,e);for(const t in this.data)this.data.hasOwnProperty(t)&&(this.element.dataset[t]=this.data[t]);for(const t in this.attributes)this.attributes.hasOwnProperty(t)&&this.element.setAttribute(t,this.attributes[t]);this.className&&this.element.classList.add(this.className)}render(){this.clear();const t=this.range.getClientRects(),e=this.element.getBoundingClientRect(),r=this.container.getBoundingClientRect();for(let n=0,i=t.length;n<i;n++){const i=t[n],s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",i.left-e.left+r.left),s.setAttribute("y",i.top-e.top+r.top),s.setAttribute("height",i.height),s.setAttribute("width",i.width),this.element.appendChild(s)}}}const s=i},3777:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(6223);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0);return!1!==o(e,function(t,n){if(!r(t,n,e))return!1},!0)}})},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3864:(t,e,r)=>{"use strict";r.d(e,{A:()=>o}),r(4114),r(8111),r(116),r(8237);var n=r(7421),i=r(8285),s=r(9046);const o=class{constructor(t,e){this.idref=t.idref,this.linear="yes"===t.linear,this.index=t.index,this.href=t.href,this.url=t.url,this.canonical=t.canonical,this.cfiBase=t.cfiBase,this.next=t.next,this.prev=t.prev,this.properties=t.properties,this.hooks=e,this.document=void 0,this.contents=void 0,this.output=void 0}load(t){const e=new i.A;return this.contents?e.resolve(this.contents):t(this.url).then(t=>(this.document=t,this.contents=t.documentElement,this.hooks.content.trigger(this.document,this))).then(()=>{e.resolve(this.contents)}).catch(t=>{e.reject(t)}),e.promise}render(t){const e=new i.A;return this.load(t).then(t=>{const e=new XMLSerializer;return this.output=e.serializeToString(t),this.output}).then(()=>this.hooks.serialize.trigger(this.output,this)).then(()=>{e.resolve(this.output)}).catch(t=>{e.reject(t)}),e.promise}find(t){const e=this,r=[],n=t.toLowerCase();return(0,s.sprint)(e.document,t=>(t=>{const i=t.textContent.toLowerCase();let s,o=-1;for(;-1!==s;){if(s=i.indexOf(n,o+1),-1!==s){const i=e.document.createRange();i.setStart(t,s),i.setEnd(t,s+n.length);const o=e.cfiFromRange(i);let a;t.textContent.length<150?a=t.textContent:(a=t.textContent.substring(s-75,s+75),a="..."+a+"..."),r.push({cfi:o,excerpt:a})}o=s}})(t)),r}search(t,e=5){if(void 0===document.createTreeWalker)return this.find(t);const r=[],n=this,i=t.toLowerCase(),s=t=>{const e=t.reduce((t,e)=>t+e.textContent,"").toLowerCase().indexOf(i);if(-1!==e){const s=0,o=e+i.length;let a=0,c=0;if(e<t[s].length){for(;a<t.length-1&&(c+=t[a].length,!(o<=c));)a+=1;const i=t[s],l=t[a],u=n.document.createRange();u.setStart(i,e);const h=t.slice(0,a).reduce((t,e)=>t+e.textContent.length,0);u.setEnd(l,h>o?o:o-h);const p=n.cfiFromRange(u);let d=t.slice(0,a+1).reduce((t,e)=>t+e.textContent,"");d.length>150&&(d=d.substring(e-75,e+75),d="..."+d+"..."),r.push({cfi:p,excerpt:d})}}},o=document.createTreeWalker(n.document,NodeFilter.SHOW_TEXT,null,!1);let a,c=[];for(;a=o.nextNode();)c.push(a),c.length==e&&(s(c.slice(0,e)),c=c.slice(1,e));return c.length>0&&s(c),r}cfiFromRange(t){return new n.A(t,this.cfiBase).toString()}cfiFromElement(t){return new n.A(t,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}},3918:(t,e,r)=>{"use strict";var n=r(5606);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){var n,i,s;n=t,i=e,s=r[e],(i=a(i))in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t){if("object"!==g(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===g(e)?e:String(e)}function c(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,f(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,t)},u(t)}function h(t,e,r){return h=p()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&d(i,r.prototype),i},h.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}var y=r(537).inspect,m=r(9597).codes.ERR_INVALID_ARG_TYPE;function v(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}var b="",w="",x="",E="",A={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function O(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(e){r[e]=t[e]}),Object.defineProperty(r,"message",{value:t.message}),r}function S(t){return y(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var q=function(t,e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(q,t);var r,i,a,u,h=(r=q,i=p(),function(){var t,e=f(r);if(i){var n=f(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function q(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,q),"object"!==g(t)||null===t)throw new m("options","Object",t);var r=t.message,i=t.operator,s=t.stackStartFn,o=t.actual,a=t.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=r)e=h.call(this,String(r));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(b="[34m",w="[32m",E="[39m",x="[31m"):(b="",w="",E="",x="")),"object"===g(o)&&null!==o&&"object"===g(a)&&null!==a&&"stack"in o&&o instanceof Error&&"stack"in a&&a instanceof Error&&(o=O(o),a=O(a)),"deepStrictEqual"===i||"strictEqual"===i)e=h.call(this,function(t,e,r){var i="",s="",o=0,a="",c=!1,l=S(t),u=l.split("\n"),h=S(e).split("\n"),p=0,d="";if("strictEqual"===r&&"object"===g(t)&&"object"===g(e)&&null!==t&&null!==e&&(r="strictEqualObject"),1===u.length&&1===h.length&&u[0]!==h[0]){var f=u[0].length+h[0].length;if(f<=10){if(!("object"===g(t)&&null!==t||"object"===g(e)&&null!==e||0===t&&0===e))return"".concat(A[r],"\n\n")+"".concat(u[0]," !== ").concat(h[0],"\n")}else if("strictEqualObject"!==r&&f<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;u[0][p]===h[0][p];)p++;p>2&&(d="\n  ".concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,r-t.length)}(" ",p),"^"),p=0)}}for(var y=u[u.length-1],m=h[h.length-1];y===m&&(p++<2?a="\n  ".concat(y).concat(a):i=y,u.pop(),h.pop(),0!==u.length&&0!==h.length);)y=u[u.length-1],m=h[h.length-1];var O=Math.max(u.length,h.length);if(0===O){var q=l.split("\n");if(q.length>30)for(q[26]="".concat(b,"...").concat(E);q.length>27;)q.pop();return"".concat(A.notIdentical,"\n\n").concat(q.join("\n"),"\n")}p>3&&(a="\n".concat(b,"...").concat(E).concat(a),c=!0),""!==i&&(a="\n  ".concat(i).concat(a),i="");var T=0,k=A[r]+"\n".concat(w,"+ actual").concat(E," ").concat(x,"- expected").concat(E),j=" ".concat(b,"...").concat(E," Lines skipped");for(p=0;p<O;p++){var R=p-o;if(u.length<p+1)R>1&&p>2&&(R>4?(s+="\n".concat(b,"...").concat(E),c=!0):R>3&&(s+="\n  ".concat(h[p-2]),T++),s+="\n  ".concat(h[p-1]),T++),o=p,i+="\n".concat(x,"-").concat(E," ").concat(h[p]),T++;else if(h.length<p+1)R>1&&p>2&&(R>4?(s+="\n".concat(b,"...").concat(E),c=!0):R>3&&(s+="\n  ".concat(u[p-2]),T++),s+="\n  ".concat(u[p-1]),T++),o=p,s+="\n".concat(w,"+").concat(E," ").concat(u[p]),T++;else{var N=h[p],C=u[p],I=C!==N&&(!v(C,",")||C.slice(0,-1)!==N);I&&v(N,",")&&N.slice(0,-1)===C&&(I=!1,C+=","),I?(R>1&&p>2&&(R>4?(s+="\n".concat(b,"...").concat(E),c=!0):R>3&&(s+="\n  ".concat(u[p-2]),T++),s+="\n  ".concat(u[p-1]),T++),o=p,s+="\n".concat(w,"+").concat(E," ").concat(C),i+="\n".concat(x,"-").concat(E," ").concat(N),T+=2):(s+=i,i="",1!==R&&0!==p||(s+="\n  ".concat(C),T++))}if(T>20&&p<O-2)return"".concat(k).concat(j,"\n").concat(s,"\n").concat(b,"...").concat(E).concat(i,"\n")+"".concat(b,"...").concat(E)}return"".concat(k).concat(c?j:"","\n").concat(s).concat(i).concat(a).concat(d)}(o,a,i));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var p=A[i],d=S(o).split("\n");if("notStrictEqual"===i&&"object"===g(o)&&null!==o&&(p=A.notStrictEqualObject),d.length>30)for(d[26]="".concat(b,"...").concat(E);d.length>27;)d.pop();e=1===d.length?h.call(this,"".concat(p," ").concat(d[0])):h.call(this,"".concat(p,"\n\n").concat(d.join("\n"),"\n"))}else{var f=S(o),y="",T=A[i];"notDeepEqual"===i||"notEqual"===i?(f="".concat(A[i],"\n\n").concat(f)).length>1024&&(f="".concat(f.slice(0,1021),"...")):(y="".concat(S(a)),f.length>512&&(f="".concat(f.slice(0,509),"...")),y.length>512&&(y="".concat(y.slice(0,509),"...")),"deepEqual"===i||"equal"===i?f="".concat(T,"\n\n").concat(f,"\n\nshould equal\n\n"):y=" ".concat(i," ").concat(y)),e=h.call(this,"".concat(f).concat(y))}return Error.stackTraceLimit=u,e.generatedMessage=!r,Object.defineProperty(l(e),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),e.code="ERR_ASSERTION",e.actual=o,e.expected=a,e.operator=i,Error.captureStackTrace&&Error.captureStackTrace(l(e),s),e.stack,e.name="AssertionError",c(e)}return a=q,(u=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(t,e){return y(this,s(s({},e),{},{customInspect:!1,depth:0}))}}])&&o(a.prototype,u),Object.defineProperty(a,"prototype",{writable:!1}),q}(u(Error),y.custom);t.exports=q},3925:(t,e,r)=>{"use strict";var n=r(34);t.exports=function(t){return n(t)||null===t}},3972:(t,e,r)=>{"use strict";var n=r(34),i=String,s=TypeError;t.exports=function(t){if(void 0===t||n(t))return t;throw new s(i(t)+" is not an object or undefined")}},4035:(t,e,r)=>{"use strict";var n,i=r(6556),s=r(9092)(),o=r(9957),a=r(5795);if(s){var c=i("RegExp.prototype.exec"),l={},u=function(){throw l},h={toString:u,valueOf:u};"symbol"==typeof Symbol.toPrimitive&&(h[Symbol.toPrimitive]=u),n=function(t){if(!t||"object"!=typeof t)return!1;var e=a(t,"lastIndex");if(!e||!o(e,"value"))return!1;try{c(t,h)}catch(t){return t===l}}}else{var p=i("Object.prototype.toString");n=function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===p(t)}}t.exports=n},4039:(t,e,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(1333);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},4055:(t,e,r)=>{"use strict";var n=r(4576),i=r(34),s=n.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},4080:(t,e,r)=>{"use strict";var n=r(9202);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!n(t)}},4112:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});const n=()=>{let t="reverse";const e=(()=>{const t=document.createElement("div");t.dir="rtl",t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="0px",t.style.left="0px",t.style.overflow="hidden";const e=document.createElement("div");e.style.width="2px";const r=document.createElement("span");r.style.width="1px",r.style.display="inline-block";const n=document.createElement("span");return n.style.width="1px",n.style.display="inline-block",e.appendChild(r),e.appendChild(n),t.appendChild(e),t})();return document.body.appendChild(e),e.scrollLeft>0?t="default":"undefined"!=typeof Element&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(t="negative")):(e.scrollLeft=1,0===e.scrollLeft&&(t="negative")),document.body.removeChild(e),t}},4114:(t,e,r)=>{"use strict";var n=r(6518),i=r(8981),s=r(6198),o=r(4527),a=r(6837);n({target:"Array",proto:!0,arity:1,forced:r(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=i(this),r=s(e),n=arguments.length;a(r+n);for(var c=0;c<n;c++)e[r]=arguments[c],r++;return o(e,r),r}})},4117:t=>{"use strict";t.exports=function(t){return null==t}},4128:(t,e,r)=>{var n=r(1800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(i,""):t}},4133:(t,e,r)=>{"use strict";var n=r(487),i=r(8452),s=r(3003),o=r(6642),a=r(2464),c=n(o(),Number);i(c,{getPolyfill:o,implementation:s,shim:a}),t.exports=c},4148:(t,e,r)=>{"use strict";var n=r(5606);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function o(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=function(t){if("object"!==i(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}var c,l,u=r(9597).codes,h=u.ERR_AMBIGUOUS_ARGUMENT,p=u.ERR_INVALID_ARG_TYPE,d=u.ERR_INVALID_ARG_VALUE,f=u.ERR_INVALID_RETURN_VALUE,g=u.ERR_MISSING_ARGS,y=r(3918),m=r(537).inspect,v=r(537).types,b=v.isPromise,w=v.isRegExp,x=r(9133)(),E=r(9394)(),A=r(8075)("RegExp.prototype.test");function O(){var t=r(2299);c=t.isDeepEqual,l=t.isDeepStrictEqual}new Map;var S=!1,q=t.exports=R,T={};function k(t){if(t.message instanceof Error)throw t.message;throw new y(t)}function j(t,e,r,n){if(!r){var i=!1;if(0===e)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var s=new y({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw s.generatedMessage=i,s}}function R(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];j.apply(void 0,[R,e.length].concat(e))}q.fail=function t(e,r,i,s,o){var a,c=arguments.length;if(0===c?a="Failed":1===c?(i=e,e=void 0):(!1===S&&(S=!0,(n.emitWarning?n.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===c&&(s="!=")),i instanceof Error)throw i;var l={actual:e,expected:r,operator:void 0===s?"fail":s,stackStartFn:o||t};void 0!==i&&(l.message=i);var u=new y(l);throw a&&(u.message=a,u.generatedMessage=!0),u},q.AssertionError=y,q.ok=R,q.equal=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");e!=r&&k({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})},q.notEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");e==r&&k({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})},q.deepEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");void 0===c&&O(),c(e,r)||k({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})},q.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");void 0===c&&O(),c(e,r)&&k({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})},q.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");void 0===c&&O(),l(e,r)||k({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})},q.notDeepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");void 0===c&&O(),l(e,r)&&k({actual:e,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:t})},q.strictEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");E(e,r)||k({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})},q.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new g("actual","expected");E(e,r)&&k({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var N=o(function t(e,r,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.forEach(function(t){t in e&&(void 0!==n&&"string"==typeof n[t]&&w(e[t])&&A(e[t],n[t])?i[t]=n[t]:i[t]=e[t])})});function C(t,e,r,n){if("function"!=typeof e){if(w(e))return A(e,t);if(2===arguments.length)throw new p("expected",["Function","RegExp"],e);if("object"!==i(t)||null===t){var s=new y({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw s.operator=n.name,s}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(0===o.length)throw new d("error",e,"may not be an empty object");return void 0===c&&O(),o.forEach(function(i){"string"==typeof t[i]&&w(e[i])&&A(e[i],t[i])||function(t,e,r,n,i,s){if(!(r in t)||!l(t[r],e[r])){if(!n){var o=new N(t,i),a=new N(e,i,t),c=new y({actual:o,expected:a,operator:"deepStrictEqual",stackStartFn:s});throw c.actual=t,c.expected=e,c.operator=s.name,c}k({actual:t,expected:e,message:n,operator:s.name,stackStartFn:s})}}(t,e,i,r,o,n)}),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function I(t){if("function"!=typeof t)throw new p("fn","Function",t);try{t()}catch(t){return t}return T}function P(t){return b(t)||null!==t&&"object"===i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function L(t){return Promise.resolve().then(function(){var e;if("function"==typeof t){if(!P(e=t()))throw new f("instance of Promise","promiseFn",e)}else{if(!P(t))throw new p("promiseFn",["Function","Promise"],t);e=t}return Promise.resolve().then(function(){return e}).then(function(){return T}).catch(function(t){return t})})}function D(t,e,r,n){if("string"==typeof r){if(4===arguments.length)throw new p("error",["Object","Error","Function","RegExp"],r);if("object"===i(e)&&null!==e){if(e.message===r)throw new h("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new h("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==i(r)&&"function"!=typeof r)throw new p("error",["Object","Error","Function","RegExp"],r);if(e===T){var s="";r&&r.name&&(s+=" (".concat(r.name,")")),s+=n?": ".concat(n):".";var o="rejects"===t.name?"rejection":"exception";k({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(s),stackStartFn:t})}if(r&&!C(e,r,n,t))throw e}function M(t,e,r,n){if(e!==T){if("string"==typeof r&&(n=r,r=void 0),!r||C(e,r)){var i=n?": ".concat(n):".",s="doesNotReject"===t.name?"rejection":"exception";k({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(s).concat(i,"\n")+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}function _(t,e,r,n,s){if(!w(e))throw new p("regexp","RegExp",e);var o="match"===s;if("string"!=typeof t||A(e,t)!==o){if(r instanceof Error)throw r;var a=!r;r=r||("string"!=typeof t?'The "string" argument must be of type string. Received type '+"".concat(i(t)," (").concat(m(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(m(e),". Input:\n\n").concat(m(t),"\n"));var c=new y({actual:t,expected:e,message:r,operator:s,stackStartFn:n});throw c.generatedMessage=a,c}}function F(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];j.apply(void 0,[F,e.length].concat(e))}q.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];D.apply(void 0,[t,I(e)].concat(n))},q.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return L(e).then(function(e){return D.apply(void 0,[t,e].concat(n))})},q.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];M.apply(void 0,[t,I(e)].concat(n))},q.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return L(e).then(function(e){return M.apply(void 0,[t,e].concat(n))})},q.ifError=function t(e){if(null!=e){var r="ifError got unwanted exception: ";"object"===i(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?r+=e.constructor.name:r+=e.message:r+=m(e);var n=new y({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),s=e.stack;if("string"==typeof s){var o=s.split("\n");o.shift();for(var a=n.stack.split("\n"),c=0;c<o.length;c++){var l=a.indexOf(o[c]);if(-1!==l){a=a.slice(0,l);break}}n.stack="".concat(a.join("\n"),"\n").concat(o.join("\n"))}throw n}},q.match=function t(e,r,n){_(e,r,n,t,"match")},q.doesNotMatch=function t(e,r,n){_(e,r,n,t,"doesNotMatch")},q.strict=x(F,q,{equal:q.strictEqual,deepEqual:q.deepStrictEqual,notEqual:q.notStrictEqual,notDeepEqual:q.notDeepStrictEqual}),q.strict.strict=q.strict},4154:(t,e,r)=>{"use strict";var n=r(6955),i=TypeError;t.exports=function(t){if("Uint8Array"===n(t))return t;throw new i("Argument is not an Uint8Array")}},4190:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(2248),a=r(6223),c=o.Map,l=o.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0),n=new c;return a(e,function(t,i){r(t,i,e)&&l(n,i,t)}),n}})},4209:(t,e,r)=>{"use strict";var n=r(8227),i=r(6269),s=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},4215:(t,e,r)=>{"use strict";var n=r(4576),i=r(2839),s=r(2195),o=function(t){return i.slice(0,t.length)===t};t.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},4226:(t,e,r)=>{"use strict";var n=r(6518),i=r(4576),s=r(3463),o=r(4154),a=r(5169),c=r(2303);i.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromHex:function(t){o(this),s(t),a(this.buffer);var e=c(t,this).read;return{read:e,written:e/2}}})},4232:(t,e,r)=>{"use strict";var n=r(9762),i=Object.keys;t.exports=function(t){return i(n(t)?Object(t):t)}},4270:(t,e,r)=>{"use strict";var n=r(9565),i=r(4901),s=r(34),o=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&i(r=t.toString)&&!s(a=n(r,t)))return a;if(i(r=t.valueOf)&&!s(a=n(r,t)))return a;if("string"!==e&&i(r=t.toString)&&!s(a=n(r,t)))return a;throw new o("Can't convert object to primitive value")}},4376:(t,e,r)=>{"use strict";var n=r(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4394:(t,e,r)=>{var n=r(2552),i=r(346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},4459:t=>{"use strict";t.exports=Number.isNaN||function(t){return t!=t}},4483:(t,e,r)=>{"use strict";var n,i,s,o,a=r(4576),c=r(9429),l=r(1548),u=a.structuredClone,h=a.ArrayBuffer,p=a.MessageChannel,d=!1;if(l)d=function(t){u(t,{transfer:[t]})};else if(h)try{p||(n=c("worker_threads"))&&(p=n.MessageChannel),p&&(i=new p,s=new h(2),o=function(t){i.port1.postMessage(null,[t])},2===s.byteLength&&(o(s),0===s.byteLength&&(d=o)))}catch(t){}t.exports=d},4495:(t,e,r)=>{"use strict";var n=r(9519),i=r(9039),s=r(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!i(function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4527:(t,e,r)=>{"use strict";var n=r(3724),i=r(4376),s=TypeError,o=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:(t,e,r)=>{"use strict";var n=r(4576);t.exports=function(t,e){var r=n.Iterator,i=r&&r.prototype,s=i&&i[t],o=!1;if(s)try{s.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(t){t instanceof e||(o=!1)}if(!o)return s}},4576:function(t,e,r){"use strict";var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4603:(t,e,r)=>{"use strict";var n=r(6840),i=r(9504),s=r(655),o=r(2812),a=URLSearchParams,c=a.prototype,l=i(c.append),u=i(c.delete),h=i(c.forEach),p=i([].push),d=new a("a=1&a=2&b=3");d.delete("a",1),d.delete("b",void 0),d+""!="a=2"&&n(c,"delete",function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&void 0===r)return u(this,t);var n=[];h(this,function(t,e){p(n,{key:e,value:t})}),o(e,1);for(var i,a=s(t),c=s(r),d=0,f=0,g=!1,y=n.length;d<y;)i=n[d++],g||i.key===a?(g=!0,u(this,i.key)):f++;for(;f<y;)(i=n[f++]).key===a&&i.value===c||l(this,i.key,i.value)},{enumerable:!0,unsafe:!0})},4644:(t,e,r)=>{"use strict";var n,i,s,o=r(7811),a=r(3724),c=r(4576),l=r(4901),u=r(34),h=r(9297),p=r(6955),d=r(6823),f=r(6699),g=r(6840),y=r(2106),m=r(1625),v=r(2787),b=r(2967),w=r(8227),x=r(3392),E=r(1181),A=E.enforce,O=E.get,S=c.Int8Array,q=S&&S.prototype,T=c.Uint8ClampedArray,k=T&&T.prototype,j=S&&v(S),R=q&&v(q),N=Object.prototype,C=c.TypeError,I=w("toStringTag"),P=x("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",D=o&&!!b&&"Opera"!==p(c.opera),M=!1,_={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},B=function(t){var e=v(t);if(u(e)){var r=O(e);return r&&h(r,L)?r[L]:B(e)}},U=function(t){if(!u(t))return!1;var e=p(t);return h(_,e)||h(F,e)};for(n in _)(s=(i=c[n])&&i.prototype)?A(s)[L]=i:D=!1;for(n in F)(s=(i=c[n])&&i.prototype)&&(A(s)[L]=i);if((!D||!l(j)||j===Function.prototype)&&(j=function(){throw new C("Incorrect invocation")},D))for(n in _)c[n]&&b(c[n],j);if((!D||!R||R===N)&&(R=j.prototype,D))for(n in _)c[n]&&b(c[n].prototype,R);if(D&&v(k)!==R&&b(k,R),a&&!h(R,I))for(n in M=!0,y(R,I,{configurable:!0,get:function(){return u(this)?this[P]:void 0}}),_)c[n]&&f(c[n],P,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:M&&P,aTypedArray:function(t){if(U(t))return t;throw new C("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!b||m(j,t)))return t;throw new C(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(a){if(r)for(var i in _){var s=c[i];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(r){try{s.prototype[t]=e}catch(t){}}}R[t]&&!r||g(R,t,r?e:D&&q[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(a){if(b){if(r)for(n in _)if((i=c[n])&&h(i,t))try{delete i[t]}catch(t){}if(j[t]&&!r)return;try{return g(j,t,r?e:D&&j[t]||e)}catch(t){}}for(n in _)!(i=c[n])||i[t]&&!r||g(i,t,e)}},getTypedArrayConstructor:B,isView:function(t){if(!u(t))return!1;var e=p(t);return"DataView"===e||h(_,e)||h(F,e)},isTypedArray:U,TypedArray:j,TypedArrayPrototype:R}},4659:(t,e,r)=>{"use strict";var n=r(3724),i=r(4913),s=r(6980);t.exports=function(t,e,r){n?i.f(t,e,s(0,r)):t[e]=r}},4692:(t,e,r)=>{"use strict";r.d(e,{A:()=>a}),r(4114);var n=r(8534),i=r(9798),s=r(6116),o=r(9046);const a=class{constructor(){this.metadata=new n.A,this.manifest=new i.A,this.spine=new s.A,this.direction=null,this.version=null,this.uniqueIdentifier=null}clear(){this.metadata.clear(),this.manifest.clear(),this.spine.clear(),this.direction=null,this.version=null,this.uniqueIdentifier=null}async parse(t){if(!t)throw new Error("Package File Not Found");const e=(0,o.qs)(t,"metadata");if(!e)throw new Error("No Metadata Found");const r=(0,o.qs)(t,"manifest");if(!r)throw new Error("No Manifest Found");const n=(0,o.qs)(t,"spine");if(!n)throw new Error("No Spine Found");const i=[];return i.push(this.metadata.parse(e)),i.push(this.manifest.parse(r)),i.push(this.spine.parse(n)),this.direction=this.parseDirection(t,n),this.version=this.parseVersion(t),this.uniqueIdentifier=this.metadata.get("identifier"),void 0===this.uniqueIdentifier&&(this.uniqueIdentifier=this.findUniqueIdentifier(t)),Promise.all(i).then(()=>this)}parseDirection(t,e){let r=t.documentElement.getAttribute("dir");return null===r&&(r=e.getAttribute("page-progression-direction")),r||""}parseVersion(t){return t.documentElement.getAttribute("version")||""}findUniqueIdentifier(t){const e=t.documentElement.getAttribute("unique-identifier");if(!e)return"";const r=t.getElementById(e);return r&&"identifier"===r.localName&&"http://purl.org/dc/elements/1.1/"===r.namespaceURI&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}async load(t){const e=[];return e.push(this.metadata.load(t.metadata)),e.push(this.manifest.load(t.manifest)),e.push(this.spine.load(t.spine)),this.direction=t.direction,this.version=t.version,this.uniqueIdentifier=this.metadata.get("identifier"),Promise.all(e).then(()=>this)}destroy(){this.metadata.destroy(),this.manifest.destroy(),this.spine.destroy(),this.metadata=void 0,this.manifest=void 0,this.spine=void 0,this.direction=void 0,this.version=void 0,this.uniqueIdentifier=void 0}}},4732:(t,e,r)=>{"use strict";var n=r(4644),i=r(9504),s=r(9306),o=r(5370),a=n.aTypedArray,c=n.getTypedArrayConstructor,l=n.exportTypedArrayMethod,u=i(n.TypedArrayPrototype.sort);l("toSorted",function(t){void 0!==t&&s(t);var e=a(this),r=o(c(e),e);return u(r,t)})},4776:(t,e,r)=>{"use strict";r.d(e,{A:()=>i}),r(8111),r(7588);var n=r(9046);const i=class{constructor(){this.cfi=null,this.index=0,this.percentage=0}set(t){return(0,n.extend)(this,t||{}),this}destroy(){Object.keys(this).forEach(t=>this[t]=void 0)}}},4840:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},4844:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var n=r(8905),i=r(8285),s=r(9046),o=r(280);class a extends o.A{constructor(t,e,r){super(t,e),this.settings=(0,s.extend)({width:0,height:0,ignoreClass:""},r||{})}create(){return this.frame=document.createElement("div"),this.frame.id=this.id,this.frame.style.overflow="hidden",this.frame.style.border="none",this.frame.style.wordSpacing="initial",this.frame.style.lineHeight="initial",this.width=0,this.height=0,this.frame}load(t){const e=new i.A;if(!this.frame)return e.reject(new Error("No Iframe Available")),e.promise;const r=(0,s.parse)(t,"text/html"),o=(0,s.qs)(r,"body");return this.container.appendChild(this.frame),this.document=this.frame.ownerDocument,this.document?(this.contents=new n.A(this.document,this.frame),this.frame.innerHTML=o.innerHTML,e.resolve(this.contents),e.promise):(e.reject(new Error("No Document Available")),e.promise)}}const c=a},4901:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:(t,e,r)=>{"use strict";var n=r(3724),i=r(5917),s=r(8686),o=r(8551),a=r(6969),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",d="writable";e.f=n?s?function(t,e,r){if(o(t),e=a(e),o(r),"function"==typeof t&&"prototype"===e&&"value"in r&&d in r&&!r[d]){var n=u(t,e);n&&n[d]&&(t[e]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:h in r?r[h]:n[h],writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},4979:(t,e,r)=>{"use strict";var n=r(6518),i=r(4576),s=r(7751),o=r(6980),a=r(4913).f,c=r(9297),l=r(679),u=r(3167),h=r(2603),p=r(5002),d=r(8574),f=r(3724),g=r(6395),y="DOMException",m=s("Error"),v=s(y),b=function(){l(this,w);var t=arguments.length,e=h(t<1?void 0:arguments[0]),r=h(t<2?void 0:arguments[1],"Error"),n=new v(e,r),i=new m(e);return i.name=y,a(n,"stack",o(1,d(i.stack,1))),u(n,this,b),n},w=b.prototype=v.prototype,x="stack"in new m(y),E="stack"in new v(1,2),A=v&&f&&Object.getOwnPropertyDescriptor(i,y),O=!(!A||A.writable&&A.configurable),S=x&&!O&&!E;n({global:!0,constructor:!0,forced:g||S},{DOMException:S?b:v});var q=s(y),T=q.prototype;if(T.constructor!==q)for(var k in g||a(T,"constructor",o(1,q)),p)if(c(p,k)){var j=p[k],R=j.s;c(q,R)||a(q,R,o(6,j.c))}},5002:t=>{"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5031:(t,e,r)=>{"use strict";var n=r(7751),i=r(9504),s=r(8480),o=r(3717),a=r(8551),c=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=s.f(a(t)),r=o.f;return r?c(e,r(t)):e}},5122:(t,e,r)=>{"use strict";var n=r(6518),i=r(6194),s=r(2652),o=r(2248).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var e=i(this),r=arguments.length,n=0;n<r;)s(arguments[n++],function(t,r){o(e,t,r)},{AS_ENTRIES:!0});return e}})},5169:(t,e,r)=>{"use strict";var n=r(3238),i=TypeError;t.exports=function(t){if(n(t))throw new i("ArrayBuffer is detached");return t}},5263:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(4114),r(8111),r(7588);var n=r(7421),i=r(9046);const s=class extends Array{constructor(){super(),this.epubcfi=new n.A,this.pages=[],this.locations=[],this.firstPage=0,this.lastPage=0,this.totalPages=0}parse(t){return Array.isArray(t)?this.load(t):"nav"===t.nodeName?this.parseNav(t):"pageList"===t.nodeName&&this.parseNcx(t),this.length&&this.process(),new Promise((t,e)=>{t(this)})}parseNav(t){(t?(0,i.qsa)(t,"li"):[]).forEach(t=>{this.push(this.navItem(t))})}navItem(t){const e=(0,i.qs)(t,"a"),r=e.getAttribute("href")||"",n=e.textContent||"",s=parseInt(n);if(-1!==r.indexOf("epubcfi")){const t=r.split("#");return{cfi:t.length>1?t[1]:null,packageUrl:t[0],href:r,page:s}}return{href:r,page:s}}parseNcx(t){((0,i.qsa)(t,"pageTarget")||[]).forEach(t=>{this.push(this.ncxItem(t))})}ncxItem(t){const e=(0,i.qs)(t,"navLabel"),r=(0,i.qs)(e,"text").textContent;return{href:(0,i.qs)(t,"content").getAttribute("src"),page:parseInt(r,10)}}process(){this.forEach(t=>{this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(t){if(0===this.locations.length)return-1;let e,r=(0,i.indexOfSorted)(t,this.locations,this.epubcfi.compare);return-1!=r?e=this.pages[r]:(r=(0,i.locationOf)(t,this.locations,this.epubcfi.compare),e=r-1>=0?this.pages[r-1]:this.pages[0],void 0!==e||(e=-1)),e}cfiFromPage(t){"number"!=typeof t&&(t=parseInt(t));const e=this.pages.indexOf(t);let r=null;return-1!==e&&(r=this.locations[e]),r}pageFromPercentage(t){return Math.round(this.totalPages*t)}percentageFromPage(t){const e=(t-this.firstPage)/this.totalPages;return Math.round(1e3*e)/1e3}percentageFromCfi(t){const e=this.pageFromCfi(t);return this.percentageFromPage(e)}load(t){t.forEach(t=>{this.push(t)})}clear(){this.length&&(this.splice(0),this.pages.splice(0),this.locations.splice(0),this.firstPage=0,this.lastPage=0,this.totalPages=0)}destroy(){this.clear(),this.pages=void 0,this.locations=void 0,this.firstPage=void 0,this.lastPage=void 0,this.totalPages=void 0,this.epubcfi=void 0}}},5339:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},5345:t=>{"use strict";t.exports=URIError},5370:(t,e,r)=>{"use strict";var n=r(6198);t.exports=function(t,e,r){for(var i=0,s=arguments.length>2?r:n(e),o=new t(s);s>i;)o[i]=e[i++];return o}},5397:(t,e,r)=>{"use strict";var n=r(7055),i=r(7750);t.exports=function(t){return n(i(t))}},5499:t=>{"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},5548:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(3755);const i="http://www.w3.org/2000/svg";class s extends n.A{constructor(t,e){super(t,e)}render(){this.clear();const t=this.range.getClientRects(),e=this.element.getBoundingClientRect(),r=this.container.getBoundingClientRect();for(let n=0,s=t.length;n<s;n++){const s=t[n],o=document.createElementNS(i,"rect"),a=document.createElementNS(i,"line");o.setAttribute("x",s.left-e.left+r.left),o.setAttribute("y",s.top-e.top+r.top),o.setAttribute("height",s.height),o.setAttribute("width",s.width),o.setAttribute("fill","none"),a.setAttribute("x1",s.left-e.left+r.left),a.setAttribute("x2",s.left-e.left+r.left+s.width),a.setAttribute("y1",s.top-e.top+r.top+s.height-1),a.setAttribute("y2",s.top-e.top+r.top+s.height-1),a.setAttribute("stroke-width",1),a.setAttribute("stroke","black"),a.setAttribute("stroke-linecap","square"),this.element.appendChild(o),this.element.appendChild(a)}}}const o=s},5606:t=>{var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&p())}function p(){if(!l){var t=o(h);l=!0;for(var e=c.length;e;){for(a=c,c=[];++u<e;)a&&a[u].run();u=-1,e=c.length}a=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function f(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||o(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},5610:(t,e,r)=>{"use strict";var n=r(1291),i=Math.max,s=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):s(r,e)}},5623:(t,e,r)=>{"use strict";r(456)},5636:(t,e,r)=>{"use strict";var n=r(4576),i=r(9504),s=r(6706),o=r(7696),a=r(5169),c=r(7394),l=r(4483),u=r(1548),h=n.structuredClone,p=n.ArrayBuffer,d=n.DataView,f=Math.min,g=p.prototype,y=d.prototype,m=i(g.slice),v=s(g,"resizable","get"),b=s(g,"maxByteLength","get"),w=i(y.getInt8),x=i(y.setInt8);t.exports=(u||l)&&function(t,e,r){var n,i=c(t),s=void 0===e?i:o(e),g=!v||!v(t);if(a(t),u&&(t=h(t,{transfer:[t]}),i===s&&(r||g)))return t;if(i>=s&&(!r||g))n=m(t,0,s);else{var y=r&&!g&&b?{maxByteLength:b(t)}:void 0;n=new p(s,y);for(var E=new d(t),A=new d(n),O=f(s,i),S=0;S<O;S++)x(A,S,w(E,S))}return u||l(t),n}},5680:(t,e,r)=>{"use strict";var n=r(5767);t.exports=function(t){return!!n(t)}},5720:(t,e,r)=>{"use strict";r.d(e,{JX:()=>n,py:()=>i,qY:()=>s});const n="0.3.96",i=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],s={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZED:"resized",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed",RELOCATED:"relocated"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"},THEMES:{SELECTED:"selected",INJECTED:"injected",REJECTED:"rejected"},VIEWPORT:{RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange"}}},5745:(t,e,r)=>{"use strict";var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},5767:(t,e,r)=>{"use strict";var n=r(2682),i=r(9209),s=r(487),o=r(6556),a=r(5795),c=r(3628),l=o("Object.prototype.toString"),u=r(9092)(),h="undefined"==typeof globalThis?r.g:globalThis,p=i(),d=o("String.prototype.slice"),f=o("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},g={__proto__:null};n(p,u&&a&&c?function(t){var e=new h[t];if(Symbol.toStringTag in e&&c){var r=c(e),n=a(r,Symbol.toStringTag);if(!n&&r){var i=c(r);n=a(i,Symbol.toStringTag)}g["$"+t]=s(n.get)}}:function(t){var e=new h[t],r=e.slice||e.set;r&&(g["$"+t]=s(r))}),t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!u){var e=d(l(t),8,-1);return f(p,e)>-1?e:"Object"===e&&function(t){var e=!1;return n(g,function(r,n){if(!e)try{r(t),e=d(n,1)}catch(t){}}),e}(t)}return a?function(t){var e=!1;return n(g,function(r,n){if(!e)try{"$"+r(t)===n&&(e=d(n,1))}catch(t){}}),e}(t):null}},5795:(t,e,r)=>{"use strict";var n=r(6549);if(n)try{n([],"length")}catch(t){n=null}t.exports=n},5854:(t,e,r)=>{"use strict";var n=r(2777),i=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},5871:(t,e,r)=>{"use strict";var n=r(9504),i=r(4644),s=r(5370),o=r(1946),a=i.aTypedArray,c=i.getTypedArrayConstructor,l=i.exportTypedArrayMethod,u=n(o);l("uniqueBy",function(t){return a(this),s(c(this),u(this,t))},!0)},5880:t=>{"use strict";t.exports=Math.pow},5917:(t,e,r)=>{"use strict";var n=r(3724),i=r(9039),s=r(4055);t.exports=!n&&!i(function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},5966:(t,e,r)=>{"use strict";var n=r(9306),i=r(4117);t.exports=function(t,e){var r=t[e];return i(r)?void 0:n(r)}},5976:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(8111),r(7588);var n=r(1010),i=r(9046);const s=class{constructor(){this.directory="",this.fullPath="",this.encoding="",this.mediaType="",this.version=""}clear(){this.directory="",this.fullPath="",this.encoding="",this.mediaType="",this.version=""}parse(t){if(!t)throw new Error("Container File Not Found");const e=(0,i.qs)(t,"container");if(!e)throw new Error("container node not found");const r=(0,i.qs)(t,"rootfile");if(!r)throw new Error("rootfile node not found");return this.fullPath=r.getAttribute("full-path"),this.directory=n.A.prototype.dirname(this.fullPath),this.encoding=t.characterSet,this.mediaType=r.getAttribute("media-type"),this.version=e.getAttribute("version"),Promise.resolve(this)}load(t){return Object.keys(t).forEach(e=>{switch(e){case"directory":this.directory=t[e];break;case"encoding":this.encoding=t[e];break;case"full-path":this.fullPath=t[e];break;case"media-type":this.mediaType=t[e];break;case"version":this.version=t[e]}}),Promise.resolve(this)}destroy(){this.directory=void 0,this.encoding=void 0,this.fullPath=void 0,this.mediaType=void 0,this.version=void 0}}},6011:t=>{"use strict";t.exports=function(){}},6080:(t,e,r)=>{"use strict";var n=r(7476),i=r(9306),s=r(616),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},6097:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(6223);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0),n=o(e,function(t,n){if(r(t,n,e))return{key:n}},!0);return n&&n.key}})},6116:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(9046);class i extends Map{constructor(){super(),this.nodeIndex=0}clear(){super.clear(),this.nodeIndex=0}parse(t){return[...t.children].forEach((t,e)=>{const r=t.getAttribute("idref"),n=t.getAttribute("properties"),i={id:t.getAttribute("id"),idref:r,index:e,linear:t.getAttribute("linear")||"yes",properties:n?n.split(" "):[]};this.set(r,i)}),this.nodeIndex=(0,n.indexOfNode)(t,Node.ELEMENT_NODE),Promise.resolve(this)}load(t){return t.forEach((t,e)=>{this.set(t.idref,{id:t.id||null,idref:t.idref,index:e,linear:t.linear,properties:t.properties})}),this.nodeIndex=0,Promise.resolve(this)}destroy(){this.clear(),this.nodeIndex=void 0}}const s=i},6119:(t,e,r)=>{"use strict";var n=r(5745),i=r(3392),s=n("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},6188:t=>{"use strict";t.exports=Math.max},6193:(t,e,r)=>{"use strict";var n=r(4215);t.exports="NODE"===n},6194:(t,e,r)=>{"use strict";var n=r(2248).has;t.exports=function(t){return n(t),t}},6198:(t,e,r)=>{"use strict";var n=r(8014);t.exports=function(t){return n(t.length)}},6223:(t,e,r)=>{"use strict";var n=r(9504),i=r(507),s=r(2248),o=s.Map,a=s.proto,c=n(a.forEach),l=n(a.entries),u=l(new o).next;t.exports=function(t,e,r){return r?i({iterator:l(t),next:u},function(t){return e(t[1],t[0])}):c(t,e)}},6269:t=>{"use strict";t.exports={}},6279:(t,e,r)=>{"use strict";var n=r(6840);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},6319:(t,e,r)=>{"use strict";var n=r(8551),i=r(9539);t.exports=function(t,e,r,s){try{return s?e(n(r)[0],r[1]):e(r)}catch(e){i(t,"throw",e)}}},6361:t=>{"use strict";t.exports=e},6395:t=>{"use strict";t.exports=!1},6518:(t,e,r)=>{"use strict";var n=r(4576),i=r(7347).f,s=r(6699),o=r(6840),a=r(9433),c=r(7740),l=r(2796);t.exports=function(t,e){var r,u,h,p,d,f=t.target,g=t.global,y=t.stat;if(r=g?n:y?n[f]||a(f,{}):n[f]&&n[f].prototype)for(u in e){if(p=e[u],h=t.dontCallGetSet?(d=i(r,u))&&d.value:r[u],!l(g?u:f+(y?".":"#")+u,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(t.sham||h&&h.sham)&&s(p,"sham",!0),o(r,u,p,t)}}},6549:t=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},6556:(t,e,r)=>{"use strict";var n=r(453),i=r(3126),s=i([n("%String.prototype.indexOf%")]);t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&s(t,".prototype.")>-1?i([r]):r}},6573:(t,e,r)=>{"use strict";var n=r(3724),i=r(2106),s=r(3238),o=ArrayBuffer.prototype;n&&!("detached"in o)&&i(o,"detached",{configurable:!0,get:function(){return s(this)}})},6576:(t,e,r)=>{"use strict";var n=r(9394),i=r(8452);t.exports=function(){var t=n();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},6578:t=>{"use strict";t.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},6596:(t,e,r)=>{"use strict";t.exports=r(5339)()?Object.assign:r(3595)},6632:(t,e,r)=>{"use strict";var n=r(6518),i=r(4576),s=r(9143),o=r(4154),a=i.Uint8Array,c=!a||!a.prototype.setFromBase64||!function(){var t=new a([255,255,255,255,255]);try{return void t.setFromBase64("",null)}catch(t){}try{return void t.setFromBase64("a")}catch(t){}try{t.setFromBase64("MjYyZg===")}catch(e){return 50===t[0]&&54===t[1]&&50===t[2]&&255===t[3]&&255===t[4]}}();a&&n({target:"Uint8Array",proto:!0,forced:c},{setFromBase64:function(t){o(this);var e=s(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:e.read,written:e.written}}})},6642:(t,e,r)=>{"use strict";var n=r(3003);t.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},6698:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},6699:(t,e,r)=>{"use strict";var n=r(3724),i=r(4913),s=r(6980);t.exports=n?function(t,e,r){return i.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t}},6706:(t,e,r)=>{"use strict";var n=r(9504),i=r(9306);t.exports=function(t,e,r){try{return n(i(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},6743:(t,e,r)=>{"use strict";var n=r(9353);t.exports=Function.prototype.bind||n},6801:(t,e,r)=>{"use strict";var n=r(3724),i=r(8686),s=r(4913),o=r(8551),a=r(5397),c=r(1072);e.f=n&&!i?Object.defineProperties:function(t,e){o(t);for(var r,n=a(e),i=c(e),l=i.length,u=0;l>u;)s.f(t,r=i[u++],n[r]);return t}},6823:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6837:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6838:e=>{"use strict";e.exports=t},6840:(t,e,r)=>{"use strict";var n=r(4901),i=r(4913),s=r(283),o=r(9433);t.exports=function(t,e,r,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(n(r)&&s(r,l,a),a.global)c?t[e]=r:o(e,r);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6873:(t,e,r)=>{"use strict";var n=r(4080),i=/^\s*class[\s{/}]/,s=Function.prototype.toString;t.exports=function(t){return!!n(t)&&!i.test(s.call(t))}},6897:(t,e,r)=>{"use strict";var n=r(453),i=r(41),s=r(592)(),o=r(5795),a=r(9675),c=n("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||c(e)!==e)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,l=!0;if("length"in t&&o){var u=o(t,"length");u&&!u.configurable&&(n=!1),u&&!u.writable&&(l=!1)}return(n||l||!r)&&(s?i(t,"length",e,!0,!0):i(t,"length",e)),t}},6955:(t,e,r)=>{"use strict";var n=r(2140),i=r(4901),s=r(2195),o=r(8227)("toStringTag"),a=Object,c="Arguments"===s(function(){return arguments}());t.exports=n?s:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=a(t),o))?r:c?s(e):"Object"===(n=s(e))&&i(e.callee)?"Arguments":n}},6969:(t,e,r)=>{"use strict";var n=r(2777),i=r(757);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},6980:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7036:(t,e,r)=>{"use strict";var n=r(6518),i=r(9306),s=r(6194),o=r(2248),a=o.get,c=o.has,l=o.set;n({target:"Map",proto:!0,real:!0},{getOrInsertComputed:function(t,e){if(s(this),i(e),c(this,t))return a(this,t);0===t&&1/t==-1/0&&(t=0);var r=e(t);return l(this,t,r),r}})},7040:(t,e,r)=>{"use strict";var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:(t,e,r)=>{"use strict";var n=r(9504),i=r(9039),s=r(2195),o=Object,a=n("".split);t.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"===s(t)?a(t,""):o(t)}:o},7119:t=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},7134:(t,e,r)=>{"use strict";var n=r(9762);t.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},7173:(t,e,r)=>{"use strict";r.d(e,{A:()=>o}),r(8111),r(7588);var n=r(5720),i=r(3068);class s{constructor(t){this.axis="horizontal",this.name="reflowable",this.flow="paginated",this.style="paginated",this.spread="auto",this.direction="ltr",this.orientation="auto",this.viewport="",this.minSpreadWidth=800,this.width=0,this.height=0,this.pageWidth=0,this.pageHeight=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.set(t||{})}set(t){const e=t=>console.error(`Invalid '${t}' property type`);Object.keys(t).forEach(r=>{const n=t[r];if(this[r]===n||void 0===n)delete t[r];else if("direction"===r||"orientation"===r)"string"==typeof n?this[r]=t[r]:e(r);else if("flow"===r)if("string"==typeof n)switch(n){case"scrolled":case"scrolled-continuous":this.flow="scrolled",this.axis="vertical",this.style="scrolling",this.spread="none";break;case"scrolled-doc":this.flow=n,this.axis="vertical",this.style="scrolling",this.spread="none";break;default:this.flow="paginated",this.axis="horizontal",this.style="paginated"}else e(r);else if("spread"===r)if("string"==typeof n)switch(n){case"auto":case"both":this.spread="auto";break;default:this.spread="none"}else e(r);else"width"!==r&&"height"!==r&&"pageWidth"!==r&&"pageHeight"!==r&&"gap"!==r&&"minSpreadWidth"!==r||("number"==typeof n?n>=0&&(this[r]=t[r]):e(r))}),this.calculate(),Object.keys(t).length&&this.emit(n.qY.LAYOUT.UPDATED,this,t)}calculate(t,e,r){const n=t||this.width,i=e||this.height;if(r>=0)this.gap=r;else{let t;t="horizontal"===this.axis?Math.floor(n/12):Math.floor(i/17),this.gap=t%2==0?t:t-1}"paginated"===this.flow?(this.divisor="auto"===this.spread&&n>=this.minSpreadWidth?2:1,this.columnWidth=n/this.divisor-this.gap,this.spreadWidth=this.columnWidth*this.divisor+this.gap,this.pageWidth=this.columnWidth+this.gap,this.pageHeight=i):this.divisor=1,this.delta=n,this.width=n,this.height=i}count(t,e){let r,n;return"paginated"===this.flow?(e=e||this.delta,r=Math.ceil(t/e),n=r*this.divisor):(e=e||this.height,r=Math.ceil(t/e),n=r),{spreads:r,pages:n}}destroy(){Object.keys(this).forEach(t=>this[t]=void 0)}}i(s.prototype);const o=s},7176:(t,e,r)=>{"use strict";var n,i=r(3126),s=r(5795);try{n=[].__proto__===Array.prototype}catch(t){if(!t||"object"!=typeof t||!("code"in t)||"ERR_PROTO_ACCESS"!==t.code)throw t}var o=!!n&&s&&s(Object.prototype,"__proto__"),a=Object,c=a.getPrototypeOf;t.exports=o&&"function"==typeof o.get?i([o.get]):"function"==typeof c&&function(t){return c(null==t?t:a(t))}},7244:(t,e,r)=>{"use strict";var n=r(9092)(),i=r(6556)("Object.prototype.toString"),s=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},o=function(t){return!!s(t)||null!==t&&"object"==typeof t&&"length"in t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"callee"in t&&"[object Function]"===i(t.callee)},a=function(){return s(arguments)}();s.isLegacyArguments=o,t.exports=a?s:o},7254:(t,e,r)=>{"use strict";var n=r(6518),i=r(6194),s=r(2248),o=s.get,a=s.has,c=s.set;n({target:"Map",proto:!0,real:!0},{getOrInsert:function(t,e){return a(i(this),t)?o(this,t):(c(this,t,e),e)}})},7257:(t,e,r)=>{"use strict";r.d(e,{A:()=>a}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(3068),i=r(984),s=r(5720);class o extends Map{constructor(t){super(),this.rendition=t,this.current=null,this.rules={},this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.update.bind(this))}register(){if(0!==arguments.length)return 1===arguments.length&&"object"==typeof arguments[0]?this.registerThemes(arguments[0]):2===arguments.length&&"string"==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&"object"==typeof arguments[1]?this.registerRules(arguments[0],arguments[1]):void 0}registerThemes(t){for(const e in t)t.hasOwnProperty(e)&&("string"==typeof t[e]?this.registerUrl(e,t[e]):this.registerRules(e,t[e]))}registerUrl(t,e){const r=new i.A(e);this.set(t,{injected:!1,url:r.toString()})}registerRules(t,e){this.set(t,{injected:!1,rules:e})}select(t){const e=this.current;let r;t?r=this.get(t):e&&null===t&&(r=this.get(e)),this.current!==t&&r&&(this.current=t,this.rendition.getContents().forEach(n=>{n&&(t?(n.removeClass(e),n.appendClass(t),this.append(t,r,n)):e&&(n.removeClass(e),this.remove(e,r,n)))}),this.emit(s.qY.THEMES.SELECTED,t,r))}append(t,e,r){e.url&&(r.appendStylesheet(t,e.url),e.injected=!0),e.rules&&(r.appendStylesheet(t,e.rules),e.injected=!0),e.injected&&this.emit(s.qY.THEMES.INJECTED,t,e,r)}remove(t,e,r){r.removeStylesheet(t)&&(e.injected=!1,this.emit(s.qY.THEMES.REJECTED,t,e,r))}clear(){this.select(null),super.clear()}inject(t){this.current&&(this.forEach((e,r)=>{this.current===r&&this.append(r,e,t)}),t.appendClass(this.current))}update(t){const e=this.rules;for(const r in e)e.hasOwnProperty(r)&&t.css(r,e[r].value,e[r].priority)}appendRule(t,e,r=!1){const n={value:e,priority:r};this.rendition.getContents().forEach(e=>{e&&e.css(t,n.value,n.priority)}),this.rules[t]=n}removeRule(t){delete this.rules[t],this.rendition.getContents().forEach(e=>{e&&e.css(t)})}removeRules(){Object.keys(this.rules).forEach(t=>{this.removeRule(t)})}fontSize(t){this.appendRule("font-size",t)}font(t){this.appendRule("font-family",t,!0)}destroy(){this.clear(),this.removeRules(),this.current=void 0,this.rules=void 0}}n(o.prototype);const a=o},7268:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(6223);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0);return!0===o(e,function(t,n){if(r(t,n,e))return!0},!0)}})},7273:(t,e,r)=>{"use strict";var n=r(6518),i=r(3317),s=r(6194),o=r(6223);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return!0===o(s(this),function(e){if(i(e,t))return!0},!0)}})},7302:(t,e,r)=>{"use strict";var n=r(4644),i=r(6198),s=r(1108),o=r(5610),a=r(5854),c=r(1291),l=n.aTypedArray,u=n.getTypedArrayConstructor,h=n.exportTypedArrayMethod,p=Math.max,d=Math.min;h("toSpliced",function(t,e){var r,n,h,f,g,y,m,v=l(this),b=u(v),w=i(v),x=o(t,w),E=arguments.length,A=0;if(0===E)r=n=0;else if(1===E)r=0,n=w-x;else if(n=d(p(c(e),0),w-x),r=E-2){f=new b(r),h=s(f);for(var O=2;O<E;O++)g=arguments[O],f[O-2]=h?a(g):+g}for(m=new b(y=w+r-n);A<x;A++)m[A]=v[A];for(;A<x+r;A++)m[A]=f[A-x];for(;A<y;A++)m[A]=v[A+n-r];return m},!0)},7347:(t,e,r)=>{"use strict";var n=r(3724),i=r(9565),s=r(8773),o=r(6980),a=r(5397),c=r(6969),l=r(9297),u=r(5917),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(t){}if(l(t,e))return o(!i(s.f,t,e),t[e])}},7350:(t,e,r)=>{"use strict";var n=r(4644),i=r(9213).filterReject,s=r(9948),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("filterReject",function(t){var e=i(o(this),t,arguments.length>1?arguments[1]:void 0);return s(this,e)},!0)},7394:(t,e,r)=>{"use strict";var n=r(4576),i=r(6706),s=r(2195),o=n.ArrayBuffer,a=n.TypeError;t.exports=o&&i(o.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==s(t))throw new a("ArrayBuffer expected");return t.byteLength}},7415:(t,e,r)=>{"use strict";var n=r(6518),i=r(6194),s=r(6223);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var e=s(i(this),function(e,r){if(e===t)return{key:r}},!0);return e&&e.key}})},7421:(t,e,r)=>{"use strict";r.d(e,{A:()=>o}),r(4114),r(8111),r(2489),r(7588),r(1701);var n=r(2955),i=r(9046);class s{constructor(t,e,r){this.base={},this.hash="",this.ignoreClass="",this.path={},this.range=!1,this.spinePos=0,this.start=null,this.end=null,this.type=void 0,this.set({data:t,base:e,ignoreClass:r})}set(t){let e,r,n,i;const s=t=>{r||("string"==typeof t?(this.base=this.parseComponent(t),this.spinePos=this.base.steps[1].index):"object"==typeof t&&t.steps&&(this.base=t),r=this.base)},o=t=>{n||("string"==typeof t&&(this.ignoreClass=t),n=this.ignoreClass)},a=t=>{if(!e){if(i=i||this.checkType(t),"string"===i)e=this.parse(t);else if("range"===i)e=this.fromRange(t,r,n);else if("node"===i)e=this.fromNode(t,r,n);else if("EpubCFI"===i)e=t;else{if(t)throw new TypeError("not a valid argument for EpubCFI");e=this}e.type=i||this.type}};return Object.keys(t).forEach(e=>{const r=t[e];this[e]===r||void 0===r?delete t[e]:"data"===e?(s(t.base),o(t.ignoreClass),a(r)):"base"===e?(s(r),o(t.ignoreClass),a(t.data)):"ignoreClass"===e&&(s(t.base),o(r),a(t.data))}),e?Object.assign(this,e):this}checkType(t){return void 0===t?void 0:this.isCfiString(t)?"string":"object"==typeof t?t instanceof Range||void 0!==t.startContainer?"range":t instanceof Node?"node":t instanceof s?"EpubCFI":void 0:void 0}collapse(t){!1!==this.range&&(t?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal),this.range=!1)}compare(t,e){if("string"==typeof t&&(t=new s(t)),"string"==typeof e&&(e=new s(e)),t.spinePos>e.spinePos)return 1;if(t.spinePos<e.spinePos)return-1;let r,n,i,o;t.range?(r=t.path.steps.concat(t.start.steps),n=t.start.terminal):(r=t.path.steps,n=t.path.terminal),e.range?(i=e.path.steps.concat(e.start.steps),o=e.start.terminal):(i=e.path.steps,o=e.path.terminal);for(let t=0;t<r.length;t++){if(!r[t])return-1;if(!i[t])return 1;if(r[t].index>i[t].index)return 1;if(r[t].index<i[t].index)return-1}return r.length<i.length?-1:n.offset>o.offset?1:n.offset<o.offset?-1:0}generateChapterComponent(t,e,r){let n="/"+2*(t+1)+"/";return n+=2*(parseInt(e)+1),r&&(n+="["+r+"]"),n}getBaseComponent(t){return t.split("!")[0]}getPathComponent(t){const e=t.split("!");if(e[1])return e[1].split(",")[0]}getRange(t){const e=t.split(",");return 3===e.length?[e[1],e[2]]:null}getCharacterOffsetComponent(t){return t.split(":")[1]||""}isCfiString(t){return"string"==typeof t&&0===t.indexOf("epubcfi(")&&")"===t[t.length-1]}joinSteps(t){return t?t.map(t=>{let e="";return"element"===t.type&&(e+=2*(t.index+1)),"text"===t.type&&(e+=1+2*t.index),t.id&&(e+="["+t.id+"]"),e}).join("/"):""}pathTo(t,e,r){const n={steps:[],terminal:{offset:null,assertion:null}};let i,s=t;for(;s&&s.parentNode&&s.parentNode.nodeType!==Node.DOCUMENT_NODE;)i=r?this.filteredStep(s,r):this.step(s),i&&n.steps.unshift(i),s=s.parentNode;if(null!==e&&e>=0){n.terminal.offset=e;const t=n.steps.length,r=t?t-1:t,i=r?n.steps[r].type:null;i&&"text"!==i&&n.steps.push({index:0,type:"text"})}return n}equalStep(t,e){return!(!t||!e||t.id!==e.id||t.index!==e.index||t.type!==e.type)}filter(t,e){let r,n,i;if(t.nodeType===Node.TEXT_NODE?(n=!0,r=t.parentNode,i=t.parentNode.classList.contains(e)):(n=!1,i=t.classList.contains(e)),i&&n){const e=r.previousSibling,n=r.nextSibling;let i;return e&&e.nodeType===Node.TEXT_NODE?i=e:n&&n.nodeType===Node.TEXT_NODE&&(i=n),i||t}return i&&!n?null:t}filteredPosition(t,e){let r,n;return t.nodeType===Node.ELEMENT_NODE?(r=t.parentNode.children,n=this.normalizedMap(r,Node.ELEMENT_NODE,e)):(r=t.parentNode.childNodes,t.parentNode.classList.contains(e)&&(r=(t=t.parentNode).parentNode.childNodes),n=this.normalizedMap(r,Node.TEXT_NODE,e)),n[Array.prototype.indexOf.call(r,t)]}filteredStep(t,e){const r=this.filter(t,e);if(null!==r)return{id:r.id,index:this.filteredPosition(r,e),tagName:r.tagName,type:r.nodeType===Node.TEXT_NODE?"text":"element"}}findNode(t,e,r){const n=e||document;let i;if(r)i=this.walkToNode(t,n,r);else if(void 0!==n.evaluate){const e=this.stepsToXpath(t),r=XPathResult.FIRST_ORDERED_NODE_TYPE;i=n.evaluate(e,n,null,r,null).singleNodeValue}else i=this.walkToNode(t,n);return i}fixMiss(t,e,r,n){let i=this.findNode(t.slice(0,-1),r,n);const s=i.childNodes,o=t[t.length-1].index,a=this.normalizedMap(s,Node.TEXT_NODE,n);for(const t in a){if(!a.hasOwnProperty(t))return;if(a[t]===o){const r=s[t],n=r.textContent.length;if(!(e>n)){i=r.nodeType===Node.ELEMENT_NODE?r.childNodes[0]:r;break}e-=n}}return{container:i,offset:e}}fromNode(t,e,r){const n=new s;return"string"==typeof e?(n.base=this.parseComponent(e),n.spinePos=n.base.steps[1].index):"object"==typeof e&&(n.base=e),n.path=this.pathTo(t,null,r),n}fromRange(t,e,r){const n=new s,i=t.startContainer,o=t.endContainer;let a=t.startOffset,c=t.endOffset,l=!1;const u=i.ownerDocument;r&&(l=null!==u.querySelector("."+r)),"string"==typeof e?(n.base=this.parseComponent(e),n.spinePos=n.base.steps[1].index):"object"==typeof e&&(n.base=e);const h=()=>{l&&(a=this.patchOffset(i,a,r))};if(t.collapsed)h(),n.path=this.pathTo(i,a,r);else{n.range=!0,h(),n.start=this.pathTo(i,a,r),l&&(c=this.patchOffset(o,c,r)),n.end=this.pathTo(o,c,r),n.path={steps:[],terminal:null};for(let t=0,e=n.start.steps.length;t<e&&this.equalStep(n.start.steps[t],n.end.steps[t]);t++)t===e-1?n.start.terminal===n.end.terminal&&(n.path.steps.push(n.start.steps[t]),n.range=!1):n.path.steps.push(n.start.steps[t]);n.start.steps=n.start.steps.slice(n.path.steps.length),n.end.steps=n.end.steps.slice(n.path.steps.length)}return n}normalizedMap(t,e,r){const n={};let i,s,o=-1;for(let a=0,c=t.length;a<c;a++)i=t[a].nodeType,i===Node.ELEMENT_NODE&&t[a].classList.contains(r)&&(i=Node.TEXT_NODE),a>0&&i===Node.TEXT_NODE&&s===Node.TEXT_NODE?n[a]=o:e===i&&(o+=1,n[a]=o),s=i;return n}parse(t){const e=new s;if("string"!=typeof t)throw new TypeError("invalid argument type");if(!this.isCfiString(t))throw new Error("invalid EpubCFI string format");e.hash=t,e.type="string",t=t.slice(8,t.length-1);const r=this.getBaseComponent(t);if(!r)return e.spinePos=-1,e;e.base=this.parseComponent(r);const n=this.getPathComponent(t);e.path=this.parseComponent(n);const i=this.getRange(t);return i&&(e.range=!0,e.start=this.parseComponent(i[0]),e.end=this.parseComponent(i[1])),e.spinePos=e.base.steps[1].index,e}parseComponent(t){const e={steps:[],terminal:{offset:null,assertion:null}},r=t.split(":"),n=r[0].split("/");return r.length>1&&(e.terminal=this.parseTerminal(r[1])),""===n[0]&&n.shift(),e.steps=n.map(t=>this.parseStep(t)),e}parseStep(t){const e=parseInt(t);if(isNaN(e))return;const r=e%2==0,n=t.match(/\[(.*)\]/);return{id:n&&n[1]?n[1]:null,index:r?e/2-1:(e-1)/2,type:r?"element":"text"}}parseTerminal(t){const e=t.match(/\[(.*)\]/),r=e&&e[1],n=r?t.split("[")[0]:t,s=parseInt(n);return{assertion:r?e[1]:null,offset:(0,i.isNumber)(s)?s:null}}patchOffset(t,e,r){if(t.nodeType!==Node.TEXT_NODE)throw new Error("Anchor must be a text node");let n=t,i=e;for(t.parentNode.classList.contains(r)&&(n=t.parentNode);n.previousSibling;){if(n.previousSibling.nodeType===Node.ELEMENT_NODE){if(!n.previousSibling.classList.contains(r))break;i+=n.previousSibling.textContent.length}else i+=n.previousSibling.textContent.length;n=n.previousSibling}return i}position(t){let e,r;return t.nodeType===Node.ELEMENT_NODE?(e=t.parentNode.children,e||(e=(0,i.findChildren)(t.parentNode)),r=Array.prototype.indexOf.call(e,t)):(e=this.textNodes(t.parentNode),r=e.indexOf(t)),r}segmentString(t){let e="/";return e+=this.joinSteps(t.steps),t.terminal&&null!==t.terminal.offset&&(e+=":"+t.terminal.offset),t.terminal&&null!==t.terminal.assertion&&(e+="["+t.terminal.assertion+"]"),e}step(t){return{id:t.id,index:this.position(t),tagName:t.tagName,type:t.nodeType===Node.TEXT_NODE?"text":"element"}}stepsToXpath(t){const e=[".","*"];return t.forEach(t=>{const r=t.index+1;t.id?e.push("*[position()="+r+" and @id='"+t.id+"']"):"text"===t.type?e.push("text()["+r+"]"):e.push("*["+r+"]")}),e.join("/")}stepsToQuerySelector(t){const e=["html"];return t.forEach(t=>{const r=t.index+1;t.id?e.push("#"+t.id):"text"===t.type||e.push("*:nth-child("+r+")")}),e.join(">")}textNodes(t,e){return Array.prototype.slice.call(t.childNodes).filter(t=>t.nodeType===Node.TEXT_NODE||!!t.classList.contains(e))}toRange(t,e){const r=t||document;let i,s,o,a,c,l,u,h,p;const d=e&&null!==r.querySelector("."+e)?e:void 0;if(h=void 0!==r.createRange?r.createRange():new n.A,this.range?(i=this.start,c=this.path.steps.concat(i.steps),o=this.findNode(c,r,d),s=this.end,l=this.path.steps.concat(s.steps),a=this.findNode(l,r,d)):(i=this.path,c=this.path.steps,o=this.findNode(c,r,d)),!o)throw new Error("No startContainer found for",this.toString());try{u=null!==i.terminal.offset,h.setStart(o,u?i.terminal.offset:0)}catch(t){p=this.fixMiss(c,i.terminal.offset,r,d),h.setStart(p.container,p.offset),console.warn(t)}if(a)try{u=null!==s.terminal.offset,h.setEnd(a,u?s.terminal.offset:0)}catch(t){p=this.fixMiss(l,this.end.terminal.offset,r,d),h.setEnd(p.container,p.offset),console.warn(t)}return h}toString(){let t="epubcfi(";return t+=this.segmentString(this.base),t+="!",t+=this.segmentString(this.path),this.range&&this.start&&(t+=",",t+=this.segmentString(this.start)),this.range&&this.end&&(t+=",",t+=this.segmentString(this.end)),t+=")",t}walkToNode(t,e,r){const n=e||document;let s=n.documentElement;for(let e=0,o=t.length;e<o;e++){const o=t[e];if("element"===o.type?s=o.id?n.getElementById(o.id):(s.children||(0,i.findChildren)(s))[o.index]:"text"===o.type&&(s=this.textNodes(s,r)[o.index]),!s)break}return s}destroy(){Object.keys(this).forEach(t=>this[t]=void 0)}}const o=s},7433:(t,e,r)=>{"use strict";var n=r(4376),i=r(3517),s=r(34),o=r(8227)("species"),a=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(i(e)&&(e===a||n(e.prototype))||s(e)&&null===(e=e[o]))&&(e=void 0)),void 0===e?a:e}},7467:(t,e,r)=>{"use strict";var n=r(7628),i=r(4644),s=i.aTypedArray,o=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;o("toReversed",function(){return n(s(this),a(this))})},7476:(t,e,r)=>{"use strict";var n=r(2195),i=r(9504);t.exports=function(t){if("Function"===n(t))return i(t)}},7501:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(4114);var n=r(7421),i=r(9046);const s=class{constructor(t,e=!1){this.layout=t,this.devMode=e}section(t){const e=this.findRanges(t);return this.rangeListToCfiList(t.section.cfiBase,e)}page(t,e,r,i){const s=!(!t||!t.document)&&t.document.body;if(!s)return null;const o=this.rangePairToCfiPair(e,{start:this.findStart(s,r,i),end:this.findEnd(s,r,i)});if(!0===this.devMode){const e=t.document,r=new n.A(o.start).toRange(e),i=new n.A(o.end).toRange(e),s=e.defaultView.getSelection(),a=e.createRange();s.removeAllRanges(),a.setStart(r.startContainer,r.startOffset),a.setEnd(i.endContainer,i.endOffset),s.addRange(a)}return o}walk(t,e){if(t&&t.nodeType===Node.TEXT_NODE)return;const r=t=>t.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT,n=r;n.acceptNode=r;const i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,n,!1);let s,o;for(;(s=i.nextNode())&&(o=e(s),!o););return o}findRanges(t){const e=[],r=t.contents.scrollWidth(),n=Math.ceil(r/this.layout.spreadWidth)*this.layout.divisor,i=this.layout.columnWidth,s=this.layout.gap,o=t.document.body;for(let t=0;t<n;t++){const r=(i+s)*t,n=i*(t+1)+s*t;e.push({start:this.findStart(o,r,n),end:this.findEnd(o,r,n)})}return e}findStart(t,e,r){const n=[t],s="horizontal"===this.layout.axis,o="ltr"===this.layout.direction,a="rtl"===this.layout.direction;let c=t;for(;n.length;){const t=n.shift(),l=this.walk(t,t=>{let l,u,h,p;const d=(0,i.nodeBounds)(t);if(s&&o){if(l=s?d.left:d.top,u=s?d.right:d.bottom,l>=e&&l<=r)return t;if(u>e)return t;c=t,n.push(t)}else if(s&&a){if(l=d.left,u=d.right,u<=r&&u>=e)return t;if(l<r)return t;c=t,n.push(t)}else{if(h=d.top,p=d.bottom,h>=e&&h<=r)return t;if(p>e)return t;c=t,n.push(t)}});if(l)return this.findTextStartRange(l,e,r)}return this.findTextStartRange(c,e,r)}findEnd(t,e,r){const n=[t],s="horizontal"===this.layout.axis,o="ltr"===this.layout.direction,a="rtl"===this.layout.direction;let c=t;for(;n.length;){const t=n.shift(),l=this.walk(t,t=>{let l,u,h,p;const d=(0,i.nodeBounds)(t);if(s&&o){if(l=Math.round(d.left),u=Math.round(d.right),l>r&&c)return c;if(u>r)return t;c=t,n.push(t)}else if(s&&a){if(l=Math.round(s?d.left:d.top),u=Math.round(s?d.right:d.bottom),u<e&&c)return c;if(l<e)return t;c=t,n.push(t)}else{if(h=Math.round(d.top),p=Math.round(d.bottom),h>r&&c)return c;if(p>r)return t;c=t,n.push(t)}});if(l)return this.findTextEndRange(l,e,r)}return this.findTextEndRange(c,e,r)}findTextStartRange(t,e,r){const n=this.splitTextNodeIntoRanges(t),i="horizontal"===this.layout.axis,s="ltr"===this.layout.direction,o="rtl"===this.layout.direction;for(let t=0;t<n.length;t++){const a=n[t],c=a.getBoundingClientRect();if(i&&s){if(c.left>=e)return a}else if(i&&o){if(c.right<=r)return a}else if(c.top>=e)return a}return n[0]}findTextEndRange(t,e,r){const n=this.splitTextNodeIntoRanges(t),i="horizontal"===this.layout.axis,s="ltr"===this.layout.direction,o="rtl"===this.layout.direction;let a;for(let t=0;t<n.length;t++){const c=n[t],l=c.getBoundingClientRect();if(i&&s){if(l.left>r&&a)return a;if(l.right>r)return c}else if(i&&o){if(l.right<e&&a)return a;if(l.left<e)return c}else{if(l.top>r&&a)return a;if(l.bottom>r)return c}a=c}return n[n.length-1]}splitTextNodeIntoRanges(t,e=" "){const r=[],n=(t.textContent||"").trim(),i=t.ownerDocument;let s,o=n.indexOf(e);if(-1===o||t.nodeType!=Node.TEXT_NODE)return s=i.createRange(),s.selectNodeContents(t),[s];for(s=i.createRange(),s.setStart(t,0),s.setEnd(t,o),r.push(s),s=!1;-1!==o;)o=n.indexOf(e,o+1),o>0&&(s&&(s.setEnd(t,o),r.push(s)),s=i.createRange(),s.setStart(t,o+1));return s&&(s.setEnd(t,n.length),r.push(s)),r}rangePairToCfiPair(t,e){const r=e.start,i=e.end;return r.collapse(!0),i.collapse(!1),{start:new n.A(r,t).toString(),end:new n.A(i,t).toString()}}rangeListToCfiList(t,e){const r=[];for(let n=0;n<e.length;n++){const i=this.rangePairToCfiPair(t,e[n]);r.push(i)}return r}destroy(){this.devMode=void 0}}},7566:(t,e,r)=>{"use strict";var n=r(6840),i=r(9504),s=r(655),o=r(2812),a=URLSearchParams,c=a.prototype,l=i(c.getAll),u=i(c.has),h=new a("a=1");!h.has("a",2)&&h.has("a",void 0)||n(c,"has",function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&void 0===r)return u(this,t);var n=l(this,t);o(e,1);for(var i=s(r),a=0;a<n.length;)if(n[a++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})},7583:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(2248),a=r(6223),c=o.Map,l=o.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0),n=new c;return a(e,function(t,i){l(n,i,r(t,i,e))}),n}})},7588:(t,e,r)=>{"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),c=r(1767),l=r(9539),u=r(4549)("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{forEach:function(t){a(this);try{o(t)}catch(t){l(this,"throw",t)}if(u)return i(u,this,t);var e=c(this),r=0;s(e,function(e){t(e,r++)},{IS_RECORD:!0})}})},7628:(t,e,r)=>{"use strict";var n=r(6198);t.exports=function(t,e){for(var r=n(t),i=new e(r),s=0;s<r;s++)i[s]=t[r-s-1];return i}},7629:(t,e,r)=>{"use strict";var n=r(6395),i=r(4576),s=r(9433),o="__core-js_shared__",a=t.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.45.0",mode:n?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7653:(t,e,r)=>{"use strict";var n=r(8452),i=r(487),s=r(9211),o=r(9394),a=r(6576),c=i(o(),Object);n(c,{getPolyfill:o,implementation:s,shim:a}),t.exports=c},7657:(t,e,r)=>{"use strict";var n,i,s,o=r(9039),a=r(4901),c=r(34),l=r(2360),u=r(2787),h=r(6840),p=r(8227),d=r(6395),f=p("iterator"),g=!1;[].keys&&("next"in(s=[].keys())?(i=u(u(s)))!==Object.prototype&&(n=i):g=!0),!c(n)||o(function(){var t={};return n[f].call(t)!==t})?n={}:d&&(n=l(n)),a(n[f])||h(n,f,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},7696:(t,e,r)=>{"use strict";var n=r(1291),i=r(8014),s=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw new s("Wrong length or index");return r}},7706:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var n=r(3068),i=r(7421),s=r(5720);class o{constructor(t,e,{data:r,cb:n,className:s,styles:o}){this.type=t,this.cfiRange=e,this.sectionIndex=new i.A(e).spinePos,this.data=r,this.cb=n,this.className=s,this.styles=o,this.mark=void 0}update(t){this.data=t}attach(t){let e;return t?("highlight"===this.type?e=t.highlight(this.cfiRange,this.data,this.cb,this.className,this.styles):"underline"===this.type&&(e=t.underline(this.cfiRange,this.data,this.cb,this.className,this.styles)),this.mark=e,this.emit(s.qY.ANNOTATION.ATTACH,e),e):null}detach(t){let e=!1;return t?("highlight"===this.type?e=t.unhighlight(this.cfiRange):"underline"===this.type&&(e=t.ununderline(this.cfiRange)),this.mark=void 0,this.emit(s.qY.ANNOTATION.DETACH,e),e):e}text(){}}n(o.prototype);const a=o},7740:(t,e,r)=>{"use strict";var n=r(9297),i=r(5031),s=r(7347),o=r(4913);t.exports=function(t,e,r){for(var a=i(e),c=o.f,l=s.f,u=0;u<a.length;u++){var h=a[u];n(t,h)||r&&n(r,h)||c(t,h,l(e,h))}}},7750:(t,e,r)=>{"use strict";var n=r(4117),i=TypeError;t.exports=function(t){if(n(t))throw new i("Can't call method on "+t);return t}},7751:(t,e,r)=>{"use strict";var n=r(4576),i=r(4901);t.exports=function(t,e){return arguments.length<2?(r=n[t],i(r)?r:void 0):n[t]&&n[t][e];var r}},7811:t=>{"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7936:(t,e,r)=>{"use strict";var n=r(6518),i=r(5636);i&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},7957:(t,e,r)=>{"use strict";var n=r(6080),i=r(9504),s=r(7055),o=r(8981),a=r(6969),c=r(6198),l=r(2360),u=r(5370),h=Array,p=i([].push);t.exports=function(t,e,r,i){for(var d,f,g,y=o(t),m=s(y),v=n(e,r),b=l(null),w=c(m),x=0;w>x;x++)g=m[x],(f=a(v(g,x,y)))in b?p(b[f],g):b[f]=[g];if(i&&(d=i(y))!==h)for(f in b)b[f]=u(d,b[f]);return b}},7961:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(7706);class i extends Map{constructor(t){super(),this.rendition=t,this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.reject.bind(this))}append(t,e,r){const i=encodeURI(t+":"+e),s=new n.A(t,e,r);return this.rendition.views().forEach(t=>{const e=t.section.index;s.sectionIndex===e&&s.attach(t)}),this.set(i,s),s}remove(t,e){const r=encodeURI(t+":"+e),n=this.get(r);n&&(this.rendition.views().forEach(t=>{const e=t.section.index;n.sectionIndex===e&&n.detach(t)}),this.delete(r))}inject(t){const e=t.section.index;this.forEach((r,n)=>{r.sectionIndex===e&&r.attach(t)})}reject(t){const e=t.section.index;this.forEach((r,n)=>{r.sectionIndex===e&&r.detach(t)})}show(){}hide(){}}const s=i},8002:t=>{"use strict";t.exports=Math.min},8014:(t,e,r)=>{"use strict";var n=r(1291),i=Math.min;t.exports=function(t){var e=n(t);return e>0?i(e,9007199254740991):0}},8068:t=>{"use strict";t.exports=SyntaxError},8075:(t,e,r)=>{"use strict";var n=r(453),i=r(487),s=i(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&s(t,".prototype.")>-1?i(r):r}},8077:(t,e,r)=>{"use strict";r.d(e,{A:()=>o}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(1270);const i="http://www.w3.org/2000/svg";class s extends Map{constructor(t,e=document.body){super(),this.target=t,this.element=document.createElementNS(i,"svg"),this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),(0,n.A)(this.target,this),this.container=e,this.container.appendChild(this.element),this.render()}appendMark(t,e){const r=document.createElementNS(i,"g");return this.element.appendChild(r),e.bind(r,this.container),e.render(),this.set(t,e),e}removeMark(t){const e=this.get(t);if(e){const r=e.unbind();this.element.removeChild(r),this.delete(t)}}render(){this.updateStyle(this.element),this.forEach((t,e)=>t.render())}updateStyle(t){const e=this.target.getBoundingClientRect(),r=this.container.getBoundingClientRect(),n=e.top-r.top,i=e.left-r.left,s=this.target.scrollWidth,o=this.target.scrollHeight;t.style.setProperty("top",`${n}px`,"important"),t.style.setProperty("left",`${i}px`,"important"),t.style.setProperty("width",`${s}px`,"important"),t.style.setProperty("height",`${o}px`,"important")}}const o=s},8100:(t,e,r)=>{"use strict";var n=r(6518),i=r(5636);i&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},8111:(t,e,r)=>{"use strict";var n=r(6518),i=r(4576),s=r(679),o=r(8551),a=r(4901),c=r(2787),l=r(2106),u=r(4659),h=r(9039),p=r(9297),d=r(8227),f=r(7657).IteratorPrototype,g=r(3724),y=r(6395),m="constructor",v="Iterator",b=d("toStringTag"),w=TypeError,x=i[v],E=y||!a(x)||x.prototype!==f||!h(function(){x({})}),A=function(){if(s(this,f),c(this)===f)throw new w("Abstract class Iterator not directly constructable")},O=function(t,e){g?l(f,t,{configurable:!0,get:function(){return e},set:function(e){if(o(this),this===f)throw new w("You can't redefine this property");p(this,t)?this[t]=e:u(this,t,e)}}):f[t]=e};p(f,b)||O(b,v),!E&&p(f,m)&&f[m]!==Object||O(m,A),A.prototype=f,n({global:!0,constructor:!0,forced:E},{Iterator:A})},8175:t=>{"use strict";t.exports=function(t){return null!=t}},8184:(t,e,r)=>{"use strict";var n,i=r(6556),s=r(9721)(/^\s*(?:function)?\*/),o=r(9092)(),a=r(3628),c=i("Object.prototype.toString"),l=i("Function.prototype.toString");t.exports=function(t){if("function"!=typeof t)return!1;if(s(l(t)))return!0;if(!o)return"[object GeneratorFunction]"===c(t);if(!a)return!1;if(void 0===n){var e=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(t){}}();n=!!e&&a(e)}return a(t)===n}},8221:(t,e,r)=>{var n=r(3805),i=r(124),s=r(9374),o=Math.max,a=Math.min;t.exports=function(t,e,r){var c,l,u,h,p,d,f=0,g=!1,y=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var r=c,n=l;return c=l=void 0,f=e,h=t.apply(n,r)}function b(t){var r=t-d;return void 0===d||r>=e||r<0||y&&t-f>=u}function w(){var t=i();if(b(t))return x(t);p=setTimeout(w,function(t){var r=e-(t-d);return y?a(r,u-(t-f)):r}(t))}function x(t){return p=void 0,m&&c?v(t):(c=l=void 0,h)}function E(){var t=i(),r=b(t);if(c=arguments,l=this,d=t,r){if(void 0===p)return function(t){return f=t,p=setTimeout(w,e),g?v(t):h}(d);if(y)return clearTimeout(p),p=setTimeout(w,e),v(d)}return void 0===p&&(p=setTimeout(w,e)),h}return e=s(e)||0,n(r)&&(g=!!r.leading,u=(y="maxWait"in r)?o(s(r.maxWait)||0,e):u,m="trailing"in r?!!r.trailing:m),E.cancel=function(){void 0!==p&&clearTimeout(p),f=0,c=d=l=p=void 0},E.flush=function(){return void 0===p?h:x(i())},E}},8227:(t,e,r)=>{"use strict";var n=r(4576),i=r(5745),s=r(9297),o=r(3392),a=r(4495),c=r(7040),l=n.Symbol,u=i("wks"),h=c?l.for||l:l&&l.withoutSetter||o;t.exports=function(t){return s(u,t)||(u[t]=a&&s(l,t)?l[t]:h("Symbol."+t)),u[t]}},8235:(t,e,r)=>{"use strict";var n=r(9504),i=r(9297),s=SyntaxError,o=parseInt,a=String.fromCharCode,c=n("".charAt),l=n("".slice),u=n(/./.exec),h={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},p=/^[\da-f]{4}$/i,d=/^[\u0000-\u001F]$/;t.exports=function(t,e){for(var r=!0,n="";e<t.length;){var f=c(t,e);if("\\"===f){var g=l(t,e,e+2);if(i(h,g))n+=h[g],e+=2;else{if("\\u"!==g)throw new s('Unknown escape sequence: "'+g+'"');var y=l(t,e+=2,e+4);if(!u(p,y))throw new s("Bad Unicode escape at: "+e);n+=a(o(y,16)),e+=4}}else{if('"'===f){r=!1,e++;break}if(u(d,f))throw new s("Bad control character in string literal at: "+e);n+=f,e++}}if(r)throw new s("Unterminated string at: "+e);return{value:n,end:e}}},8237:(t,e,r)=>{"use strict";var n=r(6518),i=r(2652),s=r(9306),o=r(8551),a=r(1767),c=r(9539),l=r(4549),u=r(8745),h=r(9039),p=TypeError,d=h(function(){[].keys().reduce(function(){},void 0)}),f=!d&&l("reduce",p);n({target:"Iterator",proto:!0,real:!0,forced:d||f},{reduce:function(t){o(this);try{s(t)}catch(t){c(this,"throw",t)}var e=arguments.length<2,r=e?void 0:arguments[1];if(f)return u(f,this,e?[t]:[t,r]);var n=a(this),l=0;if(i(n,function(n){e?(e=!1,r=n):r=t(r,n,l),l++},{IS_RECORD:!0}),e)throw new p("Reduce of empty iterator with no initial value");return r}})},8263:(t,e,r)=>{"use strict";var n=r(8175),i=r(6873),s=r(6596),o=r(148),a=r(214);(t.exports=function(t,e){var r,i,c,l,u;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],n(t)?(r=a.call(t,"c"),i=a.call(t,"e"),c=a.call(t,"w")):(r=c=!0,i=!1),u={value:e,configurable:r,enumerable:i,writable:c},l?s(o(l),u):u}).gs=function(t,e,r){var c,l,u,h;return"string"!=typeof t?(u=r,r=e,e=t,t=null):u=arguments[3],n(e)?i(e)?n(r)?i(r)||(u=r,r=void 0):r=void 0:(u=e,e=r=void 0):e=void 0,n(t)?(c=a.call(t,"c"),l=a.call(t,"e")):(c=!0,l=!1),h={get:e,set:r,configurable:c,enumerable:l},u?s(o(u),h):h}},8285:(t,e,r)=>{"use strict";r.d(e,{A:()=>i}),r(8111),r(7588);var n=r(9046);const i=class{constructor(){this.id=(0,n.uuid)(),this.dump={},this.resolve=null,this.reject=null,this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}destroy(){Object.keys(this).forEach(t=>this[t]=void 0)}}},8335:(t,e,r)=>{"use strict";var n=r(6518),i=r(3724),s=r(4576),o=r(7751),a=r(9504),c=r(9565),l=r(4901),u=r(34),h=r(4376),p=r(9297),d=r(655),f=r(6198),g=r(4659),y=r(9039),m=r(8235),v=r(4495),b=s.JSON,w=s.Number,x=s.SyntaxError,E=b&&b.parse,A=o("Object","keys"),O=Object.getOwnPropertyDescriptor,S=a("".charAt),q=a("".slice),T=a(/./.exec),k=a([].push),j=/^\d$/,R=/^[1-9]$/,N=/^[\d-]$/,C=/^[\t\n\r ]$/,I=function(t,e,r,n){var i,s,o,a,l,d=t[e],g=n&&d===n.value,y=g&&"string"==typeof n.source?{source:n.source}:{};if(u(d)){var m=h(d),v=g?n.nodes:m?[]:{};if(m)for(i=v.length,o=f(d),a=0;a<o;a++)P(d,a,I(d,""+a,r,a<i?v[a]:void 0));else for(s=A(d),o=f(s),a=0;a<o;a++)l=s[a],P(d,l,I(d,l,r,p(v,l)?v[l]:void 0))}return c(r,t,e,d,y)},P=function(t,e,r){if(i){var n=O(t,e);if(n&&!n.configurable)return}void 0===r?delete t[e]:g(t,e,r)},L=function(t,e,r,n){this.value=t,this.end=e,this.source=r,this.nodes=n},D=function(t,e){this.source=t,this.index=e};D.prototype={fork:function(t){return new D(this.source,t)},parse:function(){var t=this.source,e=this.skip(C,this.index),r=this.fork(e),n=S(t,e);if(T(N,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case'"':return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new x('Unexpected character: "'+n+'" at: '+e)},node:function(t,e,r,n,i){return new L(e,n,t?null:q(this.source,r,n),i)},object:function(){for(var t=this.source,e=this.index+1,r=!1,n={},i={};e<t.length;){if(e=this.until(['"',"}"],e),"}"===S(t,e)&&!r){e++;break}var s=this.fork(e).string(),o=s.value;e=s.end,e=this.until([":"],e)+1,e=this.skip(C,e),s=this.fork(e).parse(),g(i,o,s),g(n,o,s.value),e=this.until([",","}"],s.end);var a=S(t,e);if(","===a)r=!0,e++;else if("}"===a){e++;break}}return this.node(1,n,this.index,e,i)},array:function(){for(var t=this.source,e=this.index+1,r=!1,n=[],i=[];e<t.length;){if(e=this.skip(C,e),"]"===S(t,e)&&!r){e++;break}var s=this.fork(e).parse();if(k(i,s),k(n,s.value),e=this.until([",","]"],s.end),","===S(t,e))r=!0,e++;else if("]"===S(t,e)){e++;break}}return this.node(1,n,this.index,e,i)},string:function(){var t=this.index,e=m(this.source,this.index+1);return this.node(0,e.value,t,e.end)},number:function(){var t=this.source,e=this.index,r=e;if("-"===S(t,r)&&r++,"0"===S(t,r))r++;else{if(!T(R,S(t,r)))throw new x("Failed to parse number at: "+r);r=this.skip(j,r+1)}if(!("."===S(t,r)&&(r=this.skip(j,r+1)),"e"!==S(t,r)&&"E"!==S(t,r)||(r++,"+"!==S(t,r)&&"-"!==S(t,r)||r++,r!==(r=this.skip(j,r)))))throw new x("Failed to parse number's exponent value at: "+r);return this.node(0,w(q(t,e,r)),e,r)},keyword:function(t){var e=""+t,r=this.index,n=r+e.length;if(q(this.source,r,n)!==e)throw new x("Failed to parse value at: "+r);return this.node(0,t,r,n)},skip:function(t,e){for(var r=this.source;e<r.length&&T(t,S(r,e));e++);return e},until:function(t,e){e=this.skip(C,e);for(var r=S(this.source,e),n=0;n<t.length;n++)if(t[n]===r)return e;throw new x('Unexpected character: "'+r+'" at: '+e)}};var M=y(function(){var t,e="9007199254740993";return E(e,function(e,r,n){t=n.source}),t!==e}),_=v&&!y(function(){return 1/E("-0 \t")!=-1/0});n({target:"JSON",stat:!0,forced:M},{parse:function(t,e){return _&&!l(e)?E(t):function(t,e){t=d(t);var r=new D(t,0,""),n=r.parse(),i=n.value,s=r.skip(C,n.end);if(s<t.length)throw new x('Unexpected extra character: "'+S(t,s)+'" after the parsed data at: '+s);return l(e)?I({"":i},"",e,n):i}(t,e)}})},8366:(t,e,r)=>{"use strict";r.d(e,{A:()=>u}),r(4114);var n=r(3068),i=r(6361),s=r(3412),o=r(9357),a=r(8285),c=r(2575);class l extends c.A{constructor(t){super(),this.name=t,this.online=window.navigator.onLine}createInstance(){if(!i)throw new TypeError("LocalForage lib not loaded");this.instance=i.createInstance({name:this.name}),this.appendListeners()}appendListeners(){window.addEventListener("online",this.status.bind(this)),window.addEventListener("offline",this.status.bind(this))}removeListeners(){window.removeEventListener("online",this.status.bind(this)),window.removeEventListener("offline",this.status.bind(this))}status(t){this.online="online"===t.type,this.online?this.emit("online"):this.emit("offline")}async get(t){const e=this.getKey(t);return this.instance.getItem(e)}async set(t,e){const r=this.getKey(t);return this.instance.setItem(r,e)}async put(t){return this.get(t).then(e=>e||(0,s.A)(t,"binary").then(e=>this.set(t,e)))}async dispatch(t,e,r,n){if(this.online){const i=[];return i.push((0,s.A)(t,e,r,n)),i.push(this.put(t)),Promise.all(i).then(t=>t[0]||null)}return this.request(t,e)}getKey(t){let e;return e="string"==typeof t?t:`book-${t}`,e}async getBlob(t,e){return this.get(t).then(r=>{if(!r)return null;const n=e||o.A.lookup(t);return new Blob([r],{type:n})})}async getText(t,e){return this.get(t).then(r=>{if(!r)return null;const n=new a.A,i=new FileReader,s=e||o.A.lookup(t),c=new Blob([r],{type:s});return i.onloadend=()=>{n.resolve(i.result)},i.readAsText(c,s),n.promise})}async getBase64(t,e){return this.get(t).then(r=>{if(!r)return null;const n=new a.A,i=new FileReader,s=e||o.A.lookup(t),c=new Blob([r],{type:s});return i.onloadend=()=>{n.resolve(i.result)},i.readAsDataURL(c,s),n.promise})}destroy(){super.destroy(),this.removeListeners()}}n(l.prototype);const u=l},8378:(t,e,r)=>{"use strict";r.d(e,{A:()=>S}),r(6573),r(8100),r(7936);var n=r(3068),i=r(9046),s=r(8285),o=r(984),a=r(1010),c=r(8823),l=r(5976),u=r(4692),h=r(2665),p=r(9050),d=r(1619),f=r(1261),g=r(3412),y=r(7421),m=r(8366),v=r(5720),b=r(3495);const w="META-INF/container.xml",x="binary",E="base64",A="epub";class O{constructor(t,e){void 0===e&&"string"!=typeof t&&t instanceof Blob==0&&t instanceof ArrayBuffer==0&&(e=t,t=void 0),this.settings=(0,i.extend)({canonical:void 0,encoding:void 0,replacements:null,request:{method:void 0,withCredentials:!1,headers:[]},store:null},e||{}),this.request=this.settings.request.method||g.A,this.archive=void 0,this.storage=new m.A(this.settings.store),this.rendition=void 0,this.container=new l.A,this.packaging=new u.A,this.resources=new p.A(this.request.bind(this),this.resolve.bind(this),this.settings.replacements),this.sections=new b.A,this.locations=new c.A(this.sections,this.load.bind(this)),this.navigation=new h.A,this.url=void 0,this.settings.store&&this.storage.createInstance(),t&&this.open(t).catch(t=>{this.emit(v.qY.BOOK.OPEN_FAILED,t)})}init(){this.archived=!1,this.cover=null,this.path=void 0,this.isOpen=!1,this.opening=new s.A,this.opened=this.opening.promise,this.loading={packaging:new s.A,resources:new s.A,navigation:new s.A,sections:new s.A,cover:new s.A},this.loaded={packaging:this.loading.packaging.promise,resources:this.loading.resources.promise,navigation:this.loading.navigation.promise,sections:this.loading.sections.promise,cover:this.loading.cover.promise}}clear(){this.container.clear(),this.packaging.clear(),this.resources.clear(),this.navigation.clear(),this.sections.clear(),this.locations.clear(),this.archive&&this.archive.clear()}async open(t,e){this.init();const r=e||this.determineType(t);let n;if(this.settings.store&&this.store(t),r===x)this.archived=!0,this.url=new o.A("/",""),n=this.openEpub(t);else if(r===E)this.archived=!0,this.url=new o.A("/",""),n=this.openEpub(t,r);else if(r===A)this.archived=!0,this.url=new o.A("/",""),n=this.request(t,"binary",this.settings.request.withCredentials,this.settings.request.headers).then(this.openEpub.bind(this));else{let e;this.url=new o.A(t),e="json"===this.settings.format?"META-INF/container.json":w,n=this.openContainer(e,r)}return n}async openEpub(t,e){const r=e||this.settings.encoding;return this.unarchive(t,r).then(()=>this.openContainer(w))}async openContainer(t){return this.load(t).then(t=>"json"===this.settings.format?this.container.load(t):this.container.parse(t)).then(t=>{const e=this.resolve(t.fullPath);return this.openPackaging(e)})}async openPackaging(t){return this.path=new a.A(t),this.load(t).then(t=>"json"===this.settings.format?this.packaging.load(t):this.packaging.parse(t)).then(()=>this.loadNavigation()).then(()=>this.unpack())}load(t,e=null){const r=this.resolve(t);return this.archived?this.archive.request(r):this.request(r,e,this.settings.request.withCredentials,this.settings.request.headers)}resolve(t,e=!1){if(!t)return;if(t.indexOf("://")>-1)return t;let r=t;return this.path&&(r=this.path.resolve(this.path.directory,t)),!1===e&&this.url&&(r=this.url.resolve(r)),r}canonical(t){if(!t)return"";let e;return e=this.settings.canonical?this.settings.canonical(t):this.resolve(t,!0),e}determineType(t){if("base64"===this.settings.encoding)return E;if("string"!=typeof t)return x;let e=new o.A(t).path.extension;return e&&(e=e.replace(/\?.*$/,"")),"epub"===e?A:"directory"}async unpack(){this.loading.packaging.resolve(this.packaging),this.loading.navigation.resolve(this.navigation),this.resources.unpack(this.packaging.manifest,this.archive,this.storage).then(t=>{this.loading.resources.resolve(t)}),this.sections.unpack(this.packaging,this.navigation,this.resolve.bind(this),this.canonical.bind(this)).then(t=>{this.loading.sections.resolve(t)}),this.resources.replacements&&this.sections.hooks.serialize.register(this.resources.substitute.bind(this.resources)),this.packaging.manifest.coverPath&&(this.cover=this.resolve(this.packaging.manifest.coverPath)),this.loading.cover.resolve(this.cover);const t=[...Object.values(this.loaded)];return Promise.all(t).then(()=>(this.isOpen=!0,this.opening.resolve(this),this.opened))}async loadNavigation(){const t=this.packaging.manifest.navPath;return t?this.load(t).then(t=>"json"===this.settings.format?this.navigation.load(t):this.navigation.parse(t)):Promise.resolve(this.navigation)}section(t){return this.sections.get(t)}renderTo(t,e){const r="blobUrl";return this.settings.replacements===r&&(e=(0,i.extend)({method:r},e||{})),this.rendition=new d.A(this,e),this.rendition.attachTo(t),this.rendition}setRequestCredentials(t){this.settings.request.withCredentials=t}setRequestHeaders(t){this.settings.request.headers=t}unarchive(t,e){return this.archive=new f.A,this.archive.open(t,e)}store(t){"string"==typeof t&&(this.request=this.storage.dispatch.bind(this.storage))}async coverUrl(){return this.loaded.cover.then(()=>this.archived&&this.cover?this.resources.createUrl(this.cover):this.cover)}async getRange(t){const e=new y.A(t),r=this.sections.get(e.spinePos),n=this.load.bind(this);return r?r.load(n).then(t=>e.toRange(r.document)):new Promise((t,e)=>{e(new Error("CFI could not be found"))})}key(t){const e=t||this.packaging.metadata.get("identifier")||this.url.filename;return`epubjs:${v.JX}:${e}`}destroy(){this.isOpen=void 0,this.opened=void 0,this.loaded=void 0,this.opening=void 0,this.loading=void 0,this.archive&&this.archive.destroy(),this.storage&&this.storage.destroy(),this.sections&&this.sections.destroy(),this.locations&&this.locations.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.navigation&&this.navigation.destroy(),this.archive=void 0,this.storage=void 0,this.archived=void 0,this.sections=void 0,this.locations=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.cover=void 0,this.request=void 0,this.settings=void 0}}n(O.prototype);const S=O},8403:(t,e,r)=>{"use strict";var n=r(1189),i=r(1333)(),s=r(6556),o=r(9612),a=s("Array.prototype.push"),c=s("Object.prototype.propertyIsEnumerable"),l=i?o.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=o(t);if(1===arguments.length)return r;for(var s=1;s<arguments.length;++s){var u=o(arguments[s]),h=n(u),p=i&&(o.getOwnPropertySymbols||l);if(p)for(var d=p(u),f=0;f<d.length;++f){var g=d[f];c(u,g)&&a(h,g)}for(var y=0;y<h.length;++y){var m=h[y];if(c(u,m)){var v=u[m];r[m]=v}}}return r}},8452:(t,e,r)=>{"use strict";var n=r(1189),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,o=Array.prototype.concat,a=r(41),c=r(592)(),l=function(t,e,r,n){if(e in t)if(!0===n){if(t[e]===r)return}else if("function"!=typeof(i=n)||"[object Function]"!==s.call(i)||!n())return;var i;c?a(t,e,r,!0):a(t,e,r)},u=function(t,e){var r=arguments.length>2?arguments[2]:{},s=n(e);i&&(s=o.call(s,Object.getOwnPropertySymbols(e)));for(var a=0;a<s.length;a+=1)l(t,s[a],e[s[a]],r[s[a]])};u.supportsDescriptors=!!c,t.exports=u},8480:(t,e,r)=>{"use strict";var n=r(1828),i=r(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},8510:(t,e,r)=>{"use strict";r.d(e,{A:()=>n}),r(4114),r(8111),r(7588);const n=class{constructor(t){this.context=t||this,this.tasks=[]}register(){for(let t=0;t<arguments.length;++t)if("function"==typeof arguments[t])this.tasks.push(arguments[t]);else{if(!(arguments[t]instanceof Array))throw new TypeError("Invalid argument type");this.register(arguments[t])}}deregister(t){for(let e=0;e<this.tasks.length;e++)if(this.tasks[e]===t){this.tasks.splice(e,1);break}}trigger(){const t=arguments,e=this.context,r=[];let n;return this.tasks.forEach(i=>{try{n=i.apply(e,t)}catch(t){throw new TypeError(t)}n&&"function"==typeof n.then&&r.push(n)}),Promise.all(r)}list(){return this.tasks}clear(){this.tasks=[]}}},8534:(t,e,r)=>{"use strict";r.d(e,{A:()=>i}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);class n extends Map{constructor(){super(),this.cover=null}parse(t){return[...t.children].forEach(t=>{if("meta"===t.nodeName)this.parseMeta(t);else if(/dc:/.test(t.nodeName)){const e=t.nodeName.substring(3);this.set(e,t.textContent)}}),Promise.resolve(this)}parseMeta(t){const e=t.getAttribute("name"),r=t.getAttribute("property");if(void 0===r||"string"!=typeof r)"cover"===e&&(this.cover=t);else if(/rendition:/.test(r)){const e=r.substring(10);this.set(e,t.textContent)}else if(/dcterms:/.test(r)){const e=r.substring(8);this.set(e,t.textContent)}else/media:/.test(r)&&this.set(r,t.textContent)}load(t){return Object.keys(t).forEach(e=>{this.set(e,t[e])}),Promise.resolve(this)}destroy(){this.clear(),this.cover=void 0}}const i=n},8551:(t,e,r)=>{"use strict";var n=r(34),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not an object")}},8574:(t,e,r)=>{"use strict";var n=r(9504),i=Error,s=n("".replace),o=String(new i("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)for(;e--;)t=s(t,a,"");return t}},8622:(t,e,r)=>{"use strict";var n=r(4576),i=r(4901),s=n.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},8648:t=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},8686:(t,e,r)=>{"use strict";var n=r(3724),i=r(9039);t.exports=n&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8721:(t,e,r)=>{"use strict";var n=r(3724),i=r(9504),s=r(2106),o=URLSearchParams.prototype,a=i(o.forEach);n&&!("size"in o)&&s(o,"size",{get:function(){var t=0;return a(this,function(){t++}),t},configurable:!0,enumerable:!0})},8727:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:(t,e,r)=>{"use strict";var n=r(616),i=Function.prototype,s=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(s):function(){return o.apply(s,arguments)})},8773:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},8797:(t,e,r)=>{"use strict";r.d(e,{A:()=>l}),r(8111),r(7588);var n=r(8905),i=r(8285),s=r(5720),o=r(9046),a=r(280);class c extends a.A{constructor(t,e,r){super(t,e),this.settings=(0,o.extend)({method:null,sandbox:[],forceEvenPages:!1,ignoreClass:""},r||{}),this.blobUrl=null,this.method=this.settings.method||"write",this.writingMode=""}create(){return this.frame=document.createElement("iframe"),this.frame.id=this.id,this.frame.seamless="seamless",this.frame.style.overflow="hidden",this.frame.style.border="none",this.frame.style.width="0",this.frame.style.height="0",this.settings.sandbox.forEach(t=>t&&this.frame.sandbox.add(t)),this.frame.setAttribute("enable-annotation","true"),this.width=0,this.height=0,this.frame}mode(t){const e=t||this.contents.mode;this.writingMode!==e&&(this.writingMode=e,this.emit(s.qY.VIEWS.WRITING_MODE,e))}load(t){const e=new i.A;return this.frame?(this.container.appendChild(this.frame),this.document=this.frame.contentDocument,this.frame.onload=t=>this.onLoad(t,e),this.document?("blobUrl"===this.method?(this.blobUrl=(0,o.createBlobUrl)(t,"application/xhtml+xml"),this.frame.src=this.blobUrl):"srcdoc"===this.method?this.frame.srcdoc=t:(this.document.open(),this.document.write("<!DOCTYPE html>"),this.document.write(t),this.document.close()),e.promise):(e.reject(new Error("No Document Available")),e.promise)):(e.reject(new Error("No Iframe Available")),e.promise)}onLoad(t,e){this.document=t.target.contentDocument,this.contents=new n.A(this.document,this.document.body,this.section);let r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.head.appendChild(r)),this.contents.on(s.qY.CONTENTS.RESIZED,t=>{this.emit(s.qY.VIEWS.RESIZED,t)}),e.resolve(this.contents)}show(){this.frame&&(this.frame.style.transform="translateZ(0)",this.frame.style.transform=null),super.show()}destroy(){this.blobUrl&&((0,o.revokeBlobUrl)(this.blobUrl),this.blobUrl=void 0),this.displayed&&(super.destroy(),this.method=void 0,this.writingMode=void 0)}}const l=c},8823:(t,e,r)=>{"use strict";r.d(e,{A:()=>h}),r(4114),r(8111),r(7588),r(8335),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(3068),i=r(7421),s=r(4776),o=r(8285),a=r(1758),c=r(5720),l=r(9046);class u extends Map{constructor(t,e,r){super(),this.sections=t,this.request=e,this.pause=r||100,this.break=150,this.processing=new o.A,this.current=new s.A,this.generated=this.processing.promise,this.q=new a.A(this)}async generate(t){return Number.isInteger(t)?this.break=t:(this.break=parseInt(t),console.warn("The input value type is not an integer")),this.q.pause(),this.sections.forEach(t=>{t.linear&&this.q.enqueue(this.process.bind(this),t)}),this.q.run().then(()=>{const t=1===this.size?1:this.size-1,e=[...this.values()];return e.forEach((e,r)=>{e.index=r,e.percentage=r/t}),this.size&&this.current.set(e[0]),this.processing.resolve(this),this})}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}async process(t){return t.load(this.request).then(e=>this.parse(e,t.cfiBase))}async parse(t,e,r){let n;r=r||this.break;let a,c=0;const u=t.ownerDocument,h=(0,l.qs)(u,"body");return this.treeWalker(h,t=>{const l=new o.A;if(0===t.textContent.trim().length)return l.resolve(!1),l.promise;0==c&&(n=this.createRange(),n.startContainer=t,n.startOffset=0);const u=t.length;let h=r-c,p=0;for(h>u&&(c+=u,p=u);p<u;)if(h=r-c,0===c&&(p+=1,n=this.createRange(),n.startContainer=t,n.startOffset=p),p+h>=u)c+=u-p,p=u;else{p+=h,n.endContainer=t,n.endOffset=p;const r=new i.A(n,e).toString(),o=(new s.A).set({cfi:r});this.set(r,o),c=0}return a=t,l.resolve(!0),l.promise}).then(()=>{if(n&&n.startContainer&&a){n.endContainer=a,n.endOffset=a.length;const t=new i.A(n,e).toString(),r=(new s.A).set({cfi:t});this.set(t,r),c=0}return this})}treeWalker(t,e){const r=NodeFilter.SHOW_TEXT,n=document.createTreeWalker(t,r),i=[];for(;n.nextNode();)i.push(e(n.currentNode));return Promise.all(i)}locationFromCfi(t){if(0===this.size)return-1;const e=new i.A(t),r=[...this.keys()],n=(0,l.locationOf)(e,r,e.compare);return n>this.size-1?-1:n}percentageFromCfi(t){if(0===this.size)return 0;const e=this.locationFromCfi(t);return this.percentageFromLocation(e)}percentageFromLocation(t){return 0===this.size||this.size>=t&&t<0?0:t/(1===this.size?1:this.size-1)}cfiFromLocation(t){return 0===this.size||this.size>=t&&t<0?null:[...this.keys()][t]}cfiFromPercentage(t){let e,r=this.size-1;if(t>=0&&t<=1){const n=Math.round(r*t);e=this.cfiFromLocation(n)}else{const t=new i.A([...this.keys()][r]);t.collapse(),e=t.toString(),console.warn("Recommended a normalize value to between 0 - 1")}return e}load(t){if("string"==typeof t){this.clear();const e=JSON.parse(t);e.items.forEach(t=>this.set(t.cfi,t)),this.break=e.break,this.pause=e.pause,this.current.set(this.get(e.idref))}else console.error("Invalid argument type");return this}save(){return JSON.stringify({items:[...this.values()],idref:this.current.cfi,break:this.break,pause:this.pause})}set(t){if(2===arguments.length)return super.set(arguments[0],arguments[1]),this;if(0===this.size)return this;if(Object.keys(t||{}).forEach(e=>{const r=t[e];if(this.current[e]===r||void 0===r)delete t[e];else if("string"==typeof r){if("cfi"===e&&i.A.prototype.isCfiString(r)){const n=this.locationFromCfi(r),i=[...this.values()][n];i?this.current.set(i):delete t[e]}}else{if("number"!=typeof r)throw new Error("Invalid value type to "+e);if("index"===e){const n=this.cfiFromLocation(r),i=this.get(n);i?this.current.set(i):delete t[e]}else if("percentage"===e){const n=this.cfiFromPercentage(r),i=this.get(n);i?this.current.set(i):delete t[e]}}}),Object.keys(t||{}).length){const{...e}=this.current;this.emit(c.qY.LOCATIONS.CHANGED,e,t)}return this}clear(){super.clear(),this.current.cfi=null,this.current.index=-1,this.current.percentage=0}destroy(){this.clear(),this.pause=void 0,this.break=void 0,this.current&&this.current.destroy(),this.current=void 0,this.q.stop(),this.q=void 0,this.generated=void 0}}n(u.prototype);const h=u},8875:(t,e,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=r(1093),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),l=a.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===s.call(t),n=o(t),a=e&&"[object String]"===s.call(t),p=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var f=l&&r;if(a&&t.length>0&&!i.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(n&&t.length>0)for(var y=0;y<t.length;++y)p.push(String(y));else for(var m in t)f&&"prototype"===m||!i.call(t,m)||p.push(String(m));if(c)for(var v=function(t){if("undefined"==typeof window||!d)return h(t);try{return h(t)}catch(t){return!1}}(t),b=0;b<u.length;++b)v&&"constructor"===u[b]||!i.call(t,u[b])||p.push(u[b]);return p}}t.exports=n},8905:(t,e,r)=>{"use strict";r.d(e,{A:()=>f}),r(4114),r(8111),r(7588),r(1701),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(3068),i=r(7421),s=r(7501),o=r(8285),a=r(2588),c=r(5720),l=r(9046);const u="undefined"!=typeof navigator,h=u&&/Chrome/.test(navigator.userAgent),p=u&&!h&&/AppleWebKit/.test(navigator.userAgent);class d{constructor(t,e,r){this.document=t,this.content=e||this.document.body,this.contentRect={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},this.section=r,this.scripts=new Map,this.styles=new Map,this.active=!0,this.window=this.document.defaultView,this.mode=this.writingMode(),this.appendListeners()}width(t){const e=this.content;return t&&(0,l.isNumber)(t)&&(t+="px"),t&&(e.style.width=t),parseInt(this.window.getComputedStyle(e).width)}height(t){const e=this.content;return t&&(0,l.isNumber)(t)&&(t+="px"),t&&(e.style.height=t),parseInt(this.window.getComputedStyle(e).height)}textSize(){const t=this.document.createRange();t.selectNodeContents(this.content);const e=t.getBoundingClientRect(),r=(0,l.borders)(this.content),n=e.width+r.width,i=this.content.clientHeight;return{width:Math.round(n),height:Math.round(i)}}scrollWidth(){return this.document.documentElement.scrollWidth}scrollHeight(){return this.document.documentElement.scrollHeight}overflow(t){const e=this.document.documentElement;return t&&(e.style.overflow=t),this.window.getComputedStyle(e).overflow}overflowX(t){const e=this.document.documentElement;return t&&(e.style.overflowX=t),this.window.getComputedStyle(e).overflowX}overflowY(t){const e=this.document.documentElement;return t&&(e.style.overflowY=t),this.window.getComputedStyle(e).overflowY}css(t,e,r){const n=this.content;return e?n.style.setProperty(t,e,r?"important":""):n.style.removeProperty(t),this.window.getComputedStyle(n)[t]}viewport(t){const e={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0};let r=this.document.querySelector("meta[name='viewport']");if(r&&r.hasAttribute("content")){const t=r.getAttribute("content"),n=t.match(/width\s*=\s*([^,]*)/),i=t.match(/height\s*=\s*([^,]*)/),s=t.match(/initial-scale\s*=\s*([^,]*)/),o=t.match(/minimum-scale\s*=\s*([^,]*)/),a=t.match(/maximum-scale\s*=\s*([^,]*)/),c=t.match(/user-scalable\s*=\s*([^,]*)/);n&&n.length&&void 0!==n[1]&&(e.width=n[1]),i&&i.length&&void 0!==i[1]&&(e.height=i[1]),s&&s.length&&void 0!==s[1]&&(e.scale=s[1]),o&&o.length&&void 0!==o[1]&&(e.minimum=o[1]),a&&a.length&&void 0!==a[1]&&(e.maximum=a[1]),c&&c.length&&void 0!==c[1]&&(e.scalable=c[1])}const n=(0,l.defaults)(t||{},e),i=[];return t&&(n.width&&i.push("width="+n.width),n.height&&i.push("height="+n.height),n.scale&&i.push("initial-scale="+n.scale),"no"===n.scalable?(i.push("minimum-scale="+n.scale),i.push("maximum-scale="+n.scale),i.push("user-scalable="+n.scalable)):(n.scalable&&i.push("user-scalable="+n.scalable),n.minimum&&i.push("minimum-scale="+n.minimum),n.maximum&&i.push("minimum-scale="+n.maximum)),null===r&&(r=this.document.createElement("meta"),r.setAttribute("name","viewport"),this.document.head.appendChild(r)),r.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),n}expand(){this.emit(c.qY.CONTENTS.EXPAND)}resize(t){let e=!1;const r=t=>Object.keys(this.contentRect).forEach(r=>{t&&this.contentRect[r]!==t[r]&&void 0!==t[r]&&(this.contentRect[r]=t[r],e=!0)});t.forEach(t=>r(t.contentRect)),e&&this.emit(c.qY.CONTENTS.RESIZED,this.contentRect)}root(){return this.document?this.document.documentElement:null}locationOf(t,e){const r={left:0,top:0};if(!this.document)return r;let n;if(i.A.prototype.isCfiString(t)){const s=new i.A(t).toRange(this.document,e);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let t=s.startContainer.textContent.indexOf(" ",s.startOffset);-1==t&&(t=s.startContainer.textContent.length),s.setEnd(s.startContainer,t)}}catch(t){console.error("setting end offset to start container length failed",t)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)n=s.startContainer.getBoundingClientRect(),r.left=n.left,r.top=n.top;else if(p){const t=s.startContainer,e=new Range;try{t.nodeType===Node.ELEMENT_NODE?n=t.getBoundingClientRect():s.startOffset+2<t.length?(e.setStart(t,s.startOffset),e.setEnd(t,s.startOffset+2),n=e.getBoundingClientRect()):s.startOffset-2>0?(e.setStart(t,s.startOffset-2),e.setEnd(t,s.startOffset),n=e.getBoundingClientRect()):n=t.parentNode.getBoundingClientRect()}catch(t){console.error(t,t.stack)}}else n=s.getBoundingClientRect()}}else if("string"==typeof t&&t.indexOf("#")>-1){const e=t.substring(t.indexOf("#")+1),r=this.document.getElementById(e);if(r)if(p){const t=new Range;t.selectNode(r),n=t.getBoundingClientRect()}else n=r.getBoundingClientRect()}return n&&(r.left=n.left,r.top=n.top),r}createLink(t,e){return new Promise((r,n)=>{const i=`epubjs-injected-css-${t}`;let s=this.styles.get(i);s&&this.document.head.removeChild(s),s=this.document.createElement("link"),s.rel="stylesheet",s.type="text/css",s.href=e,s.onload=()=>{r(s)},s.onerror=()=>{n(new Error(`Failed to load source: ${e}`))},this.document.head.appendChild(s),this.styles.set(i,s)})}createStyle(t,e){return new Promise(r=>{const n=`epubjs-injected-css-${t}`;let i=this.styles.get(n);i&&this.document.head.removeChild(i),i=this.document.createElement("style"),i.id=n,this.document.head.appendChild(i),Object.keys(e).forEach(t=>{const r=e[t],n=i.sheet.cssRules.length,s=Object.keys(r).map(t=>`${t}:${r[t]}`).join(";");i.sheet.insertRule(`${t}{${s}}`,n)}),this.styles.set(n,i),r(i)})}appendStylesheet(t,e){const r=new o.A;return this.document?("string"==typeof e?this.createLink(t,e).then(t=>{r.resolve(t)}):this.createStyle(t,e).then(t=>{r.resolve(t)}),r.promise):(r.reject(new Error("Document cannot be null")),r.promise)}removeStylesheet(t){if(!this.document)return!1;const e=`epubjs-injected-css-${t}`,r=this.styles.get(e);return void 0!==r&&(this.document.head.removeChild(r),this.styles.delete(e))}clearStylesheets(){this.styles.forEach(t=>{this.document.head.removeChild(t)}),this.styles.clear()}appendScript(t,e){return new Promise((r,n)=>{if(!this.document)return void n(new Error("Document cannot be null"));const i=`epubjs-injected-src-${t}`;let s=this.styles.get(i);void 0===s&&(s=this.document.createElement("script"),s.type="text/javascript",s.src=e,s.onload=()=>{r(s)},s.onerror=()=>{n(new Error(`Failed to load source: ${e}`))},this.document.head.appendChild(s)),this.scripts.set(i,s)})}removeScript(t){if(!this.document)return!1;const e=`epubjs-injected-src-${t}`,r=this.scripts.get(e);return void 0!==r&&(this.document.head.removeChild(r),this.scripts.remove(e))}clearScripts(){this.scripts.forEach(t=>{this.document.head.removeChild(t)}),this.scripts.clear()}appendClass(t){if(!this.document)return;const e=this.content;e&&e.classList.add(t)}removeClass(t){if(!this.document)return;const e=this.content;e&&e.classList.remove(t)}range(t,e){return new i.A(t).toRange(this.document,e)}cfiFromRange(t,e){return new i.A(t,this.section.cfiBase,e).toString()}cfiFromNode(t,e){return new i.A(t,this.section.cfiBase,e).toString()}map(t){return new s.A(t).section()}format(t){"paginated"===t.flow?this.columns(t):this.size(t)}size(t){const e="scrolled-doc"===t.flow?t.pageWidth:t.width,r=t.direction;this.width(e),this.viewport({width:e,scale:1,scalable:"no"}),this.direction(r),this.css("height","auto"),this.css("padding","20px "+e/12+"px"),this.css("overflow","hidden"),this.css("margin","0"),this.css("box-sizing","border-box")}columns(t){const e=t.pageWidth,r=t.pageHeight,n=t.columnWidth,i=t.direction,s=t.gap;this.width(e),this.height(r),this.viewport({width:e,height:r,scale:1,scalable:"no"}),this.direction(i),this.css("overflow","hidden"),this.css("margin","0",!0),this.css("box-sizing","border-box"),this.css("max-height","inherit"),this.css("display","block"),this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",s/2+"px",!0),this.css("padding-right",s/2+"px",!0),this.css("column-gap",s+"px"),this.css("column-fill","auto"),this.css("column-width",n+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scale(t,e,r){const n="scale("+t+")";let i="";(e>=0||r>=0)&&(i=" translate("+(e||0)+"px, "+(r||0)+"px )"),this.css("transform",n+i),this.css("transform-origin","top left")}direction(t="ltr"){this.document.documentElement.dir=t}mapPage(t,e,r,n,i){return new s.A(e,i).page(this,t,r,n)}writingMode(t="horizontal-tb"){if(this.mode===t)return this.mode;const e=(0,l.prefixed)("writing-mode"),r=this.document.documentElement;return r.style[e]=t,this.mode=this.window.getComputedStyle(r)[e]||"",this.mode}appendListeners(){this.document&&(c.py.forEach(t=>{this.document.addEventListener(t,this.triggerEvent.bind(this),{passive:!0})},this),this.document.addEventListener("selectionchange",this.selectionHandler.bind(this),{passive:!0}),this.resizeObserver=new ResizeObserver(t=>{requestAnimationFrame(()=>this.resize(t))}),this.resizeObserver.observe(this.document.documentElement),(0,a.iQ)(this.content,t=>{this.emit(c.qY.CONTENTS.LINK_CLICKED,t)}))}removeListeners(){this.document&&(c.py.forEach(t=>{this.document.removeEventListener(t,this.triggerEvent.bind(this),{passive:!0})},this),this.document.removeEventListener("selectionchange",this.selectionHandler.bind(this),{passive:!0}),this.resizeObserver&&this.resizeObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect())}triggerEvent(t){this.emit(t.type,t)}selectionHandler(t){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(()=>{const t=this.window.getSelection();if(!(t&&t.rangeCount>0))return;const e=t.getRangeAt(0);if(!e.collapsed){const t=new i.A(e,this.section.cfiBase).toString();this.emit(c.qY.CONTENTS.SELECTED,t),this.emit(c.qY.CONTENTS.SELECTED_RANGE,e)}},250)}imageLoadListeners(){const t=this.document.querySelectorAll("img");for(let e=0;e<t.length;e++){const r=t[e];void 0!==r.naturalWidth&&0===r.naturalWidth&&(r.onload=this.expand.bind(this))}}mediaQueryListeners(){const t=this.document.styleSheets,e=t=>{t.matches&&setTimeout(this.expand.bind(this),1)};for(let r=0;r<t.length;r+=1){let n;try{n=t[r].cssRules}catch(t){return void console.error(t)}if(!n)return;for(let t=0;t<n.length;t+=1)n[t].media&&(this.window.matchMedia(n[t].media.mediaText).onchange=e)}}fontLoadListeners(){this.document&&this.document.fonts&&this.document.fonts.ready.then(()=>this.resize())}transitionListeners(){const t=this.content;t.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",t.style.transitionDuration="0.001ms",t.style.transitionTimingFunction="linear",t.style.transitionDelay="0"}mutationListener(){this.mutationObserver=new MutationObserver((t,e)=>{t.forEach(t=>{})}),this.mutationObserver.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}destroy(){this.removeListeners(),this.clearStylesheets(),this.styles=void 0,this.clearScripts(),this.scripts=void 0,this.section=void 0}}n(d.prototype);const f=d},8940:(t,e,r)=>{"use strict";r.d(e,{A:()=>i}),r(4114),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(9046);const i=class extends Array{constructor(){super(),this.links=new Map}get(t){const e=t.split("/"),r=e.length?e[e.length-1]:t;return this.links.get(t)||this.links.get(r)}parse(t){return Array.isArray(t)?this.load(t):"nav"===t.nodeName?this.parseNav(t):"navMap"===t.nodeName&&this.parseNcx(t),new Promise(t=>{t(this)})}parseNav(t,e=null,r=null){const i=(0,n.filterChildren)(t,"ol",!0);if(!i)return;if(!i.children)return;const s=i.children.length,o=e||this;for(let t=0;t<s;t++){const e=i.children[t];if("li"!==e.nodeName)continue;const n=this.navItem(e,i);n&&(n.parentId=r,o.push(n),this.parseNav(e,n.subitems,n.id))}}navItem(t){const e=(0,n.qs)(t,"a")||(0,n.qs)(t,"span");if(!e)return null;const r=e.getAttribute("href"),i=r.split("#"),s=2===i.length?i[1]:"",o=t.getAttribute("id")||s||r,a=e.textContent||"",c={id:o,href:r,bind:i[0],label:a,parentId:null,subitems:[]};return this.links.set(r,c),c}parseNcx(t,e=null,r=null){if(!t.children)return;const n=t.children.length,i=e||this;for(let e=0;e<n;++e){const n=t.children[e];if("navPoint"!==n.nodeName)continue;const s=this.ncxItem(n);s.parentId=r,i.push(s),this.parseNcx(n,s.subitems,s.id)}}ncxItem(t){const e=(0,n.qs)(t,"content"),r=(0,n.qs)(t,"navLabel"),i=e.getAttribute("src"),s=i.split("#"),o=2===s.length?s[1]:"",a=t.getAttribute("id")||o||i,c=r.textContent||"",l={id:a,href:i,bind:s[0],label:c,parentId:null,subitems:[]};return this.links.set(i,l),l}load(t,e=0,r=null){e+=1,t.forEach(t=>{const n=t.href,i=n.split("#"),s=2===i.length?i[1]:"";t.id=t.id||s||n,t.bind=i[0],t.parentId=r,1===e&&this.push(t),this.links.set(n,t),this.load(t.subitems,e,t.id)})}clear(){this.length&&(this.links.clear(),this.splice(0))}destroy(){this.clear(),this.links=void 0}}},8968:t=>{"use strict";t.exports=Math.floor},8981:(t,e,r)=>{"use strict";var n=r(7750),i=Object;t.exports=function(t){return i(n(t))}},9032:(t,e,r)=>{"use strict";var n=r(7244),i=r(8184),s=r(5767),o=r(5680);function a(t){return t.call.bind(t)}var c="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,u=a(Object.prototype.toString),h=a(Number.prototype.valueOf),p=a(String.prototype.valueOf),d=a(Boolean.prototype.valueOf);if(c)var f=a(BigInt.prototype.valueOf);if(l)var g=a(Symbol.prototype.valueOf);function y(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function m(t){return"[object Map]"===u(t)}function v(t){return"[object Set]"===u(t)}function b(t){return"[object WeakMap]"===u(t)}function w(t){return"[object WeakSet]"===u(t)}function x(t){return"[object ArrayBuffer]"===u(t)}function E(t){return"undefined"!=typeof ArrayBuffer&&(x.working?x(t):t instanceof ArrayBuffer)}function A(t){return"[object DataView]"===u(t)}function O(t){return"undefined"!=typeof DataView&&(A.working?A(t):t instanceof DataView)}e.isArgumentsObject=n,e.isGeneratorFunction=i,e.isTypedArray=o,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):o(t)||O(t)},e.isUint8Array=function(t){return"Uint8Array"===s(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===s(t)},e.isUint16Array=function(t){return"Uint16Array"===s(t)},e.isUint32Array=function(t){return"Uint32Array"===s(t)},e.isInt8Array=function(t){return"Int8Array"===s(t)},e.isInt16Array=function(t){return"Int16Array"===s(t)},e.isInt32Array=function(t){return"Int32Array"===s(t)},e.isFloat32Array=function(t){return"Float32Array"===s(t)},e.isFloat64Array=function(t){return"Float64Array"===s(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===s(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===s(t)},m.working="undefined"!=typeof Map&&m(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(m.working?m(t):t instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(v.working?v(t):t instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(b.working?b(t):t instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),e.isWeakSet=function(t){return w(t)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),e.isArrayBuffer=E,A.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&A(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=O;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function q(t){return"[object SharedArrayBuffer]"===u(t)}function T(t){return void 0!==S&&(void 0===q.working&&(q.working=q(new S)),q.working?q(t):t instanceof S)}function k(t){return y(t,h)}function j(t){return y(t,p)}function R(t){return y(t,d)}function N(t){return c&&y(t,f)}function C(t){return l&&y(t,g)}e.isSharedArrayBuffer=T,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===u(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===u(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===u(t)},e.isGeneratorObject=function(t){return"[object Generator]"===u(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===u(t)},e.isNumberObject=k,e.isStringObject=j,e.isBooleanObject=R,e.isBigIntObject=N,e.isSymbolObject=C,e.isBoxedPrimitive=function(t){return k(t)||j(t)||R(t)||N(t)||C(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(E(t)||T(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})},9039:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},9046:(t,e,r)=>{"use strict";r.d(e,{blob2base64:()=>O,borders:()=>h,createBlobUrl:()=>g,defaults:()=>a,extend:()=>c,filterChildren:()=>T,findChildren:()=>S,indexOfNode:()=>d,indexOfSorted:()=>u,isFloat:()=>s,isNumber:()=>i,isXml:()=>f,locationOf:()=>l,nodeBounds:()=>p,parents:()=>q,parse:()=>m,prefixed:()=>o,qs:()=>v,qsa:()=>b,qsp:()=>w,revokeBlobUrl:()=>y,sprint:()=>x,uuid:()=>n}),r(4114),r(8111),r(2489),r(7588),r(4979),r(4603),r(7566),r(8721);const n=()=>{let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:7&r|8).toString(16)})},i=t=>!isNaN(parseFloat(t))&&isFinite(t),s=t=>{const e=parseFloat(t);return!1!==i(t)&&("string"==typeof t&&t.indexOf(".")>-1||Math.floor(e)!==e)},o=t=>{const e=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=t.toLowerCase();if("undefined"==typeof document||void 0!==document.body.style[r])return t;for(let t=0;t<5;t++)if(void 0!==document.body.style[e[t]+r])return e[t]+r;return t},a=(t,...e)=>{for(let r=1,n=e.length;r<n;r++){const n=e[r];for(const e in n)void 0===t[e]&&(t[e]=n[e])}return t},c=(t,...e)=>(e.forEach(e=>{e&&Object.getOwnPropertyNames(e).forEach(r=>{Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}),t),l=(t,e,r,n,i)=>{const s=n||0,o=i||e.length,a=parseInt(s+(o-s)/2);if(r||(r=(t,e)=>t>e?1:t<e?-1:t==e?0:void 0),o-s<=0)return a;const c=r(e[a],t);return o-s===1?c>=0?a:a+1:0===c?a:-1===c?l(t,e,r,a,o):l(t,e,r,s,a)},u=(t,e,r,n,i)=>{const s=n||0,o=i||e.length,a=parseInt(s+(o-s)/2);if(r||(r=(t,e)=>t>e?1:t<e?-1:t==e?0:void 0),o-s<=0)return-1;const c=r(e[a],t);return o-s===1?0===c?a:-1:0===c?a:-1===c?u(t,e,r,a,o):u(t,e,r,s,a)},h=t=>{const e=window.getComputedStyle(t),r={height:0,width:0};return["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(t=>{r.width+=parseFloat(e[t])||0}),["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(t=>{r.height+=parseFloat(e[t])||0}),r},p=t=>{let e;const r=t.ownerDocument;if(t.nodeType==Node.TEXT_NODE){const n=r.createRange();n.selectNodeContents(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();return e},d=(t,e)=>{const r=t.parentNode.childNodes;let n=-1;for(let i=0;i<r.length;i++){const s=r[i];if(s.nodeType===e&&n++,s==t)break}return n},f=t=>["xml","opf","ncx"].indexOf(t)>-1,g=(t,e)=>{const r=((t,e)=>new Blob([t],{type:e}))(t,e);return URL.createObjectURL(r)},y=t=>URL.revokeObjectURL(t),m=(t,e)=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),(new DOMParser).parseFromString(t,e)),v=(t,e)=>{if(!t)throw new Error("No Element Provided");if(void 0!==t.querySelector)return t.querySelector(e);{const r=t.getElementsByTagName(e);if(r.length)return r[0]}},b=(t,e)=>void 0!==t.querySelector?t.querySelectorAll(e):t.getElementsByTagName(e),w=(t,e,r)=>{if(void 0!==t.querySelector){e+="[";for(const t in r)e+=t+"~='"+r[t]+"'";return e+="]",t.querySelector(e)}{const n=t.getElementsByTagName(e),i=Array.prototype.slice.call(n,0).filter(t=>{for(const e in r)if(t.getAttribute(e)===r[e])return!0;return!1});if(i)return i[0]}},x=(t,e)=>{void 0!==(t.ownerDocument||t).createTreeWalker?E(t,e,NodeFilter.SHOW_TEXT):A(t,t=>{t&&t.nodeType===Node.TEXT_NODE&&e(t)},!0)},E=(t,e,r)=>{const n=document.createTreeWalker(t,r,null,!1);let i;for(;i=n.nextNode();)e(i)},A=(t,e)=>{if(e(t))return!0;if(t=t.firstChild)do{if(A(t,e))return!0;t=t.nextSibling}while(t);return!1},O=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onloadend=()=>{e(n.result)}}),S=t=>{const e=[],r=t.childNodes;for(let t=0;t<r.length;t++){const n=r[t];n.nodeType===Node.ELEMENT_NODE&&e.push(n)}return e},q=t=>{const e=[t];for(;t;t=t.parentNode)e.unshift(t);return e},T=(t,e,r)=>{const n=[],i=t.childNodes;for(let t=0;t<i.length;t++){const s=i[t];if(s.nodeType===Node.ELEMENT_NODE&&s.nodeName.toLowerCase()===e){if(r)return s;n.push(s)}}if(!r)return n}},9050:(t,e,r)=>{"use strict";r.d(e,{A:()=>c}),r(4114),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733),r(4603),r(7566),r(8721);var n=r(2588),i=r(9046),s=r(984),o=r(9357);class a extends Map{constructor(t,e,r){super(),this.archive=void 0,this.storage=void 0,this.request=t,this.resolve=e,this.replacements=r||null}clear(){"blobUrl"===this.replacements&&this.forEach((t,e)=>{URL.revokeObjectURL(t)}),super.clear()}async createUrl(t,e){const r=this.resolve(t),n=new s.A(r),a="base64"===this.replacements;if(this.archive){const t=a?"base64":"blob";return this.archive.request(r,t).then(t=>a?t:URL.createObjectURL(t))}return a?this.request(r,"blob").then(t=>(0,i.blob2base64)(t)):this.request(r,"blob").then(t=>{const r=e||o.A.lookup(n.filename);return(0,i.createBlobUrl)(t,r)})}revokeUrl(t){let e={result:0,blobUrl:null};return"blobUrl"===this.replacements&&(e.result=1,e.blobUrl=this.get(t),e.blobUrl&&(e.result=2,URL.revokeObjectURL(e.blobUrl))),e}substitute(t,e){e.output=(0,n.V2)(t,e,[...this.keys()],[...this.values()])}async unpack(t,e,r){this.archive=e,this.storage=r,null===this.replacements&&(this.replacements=e||r.name?"blobUrl":null);const n=[];return t.forEach((t,i)=>{if("application/xhtml+xml"===t["media-type"]||"text/html"===t["media-type"])r.name&&!e&&n.push(r.put(this.resolve(t.href)));else if(this.replacements){const e=this.createUrl(t.href,t["media-type"]).then(e=>(this.set(t.href,e),e));n.push(e)}else this.set(t.href,null)}),Promise.all(n).then(()=>this)}destroy(){this.clear(),this.archive=void 0,this.storage=void 0,this.request=void 0,this.resolve=void 0,this.replacements=void 0}}const c=a},9092:(t,e,r)=>{"use strict";var n=r(1333);t.exports=function(){return n()&&!!Symbol.toStringTag}},9133:(t,e,r)=>{"use strict";var n=r(8403);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),s="";for(var o in i)s+=o;return t!==s}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?n:Object.assign:n}},9143:(t,e,r)=>{"use strict";var n=r(4576),i=r(9504),s=r(3972),o=r(3463),a=r(9297),c=r(2804),l=r(944),u=r(5169),h=c.c2i,p=c.c2iUrl,d=n.SyntaxError,f=n.TypeError,g=i("".charAt),y=function(t,e){for(var r=t.length;e<r;e++){var n=g(t,e);if(" "!==n&&"\t"!==n&&"\n"!==n&&"\f"!==n&&"\r"!==n)break}return e},m=function(t,e,r){var n=t.length;n<4&&(t+=2===n?"AA":"A");var i=(e[g(t,0)]<<18)+(e[g(t,1)]<<12)+(e[g(t,2)]<<6)+e[g(t,3)],s=[i>>16&255,i>>8&255,255&i];if(2===n){if(r&&0!==s[1])throw new d("Extra bits");return[s[0]]}if(3===n){if(r&&0!==s[2])throw new d("Extra bits");return[s[0],s[1]]}return s},v=function(t,e,r){for(var n=e.length,i=0;i<n;i++)t[r+i]=e[i];return r+n};t.exports=function(t,e,r,n){o(t),s(e);var i="base64"===l(e)?h:p,c=e?e.lastChunkHandling:void 0;if(void 0===c&&(c="loose"),"loose"!==c&&"strict"!==c&&"stop-before-partial"!==c)throw new f("Incorrect `lastChunkHandling` option");r&&u(r.buffer);var b=t.length,w=r||[],x=0,E=0,A="",O=0;if(n)for(;;){if((O=y(t,O))===b){if(A.length>0){if("stop-before-partial"===c)break;if("loose"!==c)throw new d("Missing padding");if(1===A.length)throw new d("Malformed padding: exactly one additional character");x=v(w,m(A,i,!1),x)}E=b;break}var S=g(t,O);if(++O,"="===S){if(A.length<2)throw new d("Padding is too early");if(O=y(t,O),2===A.length){if(O===b){if("stop-before-partial"===c)break;throw new d("Malformed padding: only one =")}"="===g(t,O)&&(++O,O=y(t,O))}if(O<b)throw new d("Unexpected character after padding");x=v(w,m(A,i,"strict"===c),x),E=b;break}if(!a(i,S))throw new d("Unexpected character");var q=n-x;if(1===q&&2===A.length||2===q&&3===A.length)break;if(4===(A+=S).length&&(x=v(w,m(A,i,!1),x),A="",E=O,x===n))break}return{bytes:w,read:E,written:x}}},9202:(t,e,r)=>{"use strict";var n=r(181);t.exports=function(t){if(!n(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},9209:(t,e,r)=>{"use strict";var n=r(6578),i="undefined"==typeof globalThis?r.g:globalThis;t.exports=function(){for(var t=[],e=0;e<n.length;e++)"function"==typeof i[n[e]]&&(t[t.length]=n[e]);return t}},9211:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,r){return 0===t&&0===r?1/t==1/r:t===r||!(!e(t)||!e(r))}},9213:(t,e,r)=>{"use strict";var n=r(6080),i=r(9504),s=r(7055),o=r(8981),a=r(6198),c=r(1469),l=i([].push),u=function(t){var e=1===t,r=2===t,i=3===t,u=4===t,h=6===t,p=7===t,d=5===t||h;return function(f,g,y,m){for(var v,b,w=o(f),x=s(w),E=a(x),A=n(g,y),O=0,S=m||c,q=e?S(f,E):r||p?S(f,0):void 0;E>O;O++)if((d||O in x)&&(b=A(v=x[O],O,w),t))if(e)q[O]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return O;case 2:l(q,v)}else switch(t){case 4:return!1;case 7:l(q,v)}return h?-1:i||u?u:q}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},9290:t=>{"use strict";t.exports=RangeError},9297:(t,e,r)=>{"use strict";var n=r(9504),i=r(8981),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},9306:(t,e,r)=>{"use strict";var n=r(4901),i=r(6823),s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not a function")}},9325:(t,e,r)=>{var n=r(4840),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();t.exports=s},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9353:t=>{"use strict";var e=Object.prototype.toString,r=Math.max,n=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var i=0;i<e.length;i+=1)r[i+t.length]=e[i];return r};t.exports=function(t){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var s,o=function(t){for(var e=[],r=1,n=0;r<t.length;r+=1,n+=1)e[n]=t[r];return e}(arguments),a=r(0,i.length-o.length),c=[],l=0;l<a;l++)c[l]="$"+l;if(s=Function("binder","return function ("+function(t){for(var e="",r=0;r<t.length;r+=1)e+=t[r],r+1<t.length&&(e+=",");return e}(c)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var e=i.apply(this,n(o,arguments));return Object(e)===e?e:this}return i.apply(t,n(o,arguments))}),i.prototype){var u=function(){};u.prototype=i.prototype,s.prototype=new u,u.prototype=null}return s}},9357:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});const n={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},i=(()=>{const t={};for(const e in n)if(n.hasOwnProperty(e))for(const r in n[e])if(n[e].hasOwnProperty(r)){const i=n[e][r];if("string"==typeof i)t[i]=e+"/"+r;else for(let n=0;n<i.length;n++)t[i[n]]=e+"/"+r}return t})(),s={lookup:t=>{let e;if(t){const r=t.split(".").pop().toLowerCase();e=i[r]}return e||"text/plain"}}},9374:(t,e,r)=>{var n=r(4128),i=r(3805),s=r(4394),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var r=a.test(t);return r||c.test(t)?l(t.slice(2),r?2:8):o.test(t)?NaN:+t}},9383:t=>{"use strict";t.exports=Error},9394:(t,e,r)=>{"use strict";var n=r(9211);t.exports=function(){return"function"==typeof Object.is?Object.is:n}},9429:(t,e,r)=>{"use strict";var n=r(4576),i=r(6193);t.exports=function(t){if(i){try{return n.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}}},9433:(t,e,r)=>{"use strict";var n=r(4576),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9462:(t,e,r)=>{"use strict";var n=r(9565),i=r(2360),s=r(6699),o=r(6279),a=r(8227),c=r(1181),l=r(5966),u=r(7657).IteratorPrototype,h=r(2529),p=r(9539),d=r(1385),f=a("toStringTag"),g="IteratorHelper",y="WrapForValidIterator",m="normal",v="throw",b=c.set,w=function(t){var e=c.getterFor(t?y:g);return o(i(u),{next:function(){var r=e(this);if(t)return r.nextHandler();if(r.done)return h(void 0,!0);try{var n=r.nextHandler();return r.returnHandlerResult?n:h(n,r.done)}catch(t){throw r.done=!0,t}},return:function(){var r=e(this),i=r.iterator;if(r.done=!0,t){var s=l(i,"return");return s?n(s,i):h(void 0,!0)}if(r.inner)try{p(r.inner.iterator,m)}catch(t){return p(i,v,t)}if(r.openIters)try{d(r.openIters,m)}catch(t){return p(i,v,t)}return i&&p(i,m),h(void 0,!0)}})},x=w(!0),E=w(!1);s(E,f,"Iterator Helper"),t.exports=function(t,e,r){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=e?y:g,i.returnHandlerResult=!!r,i.nextHandler=t,i.counter=0,i.done=!1,b(this,i)};return n.prototype=e?x:E,n}},9486:(t,e,r)=>{"use strict";var n=r(6518),i=r(4576),s=r(9504),o=r(3972),a=r(4154),c=r(5169),l=r(2804),u=r(944),h=l.i2c,p=l.i2cUrl,d=s("".charAt),f=i.Uint8Array,g=!f||!f.prototype.toBase64||!function(){try{(new f).toBase64(null)}catch(t){return!0}}();f&&n({target:"Uint8Array",proto:!0,forced:g},{toBase64:function(){var t=a(this),e=arguments.length?o(arguments[0]):void 0,r="base64"===u(e)?h:p,n=!!e&&!!e.omitPadding;c(this.buffer);for(var i,s="",l=0,f=t.length,g=function(t){return d(r,i>>6*t&63)};l+2<f;l+=3)i=(t[l]<<16)+(t[l+1]<<8)+t[l+2],s+=g(3)+g(2)+g(1)+g(0);return l+2===f?(i=(t[l]<<16)+(t[l+1]<<8),s+=g(3)+g(2)+g(1)+(n?"":"=")):l+1===f&&(i=t[l]<<16,s+=g(3)+g(2)+(n?"":"==")),s}})},9504:(t,e,r)=>{"use strict";var n=r(616),i=Function.prototype,s=i.call,o=n&&i.bind.bind(s,s);t.exports=n?o:function(t){return function(){return s.apply(t,arguments)}}},9507:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(9046);class i extends Map{constructor(){super()}parse(t){return Array.isArray(t)?this.load(t):"nav"===t.nodeName&&this.parseNav(t),new Promise((t,e)=>{t(this)})}parseNav(t){(t?(0,n.qsa)(t,"li"):[]).forEach(t=>{const e=this.navItem(t);e&&this.set(e.type,e)})}navItem(t){const e=(0,n.filterChildren)(t,"a",!0);if(!e)return null;const r=e.getAttribute("epub:type"),i=e.getAttribute("href")||"";return r?{type:r,href:i,label:e.textContent||""}:null}load(t){t.forEach(t=>{this.set(t.type,t)})}destroy(){this.clear()}}const s=i},9519:(t,e,r)=>{"use strict";var n,i,s=r(4576),o=r(2839),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(i=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(i=+n[1]),t.exports=i},9538:t=>{"use strict";t.exports=ReferenceError},9539:(t,e,r)=>{"use strict";var n=r(9565),i=r(8551),s=r(5966);t.exports=function(t,e,r){var o,a;i(t);try{if(!(o=s(t,"return"))){if("throw"===e)throw r;return r}o=n(o,t)}catch(t){a=!0,o=t}if("throw"===e)throw r;if(a)throw o;return i(o),r}},9565:(t,e,r)=>{"use strict";var n=r(616),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},9577:(t,e,r)=>{"use strict";var n=r(9928),i=r(4644),s=r(1108),o=r(1291),a=r(5854),c=i.aTypedArray,l=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,h=function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}(),p=h&&function(){try{new Int8Array(1).with(-.5,1)}catch(t){return!0}}();u("with",{with:function(t,e){var r=c(this),i=o(t),u=s(r)?a(e):+e;return n(r,l(r),i,u)}}.with,!h||p)},9597:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var o,a,c={};function l(t,e,r){r||(r=Error);var o=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(u,r);var o,a,c,l=(a=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=s(a);if(c){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(r,n,i){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s=l.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i)),s.code=t,s}return o=u,Object.defineProperty(o,"prototype",{writable:!1}),o}(r);c[t]=o}function u(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(t){return String(t)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",function(t,e,i){var s,a,c,l,h;if(void 0===o&&(o=r(4148)),o("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(a="not ",e.substr(0,4)===a)?(s="must not be",e=e.replace(/^not /,"")):s="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-9,r)===e}(t," argument"))c="The ".concat(t," ").concat(s," ").concat(u(e,"type"));else{var p=("number"!=typeof h&&(h=0),h+1>(l=t).length||-1===l.indexOf(".",h)?"argument":"property");c='The "'.concat(t,'" ').concat(p," ").concat(s," ").concat(u(e,"type"))}return c+". Received type ".concat(n(i))},TypeError),l("ERR_INVALID_ARG_VALUE",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=r(537));var i=a.inspect(e);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(n,". Received ").concat(i)},TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",function(t,e,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(i,".")},TypeError),l("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];void 0===o&&(o=r(4148)),o(e.length>0,"At least one arg needs to be specified");var i="The ",s=e.length;switch(e=e.map(function(t){return'"'.concat(t,'"')}),s){case 1:i+="".concat(e[0]," argument");break;case 2:i+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:i+=e.slice(0,s-1).join(", "),i+=", and ".concat(e[s-1]," arguments")}return"".concat(i," must be specified")},TypeError),t.exports.codes=c},9600:t=>{"use strict";var e,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i(function(){throw 42},null,e)}catch(t){t!==r&&(i=null)}else i=null;var s=/^\s*class\b/,o=function(t){try{var e=n.call(t);return s.test(e)}catch(t){return!1}},a=function(t){try{return!o(t)&&(n.call(t),!0)}catch(t){return!1}},c=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var p=document.all;c.call(p)===c.call(document.all)&&(h=function(t){if((u||!t)&&(void 0===t||"object"==typeof t))try{var e=c.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=i?function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{i(t,null,e)}catch(t){if(t!==r)return!1}return!o(t)&&a(t)}:function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return a(t);if(o(t))return!1;var e=c.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&a(t)}},9612:t=>{"use strict";t.exports=Object},9617:(t,e,r)=>{"use strict";var n=r(5397),i=r(5610),s=r(6198),o=function(t){return function(e,r,o){var a=n(e),c=s(a);if(0===c)return!t&&-1;var l,u=i(o,c);if(t&&r!=r){for(;c>u;)if((l=a[u++])!=l)return!0}else for(;c>u;u++)if((t||u in a)&&a[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},9631:(t,e,r)=>{"use strict";r(9486)},9675:t=>{"use strict";t.exports=TypeError},9721:(t,e,r)=>{"use strict";var n=r(6556),i=r(4035),s=n("RegExp.prototype.exec"),o=r(9675);t.exports=function(t){if(!i(t))throw new o("`regex` must be a RegExp");return function(e){return null!==s(t,e)}}},9733:(t,e,r)=>{"use strict";var n=r(6518),i=r(9306),s=r(6194),o=r(2248),a=TypeError,c=o.get,l=o.has,u=o.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,e){var r=s(this),n=arguments.length;i(e);var o=l(r,t);if(!o&&n<3)throw new a("Updating absent value");var h=o?c(r,t):i(n>2?arguments[2]:void 0)(t,r);return u(r,t,e(h,t,r)),r}})},9762:(t,e,r)=>{"use strict";var n=r(6011)();t.exports=function(t){return t!==n&&null!==t}},9797:(t,e,r)=>{"use strict";r(4226)},9798:(t,e,r)=>{"use strict";r.d(e,{A:()=>s}),r(8111),r(7588),r(1517),r(1379),r(3777),r(4190),r(2359),r(6097),r(7254),r(7036),r(7273),r(7415),r(9929),r(7583),r(5122),r(230),r(7268),r(9733);var n=r(9046);class i extends Map{constructor(){super(),this.navPath=null,this.coverPath=null}clear(){super.clear(),this.navPath=null,this.coverPath=null}parse(t){return[...t.children].forEach(t=>{const e=t.getAttribute("properties"),r={id:t.getAttribute("id"),href:t.getAttribute("href")||"","media-type":t.getAttribute("media-type")||"","media-overlay":t.getAttribute("media-overlay")||"",properties:e?e.split(" "):[]};this.set(r.id,r),null!==this.navPath||"nav"!==e&&"application/x-dtbncx+xml"!==r["media-type"]||(this.navPath=r.href),null===this.coverPath&&"cover-image"===e&&(this.coverPath=r.href)}),null===this.coverPath&&(this.coverPath=this.findCoverPath(t)),Promise.resolve(this)}findCoverPath(t){const e=t.ownerDocument,r=(0,n.qsp)(e,"meta",{name:"cover"});if(r){const t=r.getAttribute("content"),n=e.getElementById(t);return n?n.getAttribute("href"):null}return null}load(t){return t.forEach(t=>{for(const e of t.properties)switch(e){case"nav":this.navPath=t.href;break;case"cover-image":this.coverPath=t.href}this.set(t.id,t)}),Promise.resolve(this)}destroy(){this.clear(),this.navPath=void 0,this.coverPath=void 0}}const s=i},9928:(t,e,r)=>{"use strict";var n=r(6198),i=r(1291),s=RangeError;t.exports=function(t,e,r,o){var a=n(t),c=i(r),l=c<0?a+c:c;if(l>=a||l<0)throw new s("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?o:t[h];return u}},9929:(t,e,r)=>{"use strict";var n=r(6518),i=r(6080),s=r(6194),o=r(2248),a=r(6223),c=o.Map,l=o.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var e=s(this),r=i(t,arguments.length>1?arguments[1]:void 0),n=new c;return a(e,function(t,i){l(n,r(t,i,e),t)}),n}})},9948:(t,e,r)=>{"use strict";var n=r(5370),i=r(4644).getTypedArrayConstructor;t.exports=function(t,e){return n(i(t),e)}},9957:(t,e,r)=>{"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,s=r(6743);t.exports=s.call(n,i)}},n={};function i(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return r[t].call(s.exports,s,s.exports,i),s.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var s={};return(()=>{"use strict";i(6573),i(8100),i(7936),i(8111),i(7588),i(7467),i(4732),i(9577),i(7350),i(3241),i(7302),i(5871),i(1549),i(9797),i(9631),i(5623),i(4979);var t=i(4148),e=i(8378);const r="open",n="destroy",s=t=>{let e=location.origin;return/localhost/.test(e)||(e+="epub-js"),e+=t,e},o=(e,i,s)=>{switch(i){case r:((e,{archived:r,url:n})=>{t.equal(e.isOpen,!0),t.equal(e.archived,r),t.equal(e.url.toString(),n),t.equal(e.container.directory,"OPS/"),t.equal(e.container.fullPath,"OPS/package.opf"),t.equal(e.container.encoding,"UTF-8"),t.equal(e.container.mediaType,"application/oebps-package+xml")})(e,s);break;case n:(e=>{Object.keys(e).forEach(r=>{t.equal(e[r],void 0)})})(e)}},a=t=>({book:new e.A,path:s(t)});describe("Book",()=>{describe("open book from epub file of local server",()=>{const{book:e,path:i}=a("/assets/alice.epub");it("should open a archived epub",async()=>{await e.open(i),await e.opened,o(e,r,{archived:!0,url:"/"})}),it("should have a blob cover url",async()=>{const r=await e.coverUrl();t(/blob:/.test(r))}),it("should destroy book instance",async()=>{e.destroy(),o(e,n)})}),describe("open book from epub file of remote server",()=>{const{book:e,path:i}=a("/assets/alice.epub");it("should open a archived epub",async()=>{await e.open(i),await e.opened,o(e,r,{archived:!0,url:"/"})}),it("should have a blob cover url",async()=>{const r=await e.coverUrl();t(/blob:/.test(r))}),it("should destroy book instance",async()=>{e.destroy(),o(e,n)})}),describe("open book from array buffer",()=>{let i,a;before(async()=>{const t=await fetch(s("/assets/alice.epub"));a=await t.arrayBuffer(),i=new e.A}),it("should open a archived epub",async()=>{await i.open(a),await i.opened,o(i,r,{archived:!0,url:"/"})}),it("should have a blob cover url",async()=>{const e=await i.coverUrl();t(/blob:/.test(e))}),it("should destroy book instance",async()=>{i.destroy(),o(i,n)})}),describe("open book from data URL in base64 encoding",()=>{let i,a;before(async()=>{const t=await fetch(s("/assets/alice.epub")),r=await t.blob(),n=await r.arrayBuffer();a=(t=>{let e="",r=new Uint8Array(t),n=r.byteLength;for(let t=0;t<n;t++)e+=String.fromCharCode(r[t]);return window.btoa(e)})(n),i=new e.A}),it("should open a archived epub",async()=>{await i.open(a,"base64"),await i.opened,o(i,r,{archived:!0,url:"/"})}),it("should have a blob cover url",async()=>{const e=await i.coverUrl();t(/blob:/.test(e))}),it("should destroy book instance",async()=>{i.destroy(),o(i,n)})}),describe("open book from epub file without cover",()=>{const{book:e,path:i}=a("/assets/alice_without_cover.epub");it("should open a archived epub",async()=>{await e.open(i),await e.opened,o(e,r,{archived:!0,url:"/"})}),it("should have a empty cover url",async()=>{const r=await e.coverUrl();t.equal(r,null)}),it("should destroy book instance",async()=>{e.destroy(),o(e,n)})}),describe("open book from directory of local server",()=>{const{book:t,path:e}=a("/assets/alice/");it("should open a unarchived epub",async()=>{await t.open(e),await t.opened,o(t,r,{archived:!1,url:e})}),it("should destroy book instance",async()=>{t.destroy(),o(t,n)})}),describe("open book from directory of remote server",()=>{const{book:t,path:e}=a("/assets/alice/");it("should open a unarchived epub",async()=>{await t.open(e),await t.opened,o(t,r,{archived:!1,url:e})}),it("should destroy book instance",async()=>{t.destroy(),o(t,n)})})})})(),(()=>{"use strict";i(8111),i(7588);var t=i(4148),e=i(3412),r=i(7421);const n=(e,r,n)=>{switch(n){case 0:t.equal(e.hash,""),t.equal(e.type,void 0),t.equal(e.range,!1),t.equal(e.start,null),t.equal(e.end,null),t.equal(Object.keys(e.base).length,0),t.equal(Object.keys(e.path).length,0),t.equal(e.spinePos,0),t.equal(e.ignoreClass,""),t.equal(e.toString(),"epubcfi(/!/)");break;case 1:t.equal(e.hash,r),t.equal(e.type,"string"),e.range?(t.equal(e.range,!0),t.equal(e.start.steps.length,1),t.equal(e.end.steps.length,1)):(t.equal(e.range,!1),t.equal(e.start,null),t.equal(e.end,null)),t.equal(e.base.steps.length,2),t.equal(e.base.steps[0].id,null),t.equal(e.base.steps[0].index,2),t.equal(e.base.steps[0].type,"element"),t.equal(e.base.steps[1].id,null),t.equal(e.base.steps[1].index,0),t.equal(e.base.steps[1].type,"element"),t.equal(e.base.terminal.assertion,null),t.equal(e.base.terminal.offset,null),t.equal(e.path.steps[0].id,null),t.equal(e.path.steps[0].index,1),t.equal(e.path.steps[0].type,"element"),t.equal(e.path.steps[1].id,"toc"),t.equal(e.path.steps[1].index,0),t.equal(e.path.steps[1].type,"element"),t.equal(e.path.steps[2].id,"contents"),t.equal(e.path.steps[2].index,0),t.equal(e.path.steps[2].type,"element"),t.equal(e.path.terminal.assertion,null),e.range?(t.equal(e.path.steps.length,3),t.equal(e.path.terminal.offset,null)):(t.equal(e.path.steps.length,4),t.equal(e.path.steps[3].id,null),t.equal(e.path.steps[3].index,0),t.equal(e.path.steps[3].type,"text"),t.equal(e.path.terminal.offset,0)),t.equal(e.spinePos,0),t.equal(e.ignoreClass,""),t.equal(e.toString(),r);break;case 2:case 4:t.equal(e.hash,""),"node"===e.type?t.equal(e.type,"node"):t.equal(e.type,"range"),e.range?t.equal(e.range,!0):(t.equal(e.range,!1),t.equal(e.start,null),t.equal(e.end,null)),t.equal(e.base.steps.length,2),t.equal(e.base.steps[0].id,null),t.equal(e.base.steps[0].index,2),t.equal(e.base.steps[0].type,"element"),t.equal(e.base.steps[1].id,null),t.equal(e.base.steps[1].index,0),t.equal(e.base.steps[1].type,"element"),t.equal(e.base.terminal.assertion,null),t.equal(e.base.terminal.offset,null),t.equal(e.path.steps.length,0),t.equal(e.path.terminal.assertion,null),"node"===e.type?t.equal(e.path.terminal.offset,null):t.equal(e.path.terminal.offset,0),t.equal(e.spinePos,0),t.equal(e.ignoreClass,""),"node"===e.type?t.equal(e.toString(),"epubcfi(/6/2!/)"):t.equal(e.toString(),"epubcfi(/6/2!/:0)")}};describe("EpubCFI",()=>{let i,s,o,a;before(async()=>{i=await(0,e.A)("../assets/handbook/EPUB/xhtml/nav.xhtml"),s=await(0,e.A)("../assets/chapter1.xhtml"),o=await(0,e.A)("../assets/chapter1-highlights.xhtml"),a=await(0,e.A)("../assets/highlight.xhtml")}),describe("#constructor()",()=>{const t="/6/2";it("should be created instance by default",()=>{const t=new r.A;n(t,null,0)}),it("should be created instance with (hash)",()=>{const t="epubcfi(/6/2!/4/2[toc]/2[contents]/1:0)",e=new r.A(t);n(e,t,1)}),it("should be created instance with (hash) to range",()=>{const t="epubcfi(/6/2!/4/2[toc]/2[contents],/1:0,/1:17)",e=new r.A(t);n(e,t,1)}),it("should be created instance with (node, base)",()=>{const e=i.documentElement,s=new r.A(e,t);n(s,null,2)}),it("should be created instanse with (range, base)",()=>{const e=i.createRange(),s=new r.A(e,t);n(s,null,4)})}),describe("#set()",()=>{const t="epubcfi(/6/2!/4/2[toc]/2[contents]/1:0)",e=new r.A;it("should be update epubcfi.hash",()=>{e.set({data:t}),n(e,t,1)}),it("should be update epubcfi.base component",()=>{e.set({base:"/6/2"}),n(e,t,1)}),it("should be update epubcfi.type of node",()=>{const t=i.documentElement;e.set({data:t}),n(e,null,2)}),it("should be update epubcfi.type of range",()=>{const t=i.createRange();e.set({data:t}),n(e,null,4)})}),describe("#parse()",()=>{it("should parse a cfi",()=>{const t="epubcfi(/6/2!/4/2[toc]/2[contents]/1:0)",e=r.A.prototype.parse(t);n(e,t,1)}),xit("should parse a cfi and ignore the base if present",()=>{const e=r.A.prototype.parse("epubcfi(/6/2!/4/2[toc]/2[contents]/1:0)","/6/2");t.equal(e.spinePos,0)}),it("should parse a cfi with a character offset",()=>{const e=r.A.prototype.parse("epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)");t.equal(e.path.terminal.offset,3)}),it("should be parse a (hash) by range with offset",()=>{const e=r.A.prototype.parse("epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)");t.equal(e.range,!0),t.equal(e.start.steps.length,2),t.equal(e.end.steps.length,1),t.equal(e.start.terminal.offset,1),t.equal(e.end.terminal.offset,4)})}),describe("#toString()",()=>{it("should parse a cfi and write it back",()=>{const e="epubcfi(/6/2[cover]!/6)",n="epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)",i="epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)";t.equal(new r.A(e).toString(),e),t.equal(new r.A(n).toString(),n),t.equal(new r.A(i).toString(),i)})}),describe("#checkType()",()=>{it("should determine the type as cfi string",()=>{const e=r.A.prototype.checkType("epubcfi(/6/2[cover]!/6)");t.equal(e,"string")}),it("should determine the type as node",()=>{const e=i.documentElement,n=r.A.prototype.checkType(e);t.equal(n,"node")}),it("should determine the type as range",()=>{const e=i.createRange(),n=r.A.prototype.checkType(e);t.equal(n,"range")}),it("should determine the type as EpubCFI instance",()=>{const e=new r.A("epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)"),n=r.A.prototype.checkType(e);t.equal(n,"EpubCFI")}),it("should determine the type as undefined",()=>{["","/6/2[cover]!/6","epubcfi(/6/2[cover]!/6"].forEach(e=>{t.equal(r.A.prototype.checkType(e),void 0)})})}),describe("#compare()",()=>{const e=new r.A;it("should compare CFIs",()=>{t.equal(e.compare("epubcfi(/6/4[cover]!/4)","epubcfi(/6/2[cover]!/4)"),1,"First spine is greater"),t.equal(e.compare("epubcfi(/6/4[cover]!/4)","epubcfi(/6/6[cover]!/4)"),-1,"Second spine is greater"),t.equal(e.compare("epubcfi(/6/2[cover]!/8/2)","epubcfi(/6/2[cover]!/6)"),1,"First Element is after Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/2)","epubcfi(/6/2[cover]!/6)"),-1,"First Element is before Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/8/2)","epubcfi(/6/2[cover]!/6/4/2/2)"),1,"First Element is after Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/4)","epubcfi(/6/2[cover]!/6/4/2/2)"),-1,"First Element is before Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/6)","epubcfi(/6/2[cover]!/4/6/8/1:0)"),-1,"First is less specific, so is before Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/6/8)","epubcfi(/6/2[cover]!/6/2)"),1,"First Element is after Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/20)","epubcfi(/6/2[cover]!/6/10)"),-1,"First Element is before Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/5)","epubcfi(/6/2[cover]!/4/3)"),1,"First TextNode is after Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/7)","epubcfi(/6/2[cover]!/4/13)"),-1,"First TextNode is before Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/5:1)","epubcfi(/6/2[cover]!/4/5:0)"),1,"First Char Offset after Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/5:2)","epubcfi(/6/2[cover]!/4/5:30)"),-1,"Second Char Offset before Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/8/5:1)","epubcfi(/6/2[cover]!/4/6/15:2)"),1,"First Element after Second"),t.equal(e.compare("epubcfi(/6/2[cover]!/4/8/1:0)","epubcfi(/6/2[cover]!/4/8/1:0)"),0,"All Equal"),t.equal(e.compare("epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/10/1:317)","epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/10/2[page18]/1:0)"),-1,"First CFI is before Second"),t.equal(e.compare("epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/12/1:0)","epubcfi(/6/16[id42]!/4[5N3C0-8c483216e03a4ff49927fc1a97dc7b2c]/12/2/1:9)"),-1,"First CFI is before Second"),t.equal(e.compare("epubcfi(/6/16!/4/12/1:0)","epubcfi(/6/16!/4/12/2/1:9)"),-1,"First CFI is before Second")}),it("should destroy object",()=>{e.destroy(),Object.keys(e).forEach(r=>{t.equal(e[r],void 0)})})}),describe("#fromNode()",()=>{const e="/6/4[chap01ref]";it("should get a cfi from a p node",()=>{const n=o.getElementById("c001p0004"),i=new r.A(n,e);t.equal(n.nodeType,Node.ELEMENT_NODE,"provided a element node"),t.equal(i.toString(),"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004])")}),it("should get a cfi from a text node",()=>{const n=o.getElementById("c001p0004").childNodes[0],i=new r.A(n,e);t.equal(n.nodeType,Node.TEXT_NODE,"provided a text node"),t.equal(i.toString(),"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004]/1)")}),it("should get a cfi from a text node inside a highlight",()=>{const n=o.getElementById("highlight-1").childNodes[0],i=new r.A(n,e,"annotator-hl");t.equal(n.nodeType,Node.TEXT_NODE,"provided a text node"),t.equal(i.toString(),"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017]/1)")}),it("should get a cfi from a highlight node",()=>{const n=o.getElementById("highlight-1"),i=new r.A(n,e,"annotator-hl");t.equal(n.nodeType,Node.ELEMENT_NODE,"provided a highlight node"),t.equal(i.toString(),"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017])")})}),describe("#fromRange()",()=>{const e="/6/4[chap01ref]";it("should get a cfi from a collapsed range",()=>{const n=s.getElementById("c001p0004").childNodes[0],i=s.createRange();i.setStart(n,6);const o=new r.A(i,e);t.equal(o.range,!1),t.equal(o.toString(),"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004]/1:6)")}),it("should get a cfi from a range",()=>{const n=s.getElementById("c001p0004").childNodes[0],i=s.getElementById("c001p0007").childNodes[0],o=s.createRange();o.setStart(n,6),o.setEnd(i,27);const a=new r.A(o,e);t.equal(a.range,!0),t.equal(a.toString(),"epubcfi(/6/4[chap01ref]!/4/2,/10/2[c001p0004]/1:6,/16/2[c001p0007]/1:27)")}),it("should get a cfi from a range with offset 0",()=>{const n=s.getElementById("c001p0004").childNodes[0],i=s.createRange();i.setStart(n,0),i.setEnd(n,1);const o=new r.A(i,e);t.equal(o.range,!0),t.equal(o.toString(),"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004],/1:0,/1:1)")}),it("should get a cfi from a range inside a highlight",()=>{const n=o.getElementById("highlight-1").childNodes[0],i=o.createRange();i.setStart(n,6);const s=new r.A(i,e,"annotator-hl");t.equal(s.toString(),"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017]/1:43)")}),it("should get a cfi from a range past a highlight",()=>{const n=o.getElementById("c001s0001").childNodes[1],i=o.createRange();i.setStart(n,25);const s=new r.A(i,e,"annotator-hl");t.equal(s.toString(),"epubcfi(/6/4[chap01ref]!/4/2/4/2[c001s0001]/1:41)")}),it("should get a cfi from a range in between two highlights",()=>{const n=a.getElementById("p2").childNodes[1],i=a.createRange();i.setStart(n,4);const s=new r.A(i,e,"annotator-hl");t.equal(s.toString(),"epubcfi(/6/4[chap01ref]!/4/4[p2]/1:123)")}),it("should correctly count text nodes, independent of any elements present in between",()=>{const n=a.getElementById("p3").childNodes[2],i=a.createRange();i.setStart(n,4);const s=new r.A(i,e);t.equal(s.toString(),"epubcfi(/6/4[chap01ref]!/4/6[p3]/3:4)")})}),describe("#toRange()",()=>{const e="/6/4[chap01ref]",n="annotator-hl";it("should get a range from a cfi",()=>{const n=o.getElementById("c001p0004").childNodes[0],i=o.createRange();i.setStart(n,6);const s=new r.A(i,e);t.equal(s.toString(),"epubcfi(/6/4[chap01ref]!/4/2/10/2[c001p0004]/1:6)");const a=s.toRange(o);t.equal(a.startContainer,n),t.equal(a.startOffset,6),t.equal(a.collapsed,!0)}),it("should get a range from a cfi with a range",()=>{const n=o.getElementById("c001p0004").childNodes[0],i=o.getElementById("c001p0007").childNodes[0],s=o.createRange();s.setStart(n,6),s.setEnd(i,27);const a=new r.A(s,e);t.equal(a.toString(),"epubcfi(/6/4[chap01ref]!/4/2,/10/2[c001p0004]/1:6,/16/2[c001p0007]/1:27)");const c=a.toRange(o);t.equal(c.startContainer,n),t.equal(c.startOffset,6),t.equal(c.endContainer,i),t.equal(c.endOffset,27),t.equal(c.collapsed,!1)}),xit("should get a cfi from a range inside a highlight",()=>{const i=o.getElementById("highlight-1").childNodes[0],s=o.createRange();s.setStart(i,6);const a=new r.A(s,e,n);t.equal(a.toString(),"epubcfi(/6/4[chap01ref]!/4/2/32/2[c001p0017]/1:43)");const c=a.toRange(o,n);t.equal(c.startContainer,i),t.equal(c.startContainer.textContent,i.textContent),t.equal(c.startOffset,6),t.equal(c.collapsed,!0)}),xit("should get a cfi from a range inside a highlight range",()=>{const i=o.getElementById("highlight-2").childNodes[0],s=o.getElementById("c001s0001").childNodes[1],a=o.createRange();a.setStart(i,5),a.setEnd(s,25);const c=new r.A(a,e,n);t.equal(c.toString(),"epubcfi(/6/4[chap01ref]!/4/2/4/2[c001s0001],/1:5,/1:41)");const l=c.toRange(o,n);t.equal(l.startContainer,i),t.equal(l.startContainer.textContent,i.textContent),t.equal(l.startOffset,5),t.equal(l.endContainer,s),t.equal(l.endContainer.textContent,s.textContent),t.equal(l.endOffset,25),t.equal(l.collapsed,!1)})}),describe("#isCfiString()",()=>{it("should check if the string is wrapped using 'epubcfi()'",()=>{t.equal(r.A.prototype.isCfiString("epubcfi(/6/4[chap01ref]!/4/2,/10/2[c001p0004]/1:6,/16/2[c001p0007]/1:27)"),!0)})})})})(),(()=>{"use strict";i(4114);var t=i(4148),e=i(8378),r=i(8823);describe("Locations",()=>{let n,i,s={};const o=async t=>(0===t.locations.size&&await t.locations.generate(549),Promise.resolve(t.locations));before(async()=>{n=new e.A("../assets/alice/"),await n.opened,i=n.renderTo(document.body);const t=[];for(let e=2;e<13;++e)t.push(i.display(e).then(t=>{return r=t,void(s[e]={cfi:i.currentLocation().start.cfi,idx:r.index});var r}));return Promise.all(t)}),describe("#parse()",()=>{it("should parse locations from a document",async()=>{const e=n.section(s[2].idx),i=new r.A;await i.parse(e.contents,e.cfiBase,549);const o=[...i.values()][0];t.equal(i.size,1),t.equal(o.cfi,"epubcfi(/6/6!/4/2,/4[pgepubid00001]/1:0,/14/4/2/1:33)"),t.equal(o.index,0),t.equal(o.percentage,0)})}),describe("#generate()",()=>{it("should generate locations",async()=>{await o(n),t.equal(n.locations.size,101)})}),describe("#set()",()=>{before(async()=>o(n)),it("should set current location by epubcfi",()=>{const e=n.locations,r=n.locations.current;e.set({cfi:s[3].cfi}),t.equal(r.index,1),t.equal(r.percentage,.01),e.set({cfi:s[4].cfi}),t.equal(r.index,14),t.equal(r.percentage,.14),e.set({cfi:s[5].cfi}),t.equal(r.index,25),t.equal(r.percentage,.25),e.set({cfi:s[6].cfi}),t.equal(r.index,36),t.equal(r.percentage,.36),e.set({cfi:s[7].cfi}),t.equal(r.index,50),t.equal(r.percentage,.5),e.set({cfi:s[8].cfi}),t.equal(r.index,61),t.equal(r.percentage,.61),e.set({cfi:s[9].cfi}),t.equal(r.index,71),t.equal(r.percentage,.71),e.set({cfi:s[10].cfi}),t.equal(r.index,77),t.equal(r.percentage,.77),e.set({cfi:s[11].cfi}),t.equal(r.index,89),t.equal(r.percentage,.89),e.set({cfi:s[12].cfi}),t.equal(r.index,95),t.equal(r.percentage,.95)}),it("should set current location by index",()=>{const e=n.locations,r=n.locations.current,i=[...e.keys()];e.on("changed",(e,r)=>{r.index&&(t.equal(e.cfi,i[r.index]),t.equal(e.index,r.index))}),e.set({index:1}),t.equal(r.percentage,.01),e.set({index:14}),t.equal(r.percentage,.14),e.set({index:25}),t.equal(r.percentage,.25),e.set({index:36}),t.equal(r.percentage,.36),e.set({index:50}),t.equal(r.percentage,.5),e.set({index:61}),t.equal(r.percentage,.61),e.set({index:71}),t.equal(r.percentage,.71),e.set({index:77}),t.equal(r.percentage,.77),e.set({index:89}),t.equal(r.percentage,.89),e.set({index:95}),t.equal(r.percentage,.95)}),it("should set current location by percentage",()=>{const e=n.locations,r=n.locations.current,i=[...e.keys()];e.on("changed",(e,r)=>{r.percentage&&(t.equal(e.cfi,i[e.index]),t.equal(e.percentage,r.percentage))}),e.set({percentage:.01}),t.equal(r.index,1),e.set({percentage:.14}),t.equal(r.index,14),e.set({percentage:.25}),t.equal(r.index,25),e.set({percentage:.36}),t.equal(r.index,36),e.set({percentage:.5}),t.equal(r.index,50),e.set({percentage:.61}),t.equal(r.index,61),e.set({percentage:.71}),t.equal(r.index,71),e.set({percentage:.77}),t.equal(r.index,77),e.set({percentage:.89}),t.equal(r.index,89),e.set({percentage:.95}),t.equal(r.index,95)})}),describe("#cfiFromPercentage()",()=>{before(async()=>o(n)),it("should get epubcfi from percentage",()=>{const e=n.locations;[...e.keys()].forEach((r,n)=>{const i=n/(e.size-1);t.equal(r,e.cfiFromPercentage(i))})})}),describe("#clear()",()=>{before(async()=>o(n)),it("should clear locations",()=>{n.locations.clear(),t.equal(n.locations.size,0)})})})})(),(()=>{"use strict";i(4114);var t=i(4148),e=i(2665),r=i(3412);describe("Navigation",()=>{const n={};before(async()=>{const t=[],i=async(t,i)=>(0,r.A)(i).then(r=>{n[t]={nav:new e.A,doc:r}});return t.push(i(0,"../assets/alice/OPS/nav.xhtml")),t.push(i(1,"../assets/alice/OPS/nav.ncx")),t.push(i(2,"../assets/alice/OPS/nav.json")),Promise.all(t)}),describe("#parse()",()=>{it("should parse navigation from nav.xhtml document",async()=>{const e=n[0].nav,r=n[0].doc;await e.parse(r),t.equal(e.landmarks.size,1),t.equal(e.pageList.length,48),t.equal(e.toc.links.size,11)}),it("should parse navigation from nav.ncx document",async()=>{const e=n[1].nav,r=n[1].doc;await e.parse(r),t.equal(e.pageList.length,48),t.equal(e.toc.links.size,11)}),it("should load navigation from nav.json object",async()=>{const e=n[2].nav,r=n[2].doc;await e.load(r),t.equal(e.landmarks.size,1),t.equal(e.pageList.length,48),t.equal(e.toc.links.size,11)})}),describe("#clear()",()=>{it("should clear navigation parts",()=>{const e=n[0].nav;e.clear(),t.equal(e.landmarks.size,0),t.equal(e.pageList.length,0),t.equal(e.toc.length,0)})}),after(()=>{const t=n.length;for(let e=0;e<t;++e)n[e].doc=void 0,n[e].nav.destroy(),delete n[e]})})})(),(()=>{"use strict";var t=i(4148),e=i(3412),r=i(4692);describe("Packaging",()=>{let n,i;before(async()=>{n=await(0,e.A)("../assets/alice/OPS/package.opf",null),i=await(0,e.A)("../assets/alice/OPS/package.json","json")}),describe("#parse()",()=>{it("should parse package.opf from document",async()=>{const e=new r.A;await e.parse(n),t.equal(e.version,"3.0"),t.equal(e.metadata.size,9),t.equal(e.manifest.size,42),t.equal(e.spine.size,13)})}),describe("#load()",()=>{it("should load package.json from object",async()=>{const e=new r.A;await e.load(i),t.equal(e.version,"3.0"),t.equal(e.metadata.size,9),t.equal(e.manifest.size,42),t.equal(e.spine.size,13)})})})})(),(()=>{"use strict";var t=i(4148),e=i(1010);describe("Path",()=>{describe("#constructor()",()=>{it("should init object properties from path",()=>{const r=new e.A("/fred/chasen/derf.html");t.equal(r.path,"/fred/chasen/derf.html"),t.equal(r.directory,"/fred/chasen/"),t.equal(r.extension,"html"),t.equal(r.filename,"derf.html")}),it("should init object properties from url",()=>{const r=new e.A("http://example.com/fred/chasen/derf.html");t.equal(r.path,"/fred/chasen/derf.html"),t.equal(r.directory,"/fred/chasen/"),t.equal(r.extension,"html"),t.equal(r.filename,"derf.html")})}),describe("#dirname()",()=>{it("should get directory from path",()=>{const r=e.A.prototype.dirname("/fred/chasen/derf.html");t.equal(r,"/fred/chasen/")}),it("should get directory from relative path",()=>{const r=e.A.prototype.dirname("fred/chasen/derf.html");t.equal(r,"fred/chasen/")})}),describe("#parse()",()=>{it("should parse a path",()=>{const r=e.A.prototype.parse("/fred/chasen/derf.html");t.equal(r.dir,"/fred/chasen"),t.equal(r.ext,".html"),t.equal(r.base,"derf.html"),t.equal(r.name,"derf")}),it("should parse a relative path",()=>{const r=e.A.prototype.parse("fred/chasen/derf.html");t.equal(r.dir,"fred/chasen"),t.equal(r.ext,".html"),t.equal(r.base,"derf.html"),t.equal(r.name,"derf")})}),describe("#isDirectory()",()=>{it("should recognize a directory",()=>{const r=e.A.prototype.isDirectory;t.equal(r("fred/chasen"),!1),t.equal(r("fred/chasen/"),!0),t.equal(r("/fred/chasen"),!1),t.equal(r("/fred/chasen/"),!0),t.equal(r("/fred/chasen/derf.html"),!1)})}),describe("#resolve()",()=>{it("should resolve a path",()=>{const r=e.A.prototype.dirname("/fred/chasen/index.html"),n=e.A.prototype.resolve(r,"derf.html");t.equal(n,"/fred/chasen/derf.html")}),it("should resolve a relative path",()=>{const r=e.A.prototype.dirname("fred/chasen/index.html"),n=e.A.prototype.resolve(r,"derf.html");t.equal(n,"/fred/chasen/derf.html")}),it("should resolve a level up",()=>{const r=e.A.prototype.dirname("/fred/chasen/index.html"),n=e.A.prototype.resolve(r,"../derf.html");t.equal(n,"/fred/derf.html")})}),describe("#relative()",()=>{it("should find a relative path at the same level",()=>{const r=e.A.prototype.dirname("/fred/chasen/index.html"),n=e.A.prototype.relative(r,"/fred/chasen/derf.html");t.equal(n,"derf.html")}),it("should find a relative path down a level",()=>{const r=e.A.prototype.dirname("/fred/chasen/index.html"),n=e.A.prototype.relative(r,"/fred/chasen/ops/derf.html");t.equal(n,"ops/derf.html")}),it("should resolve a level up",()=>{const r=e.A.prototype.dirname("/fred/chasen/index.html"),n=e.A.prototype.relative(r,"/fred/derf.html");t.equal(n,"../derf.html")})})})})(),(()=>{"use strict";var t=i(4148),e=i(8378),r=i(3362);class n extends r.A{constructor(t,e){super(t,e),this.name="custom"}}const s=n,o=t=>(/epub-js/.test(location.href)?"/epub-js":"")+t;describe("Rendition",()=>{let r,n;const i=async(t,i)=>(void 0===r&&(r=new e.A("../assets/handbook/"),await r.opened),void 0===n&&t&&(n=r.renderTo("viewport",i)),n.started);describe("#requireManager()",()=>{before(async()=>{await i(1,{manager:s}),await n.display()}),it("should be create custom manager",()=>{const e=n.manager;t.ok(e instanceof s),t.equal(typeof e,"object"),t.equal(e.name,"custom")})}),describe("#display()",()=>{before(async()=>{await i(1)}),it("should be displayed by default",async()=>{const e=await n.display();t.equal(e.cfiBase,"/6/2"),t.equal(e.index,0),t.equal(e.idref,"s0"),t.equal(e.href,"xhtml/nav.xhtml"),t.equal(e.url,o("/assets/handbook/EPUB/xhtml/nav.xhtml"))}),it("should be displayed by index",async()=>{const e=await n.display(1);t.equal(e.cfiBase,"/6/4"),t.equal(e.index,1),t.equal(e.idref,"s1"),t.equal(e.href,"xhtml/introduction.xhtml"),t.equal(e.url,o("/assets/handbook/EPUB/xhtml/introduction.xhtml"))}),it("should be displayed by idref",async()=>{const e=await n.display("#s2");t.equal(e.cfiBase,"/6/6"),t.equal(e.index,2),t.equal(e.idref,"s2"),t.equal(e.href,"xhtml/mathml.xhtml"),t.equal(e.url,o("/assets/handbook/EPUB/xhtml/mathml.xhtml"))}),it("should be displayed by href",async()=>{const e=await n.display("xhtml/mathml.xhtml");t.equal(e.cfiBase,"/6/6"),t.equal(e.index,2),t.equal(e.idref,"s2"),t.equal(e.href,"xhtml/mathml.xhtml"),t.equal(e.url,o("/assets/handbook/EPUB/xhtml/mathml.xhtml"))}),it("should be displayed by epubcfi",async()=>{const e=await n.display("epubcfi(/6/6!/4/2[s2]/2[mathml]/1:0)");t.equal(e.cfiBase,"/6/6"),t.equal(e.index,2),t.equal(e.idref,"s2"),t.equal(e.href,"xhtml/mathml.xhtml"),t.equal(e.url,o("/assets/handbook/EPUB/xhtml/mathml.xhtml"))})}),describe("#next()",()=>{before(async()=>{await i(1),await n.display(0)}),it("should be next to section index 1",async()=>{await n.next();const e=n.currentLocation();t.equal(e.start.index,1)}),it("should be next to section index 2",async()=>{await n.next();const e=n.currentLocation();t.equal(e.start.index,2)})}),describe("#prev()",()=>{before(async()=>{await i(1),await n.display(2)}),it("should be prev to section.index 1",async()=>{await n.prev();const e=n.currentLocation();t.equal(e.start.index,1)}),it("should be prev to section.index 0",async()=>{await n.prev();const e=n.currentLocation();t.equal(e.start.index,0)})}),describe("#resize()",()=>{before(async()=>{await i(1,{spread:"none"}),await n.display(2)}),it("should be viewport resizing to width 500",()=>{const e=n.resize(500,"100%");t.equal(e.width,500)}),it("should be viewport resizing to height 600",()=>{const e=n.resize("100%",600);t.equal(e.height,600)}),it("should be viewport resizing by default",()=>{const e=n.resize("100%","100%");t.equal(n.viewport.rect.width,e.width),t.equal(n.viewport.rect.height,e.height)})}),describe("#upateLayout()",()=>{before(async()=>{await i(1,{spread:"auto"}),await n.display(2)}),it("should be updating layout.spread:none",async()=>{n.updateLayout({spread:"none"}),t.equal(n.layout.spread,"none")}),it("should be updating layout.spread:auto",async()=>{n.updateLayout({spread:"auto"}),t.equal(n.layout.spread,"auto")}),it("should be updating layout.flow:scrolled",async()=>{await n.updateLayout({flow:"scrolled"}),t.equal(n.layout.flow,"scrolled")}),it("should be updating layout.flow:scrolled-doc",async()=>{await n.updateLayout({flow:"scrolled-doc"}),t.equal(n.layout.flow,"scrolled-doc")}),it("should be updating layout.flow:paginated",async()=>{await n.updateLayout({flow:"paginated"}),t.equal(n.layout.flow,"paginated")})})})})(),(()=>{"use strict";i(8111),i(116);var t=i(4148),e=i(8378);const r=t=>(/epub-js/.test(location.href)?"/epub-js":"")+t;describe("Section",()=>{let n,i,s;before(async()=>{n=new e.A("../assets/alice/"),await n.opened,i=n.section("chapter_001.xhtml"),s=n.section("chapter_010.xhtml")}),describe("#load()",()=>{it("should load section #001",async()=>{t.equal(i.idref,"chapter_001"),t.equal(i.linear,!0),t.equal(i.index,3),t.equal(i.href,"chapter_001.xhtml"),t.equal(i.url,r("/assets/alice/OPS/chapter_001.xhtml")),t.equal(i.cfiBase,"/6/8"),await i.load(n.request),t.equal(i.document instanceof Document,!0),t.equal(i.contents instanceof Element,!0)}),it("should load section #010",async()=>{t.equal(s.idref,"chapter_010"),t.equal(s.linear,!0),t.equal(s.index,12),t.equal(s.href,"chapter_010.xhtml"),t.equal(s.url,r("/assets/alice/OPS/chapter_010.xhtml")),t.equal(s.cfiBase,"/6/26"),await s.load(n.request),t.equal(s.document instanceof Document,!0),t.equal(s.contents instanceof Element,!0)})}),describe("#render()",()=>{it("should render section #001",async()=>{await i.render(n.request),t.equal("string"==typeof i.output,!0)}),it("should render section #010",async()=>{await s.render(n.request),t.equal("string"==typeof s.output,!0)})}),describe("#find()",()=>{it("should finds a single result in a section",()=>{const e=i.find("they were filled with cupboards and book-shelves");t.equal(e.length,1),t.equal(e[0].cfi,"epubcfi(/6/8!/4/2/16,/1:275,/1:323)"),t.equal(e[0].excerpt,"... see anything; then she looked at the sides of the well and\n\t\tnoticed that they were filled with cupboards and book-shelves; here and there she saw\n\t\t...")}),it("should finds multiple results in a section",()=>{const e=i.find("white rabbit");t.equal(e.length,2),t.equal(e[0].cfi,"epubcfi(/6/8!/4/2/8,/1:240,/1:252)"),t.equal(e[0].excerpt,"...e worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her...."),t.equal(e[1].cfi,"epubcfi(/6/8!/4/2/20,/1:148,/1:160)"),t.equal(e[1].excerpt,"...ut it was\n\t\tall dark overhead; before her was another long passage and the White Rabbit was still\n\t\tin sight, hurrying down it. There was not a moment...")})}),describe("#search()",()=>{it("should finds a single result in a section",()=>{const e=i.search("they were filled with cupboards and book-shelves");t.equal(e.length,1),t.equal(e[0].cfi,"epubcfi(/6/8!/4/2/16,/1:275,/1:323)"),t.equal(e[0].excerpt,"... see anything; then she looked at the sides of the well and\n\t\tnoticed that they were filled with cupboards and book-shelves; here and there she saw\n\t\t...")}),it("should finds multiple results in a section",()=>{const e=i.search("white rabbit");t.equal(e.length,2),t.equal(e[0].cfi,"epubcfi(/6/8!/4/2/8,/1:240,/1:252)"),t.equal(e[0].excerpt,"...e worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her...."),t.equal(e[1].cfi,"epubcfi(/6/8!/4/2/20,/1:148,/1:160)"),t.equal(e[1].excerpt,"...ut it was\n\t\tall dark overhead; before her was another long passage and the White Rabbit was still\n\t\tin sight, hurrying down it. There was not a moment...")}),it("should finds result that spanning multiple document nodes, tag at ending",()=>{const e=s.search("I beg");t.equal(e.length,1),t.equal(e[0].cfi,"epubcfi(/6/26!/4/2/6,/1:5,/2/1:3)"),t.equal(e[0].excerpt,'"Oh, I beg')}),it("should finds result that spanning multiple document nodes, tag at middle",()=>{const e=s.search("I beg your pardon");t.equal(e.length,1),t.equal(e[0].cfi,"epubcfi(/6/26!/4/2/6,/1:5,/3:12)"),t.equal(e[0].excerpt,'"Oh, I beg your pardon!" she exclaimed in a tone of great dismay.')})}),after(()=>{n.destroy()})})})(),(()=>{"use strict";var t=i(4148),e=i(8378);const r=t=>(/epub-js/.test(location.href)?"/epub-js":"")+t;describe("Sections",()=>{let n;before(async()=>{n=new e.A("../assets/alice/"),await n.opened}),describe("#get()",()=>{it("should get default section",()=>{const e=n.sections.get();t.equal(e.idref,"titlepage"),t.equal(e.linear,!0),t.equal(e.index,2),t.equal(e.href,"titlepage.xhtml"),t.equal(e.url,r("/assets/alice/OPS/titlepage.xhtml")),t.equal(e.cfiBase,"/6/6")}),it("should get section from index",()=>{const e=n.sections.get(1);t.equal(e.idref,"nav"),t.equal(e.linear,!1),t.equal(e.index,1),t.equal(e.href,"nav.xhtml"),t.equal(e.url,r("/assets/alice/OPS/nav.xhtml")),t.equal(e.cfiBase,"/6/4")}),it("should get section from id",()=>{const e=n.sections.get("#chapter_010");t.equal(e.idref,"chapter_010"),t.equal(e.linear,!0),t.equal(e.index,12),t.equal(e.href,"chapter_010.xhtml"),t.equal(e.url,r("/assets/alice/OPS/chapter_010.xhtml")),t.equal(e.cfiBase,"/6/26")}),it("should get section from href",()=>{const e=n.sections.get("chapter_001.xhtml");t.equal(e.idref,"chapter_001"),t.equal(e.linear,!0),t.equal(e.index,3),t.equal(e.href,"chapter_001.xhtml"),t.equal(e.url,r("/assets/alice/OPS/chapter_001.xhtml")),t.equal(e.cfiBase,"/6/8")}),it("should get section from epubcfi",()=>{const e=n.sections.get("epubcfi(/6/8!/4/2/16/1:0)");t.equal(e.idref,"chapter_001"),t.equal(e.linear,!0),t.equal(e.index,3),t.equal(e.href,"chapter_001.xhtml"),t.equal(e.url,r("/assets/alice/OPS/chapter_001.xhtml")),t.equal(e.cfiBase,"/6/8")})}),describe("#first()",()=>{it("should get first section",()=>{const e=n.sections.first();t.equal(e.idref,"titlepage"),t.equal(e.linear,!0),t.equal(e.index,2),t.equal(e.href,"titlepage.xhtml"),t.equal(e.url,r("/assets/alice/OPS/titlepage.xhtml")),t.equal(e.cfiBase,"/6/6")})}),describe("#last()",()=>{it("should get last section",()=>{const e=n.sections.last();t.equal(e.idref,"chapter_010"),t.equal(e.linear,!0),t.equal(e.index,12),t.equal(e.href,"chapter_010.xhtml"),t.equal(e.url,r("/assets/alice/OPS/chapter_010.xhtml")),t.equal(e.cfiBase,"/6/26")})}),after(()=>{n.destroy()})})})(),(()=>{"use strict";var t=i(4148),e=i(8378);describe("Themes",()=>{let r,n,i,s;before(async()=>{r=new e.A("../assets/alice/"),s=(()=>{let t=location.origin;return/localhost/.test(t)||(t+="epub-js"),t+="/examples/themes.css",t})(),n=r.renderTo(document.body,{spread:"none"}),await r.opened,await n.display()}),describe("#register()",()=>{it("should register a theme by url",async()=>{n.themes.register("light",s),await n.hooks.content,i=n.themes.get("light"),t.equal(i.url,s),n.themes.register("dark",s),await n.hooks.content,i=n.themes.get("dark"),t.equal(i.url,s),n.themes.clear(),await n.hooks.content,t.equal(n.themes.size,0)}),it("should register a theme by rules",async()=>{n.themes.register("light",{background:"#fff",color:"#000"}),await n.hooks.content,i=n.themes.get("light"),t.equal(i.rules.background,"#fff"),t.equal(i.rules.color,"#000"),n.themes.register("dark",{background:"#000",color:"#fff"}),await n.hooks.content,i=n.themes.get("dark"),t.equal(i.rules.background,"#000"),t.equal(i.rules.color,"#fff"),n.themes.clear(),t.equal(n.themes.size,0)}),it("should register a themes from object with rules",async()=>{n.themes.register({light:{body:{background:"#fff",color:"#000"}},dark:{body:{background:"#000",color:"#fff"}}}),await n.hooks.content,i=n.themes.get("light"),t.equal(i.rules.body.background,"#fff"),t.equal(i.rules.body.color,"#000"),i=n.themes.get("dark"),t.equal(i.rules.body.background,"#000"),t.equal(i.rules.body.color,"#fff"),n.themes.clear(),t.equal(n.themes.size,0)}),it("should register a themes from object with urls",async()=>{n.themes.register({light:s,dark:s}),await n.hooks.content,i=n.themes.get("light"),t.equal(i.url,s),i=n.themes.get("dark"),t.equal(i.url,s)})}),describe("#select()",()=>{it("switching theme using select method",async()=>{n.themes.on("selected",(e,r)=>{null===e?t.equal(r.injected,!1):t.equal(r.injected,!0)}),n.themes.select("light"),await n.hooks.content,t.equal(n.themes.current,"light"),n.themes.select("dark"),await n.hooks.content,t.equal(n.themes.current,"dark"),n.themes.select(null),await n.hooks.content,t.equal(n.themes.current,null)})}),describe("#appendRule()",()=>{it("should inject css rule into contents",async()=>{n.themes.appendRule("font-size","100%"),await n.hooks.content;const e=n.themes.rules["font-size"];t.equal(e.value,"100%")})}),describe("#removeRule()",()=>{it("should reject css rule into contents",async()=>{n.themes.removeRule("font-size"),await n.hooks.content;const e=n.themes.rules["font-size"];t.equal(e,void 0)})}),describe("#clear()",()=>{it("should clear all themes",async()=>{n.themes.clear(),await n.hooks.content,t.equal(n.themes.size,0)})}),after(()=>{r.destroy()})})})(),(()=>{"use strict";var t=i(4148),e=i(984);describe("Url",()=>{describe("#constructor()",()=>{it("should init object properties from url",()=>{const r=new e.A("http://example.com/fred/chasen/derf.html");t.equal(r.href,"http://example.com/fred/chasen/derf.html"),t.equal(r.directory,"/fred/chasen/"),t.equal(r.extension,"html"),t.equal(r.filename,"derf.html"),t.equal(r.origin,"http://example.com"),t.equal(r.protocol,"http:"),t.equal(r.search,"")})}),describe("#resolve()",()=>{it("should join subfolders",()=>{const r=new e.A("http://example.com/fred/chasen/").resolve("ops/derf.html");t.equal(r,"http://example.com/fred/chasen/ops/derf.html")}),it("should resolve up a level",()=>{const r=new e.A("http://example.com/fred/chasen/index.html").resolve("../derf.html");t.equal(r,"http://example.com/fred/derf.html")}),it("should resolve absolute",()=>{const r=new e.A("http://example.com/fred/chasen/index.html").resolve("/derf.html");t.equal(r,"http://example.com/derf.html")}),it("should resolve with search strings",()=>{const r=new e.A("http://example.com/fred/chasen/index.html?debug=true").resolve("/derf.html");t.equal(r,"http://example.com/derf.html")}),it("should handle file urls",()=>{const r="/var/mobile/Containers/Data/Application/F47E4434-9B98-4654-93F1-702336B08EE6/Documents/books/moby-dick/",n="file://"+r+"derf.html",i=new e.A(n);t.equal(i.href,n),t.equal(i.directory,r),t.equal(i.extension,"html"),t.equal(i.filename,"derf.html"),t.equal(i.origin,"file://"),t.equal(i.protocol,"file:"),t.equal(i.search,"")}),it("should resolve with file urls",()=>{const r=new e.A("file:///var/mobile/Containers/Data/Application/books/").resolve("derf.html");t.equal(r,"file:///var/mobile/Containers/Data/Application/books/derf.html")})})})})(),s.default})());
//# sourceMappingURL=test.min.js.map